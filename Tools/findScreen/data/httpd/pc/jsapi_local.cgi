//http://api.e-map.ne.jp/jsapi.cgi?key=39nfneGfbcPyp9X5bzTsrxUzTvrxRzTvrtKS46WsFz0joBS37xW7gXFVahs5GqbcIzFmYNffFUZM9zJp&ver=1.11&enc=EUC&noalert=1&api=zdccommon.js,zdcmap.js,zdcroute.js,zdcproute.js,zdcshape.js,zdcmapgeometric.js,neki.js,npoi.js,searchrosenzu.js,searchmap.js&force=1&opt=tamashin" type="text/javascript" charset="euc-jp on LocalCopy
var err_msg = "";
var ZDC_KEY = "53nQszC0ngOz84nwwrC1ngyzAzngJTC5idT5SvXvGKAUfxdzTirxuzTFrxpzTLZs7i4tXwgLEjo7kW7dWBW9OaodQ5StXxK9FIah39JjXxMLTy";var ZDC_ENC = "EUC";var ZDC_DATUM = "TOKYO";var ZDC_OPT = "tamashin";var ZDC_MAP = new Object;var ZDC_MAP_FTYPE = new Object;ZDC_MAP[1] = "4/20110720/";ZDC_MAP_FTYPE[1] = "png";ZDC_MAP[2] = "6/20110720/";ZDC_MAP_FTYPE[2] = "png";ZDC_MAP[3] = "4/20110720/";ZDC_MAP_FTYPE[3] = "png";ZDC_MAP[4] = "4/20110720/";ZDC_MAP_FTYPE[4] = "png";ZDC_MAP[5] = "5/20110609/";ZDC_MAP_FTYPE[5] = "png";ZDC_MAP[9] = "9/20110720/";ZDC_MAP_FTYPE[9] = "png";var ZDC_SSL = "0";var ZdcMapServer="http://api.e-map.ne.jp/mapapi/";if(ZDC_SSL==1){ZdcMapServer="https://api.e-map.ne.jp/mapapi/";}var ZdcTileServer="http://mapcache.e-map.ne.jp/";if(ZDC_SSL==1){ZdcTileServer="https://map.e-map.ne.jp/";}var ZdcMapCgi="http://api.e-map.ne.jp/jsapi/cgi/map.cgi";if(ZDC_SSL==1){ZdcMapCgi="https://api.e-map.ne.jp/jsapi/cgi/map.cgi";}var ZdcMapLog="http://api.e-map.ne.jp/mapapi/img/back-logo.gif";if(ZDC_SSL==1){ZdcMapLog="https://api.e-map.ne.jp/mapapi/img/back-logo.gif";}var ZdcMapAccess="http://api.e-map.ne.jp/";if(ZDC_SSL==1){ZdcMapAccess="https://api.e-map.ne.jp/";}var ChizulogMap="http://map.chizulog.com/mapfiles/";var ZdcTileServers="mapcache.e-map.ne.jp";if(ZDC_SSL==1){ZdcTileServers="map.e-map.ne.jp";}if(!window.ZDC){window.ZDC={};}(function(){function ZdcCommon(){}ZdcCommon.ZdcMapServer=ZdcMapServer;ZdcCommon.ZdcTileServer=ZdcTileServer;ZdcCommon.ZdcTilePath=new Object();for(nm in ZDC_MAP){ZdcCommon.ZdcTilePath[nm]=ZDC_MAP[nm];}ZdcCommon.ZdcTileFtype=new Object();ZdcCommon.ZdcTileFtype=ZDC_MAP_FTYPE;for(nm in ZdcCommon.ZdcTilePath){ZdcCommon.ZdcDefaultMapType=nm;break;}ZdcCommon.ZdcMapCgi=ZdcMapCgi;ZdcCommon.ZdcMapLog=ZdcMapLog;ZdcCommon.ZdcMapAccess=ZdcMapAccess;ZdcCommon.ChizulogMap=ChizulogMap;ZdcCommon.ZDC_KEY=ZDC_KEY;ZdcCommon.ZDC_OPT=ZDC_OPT;ZdcCommon.ZDC_ENC=ZDC_ENC;ZdcCommon.ZDC_DATUM=ZDC_DATUM;if(typeof ZDC_RETURN!="undefined"){ZdcCommon.ZDC_RETURN=ZDC_RETURN;}else{ZdcCommon.ZDC_RETURN=null;}ZdcCommon.ll2pixel=function(_1,_2,_3){var _4=Math.abs(_1-ZdcZoom.OX);var _5=Math.abs(_2-ZdcZoom.OY);var _6=_4/(ZdcZoom.map_defw[_3]*ZdcZoom.PX);var _7=_5/(ZdcZoom.map_defh[_3]*ZdcZoom.PY);_6=Math.floor(_6);_7=Math.floor(_7);if(_1<ZdcZoom.OX){_6=_6+1;}if(_2<ZdcZoom.OY){_7=_7+1;}var _8=_6*ZdcZoom.map_defw[_3]*ZdcZoom.PX;var _9=_7*ZdcZoom.map_defh[_3]*ZdcZoom.PY;var _a=Math.abs(_8-_4)/ZdcZoom.map_defw[_3];var _b=ZdcZoom.PY-(Math.abs(_9-_5)/ZdcZoom.map_defh[_3]);if(_1<ZdcZoom.OX){_6="m"+_6;}if(_2<ZdcZoom.OY){_7="m"+_7;}var _c=_3+"_"+_6+"_"+_7;var _d=new Object();_d.mesh=_c;_d.offx=Math.round(_a);_d.offy=Math.round(_b);return _d;};ZdcCommon.pixel2ll=function(_e,_f,_10){mesh_list=_10.split("_");var _11=mesh_list[0];if(_10==""){return;}if(mesh_list[1]==null){return;}if(StrCmp(mesh_list[1].substr(0,1),"m")==0){var _12=mesh_list[1].substr(1,StrLen(mesh_list[1])-1);_12=(-1)*_12;}else{var _12=mesh_list[1];}if(StrCmp(mesh_list[2].substr(0,1),"m")==0){var _13=mesh_list[2].substr(1,StrLen(mesh_list[2])-1);_13=(-1)*_13;}else{var _13=mesh_list[2];}var _14=Math.round(_12*ZdcZoom.PX*ZdcZoom.map_defw[_11]);var _15=Math.round(_13*ZdcZoom.PY*ZdcZoom.map_defh[_11]);var lon=ZdcZoom.OX+_14+(_e*ZdcZoom.map_defw[_11]);var lat=ZdcZoom.OY+_15+((256-_f)*ZdcZoom.map_defh[_11]);var _18=new Object();_18.mx=Math.round(lon);_18.my=Math.round(lat);return _18;};ZdcCommon.StrLen=function(str){var ct;var _1b=0;for(ct=0;ct<str.length;ct++){var c=str.charCodeAt(ct);if(c>=128){_1b++;}_1b++;}return _1b;};ZdcCommon.StrCmp=function(_1d,_1e){var ct;var cmp;if((cmp=_1d.length-_1e.length)!=0){return cmp;}for(ct=0;ct<_1d.length;ct++){var c1=_1d.charCodeAt(ct);var c2=_1e.charCodeAt(ct);if((cmp=(c1-c2))!=0){break;}}return cmp;};ZdcCommon.strRight=function(str,n){var l=str.length;if(n>l){n=l;}return (str.substring(l-n,l));};ZdcCommon.strLeft=function(str,n){var l=str.length;if(n>l){n=l;}return (str.substring(0,n));};ZdcCommon.ConvertMSXY2LL=function(x,y,f){var _2c=new Object();var dx=x/3600/1000;var dy=y/3600/1000;switch(f){case 1:default:_2c.lon=Math.round(dx*10000000)/10000000;_2c.lat=Math.round(dy*10000000)/10000000;break;case 2:var fx=Math.abs(Math.floor(dx)*60-dx*60);var fy=Math.abs(Math.floor(dy)*60-dy*60);var sx=Math.abs(Math.floor(fx)*60-fx*60);var sy=Math.abs(Math.floor(fy)*60-fy*60);sx=Math.round(sx*1000)/1000;sy=Math.round(sy*1000)/1000;if(document.all){_2c.lon=Math.floor(dx)+"<sup>o</sup> "+Math.floor(fx)+"<sup>'</sup>"+sx+"<sup>\"</sup>";_2c.lat=Math.floor(dy)+"<sup>o</sup> "+Math.floor(fy)+"<sup>'</sup>"+sy+"<sup>\"</sup>";}else{_2c.lon=Math.floor(dx)+"<sub><sup>o</sup></sub> "+Math.floor(fx)+"'"+sx+"\"";_2c.lat=Math.floor(dy)+"<sub><sup>o</sup></sub> "+Math.floor(fy)+"'"+sy+"\"";}break;}return _2c;};ZdcCommon.UserAgentIsIE=function(){var ua=navigator.userAgent;if(ua.match(/MSIE (\d\.\d+)/)){return true;}return false;};ZdcCommon.UserAgentIsFireFox=function(){var ua=navigator.userAgent;if(ua.match(/Gecko/)){if(ua.match(/(Firebird|Firefox)\/([\.\d]+)/)){return true;}return false;}return false;};ZdcCommon.IsIE=function(){var _35,v=3,div=document.createElement("div");while(div.innerHTML="<!--[if gt IE "+(++v)+"]><I></I><![endif]-->",div.getElementsByTagName("i")[0]){}return v>4?v:false;};ZdcCommon.isiPhone=function(){return RegExp(" AppleWebKit/").test(navigator.userAgent)&&RegExp(" Mobile/").test(navigator.userAgent);};ZdcCommon.UserAgentIsSafari=function(){var ua=navigator.userAgent;if(ua.match(/Safari\/([\.\d]+)/)){return true;}return false;};ZdcCommon.UserAgentIsFireFoxVer2=function(){var ua=navigator.userAgent;if(ua.match(/Gecko/)){if(ua.match(/(Firebird|Firefox)\/([\.2]+)/)){return true;}return false;}return false;};ZdcCommon.UserAgentIsFireFoxVer3=function(){var ua=navigator.userAgent;if(ua.match(/Gecko/)){if(ua.match(/(Firebird|Firefox)\/([\.3]+)/)){return true;}return false;}return false;};ZdcCommon.ConvertLL2XY=function(x,y,f){var _3e=new Object();switch(f){case 1:default:var dx=Math.round(x*3600*1000);var dy=Math.round(y*3600*1000);break;case 2:var _41=x.split(".");var _42=y.split(".");var dx=_41[0]*3600;var dy=_42[0]*3600;var fx=_41[1]*60;var fy=_42[1]*60;var sx=Number(_41[2].toString+"."+_41[3].toString);var sy=Number(_42[2].toString+"."+_42[3].toString);dx=Math.round((dx+fx+sx)*1000);dy=Math.round((dy+fy+sy)*1000);break;}_3e.mx=dx;_3e.my=dy;return _3e;};ZdcCommon.cnv_llh2xyz=function(b,l,h,a,e2){var rd=Math.PI/180;var b=b*rd;var l=l*rd;var sb=Math.sin(b);var cb=Math.cos(b);var rn=a/Math.sqrt(1-e2*sb*sb);var _50=new Array();_50[0]=(rn+h)*cb*Math.cos(l);_50[1]=(rn+h)*cb*Math.sin(l);_50[2]=(rn*(1-e2)+h)*sb;return _50;};ZdcCommon.cnv_xyz2llh=function(x,y,z,a,e2){var rd=Math.PI/180;var bda=Math.sqrt(1-e2);var p=Math.sqrt((x*x+y*y));var t=Math.atan2(z,p*bda);var st=Math.sin(t);var ct=Math.cos(t);var b=Math.atan2(z+e2*a/bda*st*st*st,p-e2*a*ct*ct*ct);var l=Math.atan2(y,x);var sb=Math.sin(b);var rn=a/Math.sqrt(1-e2*sb*sb);var h=p/Math.cos(b)-rn;var _61=new Array();_61[0]=b/rd;_61[1]=l/rd;_61[2]=h;return _61;};ZdcCommon.WGS2TKY=function(lon,lat){var a_w=6378137;var f_w=1/298.257223;var _66=2*f_w-f_w*f_w;var a_t=6377397.155;var f_t=1/299.152813;var _69=2*f_t-f_t*f_t;var _6a=-148;var _6b=507;var _6c=681;var h=0;var _6e=ZdcCommon.cnv_llh2xyz(lat,lon,h,a_w,_66);_6e=ZdcCommon.cnv_xyz2llh(_6e[0]-_6a,_6e[1]-_6b,_6e[2]-_6c,a_t,_69);_6e[0]=Math.round(_6e[0]*10000000)/10000000;_6e[1]=Math.round(_6e[1]*10000000)/10000000;var p=new ZdcPoint(_6e[1],_6e[0]);return p;};ZdcCommon.TKY2WGS=function(lon,lat){var a_w=6378137;var f_w=1/298.257223;var _74=2*f_w-f_w*f_w;var a_t=6377397.155;var f_t=1/299.152813;var _77=2*f_t-f_t*f_t;var _78=-148;var _79=507;var _7a=681;var h=0;var _7c=ZdcCommon.cnv_llh2xyz(lat,lon,h,a_t,_77);_7c=ZdcCommon.cnv_xyz2llh(_7c[0]+_78,_7c[1]+_79,_7c[2]+_7a,a_w,_74);_7c[0]=Math.round(_7c[0]*10000000)/10000000;_7c[1]=Math.round(_7c[1]*10000000)/10000000;var p=new ZdcWGSPoint(_7c[1],_7c[0]);return p;};ZdcCommon.Math_mod=function(a,b){var c=(a/b)-Math.floor(a/b);return c;};ZdcCommon.DEG2MS=function(deg){var ms=deg*3600*1000;return Math.round(ms);};ZdcCommon.DEG2DMS=function(deg){var DMS=new Object();DMS.deg=Math.floor(deg);DMS.min=Math.floor((deg-DMS.deg)*60);DMS.sec=Math.round(((deg-DMS.deg)*60-DMS.min)*60*1000)/1000;return DMS;};ZdcCommon.MS2DEG=function(ms){return Math.round((ms/3600000)*10000000)/10000000;};ZdcCommon.MS2DMS=function(ms){return ZdcCommon.DEG2DMS(ZdcCommon.MS2DEG(ms));};ZdcCommon.DMS2DEG=function(deg,min,sec){return (Math.round((deg+(min/60)+(sec/3600))*10000000))/10000000;};ZdcCommon.DMS2MS=function(deg,min,sec){return Math.round((deg+(min/60)+(sec/3600))*3600000);};ZdcCommon.prototype.showWholeRoute=function(){ZdcEvent.addListener(this,"end",function(){ZdcCommon.prototype.reviseBox(this);var map=this.objMap;var rE=this.getResult().routeExtent;var p=new ZdcPoint(Math.round((rE.maxx+rE.minx)/2),Math.round((rE.maxy+rE.miny)/2),2);map.setMapLocation(p,map.getMapBoxScale(rE));});};ZdcCommon.prototype.reviseBox=function modify(_90){var re=_90.result.routeExtent;var lv=_90.objMap.getMapBoxScale(re);var _93=36*ZdcZoom.map_defw[lv];var _94=25*ZdcZoom.map_defh[lv];var db,ap;if(_90.options.departurePoint.point){dp=_90.options.departurePoint.point;ap=_90.options.arrivalPoint.point;}else{dp=new ZdcPoint(_90.options.departurePoint.mx,_90.options.departurePoint.my,2);ap=new ZdcPoint(_90.options.arrivalPoint.mx,_90.options.arrivalPoint.my,2);}if(re.maxx<dp.mx+_93){re.maxx=dp.mx+_93;}if(re.maxx<ap.mx+_93){re.maxx=ap.mx+_93;}
if(re.maxy<dp.my+_94){re.maxy=dp.my+_94;}if(re.maxy<ap.my+_94){re.maxy=ap.my+_94;}};window.ZdcCommon=ZdcCommon;window.ZDC.ZdcCommon=ZdcCommon;})();(function(){function ZdcXmlHttp(){}ZdcXmlHttp.create=function(){try{if(typeof ActiveXObject!="undefined"){return new ActiveXObject("Microsoft.XMLHTTP");}else{if(window.XMLHttpRequest){return new XMLHttpRequest();}}}catch(a){}return null;};function ZdcXml(){}ZdcXml.parse=function(a){if(typeof ActiveXObject!="undefined"&&typeof GetObject!="undefined"){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b;}if(typeof DOMParser!="undefined"){var _99=(new DOMParser()).parseFromString(a,"text/xml");if(_99&&_99.normalize){_99.normalize();}return _99;}return null;};ZdcXml.value=function(a){if(!a){return "";}var b="";if(a.nodeType==3||a.nodeType==4||a.nodeType==2){b+=a.nodeValue;}else{if(a.nodeType==1||a.nodeType==9||a.nodeType==11){for(var c=0;c<a.childNodes.length;++c){b+=arguments.callee(a.childNodes[c]);}}}return b;};window.ZdcXmlHttp=ZdcXmlHttp;window.ZDC.ZdcXmlHttp=ZdcXmlHttp;window.ZdcXml=ZdcXml;window.ZDC.ZdcXml=ZdcXml;})();(function(){function ZdcDrag(){}ZdcDrag._grabObj=null;ZdcDrag._mousemove=null;ZdcDrag._mouseup=null;ZdcDrag._h_mousemove=null;ZdcDrag._h_mouseup=null;ZdcDrag.StartDragging=function(obj,_9e,_9f){if(ZdcCommon.isiPhone()){ZdcDrag._h_mousemove=ZdcEvent.addDomListener(document,"touchmove",ZdcDrag.z_mousemove);ZdcDrag._h_mouseup=ZdcEvent.addDomListener(document,"touchend",ZdcDrag.z_mouseup);}else{ZdcDrag._h_mousemove=ZdcEvent.addDomListener(document,"mousemove",ZdcDrag.z_mousemove);ZdcDrag._h_mouseup=ZdcEvent.addDomListener(document,"mouseup",ZdcDrag.z_mouseup);}ZdcDrag._grabObj=obj;ZdcDrag._mousemove=_9e;ZdcDrag._mouseup=_9f;};ZdcDrag.z_mousemove=function(e){if(document.all){var _a1=window.event;}else{var _a1=e;}if(ZdcDrag._grabObj&&ZdcDrag._mousemove){ZdcDrag._mousemove(_a1);}};ZdcDrag.z_mouseup=function(e){if(document.all){var _a3=window.event;}else{var _a3=e;}if(ZdcDrag._grabObj&&ZdcDrag._mouseup){ZdcDrag._mouseup(_a3);}};ZdcDrag.ClearDraging=function(){if(ZdcDrag._h_mousemove){ZdcEvent.removeListener(ZdcDrag._h_mousemove);}if(ZdcDrag._h_mouseup){ZdcEvent.removeListener(ZdcDrag._h_mouseup);}ZdcDrag._h_mousemove=null;ZdcDrag._h_mouseup=null;ZdcDrag._grabObj=null;ZdcDrag._mousemove=null;ZdcDrag._mouseup=null;};ZdcDrag.IsDragging=function(){return ZdcDrag._grabObj?true:false;};window.ZdcDrag=ZdcDrag;window.ZDC.ZdcDrag=ZdcDrag;})();(function(){var Ta=[];var w;var Gc=["opera","msie","safari","firefox","mozilla"];var Tc=["x11;","macintosh","windows"];var ua="dblclick";var Fd="unload";function jc(a){this.type=-1;this.os=-1;this.version=0;this.revision=0;var a=a.toLowerCase();for(var b=0;b<Gc.length;b++){var c=Gc[b];if(a.indexOf(c)!=-1){this.type=b;var d=new RegExp(c+"[ /]?([0-9]+(.[0-9]+)?)");if(d.exec(a)!=null){this.version=parseFloat(RegExp.$1);}break;}}for(var b=0;b<Tc.length;b++){var c=Tc[b];if(a.indexOf(c)!=-1){this.os=b;break;}}if(this.type==4||this.type==3){if(/\brv:\s*(\d+\.\d+)/.exec(a)){this.revision=parseFloat(RegExp.$1);}}}jc.prototype.r=function(){return this.type==3||this.type==4;};jc.prototype.fc=function(){return this.type==4&&this.revision<1.7;};w=new jc(navigator.userAgent);function wc(a,b){var c=a["__e_"];if(!c){if(b){c=(a["__e_"]=[]);}else{c=[];}}return c;}function db(a,b,c){var d=0;for(var e=0;e<a.length;++e){if(a[e]===b||c&&a[e]==b){a.splice(e--,1);d++;}}return d;}function Ea(a,b,c,d){var e=this;e.ga=a;e.wb=b;e.$b=c;e.Vg=d;wc(a,true).push(e);}Ea.prototype.remove=function(){var a=this;switch(a.Vg){case 1:a.ga.removeEventListener(a.wb,a.$b,false);break;case 2:a.ga.detachEvent("on"+a.wb,a.$b);break;case 3:a.ga["on"+a.wb]=null;break;}db(wc(a.ga),a);};Ea.prototype.Rd=function(a){return this.wb==a;};Ea.prototype.apply=function(a,b){return this.$b.apply(a,b);};Ea.prototype.Ff=function(){return this.ga;};function Hb(a,b,c,d){var e=c||0;var f=d||b.length;for(var g=e;g<f;++g){a.push(b[g]);}}function dd(a){var b=[];if(a["__e_"]){Hb(b,a["__e_"]);}return b;}function ab(a,b){for(var c=0;c<a.length;++c){b.call(a[c]);}}function fc(a,b){return function(c){if(!c){c=window.event;}if(c&&!c.target){c.target=c.srcElement;}b.call(a,c,this);};}function ZdcEvent(){}ZdcEvent.addListener=function(a,b,c){var d=new Ea(a,b,c,0);Ta.push(d);return d;};ZdcEvent.addDomListener=function(a,b,c){var d;if(w.type==2&&b==ua){a["on"+b]=c;d=new Ea(a,b,c,3);}else{if(a.addEventListener){a.addEventListener(b,c,false);d=new Ea(a,b,c,1);}else{if(a.attachEvent){var e=ZdcEvent.callback(a,c);a.attachEvent("on"+b,e);d=new Ea(a,b,e,2);}else{a["on"+b]=c;d=new Ea(a,b,c,3);}}}if(a!=window||b!=Fd){Ta.push(d);}return d;};ZdcEvent.removeListener=function(a){a.remove();db(Ta,a);};ZdcEvent.clearListeners=function(a,b){ab(dd(a),function(){if(this.Rd(b)){this.remove();db(Ta,this);}});};ZdcEvent.clearInstanceListeners=function(a){ab(dd(a),function(){this.remove();db(Ta,this);});};ZdcEvent.trigger=function(a,b,c,d){var e=[];Hb(e,arguments,2);ab(wc(a),function(){if(this.Rd(b)){try{this.apply(a,e);}catch(f){}}});};ZdcEvent.bind=function(a,b,c,d){return ZdcEvent.addListener(a,b,ZdcEvent.callback(c,d));};ZdcEvent.bindDom=function(a,b,c,d){var e=fc(c,d);return ZdcEvent.addDomListener(a,b,e);};ZdcEvent.callback=function(a,b){return function(){return b.apply(a,arguments);};};ZdcEvent.callbackArgs=function(a,b,c,d){var e=[];Hb(e,arguments,2);return function(){return b.apply(a,e);};};ZdcEvent.stopPropagation=function(e){if(document.all){if(window.event){window.event.cancelBubble=true;}}else{if(e.stopPropagation){e.stopPropagation();}}};ZdcEvent.Client2DivPixelIE=function(_f1,obj){var p=new ZdcPixel(_f1.clientX,_f1.clientY);while(obj){p.x-=obj.clientLeft;p.y-=obj.clientTop;if(obj.nodeName=="BODY"){break;}p.x-=parseInt(obj.offsetLeft);p.y-=parseInt(obj.offsetTop);obj=obj.offsetParent;}p.x+=document.body.scrollLeft;p.y+=document.body.scrollTop;return p;};ZdcEvent.GetEventPosition=function(_f4,obj){if(ZdcCommon.isiPhone()){var p=new ZdcPixel(_f4.touches[0].clientX,_f4.touches[0].clientY);}else{var p=new ZdcPixel(_f4.clientX,_f4.clientY);}var a=ZdcEvent._getClientPosition(obj);p.x-=a.x;p.y-=a.y;if(ZdcCommon.isiPhone()){return p;}if(w.type==2){if(parseInt(w.version)<523){p.x-=self.pageXOffset;p.y-=self.pageYOffset;}else{p.x-=self.pageXOffset-document.body.scrollLeft;p.y-=self.pageYOffset-document.body.scrollTop;}}return p;};ZdcEvent.GetDivClientRect=function(obj){var p=new ZdcPixel(0,0);if(!obj){return p;}if(obj.clientWidth||obj.clientHeight){return new ZdcPixel(obj.clientWidth,obj.clientHeight);}var a=ZdcEvent._getBorderValue(obj);p.x=obj.offsetWidth;p.y=obj.offsetHeight;p.x-=2*a.x;p.y-=2*a.y;return p;};ZdcEvent._checkPositionType=function(a){if(a.offsetParent&&a.offsetParent.nodeName=="BODY"&&ZdcEvent._getPropertyValue(a.offsetParent,"position")=="static"){if(w.type==0&&ZdcEvent._getPropertyValue(a,"position")!="static"){return true;}else{if(w.type!=0&&ZdcEvent._getPropertyValue(a,"position")=="absolute"){return true;}}}return false;};ZdcEvent._getBorderValue=function(a){var b,c;var d=ZdcEvent._getPropertyValue(a,"border-left-width");if(isNaN(parseInt(d))){b=0;}else{b=ZdcEvent._getMarginValue(a,"border-left-width",d);}var e=ZdcEvent._getPropertyValue(a,"border-top-width");if(isNaN(parseInt(e))){c=0;}else{c=ZdcEvent._getMarginValue(a,"border-top-width",e);}return new ZdcPixel(b,c);};var Hc="__zdc_map_div_dummy__";ZdcEvent._getMarginValue=function(a,b,c){var d;if(c){d=c;}else{d=ZdcEvent._getPropertyValue(a,b);}if(typeof d=="number"){return d;}else{if(isNaN(parseInt(d))){return d;}else{if(d.length>2&&d.substring(d.length-2)=="px"){return parseInt(d);}else{var e=a.ownerDocument.getElementById(Hc);if(!e){var e=ZdcEvent._getOwnerDocument(a).createElement("div");e.style.position="absolute";e.style.left="0px";e.style.top="0px";e.style.width="0px";e.style.height="0px";a.appendChild(e);e.id=Hc;e.style.visibility="hidden";}else{a.parentNode.appendChild(e);}e.style.width="0px";e.style.width=d;return e.offsetWidth;}}}};ZdcEvent._regPropertyName=function(a){return a.replace(/-(\w)/g,function(b,c){return (""+c).toUpperCase();});};ZdcEvent._getOwnerDocument=function(a){return (a?a.ownerDocument:null)||document;};ZdcEvent._getPropertyValue=function(a,b){var c=ZdcEvent._getOwnerDocument(a);if(a.currentStyle){var d=ZdcEvent._regPropertyName(b);return a.currentStyle[d];}else{if(c.defaultView&&c.defaultView.getComputedStyle){var e=c.defaultView.getComputedStyle(a,"");return e?e.getPropertyValue(b):"";}else{var d=ZdcEvent._regPropertyName(b);return a.style[d];}}};ZdcEvent._offsetPoint=function(a,b){var c=false;if(w.r()){c=ZdcEvent._getPropertyValue(b,"overflow")!="visible"&&ZdcEvent._getPropertyValue(b.parentNode,"overflow")!="visible";var d=ZdcEvent._getPropertyValue(b,"position")!="static";if(d||c){a.x+=ZdcEvent._getMarginValue(b,"margin-left");a.y+=ZdcEvent._getMarginValue(b,"margin-top");var e=ZdcEvent._getBorderValue(b.parentNode);a.x+=e.x;a.y+=e.y;}if(d){a.x+=ZdcEvent._getMarginValue(b,"left");a.y+=ZdcEvent._getMarginValue(b,"top");}}if((w.r()||w.type==1)&&document.compatMode!="BackCompat"||c){if(self.pageYOffset){a.x-=self.pageXOffset;a.y-=self.pageYOffset;}else{a.x-=document.documentElement.scrollLeft;a.y-=document.documentElement.scrollTop;}}};ZdcEvent._getClientPosition=function(a){var oa=a;var c=new ZdcPixel(0,0);if(a&&typeof a.getBoundingClientRect!="undefined"){var box=a.getBoundingClientRect();c.x+=box.left;c.y+=box.top;var d=ZdcEvent._getBorderValue(a);
c.x+=d.x;c.y+=d.y;c.x+=document.body.clientLeft;c.y+=document.body.clientTop;return c;}while(a){if(a.nodeName=="BODY"){ZdcEvent._offsetPoint(c,a);}var d=ZdcEvent._getBorderValue(a);c.x+=d.x;c.y+=d.y;if(a.nodeName!="BODY"||!w.r()){c.x+=a.offsetLeft;c.y+=a.offsetTop;}if(w.type==1&&a!=oa&&a.nodeName!="BODY"&&ZdcEvent._getPropertyValue(a,"position")=="relative"&&(a.style.width==""&&a.currentStyle.width=="auto")){c.x-=d.x;c.x-=a.offsetLeft;}if(w.type==1&&a.offsetParent&&a.offsetParent.nodeName!="BODY"&&ZdcEvent._getPropertyValue(a.offsetParent,"position")=="relative"&&(a.offsetParent.style.width==""&&a.offsetParent.currentStyle.width=="auto")){d=ZdcEvent._getBorderValue(a.offsetParent);c.y-=d.y;}if(w.r()&&w.revision>=1.8&&a.offsetParent&&a.offsetParent.nodeName!="BODY"&&ZdcEvent._getPropertyValue(a.offsetParent,"overflow")!="visible"){var d=ZdcEvent._getBorderValue(a.offsetParent);c.x+=d.x;c.y+=d.y;}if(a.offsetParent){c.x-=a.offsetParent.scrollLeft;c.y-=a.offsetParent.scrollTop;}if(w.type!=1&&ZdcEvent._checkPositionType(a)){if(w.r()){c.x-=self.pageXOffset-document.body.scrollLeft;c.y-=self.pageYOffset-document.body.scrollTop;var e=ZdcEvent._getBorderValue(a.offsetParent.parentNode);c.x+=e.x;c.y+=e.y;}break;}if(w.type==2&&a.offsetParent){var d=ZdcEvent._getBorderValue(a.offsetParent);c.x-=d.x;c.y-=d.y;}a=a.offsetParent;}if(w.type==1&&document.documentElement){c.x+=document.documentElement.clientLeft;c.y+=document.documentElement.clientTop;}if(w.type==1){c.x+=document.body.clientLeft;c.y+=document.body.clientTop;}return c;};window.ZdcEvent=ZdcEvent;window.ZDC.ZdcEvent=ZdcEvent;})();(function(){function ZdcWindow(top,left,_11d,_11e){if(top!=null&&left!=null&&_11d!=null&&_11e!=null){this.top=top;this.left=left;this.width=_11d;this.height=_11e;}}function ZdcPixel(x,y){this.x=x;this.y=y;}function ZdcPixelBox(pxl1,pxl2){this.pxl1=pxl1;this.pxl2=pxl2;this.pxl1.x=eval(this.pxl1.x);this.pxl1.y=eval(this.pxl1.y);this.pxl2.x=eval(this.pxl2.x);this.pxl2.y=eval(this.pxl2.y);}ZdcPixelBox.prototype.isContainPixel=function(x,y){var flg;if(this.pxl1.x<=this.pxl2.x){if(this.pxl1.x<=x&&x<=this.pxl2.x){flg=true;}else{return false;}}else{if(this.pxl2.x<=x&&x<=this.pxl1.x){flg=true;}else{return false;}}if(this.pxl1.y<=this.pxl2.y){if(this.pxl1.y<=y&&y<=this.pxl2.y){flg=true;}else{return false;}}else{if(this.pxl2.y<=y&&y<=this.pxl1.y){flg=true;}else{return false;}}return true;};function ZdcSize(w,h){this.width=w;this.height=h;}function ZdcPoint(x,y,f){if(f!=null){this.type=f;}else{this.type=1;}if(y==null&&x==null){x=503156063;y=128422368;this.type=2;}else{if(x==null){return -1;}if(y==null){return -1;}}switch(this.type){case 1:default:this.lon=x;this.lat=y;var p=ZdcCommon.ConvertLL2XY(x,y,1);this.mx=Number(p.mx);this.my=Number(p.my);break;case 2:this.mx=Number(x);this.my=Number(y);var p=ZdcCommon.ConvertMSXY2LL(x,y,1);this.lon=p.lon;this.lat=p.lat;break;}}ZdcPoint.prototype.setZxy=function(x,y){this.mx=Number(x);this.my=Number(y);var p=ZdcCommon.ConvertMSXY2LL(x,y,1);this.lon=p.lon;this.lat=p.lat;};ZdcPoint.prototype.setLonLat=function(x,y){this.lon=x;this.lat=y;var p=ZdcCommon.ConvertLL2XY(x,y,1);this.mx=Number(p.mx);this.my=Number(p.my);};ZdcPoint.prototype.getDistanceFromPoint=function(p){var pi=Math.PI/180;var R=6370000;var a=R*Math.cos(this.lat*pi)*Math.cos(this.lon*pi);var b=R*Math.cos(this.lat*pi)*Math.sin(this.lon*pi);var c=R*Math.sin(this.lat*pi);var d=R*Math.cos(p.lat*pi)*Math.cos(p.lon*pi);var e=R*Math.cos(p.lat*pi)*Math.sin(p.lon*pi);var f=R*Math.sin(p.lat*pi);var g=a*d+b*e+c*f;var h=Math.acos(g/(R*R));return R*h;};function ZdcWGSPoint(lon,lat){if(lon==null&&lat==null){lat=139.4546063;lon=35.4022368;}else{if(lon==null){return -1;}if(lat==null){return -1;}}this.lat=lat;this.lon=lon;}function ZdcBox(p1,p2){if(p1!=null&&p2!=null){if(p1.mx<p2.mx){this.minx=p1.mx;this.minlon=p1.lon;this.maxx=p2.mx;this.maxlon=p2.lon;}else{this.minx=p2.mx;this.minlon=p2.lon;this.maxx=p1.mx;this.maxlon=p1.lon;}if(p1.my<p2.my){this.miny=p1.my;this.minlat=p1.lat;this.maxy=p2.my;this.maxlat=p2.lat;}else{this.miny=p2.my;this.minlat=p2.lat;this.maxy=p1.my;this.maxlat=p1.lat;}this.p1=p1;this.p2=p2;}}ZdcBox.prototype.getBoxCenter=function(){var pt=new ZdcPoint((this.maxlon+this.minlon)/2,(this.maxlat+this.minlat)/2);return pt;};ZdcBox.prototype.isContainBox=function(box){var _143=new ZdcPoint(box.minx,box.miny,2);var _144=new ZdcPoint(box.minx,box.maxy,2);var _145=new ZdcPoint(box.maxx,box.maxy,2);var _146=new ZdcPoint(box.maxx,box.miny,2);var _147=0;if(this.isContainPoint(_143)){_147=_147+1;}if(this.isContainPoint(_144)){_147=_147+1;}if(this.isContainPoint(_145)){_147=_147+1;}if(this.isContainPoint(_146)){_147=_147+1;}if(_147==4){return 1;}if(this.minx<=box.maxx&&this.maxx>=box.minx&&this.miny<=box.maxy&&this.maxy>=box.miny){return 2;}return 3;};ZdcBox.prototype.isContainPoint=function(p){if(this.minx<=p.mx&&p.mx<=this.maxx&&this.miny<=p.my&&p.my<=this.maxy){return true;}return false;};window.ZdcSize=ZdcSize;window.ZdcPixel=ZdcPixel;window.ZdcPixelBox=ZdcPixelBox;window.ZdcWindow=ZdcWindow;window.ZdcPoint=ZdcPoint;window.ZdcWGSPoint=ZdcWGSPoint;window.ZdcBox=ZdcBox;window.ZDC.ZdcSize=ZdcSize;window.ZDC.ZdcPixel=ZdcPixel;window.ZDC.ZdcWindow=ZdcWindow;window.ZDC.ZdcPixelBox=ZdcPixelBox;window.ZDC.ZdcPoint=ZdcPoint;window.ZDC.ZdcWGSPoint=ZdcWGSPoint;window.ZDC.ZdcBox=ZdcBox;})();(function(){
var _149=50;var _14a="ZdcAjax";var _14b="http://api.e-map.ne.jp/jsapi/cgi/call.cgi";if(ZDC_SSL==1){_14b="https://api.e-map.ne.jp/jsapi/cgi/call.cgi";}var _14c="";var _14d=0;var _14e=new Array();var _14f=new Array();var _150=new Array();var _151=new Array();ZdcHttpGetResult=function(cnt){if(_14f[cnt]=="domain error"){_150[cnt](null,9);ZdcHttpClear(cnt);return;}if(_14f[cnt]=="no file"){_150[cnt](null,9);ZdcHttpClear(cnt);return;}if(_14f[cnt]=="abort"){_150[cnt](null,4);ZdcHttpClear(cnt);return;}_14f[cnt]--;if(_14f[cnt]<0){_150[cnt](null,3);ZdcHttpClear(cnt);return;}if(!_14e[cnt]){setTimeout("ZdcHttpGetResult("+cnt+")",_149);return;}if(_151[cnt]){_150[cnt](decodeURIComponent(_14e[cnt]),0);}else{_150[cnt](_14e[cnt],0);}ZdcHttpClear(cnt);};ZdcHttpClear=function(cnt){var elm=document.getElementById(_14a+cnt);if(elm){document.body.removeChild(elm);}delete elm;delete _14e[cnt];delete _150[cnt];delete _151[cnt];};ZdcHttpRequest=function(_155,enc,_157){this.cnt=0;this.aborted=false;this.charset=_155||"SJIS";this.enc=enc||"";this.encodeflg=(_157==undefined)?0:_157;};ZdcHttpRequest.prototype.request=function(_158,_159,_15a){var _15b;try{_15b=document.createElement("script");switch(this.charset){case "SJIS":_15b.charset="Shift_JIS";break;case "UTF8":_15b.charset="UTF-8";break;case "EUC":_15b.charset="EUC-JP";break;default:_15b.charset=this.charset;break;}}catch(e){_15b=false;}if(!_15b){this.httpObjGenerateFail();}if(_15a==undefined){_15a=5*1000;}_14d++;_15b.id=_14a+_14d;_15b.setAttribute("type","text/javascript");_15b.src=_14b+"?target="+encodeURIComponent(_158)+"&zdccnt="+_14d+"&enc="+this.enc+"&encodeflg="+this.encodeflg;_150[_14d]=_159;_14f[_14d]=_15a/_149;_14e[_14d]="";_151[_14d]=this.encodeflg;document.body.appendChild(_15b);setTimeout("ZdcHttpGetResult("+_14d+")",_149);this.cnt=_14d;return;};ZdcHttpRequest.prototype.httpObjGenerateFail=function(){alert("No Support on your Browser.");return false;};ZdcHttpRequest.prototype.abort=function(){_14f[this.cnt]="abort";};ZdcHttpRequest.prototype.setInterval=function(val){_149=val;};var _15d={0:"Success",1:"Parameter Error",2:"Server Error",3:"Timeout",4:"Abort",5:"No Hit Data",6:"Auth Error",9:"Error"};ZdcHttpRequest.setProxyDomain=function(_15e){_14c=_15e;_14b="http://"+_15e+"/jsapi/cgi/call.cgi";if(ZDC_SSL==1){_14b="https://"+_15e+"/jsapi/cgi/call.cgi";}};
ZdcHttpRequest.getProxyDomain=function(){return _14c;};window.ZdcHttpTimeoutCnt=_14f;window.ZdcHttpRequest=ZdcHttpRequest;window.ZdcHttpResult=_14e;window.ZdcStatusCode=_15d;})();if(!window.ZDC){window.ZDC={};}(function(){function ZdcZoom(){}ZdcZoom.OY=35*3600*1000;ZdcZoom.OX=135*3600*1000;ZdcZoom.PX=256;ZdcZoom.PY=256;ZdcZoom.map_defw=new Array();ZdcZoom.map_defh=new Array();ZdcZoom.map_defs=new Array();ZdcZoom.map_defd=new Array();ZdcZoom.map_emag=new Array();ZdcZoom.map_defw[18]=19.30147059;ZdcZoom.map_defh[18]=15.72712418;ZdcZoom.map_defs[18]="1,500";ZdcZoom.map_defd[18]="40m";ZdcZoom.map_emag[18]=39;ZdcZoom.map_defw[17]=33.08823529;ZdcZoom.map_defh[17]=26.96078431;ZdcZoom.map_defs[17]="2,500";ZdcZoom.map_defd[17]="70m";ZdcZoom.map_emag[17]=42;ZdcZoom.map_defw[16]=41.36029412;ZdcZoom.map_defh[16]=33.70098039;ZdcZoom.map_defs[16]="3,500";ZdcZoom.map_defd[16]="100m";ZdcZoom.map_emag[16]=44;ZdcZoom.map_defw[15]=57.90441176;ZdcZoom.map_defh[15]=47.18137255;ZdcZoom.map_defs[15]="5,000";ZdcZoom.map_defd[15]="150m";ZdcZoom.map_emag[15]=46;ZdcZoom.map_defw[14]=90.99264706;ZdcZoom.map_defh[14]=74.14215686;ZdcZoom.map_defs[14]="7,500";ZdcZoom.map_defd[14]="230m";ZdcZoom.map_emag[14]=50;ZdcZoom.map_defw[13]=121.3235294;ZdcZoom.map_defh[13]=98.85620915;ZdcZoom.map_defs[13]="10,000";ZdcZoom.map_defd[13]="300m";ZdcZoom.map_emag[13]=52;ZdcZoom.map_defw[12]=187.5;ZdcZoom.map_defh[12]=152.7777778;ZdcZoom.map_defs[12]="15,000";ZdcZoom.map_defd[12]="450m";ZdcZoom.map_emag[12]=55;ZdcZoom.map_defw[11]=253.6764706;ZdcZoom.map_defh[11]=206.6993464;ZdcZoom.map_defs[11]="20,000";ZdcZoom.map_defd[11]="600m";ZdcZoom.map_emag[11]=56;ZdcZoom.map_defw[10]=661.7647059;ZdcZoom.map_defh[10]=539.2156863;ZdcZoom.map_defs[10]="50,000";ZdcZoom.map_defd[10]="1.5km";ZdcZoom.map_emag[10]=62;ZdcZoom.map_defw[9]=1411.764706;ZdcZoom.map_defh[9]=1150.326797;ZdcZoom.map_defs[9]="100,000";ZdcZoom.map_defd[9]="3.0km";ZdcZoom.map_emag[9]=67;ZdcZoom.map_defw[8]=1941.176471;ZdcZoom.map_defh[8]=1581.699346;ZdcZoom.map_defs[8]="150,000";ZdcZoom.map_defd[8]="4.5km";ZdcZoom.map_emag[8]=70;ZdcZoom.map_defw[7]=3176.470588;ZdcZoom.map_defh[7]=2588.235294;ZdcZoom.map_defs[7]="250,000";ZdcZoom.map_defd[7]="7.7km";ZdcZoom.map_emag[7]=72;ZdcZoom.map_defw[6]=7058.823529;ZdcZoom.map_defh[6]=5751.633987;ZdcZoom.map_defs[6]="500,000";ZdcZoom.map_defd[6]="15km";ZdcZoom.map_emag[6]=77;ZdcZoom.map_defw[5]=12705.88235;ZdcZoom.map_defh[5]=10352.94118;ZdcZoom.map_defs[5]="1,000,000";ZdcZoom.map_defd[5]="30km";ZdcZoom.map_emag[5]=81;ZdcZoom.map_defw[4]=18352.94118;ZdcZoom.map_defh[4]=14954.24837;ZdcZoom.map_defs[4]="1,500,000";ZdcZoom.map_defd[4]="45km";ZdcZoom.map_emag[4]=82;ZdcZoom.map_defw[3]=34588.23529;ZdcZoom.map_defh[3]=28183.00654;ZdcZoom.map_defs[3]="3,000,000";ZdcZoom.map_defd[3]="90km";ZdcZoom.map_emag[3]=85;ZdcZoom.map_defw[2]=79058.82353;ZdcZoom.map_defh[2]=64418.30065;ZdcZoom.map_defs[2]="6,500,000";ZdcZoom.map_defd[2]="200km";ZdcZoom.map_emag[2]=87;ZdcZoom.map_defw[1]=158117.6471;ZdcZoom.map_defh[1]=128836.6013;ZdcZoom.map_defs[1]="13,000,000";ZdcZoom.map_defd[1]="400km";ZdcZoom.map_emag[1]=89;ZdcZoom.map_defw[0]=410694.1874;ZdcZoom.map_defh[0]=334640.5229;ZdcZoom.map_defs[0]="35,000,000";ZdcZoom.map_defd[0]="1000km";ZdcZoom.map_emag[0]=100;window.ZdcZoom=ZdcZoom;window.ZDC.ZdcZoom=ZdcZoom;})();var ZDC_SEARCHCGI="http://api.e-map.ne.jp/ssapi";if(ZDC_SSL==1){ZDC_SEARCHCGI="https://api.e-map.ne.jp/ssapi";}var Zdc_railway_D_PATH="http://api.e-map.ne.jp/jsapi/searchrosenzu";if(ZDC_SSL==1){Zdc_railway_D_PATH="https://api.e-map.ne.jp/jsapi/searchrosenzu";}var Zdc_smap_D_PATH="http://api.e-map.ne.jp/jsapi/searchmap.v12";if(ZDC_SSL==1){Zdc_smap_D_PATH="https://api.e-map.ne.jp/jsapi/searchmap.v12";}var ZDC_EVENT_LOG_CGI="http://api.e-map.ne.jp/log/event_log.cgi";if(ZDC_SSL==1){ZDC_EVENT_LOG_CGI="https://api.e-map.ne.jp/log/event_log.cgi";}var URL_TRAFFIC=ZDC_SEARCHCGI+"/gettrafficimg.cgi";var ZDC_CORPID="ZDC";var ZDC_GENRETBL_SID={"":"API001",jpn:"API001",eng:"EIJI"};var ZDC_TIMEOUT_MIN=1000;var ZDC_TIMEOUT_MAX=300000;var ZDC_CHARSET_STR={"SJIS":"Shift_JIS","UTF8":"UTF-8","EUC":"EUC-JP"};var ZDC_ENC_STR={"SJIS":"SJIS","UTF8":"UTF-8","EUC":"EUC-JP"};var ZDC_HTTP_DMT={"SJIS":"\r\n","UTF8":"\r\n","EUC":"\n"};ZdcSetErrorStatus=function(_15f,st){var _161;if(st==undefined){var _162=_15f.charAt(4);var _163=_15f.slice(3,5);if(_162=="9"){_161=1;}else{if(_15f.substr(4,4)=="1009"){_161=5;}else{if(_162=="2"){_161=6;}else{if(_162=="6"||_162=="7"||_162=="8"||_163=="15"){_161=2;}else{_161=9;}}}}}else{_161=st;}this.retCode=_15f||"";this.type="";this.status=_161;this.recCount=0;this.hitCount=0;this.rest=false;this.items=[];};function ZdcCnvSymbolsS2M(str){var _165="\uff01\u201d\uff03\uff04\uff05\uff06\u2019\uff08\uff09\uff0a\uff0b\uff0c\uff0d\uff0e\uff0f\uff1a\uff1b\uff1c\uff1d\uff1e\uff1f\uff20\uff3b\uffe5\uff3d\uff3e\uff3f\uff40\uff5b\uff5c\uff5d\uff5e";var _166="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";var _167="";for(var i=0;i<str.length;i++){var chr=str.charAt(i);if("!"<=chr&&chr<="~"){var pos=_166.indexOf(chr,0);if(pos>=0){_167+=_165.charAt(pos);continue;}}_167+=chr;}return _167;}var err_msg = "";var ZdcObjArray=[];window.onunload=function(){ZUnload();};function ZUnload(){for(var i=0;i<ZdcObjArray.length;i++){ZdcEvent.clearInstanceListeners(ZdcObjArray[i]);for(var _2 in ZdcObjArray[i]){delete _2;}}document.onmouseup=null;document.onkeyup=null;document.onkeydown=null;document.onclick=null;document.ondblclick=null;document.onmousedown=null;document.onmouseup=null;document.oncontextmenu=null;document.onmouseover=null;document.onmouseout=null;document.onmousemove=null;ZdcObjArray=null;}if(!window.ZDC){window.ZDC={};}(function(){ZdcMap.getZdcMapAccesslog=function(_3,_4){if(_4==0){if(ZdcCommon.ZDC_RETURN==null){ZdcMap.AccessText=_3;}else{ZdcMap.AccessText=ZdcCommon.ZDC_RETURN;}}else{return -1;}};var $A=function(_6){if(!_6){return [];}if(_6.toArray){return _6.toArray();}else{var _7=[];for(var i=0;i<_6.length;i++){_7.push(_6[i]);}return _7;}};Function.prototype.bind=function(){var _9=this,_a=$A(arguments),_b=_a.shift();return function(){return _9.apply(_b,_a.concat($A(arguments)));};};Function.prototype.bindAsEventListener=function(_c){var _d=this;return function(_e){return _d.call(_c,_e||window.event);};};
function ZdcMapType(){this.usrtileurl=null;this.usrtiletype=null;this.usrtilecod=null;
this.server=new Object();
this.ext=new Object();
for(nm in ZdcCommon.ZdcTilePath){
this.server[nm]=ZdcCommon.ZdcTileServer+ZdcCommon.ZdcTilePath[nm];
this.ext[nm]=ZdcCommon.ZdcTileFtype[nm];}}
function ZdcCopyright(){
this.doc=document.createElement("DIV");
this.doc.style.zIndex="0";
this.doc.style.position="absolute";
this.doc.style.width="271px";
this.doc.style.height="15px";
this.copyrightimg=ZdcCommon.ZdcMapServer+"/usrimg/copyright_pr_emap.gif";
this.doc.innerHTML="<IMG src="+this.copyrightimg+" >";
ZdcObjArray.push(this);
this.doc.onmousedown=this.forbidDrag.bindAsEventListener(this);
this.doc.onmousemove=this.forbidDrag.bindAsEventListener(this);}
ZdcCopyright.prototype.forbidDrag=function(_f){ZdcEvent.stopPropagation(_f);
return false;};
function ZdcWait(){this.doc=document.createElement("DIV");this.doc.style.zIndex="10110";this.doc.style.position="absolute";
this.doc.style.width="121px";this.doc.style.height="31px";this.backdoc=document.createElement("DIV");this.doc.appendChild(this.backdoc);this.backdoc.image=ZdcCommon.ZdcMapServer+"img/load-back.png";this.backdoc.innerHTML="";this.movedoc=document.createElement("DIV");this.doc.appendChild(this.movedoc);this.movedoc.image=ZdcCommon.ZdcMapServer+"img/load.gif";this.movedoc.style.position="absolute";this.movedoc.style.left="4px";this.movedoc.style.top="4px";this.movedoc.innerHTML="";this.textdoc=document.createElement("DIV");this.doc.appendChild(this.textdoc);this.textdoc.style.position="absolute";this.textdoc.style.left="24px";this.textdoc.style.top="8px";this.showtext="Now Loading...";ZdcObjArray.push(this);}function ZdcTooltip(){this.doc=document.createElement("DIV");this.doc.style.zIndex="-1";this.doc.style.position="absolute";this.doc.style.width="121px";this.doc.style.height="31px";this.doc.style.top="0px";this.doc.style.left="0px";this.offset=new ZdcPixel(-11,-11);this.width="121px";this.height="31px";this.zIndex=0;this.firstwidth="121px";this.firstheight="31px";this.scrollflg=false;this.textdoc=document.createElement("DIV");this.doc.appendChild(this.textdoc);this.doc.style.display="none";this.textdoc.style.position="absolute";this.textdoc.style.left="0px";this.textdoc.style.top="0px";this.textdoc.innerHTML="";ZdcObjArray.push(this);}ZdcTooltip.prototype.setZdcTooltip=function(_10,_11,_12,_13,_14,_15,_16){if(_15!=null){this.doc.style.zIndex=_15;this.zIndex=_15;}if(_12!=null){this.doc.style.width=_12+"px";this.width=_12+"px";this.firstwidth=_12+"px";}if(_13!=null){this.doc.style.height=_13+"px";this.height=_13+"px";this.firstheight=_13+"px";}if(_14!=null){this.offset=_14;}this.Point=_10;if(_11!=null){this.textdoc.innerHTML=_11;}if(_16==true){this.scrollflg=true;}else{this.scrollflg=false;}};ZdcTooltip.prototype.setZdcTooltipZindex=function(_17){if(_17>10209){return;}this.doc.style.zIndex=_17;this.zIndex=_17;};ZdcTooltip.prototype.MouseOut=function(e){ZdcEvent.trigger(this,"mouseouttooltip");};ZdcTooltip.prototype.MouseClick=function(e){ZdcEvent.trigger(this,"mouseclicktooltip");ZdcEvent.stopPropagation(e);};ZdcTooltip.prototype.MouseDblClickTooltip=function(e){ZdcEvent.trigger(this,"mousedblclicktooltip");ZdcEvent.stopPropagation(e);};ZdcTooltip.prototype.MouseDown=function(e){ZdcEvent.trigger(this,"mousedowntooltip");ZdcEvent.stopPropagation(e);};ZdcTooltip.prototype.MouseUp=function(e){ZdcEvent.trigger(this,"mouseuptooltip");if(ZdcCommon.UserAgentIsFireFox()&&this.parentLayer.pMap.ZdcDragStatus){return;}ZdcEvent.stopPropagation(e);};ZdcTooltip.prototype.MouseOver=function(e){ZdcEvent.trigger(this,"mouseovertooltip");};ZdcTooltip.prototype.ConTextMenu=function(e){ZdcEvent.stopPropagation(e);};ZdcTooltip.prototype.AddMouseWheelListener=function(_1f,cap){if(this.scrollflg==true){if(this.doc.addEventListener){this.doc.addEventListener("DOMMouseScroll",_1f,cap);this.doc.addEventListener("mousewheel",_1f,cap);}else{if(this.doc.attachEvent){this.doc.attachEvent("onmousewheel",_1f);}}}};ZdcTooltip.prototype.WheelStop=function(e){if(this.scrollflg==true){ZdcEvent.stopPropagation(e);}};function ZdcIcon(_22,img,_24){if(img==null){this.image=ZdcCommon.ZdcMapServer+"/img/DefaultIconImageSmall.png";}else{this.image=img;}this.printimage=ZdcCommon.ZdcMapServer+"/img/DefaultIconImageSmall.gif";this.changeimage=ZdcCommon.ZdcMapServer+"/img/DefaultIconImageLarge.png";if(_24!=null){this.shadowimage=_24;}this.printsize=new ZdcSize(24,24);this.shadowsize=new ZdcSize(20,20);this.changesize=new ZdcSize(36,36);this.changeoffset=new ZdcPixel(0,0);if(_22==null){this.size=new ZdcSize(24,24);this.offset=new ZdcPixel(-11,-11);this.msgoffset=new ZdcPixel(0,-10);this.shdoffset=new ZdcPixel(0,0);}else{this.size=_22.size;this.offset=_22.offset;this.msgoffset=_22.msgoffset;this.shdoffset=_22.shdoffset;}this.id=0;ZdcObjArray.push(this);}function ZdcMarker(p,_26,_27,opt){this.Point=p;this.opt=opt;this.constopt=opt;this.dragopt=null;if(_27==null){this.type="dynamic";}else{if(_27!="dynamic"&&_27!="static"){this.type="dynamic";}else{this.type=_27;}}if(_26!=null){this.icon=_26;}else{this.icon=new ZdcIcon();}this.doc=document.createElement("DIV");this.doc.style.position="absolute";this.icondoc=document.createElement("DIV");this.iconimgdoc=document.createElement("IMG");if(this.type=="dynamic"){if(document.all){this.icondoc.style.cursor="hand";}else{this.icondoc.style.cursor="pointer";}}if(this.icon.image.substr(this.icon.image.length-4,4)==".gif"){this.icongif=true;}else{this.icongif=false;}if(this.icon.changeimage.substr(this.icon.changeimage.length-4,4)==".gif"){this.changeicongif=true;}else{this.changeicongif=false;}if(this.icon.printimage.substr(this.icon.printimage.length-4,4)==".gif"){this.printicongif=true;}else{this.printicongif=false;}if(document.all&&!this.icongif){this.iconimgdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\""+this.icon.image+"\")";this.iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";this.iconimgdoc.style.width=this.icon.size.width+"px";this.iconimgdoc.style.height=this.icon.size.height+"px";}else{this.iconimgdoc.style.filter=null;this.iconimgdoc.src=this.icon.image;}this.icondoc.style.width=this.icon.size.width+"px";this.icondoc.style.height=this.icon.size.height+"px";this.icondoc.style.left="0px";this.icondoc.style.top="0px";this.icondoc.style.position="absolute";this.doc.style.width=this.icon.size.width+"px";this.doc.style.height=this.icon.size.height+"px";this.icondoc.style.zIndex="3";this.icondoc.style.position="absolute";this.doc.appendChild(this.icondoc);this.icondoc.appendChild(this.iconimgdoc);this.shadowdoc=document.createElement("DIV");if(this.icon.shadowimage!=null){this.shadowdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.icon.shadowimage+")";if(document.all){this.shadowdoc.innerHTML="<IMG src="+this.icon.shadowimage+" style='display:none' />";}else{this.shadowdoc.innerHTML="<IMG src="+this.icon.shadowimage+" >";}this.shadowdoc.style.width=this.icon.shadowsize.width+"px";this.shadowdoc.style.height=this.icon.shadowsize.height+"px";this.shadowdoc.style.zIndex="2";this.shadowdoc.style.position="absolute";this.doc.appendChild(this.shadowdoc);if(this.icon.shdoffset!=null){this.shadowdoc.style.top=this.icon.shdoffset.y+"px";this.shadowdoc.style.left=this.icon.shdoffset.x+"px";}}ZdcObjArray.push(this);}ZdcMarker.prototype.MouseOver=function(e){ZdcEvent.trigger(this,"mouseovermarker");};ZdcMarker.prototype.MouseOut=function(e){ZdcEvent.trigger(this,"mouseoutmarker");};ZdcMarker.prototype.setTopZIndex=function(){if(this.parentLayer.addmapstatus){for(var i=0;i<this.parentLayer.markers.length;i++){if(this.parentLayer.markers[i]!=null){this.parentLayer.markers[i].doc.style.zIndex=0;}}}this.doc.style.zIndex="4";};ZdcMarker.prototype.setDefaultZIndex=function(){this.doc.style.zIndex=0;};ZdcMarker.prototype.setChangeVisible=function(flg){if(flg==null){flg=false;}if(flg){this.doc.style.zIndex="4";}if(this.parentLayer.pMap.mediamode=="print"){return;}this.iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";if(document.all&&!this.changeicongif){this.iconimgdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.icon.changeimage+")";this.iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";}else{this.iconimgdoc.style.filter=null;this.iconimgdoc.src=this.icon.changeimage;this.iconimgdoc.width=this.icon.changesize.width;this.iconimgdoc.height=this.icon.changesize.height;}if(this.icon.changeoffset!=null){this.icondoc.style.top=this.icon.changeoffset.y+"px";this.icondoc.style.left=this.icon.changeoffset.x+"px";}if(this.icon.shadowimage!=null){this.doc.removeChild(this.shadowdoc);}};ZdcMarker.prototype.setChangeHidden=function(){if(this.parentLayer.pMap.mediamode=="print"){return;}if(document.all&&!this.changeicongif){this.iconimgdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\""+this.icon.image+"\")";this.iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";}else{this.iconimgdoc.style.filter=null;this.iconimgdoc.src=this.icon.image;this.iconimgdoc.width=this.icon.size.width;this.iconimgdoc.height=this.icon.size.height;}if(this.icon.shadowimage!=null){this.doc.appendChild(this.shadowdoc);}this.icondoc.style.top="0px";this.icondoc.style.left="0px";this.doc.style.zIndex=0;};ZdcMarker.prototype.setOpacity=function(_2d){with(this.icondoc.style){filter="alpha(opacity="+_2d+")";MozOpacity=(_2d/100);opacity=(_2d/100);}};ZdcMarker.prototype.openMsgWindow=function(p,_2f,_30,_31,_32,_33){this.parentLayer.pMap.openMsgWindow(p,_2f,_30,this.icon.msgoffset,_31,_32,_33);};ZdcMarker.prototype.openUserMsgWindow=function(_34,p,_36,opt){this.parentLayer.pMap.openUserMsgWindow(_34,p,_36,this.icon.msgoffset,opt);};ZdcMarker.prototype.MouseClick=function(e){ZdcEvent.trigger(this,"mouseclickmarker");ZdcEvent.stopPropagation(e);};ZdcMarker.prototype.MouseDblClickMarker=function(e){ZdcEvent.trigger(this,"mousedblclickmarker");ZdcEvent.stopPropagation(e);};ZdcMarker.prototype.MouseDown=function(e){ZdcEvent.trigger(this,"mousedownmarker");ZdcEvent.stopPropagation(e);if(!ZdcCommon.isiPhone()){return false;}};ZdcMarker.prototype.MouseUp=function(e){ZdcEvent.trigger(this,"mouseupmarker");};ZdcMarker.prototype.ConTextMenu=function(e){ZdcEvent.stopPropagation(e);return false;};ZdcMarker.prototype.getPoint=function(){return this.Point;};ZdcMarker.prototype.getIcon=function(){return this.icon;};ZdcMarker.prototype.setType=function(_3d){if(_3d!=null){if(_3d!="dynamic"&&_3d!="static"){this.type=this.type;}else{this.type=_3d;}}if(this.type=="dynamic"){if(document.all){this.icondoc.style.cursor="hand";}else{this.icondoc.style.cursor="pointer";}}else{this.icondoc.style.cursor="default";}};ZdcMarker.prototype.setPoint=function(p){this.Point=p;};ZdcMarker.prototype.redraw=function(){if(this.parentLayer.addmapstatus){var _3f=parseInt(this.parentLayer.doc.style.left);var _40=parseInt(this.parentLayer.doc.style.top);var pxy=this.parentLayer.pMap.convertPoint2Pixel(this.Point);this.doc.style.left=(pxy.x+this.icon.offset.x)+"px";this.doc.style.top=(pxy.y+this.icon.offset.y)+"px";this.doc.style.left=(pxy.x+this.icon.offset.x-_3f)+"px";this.doc.style.top=(pxy.y+this.icon.offset.y-_40)+"px";}};
ZdcMarker.prototype.setIcon=function(ic){this.icon=ic;if(this.icon.image.substr(this.icon.image.length-4,4)==".gif"){this.icongif=true;}else{this.icongif=false;}this.icondoc.style.width=this.icon.size.width+"px";this.icondoc.style.height=this.icon.size.height+"px";this.doc.style.width=this.icon.size.width+"px";this.doc.style.height=this.icon.size.height+"px";this.iconimgdoc.width=this.icon.size.width+"px";this.iconimgdoc.height=this.icon.size.height+"px";if(document.all&&!this.icongif){this.iconimgdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\""+this.icon.image+"\")";this.iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";}else{this.iconimgdoc.style.filter=null;this.iconimgdoc.src=this.icon.image;
this.iconimgdoc.width=this.icon.size.width;this.iconimgdoc.height=this.icon.size.height;}this.icondoc.style.zIndex="3";this.icondoc.style.position="absolute";if(this.icon.shadowimage!=null){this.shadowdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.icon.shadowimage+")";if(document.all){this.shadowdoc.innerHTML="<IMG src="+this.icon.shadowimage+" style='display:none' />";
}else{
this.shadowdoc.innerHTML="<IMG src="+this.icon.shadowimage+" >";}this.shadowdoc.style.width=this.icon.shadowsize.width+"px";this.shadowdoc.style.height=this.icon.shadowsize.height+"px";this.shadowdoc.style.zIndex="2";this.shadowdoc.style.position="absolute";if(this.icon.shdoffset!=null){this.shadowdoc.style.top=this.icon.shdoffset.y+"px";this.shadowdoc.style.left=this.icon.shdoffset.x+"px";}}};ZdcMarker.prototype.dragOn=function(){this.dragopt=true;};ZdcMarker.prototype.dragOff=function(){this.dragopt=null;};function ZdcUserLayer(opt){this.doc=document.createElement("DIV");this.doc.style.position="absolute";this.doc.style.left="0px";this.doc.style.top="0px";this.markers=new Array();this.tooltips=new Array();this.markercount=0;this.minzoom=1;this.maxzoom=18;if(opt==null){this.type="manual";
}else{
this.type=opt;}
this.addmapstatus=false;this.canvasWidth=2048;this.canvasHeight=2048;this.layerID=-1;ZdcObjArray.push(this);}ZdcUserLayer.prototype.getMarkerCount=function(){this.markercount=0;for(var i=0;i<this.markers.length;i++){if(this.markers[i]!=null){this.markercount++;}}return this.markercount;};ZdcUserLayer.prototype.addMarker=function(m){var _46=parseInt(this.doc.style.left);
var _47=parseInt(this.doc.style.top);m.parentLayer=this;var id=0;while(this.markers[id]!=null){id++;}
this.markers[id]=m;
if(this.addmapstatus){
var pxy=this.pMap.convertPoint2Pixel(this.markers[id].Point);
this.markers[id].doc.style.left=(pxy.x+this.markers[id].icon.offset.x-_46)+"px";
this.markers[id].doc.style.top=(pxy.y+this.markers[id].icon.offset.y-_47)+"px";
this.doc.appendChild(this.markers[id].doc);
}
if(this.markers[id].constopt!=true){
this.markers[id].icondoc.onmouseout=this.markers[id].MouseOut.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.onclick=this.markers[id].MouseClick.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.ondblclick=this.markers[id].MouseDblClickMarker.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.onmousedown=this.markers[id].MouseDown.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.onmouseup=this.markers[id].MouseUp.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.onmouseover=this.markers[id].MouseOver.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.oncontextmenu=this.markers[id].ConTextMenu.bindAsEventListener(this.markers[id]);if(ZdcCommon.isiPhone()){this.markers[id].icondoc.ontouchstart=this.markers[id].MouseDown.bindAsEventListener(this.markers[id]);
this.markers[id].icondoc.ontouchend=this.markers[id].MouseClick.bindAsEventListener(this.markers[id]);}}return id;};ZdcUserLayer.prototype.clearMarker=function(flg){
if(flg==true){var _4b=true;
}else{
var _4b=false;
}
for(var i=this.markers.length-1;i>=0;i--){
if(this.markers[i]!=null){if(_4b==false&&this.addmapstatus){try{this.doc.removeChild(this.markers[i].doc);}catch(e){}}this.markers[i].icondoc.onmouseover=null;this.markers[i].icondoc.onmouseout=null;this.markers[i].icondoc.onclick=null;this.markers[i].icondoc.ondblclick=null;this.markers[i].icondoc.onmousedown=null;this.markers[i].icondoc.onmouseup=null;this.markers[i].icondoc.oncontextmenu=null;if(ZdcCommon.isiPhone()){this.markers[i].icondoc.ontouchstart=null;this.markers[i].icondoc.ontouchend=null;}ZdcEvent.clearInstanceListeners(this.markers[i]);this.markers[i]=null;}}};ZdcUserLayer.prototype.removeMarkerById=function(id){
if(this.markers[id]!=null){
if(this.addmapstatus){this.doc.removeChild(this.markers[id].doc);}this.markers[id].icondoc.onmouseover=null;this.markers[id].icondoc.onmouseout=null;this.markers[id].icondoc.onclick=null;this.markers[id].icondoc.ondblclick=null;this.markers[id].icondoc.onmousedown=null;this.markers[id].icondoc.onmouseup=null;this.markers[id].icondoc.oncontextmenu=null;
if(ZdcCommon.isiPhone()){this.markers[id].icondoc.ontouchstart=null;this.markers[id].icondoc.ontouchend=null;}ZdcEvent.clearInstanceListeners(this.markers[id]);this.markers[id]=null;}};ZdcUserLayer.prototype.removeMarker=function(mrk){var id=0;if(!mrk){return -1;}for(id=this.markers.length-1;id>=0;id--){
if(this.markers[id]==mrk){break;}}if(id<0){return -1;}if(this.markers[id]==mrk){if(this.addmapstatus){this.doc.removeChild(this.markers[id].doc);}this.markers[id].icondoc.onmouseover=null;this.markers[id].icondoc.onmouseout=null;this.markers[id].icondoc.onclick=null;this.markers[id].icondoc.ondblclick=null;this.markers[id].icondoc.onmousedown=null;this.markers[id].icondoc.onmouseup=null;this.markers[id].icondoc.oncontextmenu=null;
if(ZdcCommon.isiPhone()){this.markers[id].icondoc.ontouchstart=null;this.markers[id].icondoc.ontouchend=null;}ZdcEvent.clearInstanceListeners(this.markers[id]);this.markers[id]=null;return;}else{return -1;}};ZdcUserLayer.prototype.setLayerType=function(opt){if(opt!=null){this.type=opt;}};ZdcUserLayer.prototype.setLayerScale=function(s1,s2){var vs1=parseInt(s1);var vs2=parseInt(s2);if(vs1<=vs2&&Number(vs1)>=0&&Number(vs2)<19){this.minzoom=vs1;this.maxzoom=vs2;}else{return -1;}};ZdcUserLayer.prototype.getMarkerById=function(id){if(this.markers[id]!=null){return this.markers[id];}else{return null;}};ZdcUserLayer.prototype.addZdcTooltip=function(t){var _57=parseInt(this.doc.style.left);var _58=parseInt(this.doc.style.top);t.parentLayer=this;var id=0;while(this.tooltips[id]!=null){id++;}this.tooltips[id]=t;this.tooltips[id].id=id;if(this.addmapstatus){var pxy=this.pMap.convertPoint2Pixel(t.Point);this.tooltips[id].doc.style.left=parseInt(pxy.x)+parseInt(this.tooltips[id].offset.x)-parseInt(_57)+"px";this.tooltips[id].doc.style.top=parseInt(pxy.y)+parseInt(this.tooltips[id].offset.y)-parseInt(_58)+"px";this.doc.appendChild(this.tooltips[id].doc);}this.tooltips[id].doc.onmouseout=this.tooltips[id].MouseOut.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.onclick=this.tooltips[id].MouseClick.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.ondblclick=this.tooltips[id].MouseDblClickTooltip.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.onmousedown=this.tooltips[id].MouseDown.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.onmouseup=this.tooltips[id].MouseUp.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.onmouseover=this.tooltips[id].MouseOver.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.oncontextmenu=this.tooltips[id].ConTextMenu.bindAsEventListener(this.tooltips[id]);this.tooltips[id].AddMouseWheelListener(this.tooltips[id].WheelStop.bindAsEventListener(this.tooltips[id]),false);if(ZdcCommon.isiPhone()){this.tooltips[id].doc.ontouchstart=this.tooltips[id].MouseDown.bindAsEventListener(this.tooltips[id]);this.tooltips[id].doc.ontouchend=this.tooltips[id].MouseClick.bindAsEventListener(this.tooltips[id]);}return id;};ZdcUserLayer.prototype.hiddenZdcTooltipById=function(id){if(this.tooltips[id]){this.tooltips[id].doc.style.width="0px";this.tooltips[id].doc.style.height="0px";this.tooltips[id].doc.style.display="none";}};ZdcUserLayer.prototype.visibleZdcTooltipById=function(id){if(this.tooltips[id]){this.tooltips[id].doc.style.width=this.tooltips[id].firstwidth;this.tooltips[id].doc.style.height=this.tooltips[id].firstheight;this.tooltips[id].doc.style.display="block";}};ZdcUserLayer.prototype.removeZdcTooltipById=function(id){if(this.tooltips[id]!=null){if(this.addmapstatus){this.doc.removeChild(this.tooltips[id].doc);}this.tooltips[id].doc.onmouseover=null;this.tooltips[id].doc.onmouseout=null;this.tooltips[id].doc.onclick=null;this.tooltips[id].doc.ondblclick=null;this.tooltips[id].doc.onmousedown=null;this.tooltips[id].doc.onmouseup=null;this.tooltips[id].doc.oncontextmenu=null;if(ZdcCommon.isiPhone()){this.tooltips[id].doc.ontouchstart=null;this.tooltips[id].doc.ontouchend=null;}ZdcEvent.clearInstanceListeners(this.tooltips[id]);this.tooltips[id]=null;}};ZdcUserLayer.prototype.removeZdcTooltip=function(_5e){var id=0;if(!_5e){return -1;}for(id=this.tooltips.length-1;id>=0;id--){if(this.tooltips[id]==_5e){break;}}if(id<0){return -1;}if(this.tooltips[id]==_5e){if(this.addmapstatus){this.doc.removeChild(this.tooltips[id].doc);}this.tooltips[id].doc.onmouseover=null;this.tooltips[id].doc.onmouseout=null;this.tooltips[id].doc.onclick=null;this.tooltips[id].doc.ondblclick=null;this.tooltips[id].doc.onmousedown=null;this.tooltips[id].doc.onmouseup=null;this.tooltips[id].doc.oncontextmenu=null;if(ZdcCommon.isiPhone()){this.tooltips[id].doc.ontouchstart=null;this.tooltips[id].doc.ontouchend=null;}ZdcEvent.clearInstanceListeners(this.tooltips[id]);this.tooltips[id]=null;return;}else{return -1;}};ZdcUserLayer.prototype.clearZdcTooltip=function(){for(var i=this.tooltips.length-1;i>=0;i--){if(this.tooltips[i]!=null){this.doc.removeChild(this.tooltips[i].doc);this.tooltips[i].doc.onmouseover=null;this.tooltips[i].doc.onmouseout=null;this.tooltips[i].doc.onclick=null;this.tooltips[i].doc.ondblclick=null;this.tooltips[i].doc.onmousedown=null;this.tooltips[i].doc.onmouseup=null;this.tooltips[i].doc.oncontextmenu=null;if(ZdcCommon.isiPhone()){this.tooltips[i].doc.ontouchstart=null;this.tooltips[i].doc.ontouchend=null;}ZdcEvent.clearInstanceListeners(this.tooltips[i]);this.tooltips[i]=null;}}};ZdcUserLayer.prototype.getTooltipById=function(id){if(this.tooltips[id]!=null){return this.tooltips[id];}else{return null;}};ZdcUserLayer.prototype.getTooltipCount=function(){this.tooltipcount=0;for(var i=0;i<this.tooltips.length;i++){if(this.tooltips[i]!=null){this.tooltipcount++;}}return this.tooltipcount;};ZdcUserLayer.prototype.setLayerZindex=function(idx){var lyr=null;for(var k=0;k<this.ZdcUserLayers.length;k++){if(this.ZdcUserLayers[k].layerID==id){lyr=this.ZdcUserLayers[k];break;}}if(!lyr){return false;}if(toolzindex>10209){return false;}this.doc.style.zIndex=idx;return true;};function ZdcUserMsgWindow(){this.openstatus=false;this.msgoffset=new ZdcPixel(0,0);this.msgpixel=new ZdcPixel(0,0);this.doc=document.createElement("DIV");this.doc.style.zIndex="10100";this.doc.style.position="absolute";this.basex=0;this.basey=0;this.baseoffsetx=0;this.baseoffsety=0;this.basedoc=document.createElement("DIV");this.basedoc.style.zIndex="3";this.basedoc.style.top=this.basex+"px";this.basedoc.style.left=this.basey+"px";this.basedoc.style.position="absolute";this.shadowdoc=document.createElement("DIV");this.shadowdoc.style.zIndex="2";this.shadowdoc.style.position="absolute";this.textbkdoc=document.createElement("DIV");this.textbkdoc.style.zIndex="4";this.textbkdoc.style.position="absolute";this.textdoc=document.createElement("DIV");this.textdoc.style.zIndex="6";this.textdoc.style.position="absolute";this.textdoc.style.top="0px";this.textdoc.style.left="0px";this.closedoc=document.createElement("DIV");this.closedoc.style.zIndex="5";this.closedoc.style.position="absolute";this.changedoc=document.createElement("DIV");this.changedoc.style.zIndex="5";this.changedoc.style.position="absolute";this.textdoc.onmousedown=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.textdoc.onmousemove=this.MouseMoveMsgWindow.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.textdoc.ontouchstart=this.MouseDblClickMsgWindow.bindAsEventListener(this);}this.textbkdoc.onmousedown=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.textbkdoc.onmousemove=this.MouseMoveMsgWindow.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.textbkdoc.ontouchstart=this.MouseDblClickMsgWindow.bindAsEventListener(this);}this.doc.ondblclick=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.doc.onclick=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.doc.oncontextmenu=this.MouseMoveMsgWindow.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.doc.ontouchend=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.doc.ongesturestart=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.doc.ongesturechange=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.doc.ongestureend=this.MouseDblClickMsgWindow.bindAsEventListener(this);this.doc.ontouchmove=this.MouseDblClickMsgWindow.bindAsEventListener(this);}this.closedoc.onclick=this.MouseCloseMsgWindow.bindAsEventListener(this);this.closedoc.onmouseover=this.MouseCloseOver.bindAsEventListener(this);this.closedoc.onmouseout=this.MouseCloseOut.bindAsEventListener(this);this.closedoc.onmousedown=this.MouseMoveMsgWindow.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.closedoc.ontouchstart=this.MouseMoveMsgWindow.bindAsEventListener(this);this.closedoc.ontouchend=this.MouseCloseMsgWindow.bindAsEventListener(this);}this.changedoc.onclick=this.MouseChangeMsgWindow.bindAsEventListener(this);this.changedoc.onmouseover=this.MouseChangeOver.bindAsEventListener(this);this.changedoc.onmouseout=this.MouseChangeOut.bindAsEventListener(this);this.changedoc.onmousedown=this.MouseMoveMsgWindow.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.changedoc.ontouchstart=this.MouseMoveMsgWindow.bindAsEventListener(this);this.changedoc.ontouchend=this.MouseChangeMsgWindow.bindAsEventListener(this);}this.doc.appendChild(this.basedoc);this.doc.appendChild(this.shadowdoc);this.doc.appendChild(this.textbkdoc);this.doc.appendChild(this.closedoc);this.doc.appendChild(this.changedoc);this.doc.appendChild(this.textdoc);this.AddMouseWheelListener(this.MouseDblClickMsgWindow.bindAsEventListener(this),false);ZdcObjArray.push(this);}ZdcUserMsgWindow.prototype.AddMouseWheelListener=function(_66,cap){if(this.textbkdoc.addEventListener){this.doc.addEventListener("DOMMouseScroll",_66,cap);this.doc.addEventListener("mousewheel",_66,cap);}else{if(this.doc.attachEvent){this.doc.attachEvent("onmousewheel",_66);}}};ZdcUserMsgWindow.prototype.setImage=function(_68,_69,_6a,_6b,_6c,_6d,_6e,_6f,_70,_71,_72){this.baseimage=_68;this.basedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_68+")";this.basedoc.style.width=_69.width+"px";this.basedoc.style.height=_69.height+"px";if(document.all){this.basedoc.innerHTML="<IMG src="+_68+" style='display:none' />";}else{this.basedoc.innerHTML="<IMG src="+_68+" />";}if(_6e!=null&&_6f!=null){this.shadowdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_6e+")";this.shadowdoc.style.width=_6f.width+"px";this.shadowdoc.style.height=_6f.height+"px";if(document.all){this.shadowdoc.innerHTML="<IMG src="+_6e+" style='display:none' />";}else{this.shadowdoc.innerHTML="<IMG src="+_6e+" />";}}if(_6c!=null&&_6d!=null){this.closedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_6c+")";this.closedoc.style.width=_6d.width+"px";this.closedoc.style.height=_6d.height+"px";if(document.all){this.closedoc.innerHTML="<IMG src="+_6c+" style='display:none' />";}else{this.closedoc.innerHTML="<IMG src="+_6c+" />";}}if(_71!=null&&_72!=null){this.changedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_71+")";this.changedoc.style.width=_72.width+"px";this.changedoc.style.height=_72.height+"px";if(document.all){this.changedoc.innerHTML="<IMG src="+_71+" style='display:none' />";}else{this.changedoc.innerHTML="<IMG src="+_71+" />";}}if(_6a!=null&&_6b!=null){this.textbkdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_6a+")";
this.textbkdoc.style.width=_6b.width+"px";this.textbkdoc.style.height=_6b.height+"px";this.textdoc.style.width=_6b.width+"px";this.textdoc.style.height=_6b.height+"px";if(document.all){this.textbkdoc.innerHTML="<IMG src="+_6a+" style='display:none' />";}else{this.textbkdoc.innerHTML="<IMG src="+_6a+" />";}}if(_70!=null){this.printimage=_70;}};ZdcUserMsgWindow.prototype.setTextClass=function(cls){this.textdoc.setAttribute("className",cls);this.textdoc.setAttribute("class",cls);};ZdcUserMsgWindow.prototype.setDocOffset=function(x,y){this.baseoffsetx=x;this.baseoffsety=y;};ZdcUserMsgWindow.prototype.setDocPosition=function(_76,_77,_78,_79,_7a,_7b,_7c,_7d,_7e,_7f){this.basedoc.style.top=_76+"px";this.basedoc.style.left=_77+"px";if(_7a!=null&&_7b!=null){this.closedoc.style.top=_7a+"px";this.closedoc.style.left=_7b+"px";}if(_7e!=null&&_7f!=null){this.changedoc.style.top=_7e+"px";this.changedoc.style.left=_7f+"px";}if(_7c!=null&&_7d!=null){this.shadowdoc.style.top=_7c+"px";this.shadowdoc.style.left=_7d+"px";}if(_78!=null&&_79!=null){this.textdoc.style.top=_78+"px";this.textdoc.style.left=_79+"px";this.textbkdoc.style.top=_78+"px";this.textbkdoc.style.left=_79+"px";}};ZdcUserMsgWindow.prototype.MouseChangeOver=function(e){if(document.all){this.changedoc.style.cursor="hand";}else{this.changedoc.style.cursor="pointer";}};ZdcUserMsgWindow.prototype.MouseChangeOut=function(e){this.changedoc.style.cursor="default";};ZdcUserMsgWindow.prototype.MouseChangeMsgWindow=function(e){this.pMap.usermsgwindowchangeflg=true;ZdcEvent.trigger(this.pMap,"usermsgclickwins");ZdcEvent.stopPropagation(e);};ZdcUserMsgWindow.prototype.MouseDblClickMsgWindow=function(e){ZdcEvent.stopPropagation(e);};ZdcUserMsgWindow.prototype.MouseMoveMsgWindow=function(_84){ZdcEvent.stopPropagation(_84);return false;};ZdcUserMsgWindow.prototype.MouseCloseMsgWindow=function(_85){this.closedoc.style.cursor="default";this.doc.style.visibility="hidden";this.pMap.closeUserMsgWindow();ZdcEvent.stopPropagation(_85);ZdcEvent.trigger(this.pMap,"usermsgclickclose");};ZdcUserMsgWindow.prototype.MouseCloseOver=function(_86){if(document.all){this.closedoc.style.cursor="hand";}else{this.closedoc.style.cursor="pointer";}};ZdcUserMsgWindow.prototype.MouseCloseOut=function(_87){this.closedoc.style.cursor="default";};ZdcUserMsgWindow.prototype.MouseDownDocNotPropaReturnFalse=function(_88){return false;};function ZdcMsgWindow(t){if(t!=null){this.type=Number(t);}else{this.type=99;}this.largeopen=false;this.largeonly=false;this.smallonly=false;this.openstatus=false;this.msgoffset=new ZdcPixel(0,0);this.doc=document.createElement("DIV");this.doc.style.zIndex="10100";this.doc.style.position="absolute";this.doclarge=document.createElement("DIV");this.doclarge.style.position="absolute";this.doclarge.style.width="247px";this.doclarge.style.height="154px";this.docsmall=document.createElement("DIV");this.docsmall.style.position="absolute";this.docsmall.style.width="247px";this.docsmall.style.height="54px";this.docchange=document.createElement("DIV");this.docchange.style.position="absolute";this.docclose=document.createElement("DIV");this.docclose.style.position="absolute";this.doctextlarge=document.createElement("DIV");this.doctextlarge.style.position="absolute";this.doctextsmall=document.createElement("DIV");this.doctextsmall.style.position="absolute";this.title=new Object();this.node=new Object();if(this.type!=99){if(this.type!=0){this.LargeImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_large"+this.type+".png";this.SmallImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_small"+this.type+".png";}else{this.LargeImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_large"+this.type+".gif";this.SmallImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_small"+this.type+".gif";}}else{this.LargeImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_large.png";this.SmallImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_small.png";}this.LargePrintImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_large0.gif";this.SmallPrintImage=ZdcCommon.ZdcMapServer+"/img/zdc_hukidashi_small0.gif";this.CloseImage=ZdcCommon.ZdcMapServer+"/img/MsgWindowClose.png";this.ChgLargeImage=ZdcCommon.ZdcMapServer+"/img/MsgWindowChgLarge.png";this.ChgSmallImage=ZdcCommon.ZdcMapServer+"/img/MsgWindowChgSmall.png";if(document.all){if(this.type!=0){this.doclarge.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.LargeImage+")";this.docsmall.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.SmallImage+")";this.doclarge.innerHTML="<IMG src="+this.LargeImage+" style='display:none'>";this.docsmall.innerHTML="<IMG src="+this.SmallImage+" style='display:none'>";}else{this.doclarge.innerHTML="<IMG src="+this.LargeImage+" >";this.docsmall.innerHTML="<IMG src="+this.SmallImage+" >";}this.docclose.innerHTML="<IMG src="+this.CloseImage+">";}else{this.doclarge.innerHTML="<IMG src="+this.LargeImage+">";this.docsmall.innerHTML="<IMG src="+this.SmallImage+">";this.docclose.innerHTML="<IMG src="+this.CloseImage+">";}this.BaseX=0;this.BaseY=0;this.doclarge.style.left=this.BaseX+"px";this.doclarge.style.top=(this.BaseY-150)+"px";this.docsmall.style.left=this.BaseX+"px";this.docsmall.style.top=(this.BaseY-50)+"px";this.doctextlarge.style.left=(this.BaseX+7)+"px";this.doctextsmall.style.left=(this.BaseX+7)+"px";this.doctextlarge.style.top=(this.BaseY-140)+"px";this.doctextsmall.style.top=(this.BaseY-39)+"px";this.doctextsmall.style.clip="rect(-39px "+"240px "+"16px "+"0px)";this.docclose.style.left=(this.BaseX+217)+"px";if(this.largeopen){this.docclose.style.top=(this.BaseY-140)+"px";this.docchange.innerHTML="<IMG src="+this.ChgSmallImage+">";this.docchange.style.top=(this.BaseY-127)+"px";this.docchange.style.left=(this.BaseX+217)+"px";}else{this.docclose.style.top=(this.BaseY-37)+"px";this.docchange.innerHTML="<IMG src="+this.ChgLargeImage+">";this.docchange.style.top=(this.BaseY-37)+"px";this.docchange.style.left=(this.BaseX+205)+"px";}this.Point=new ZdcPoint();this.doc.appendChild(this.doclarge);this.doc.appendChild(this.docsmall);this.doc.appendChild(this.docclose);this.doc.appendChild(this.docchange);this.doc.onmousedown=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.onclick=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.ondblclick=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.oncontextmenu=this.MouseDownCloseMsgWindow.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.doc.ontouchstart=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.ontouchend=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.ongesturestart=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.ongesturechange=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.ongestureend=this.MouseDownMsgWindow.bindAsEventListener(this);this.doc.ontouchmove=this.MouseDownMsgWindow.bindAsEventListener(this);}this.docclose.onmousedown=this.MouseDownCloseMsgWindow.bindAsEventListener(this);this.docclose.onclick=this.MouseCloseMsgWindow.bindAsEventListener(this);this.docclose.onmouseover=this.MouseCloseOver.bindAsEventListener(this);this.docclose.onmouseout=this.MouseCloseOut.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.docclose.ontouchstart=this.MouseDownCloseMsgWindow.bindAsEventListener(this);this.docclose.ontouchend=this.MouseCloseMsgWindow.bindAsEventListener(this);}this.docchange.onmousedown=this.MouseDownCloseMsgWindow.bindAsEventListener(this);this.docchange.onclick=this.MouseChangeMsgWindow.bindAsEventListener(this);this.docchange.onmouseover=this.MouseChangeOver.bindAsEventListener(this);this.docchange.onmouseout=this.MouseChangeOut.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.docchange.ontouchstart=this.MouseDownCloseMsgWindow.bindAsEventListener(this);this.docchange.ontouchend=this.MouseChangeMsgWindow.bindAsEventListener(this);}this.docsmall.onmousedown=this.MouseDownDocNotPropaReturnFalse.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.docsmall.ontouchstart=this.MouseDownDocNotPropaReturnFalse.bindAsEventListener(this);}this.doclarge.onmousedown=this.MouseDownDocNotPropaReturnFalse.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.doclarge.ontouchstart=this.MouseDownDocNotPropaReturnFalse.bindAsEventListener(this);}this.AddMouseWheelListener(this.MouseDownMsgWindow.bindAsEventListener(this),true);ZdcObjArray.push(this);}ZdcMsgWindow.prototype.AddMouseWheelListener=function(_8a,cap){if(this.doc.addEventListener){this.doc.addEventListener("DOMMouseScroll",_8a,cap);this.doc.addEventListener("mousewheel",_8a,cap);}else{if(this.doc.attachEvent){this.doc.attachEvent("onmousewheel",_8a);}}};ZdcMsgWindow.prototype.MouseDownDocNotPropaReturnFalse=function(e){return false;};ZdcMsgWindow.prototype.MouseDownMsgWindow=function(e){ZdcEvent.stopPropagation(e);};ZdcMsgWindow.prototype.MouseCloseOver=function(e){if(document.all){this.docclose.style.cursor="hand";}else{this.docclose.style.cursor="pointer";}};ZdcMsgWindow.prototype.MouseChangeOver=function(e){if(document.all){this.docchange.style.cursor="hand";}else{this.docchange.style.cursor="pointer";}};ZdcMsgWindow.prototype.MouseCloseOut=function(e){this.docclose.style.cursor="default";};ZdcMsgWindow.prototype.MouseChangeOut=function(e){this.docchange.style.cursor="default";};ZdcMsgWindow.prototype.MouseDownCloseMsgWindow=function(e){ZdcEvent.stopPropagation(e);return false;};ZdcMsgWindow.prototype.MouseCloseMsgWindow=function(e){this.pMap.msgopenstatus=false;if(ZdcCommon.UserAgentIsFireFox()){this.pMap.SetMsgWindowOnDrag();}this.openstatus=false;this.hiddenMsg();ZdcEvent.stopPropagation(e);};ZdcMsgWindow.prototype.MouseChangeMsgWindow=function(e){if(this.largeopen){this.docclose.style.top=(this.BaseY-37)+"px";this.docchange.style.top=(this.BaseY-37)+"px";this.docchange.style.left=(this.BaseX+205)+"px";this.visibleSmallMsg();this.largeopen=false;}else{this.docclose.style.top=(this.BaseY-140)+"px";this.docchange.style.top=(this.BaseY-127)+"px";this.docchange.style.left=(this.BaseX+217)+"px";this.visibleLargeMsg();this.largeopen=true;}ZdcEvent.stopPropagation(e);};
ZdcMsgWindow.prototype.visibleMsg=function(){if(this.largeopen){this.doclarge.style.visibility="visible";this.doctextlarge.style.visibility="visible";this.docchange.innerHTML="<IMG src="+this.ChgLargeImage+">";}else{this.docsmall.style.visibility="visible";this.doctextsmall.style.visibility="visible";if(!this.smallonly){this.docchange.innerHTML="<IMG src="+this.ChgSmallImage+">";}}if(this.largeonly||this.smallonly){this.docchange.style.visibility="hidden";}else{this.docchange.style.visibility="visible";}this.docclose.style.visibility="visible";};ZdcMsgWindow.prototype.hiddenMsg=function(){this.doclarge.style.visibility="hidden";this.docsmall.style.visibility="hidden";this.docchange.style.visibility="hidden";this.docclose.style.visibility="hidden";this.doctextsmall.style.visibility="hidden";this.doctextlarge.style.visibility="hidden";while(this.doctextlarge.lastChild!=null){this.doctextlarge.removeChild(this.doctextlarge.lastChild);}while(this.doctextsmall.lastChild!=null){this.doctextsmall.removeChild(this.doctextsmall.lastChild);}if(!this.largeonly){this.largeopen=false;this.docclose.style.top=(this.BaseY-37)+"px";this.docchange.style.top=(this.BaseY-37)+"px";this.docchange.style.left=(this.BaseX+217)+"px";}ZdcEvent.trigger(this.pMap,"closemsgwindow");};ZdcMsgWindow.prototype.visibleLargeMsg=function(){this.doclarge.style.visibility="visible";this.docsmall.style.visibility="hidden";this.doctextlarge.style.visibility="visible";this.doctextsmall.style.visibility="hidden";this.docclose.style.visibility="visible";if(this.largeonly){this.docclose.style.top=(this.BaseY-140)+"px";this.docchange.style.visibility="hidden";}else{this.docchange.style.visibility="visible";}this.docchange.innerHTML="<IMG src="+this.ChgSmallImage+">";this.largeopen=true;};ZdcMsgWindow.prototype.visibleSmallMsg=function(){this.doclarge.style.visibility="hidden";this.docsmall.style.visibility="visible";this.doctextlarge.style.visibility="hidden";this.doctextsmall.style.visibility="visible";this.docclose.style.visibility="visible";this.docchange.style.left=(this.BaseX+205)+"px";if(this.smallonly){this.docclose.style.top=(this.BaseY-37)+"px";this.docchange.style.visibility="hidden";}else{this.docchange.style.visibility="visible";}this.docchange.innerHTML="<IMG src="+this.ChgLargeImage+">";this.largeopen=false;};ZdcMsgWindow.prototype.getStatus=function(){return this.openstatus;};function ZdcMapCenter(_95){this.doc=document.createElement("DIV");this.doc.setAttribute("id","mapcenter");this.doc.style.position="absolute";this.doc.style.zIndex="10040";this.doc.style.filter="alpha(opacity=100)";this.doc.style.mozOpacity="1.0";this.doc.style.opacity="1.0";if(_95==null){this.type=1;}else{this.type=Number(_95);}switch(this.type){case 1:default:this.image=ZdcCommon.ZdcMapServer+"/img/MapCenter.png";this.printimage=ZdcCommon.ZdcMapServer+"/img/MapCenter.gif";this.offset=new ZdcPixel(-11,-11);this.doc.style.width="22px";this.doc.style.height="22px";break;case 2:this.image=ZdcCommon.ZdcMapServer+"/img/MapCenter1.png";this.printimage=ZdcCommon.ZdcMapServer+"/img/MapCenter1.gif";this.offset=new ZdcPixel(-7,-7);this.doc.style.width="14px";this.doc.style.height="14px";break;case 3:this.image=ZdcCommon.ZdcMapServer+"/img/MapCenter2.png";this.printimage=ZdcCommon.ZdcMapServer+"/img/MapCenter2.gif";this.offset=new ZdcPixel(-15,-15);this.doc.style.width="30px";this.doc.style.height="30px";break;case 4:this.image=ZdcCommon.ZdcMapServer+"/img/MapCenter3.png";this.printimage=ZdcCommon.ZdcMapServer+"/img/MapCenter3.gif";this.offset=new ZdcPixel(-13,-13);this.doc.style.width="26px";this.doc.style.height="26px";break;case 5:this.image=ZdcCommon.ZdcMapServer+"/img/icon-center.gif";this.printimage=ZdcCommon.ZdcMapServer+"/img/icon-center.gif";this.offset=new ZdcPixel(-5,-5);this.doc.style.width="10px";this.doc.style.height="10px";break;case 6:this.image=ZdcCommon.ZdcMapServer+"/img/MapCenter4.png";this.printimage=ZdcCommon.ZdcMapServer+"/img/MapCenter4.gif";this.offset=new ZdcPixel(-11,-11);this.doc.style.width="22px";this.doc.style.height="22px";break;}if(typeof (_95)=="object"){if(_95.image!=""&&_95.offset!=""){this.type=null;this.image=_95.image;this.offset=_95.offset;}}if(document.all){this.doc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.image+")";this.doc.innerHTML="<IMG src="+this.image+" style='display:none' />";}else{this.doc.innerHTML="<IMG src="+this.image+">";}this.id="Center_1_1";ZdcObjArray.push(this);}function ZdcMapCenterInfoBox(f){if(f!=null){if(f<3){this.type=f;}else{this.type=1;}}else{this.type=1;}this.doc1=document.createElement("DIV");this.doc1.setAttribute("id","infobox1");this.doc2=document.createElement("DIV");this.doc2.setAttribute("id","infobox2");this.doc1.style.zIndex="10050";this.doc2.style.zIndex="10050";this.id="CenterInfo_1_1";if(this.type==1){this.doc1.style.filter="alpha(opacity=75)";this.doc1.style.mozOpacity="0.75";this.doc1.style.opacity="0.75";}else{this.doc1.style.filter="alpha(opacity=50)";this.doc1.style.mozOpacity="0.5";this.doc1.style.opacity="0.5";}this.doc2.style.filter="alpha(opacity=100)";this.doc2.style.mozOpacity="1.0";this.doc2.style.opacity="1.0";if(this.type==1){this.ZdcCenterInfoImage=ZdcCommon.ZdcMapServer+"/img/CenterInfoBox.png";}else{this.ZdcCenterInfoImage=ZdcCommon.ZdcMapServer+"/img/CenterInfoBox2.png";}ZdcObjArray.push(this);}ZdcMapCenterInfoBox.prototype.OnMouseDownDoc=function(_97){ZdcEvent.stopPropagation(_97);return false;};ZdcMapCenterInfoBox.prototype.OnMouseDblClickDoc=function(_98){ZdcEvent.stopPropagation(_98);return false;};function ZdcScaleBar(f){if(f!=null){if(f==1||f==2||f==3){this.type=f;}else{this.type=1;}}else{this.type=1;}this.doc1=document.createElement("DIV");this.doc2=document.createElement("DIV");this.doc1.setAttribute("id","scalebar1");this.doc2.setAttribute("id","scalebar2");this.doc1.style.zIndex="10030";this.doc2.style.zIndex="10030";if(this.type==1){this.ZdcScaleImage=ZdcCommon.ZdcMapServer+"/img/ScaleBase.gif";this.ZdcScaleBaseImage=ZdcCommon.ZdcMapServer+"/img/ScaleBase";}else{if(this.type==2){this.ZdcScaleImage=ZdcCommon.ZdcMapServer+"/img/ScaleBar2.png";this.ZdcScaleBaseImage=ZdcCommon.ZdcMapServer+"/img/ScaleBase";}else{if(this.type==3){this.ZdcScaleImage=ZdcCommon.ZdcMapServer+"/img/ScaleBase.gif";this.ZdcScaleBaseImage=ZdcCommon.ZdcMapServer+"/img/ScaleBar3_";}else{this.ZdcScaleImage=ZdcCommon.ZdcMapServer+"/img/ScaleBase.gif";this.ZdcScaleBaseImage=ZdcCommon.ZdcMapServer+"/img/ScaleBase";}}}this.id="ScaleBar_1_1";if(this.type==1){this.doc1.style.filter="alpha(opacity=75)";this.doc1.style.mozOpacity="0.75";this.doc1.style.opacity="0.75";}else{this.doc1.style.filter="alpha(opacity=100)";this.doc1.style.mozOpacity="1.0";this.doc1.style.opacity="1.0";}this.doc2.style.filter="alpha(opacity=100)";this.doc2.style.mozOpacity="1.0";this.doc2.style.opacity="1.0";ZdcObjArray.push(this);}ZdcScaleBar.prototype.OnMouseDownDoc=function(_9a){ZdcEvent.stopPropagation(_9a);return false;};ZdcScaleBar.prototype.OnMouseDblClickDoc=function(_9b){ZdcEvent.stopPropagation(_9b);return false;};function ZdcUserControl(){this.basetop=0;this.baseleft=0;this.doc=document.createElement("DIV");this.doc.setAttribute("id","usercontrol");this.doc.style.zIndex="10200";this.doc.style.position="absolute";this.doc.style.webkitUserSelect="none";this.basedoc=document.createElement("DIV");this.basedoc.style.position="absolute";this.basedoc.style.zIndex="2";this.shadowdoc=document.createElement("DIV");this.shadowdoc.style.position="absolute";this.shadowdoc.style.zIndex="1";this.doc.appendChild(this.shadowdoc);this.doc.appendChild(this.basedoc);if(ZdcCommon.UserAgentIsSafari()){this.mousecursor="default";this.basedoc.style.cursor="default";}else{this.mousecursor="hand";if(document.all){this.basedoc.style.cursor="hand";}else{this.basedoc.style.cursor="pointer";}}this.actionid=0;this.aid=1;this.action=new Array();for(var i=1;i<10;i++){var _9d=new ZdcPixel(0,0);var _9e=new ZdcPixel(0,0);this.action[i]=new Object();this.action[i].box=new ZdcPixelBox(_9d,_9e);}this.doc.onmousedown=this.OnMouseDownDoc.bindAsEventListener(this);this.doc.onmouseup=this.OnMouseUpDoc.bindAsEventListener(this);this.doc.onclick=this.OnMouseClickDoc.bindAsEventListener(this);this.doc.ondblclick=this.OnMouseDblClickDoc.bindAsEventListener(this);this.doc.onmousemove=this.OnMouseMoveDoc.bindAsEventListener(this);this.doc.onmouseover=this.OnMouseOverDoc.bindAsEventListener(this);this.doc.onmouseout=this.OnMouseOutDoc.bindAsEventListener(this);this.doc.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.doc.ontouchstart=this.OnMouseUpDoc.bindAsEventListener(this);this.doc.ontouchend=this.OnMouseDownDoc.bindAsEventListener(this);}ZdcObjArray.push(this);}ZdcUserControl.prototype.setMouseCursor=function(_9f,_a0,_a1){if(ZdcCommon.UserAgentIsSafari()){return -1;}if(_9f=="users"){this.cursorflg=true;this.usercursor1=_a0;this.usercursor2=_a1;this.basedoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(_9f!="default"&&_9f!="hand"){return -1;}this.cursorflg=false;this.mousecursor=_9f;if(this.mousecursor=="hand"){if(document.all){this.basedoc.style.cursor="hand";}else{this.basedoc.style.cursor="pointer";}}if(this.mousecursor=="default"){this.basedoc.style.cursor="default";}}};ZdcUserControl.prototype.setImage=function(_a2,_a3,_a4,_a5){this.basedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_a2+")";this.basedoc.style.width=_a3.width+"px";this.basedoc.style.height=_a3.height+"px";if(document.all){this.basedoc.innerHTML="<IMG src="+_a2+" style='display:none' />";}else{this.basedoc.innerHTML="<IMG src="+_a2+" />";}if(_a4!=null&&_a5!=null){this.shadowdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_a4+")";this.shadowdoc.style.width=_a5.width+"px";this.shadowdoc.style.height=_a5.height+"px";if(document.all){this.shadowdoc.innerHTML="<IMG src="+_a4+" style='display:none' />";}else{this.shadowdoc.innerHTML="<IMG src="+_a4+" />";}}};ZdcUserControl.prototype.setDocPosition=function(_a6,_a7,_a8,_a9){this.basedoc.style.left=(this.baseleft+_a7)+"px";this.basedoc.style.top=(this.basetop+_a6)+"px";if(_a8!=null&&_a9!=null){this.shadowdoc.style.left=(this.baseleft+Number(_a9))+"px";this.shadowdoc.style.top=(this.baseleft+Number(_a8))+"px";}};ZdcUserControl.prototype.OnMouseMoveDoc=function(_aa){ZdcEvent.stopPropagation(_aa);};ZdcUserControl.prototype.OnMouseOverDoc=function(_ab){ZdcEvent.stopPropagation(_ab);ZdcEvent.trigger(this,"mouseover");};ZdcUserControl.prototype.OnMouseOutDoc=function(_ac){ZdcEvent.stopPropagation(_ac);if(!ZdcCommon.isiPhone()){ZdcEvent.trigger(this,"mouseout");}};ZdcUserControl.prototype.OnMouseUpDoc=function(_ad){if(_ad.button==2){return;}this.actionid=0;if(document.all){var x=_ad.offsetX;var y=_ad.offsetY;}else{if(ZdcCommon.isiPhone()){var x=_ad.touches[0].clientX-parseInt(this.pMap.ZdcMapBase.style.left)-(parseInt(this.doc.style.left)+this.pMap.ZdcMapTileLeftpx);var y=_ad.touches[0].clientY-parseInt(this.pMap.ZdcMapBase.style.top)-(parseInt(this.doc.style.top)+this.pMap.ZdcMapTileToppx);ZdcEvent.trigger(this,"clickend");ZdcEvent.trigger(this,"mouseover");}else{var x=_ad.layerX;var y=_ad.layerY;}}for(var i=1;i<10;i++){if(this.action[i].box.isContainPixel(x,y)){this.actionid=this.action[i].act;break;}}ZdcEvent.trigger(this,"mouseup");};ZdcUserControl.prototype.OnMouseDownDoc=function(_b1){if(_b1.button==2){return;}this.actionid=0;if(document.all){var x=_b1.offsetX;var y=_b1.offsetY;}else{var x=_b1.layerX;var y=_b1.layerY;}for(var i=1;i<10;i++){if(this.action[i].box.isContainPixel(x,y)){this.actionid=this.action[i].act;break;}}ZdcEvent.stopPropagation(_b1);ZdcEvent.trigger(this,"mousedown");return false;};ZdcUserControl.prototype.OnMouseDblClickDoc=function(_b5){this.actionid=0;if(document.all){var x=_b5.offsetX;var y=_b5.offsetY;}else{var x=_b5.layerX;var y=_b5.layerY;}for(var i=1;i<10;i++){if(this.action[i].box.isContainPixel(x,y)){this.actionid=this.action[i].act;break;}}ZdcEvent.stopPropagation(_b5);ZdcEvent.trigger(this,"dblclickend");};ZdcUserControl.prototype.OnMouseClickDoc=function(_b9){this.actionid=0;if(document.all){var x=_b9.offsetX;var y=_b9.offsetY;}else{var x=_b9.layerX;var y=_b9.layerY;}for(var i=1;i<10;i++){if(this.action[i].box.isContainPixel(x,y)){this.actionid=this.action[i].act;break;}}ZdcEvent.stopPropagation(_b9);ZdcEvent.trigger(this,"clickend");};ZdcUserControl.prototype.ConTextMenu=function(_bd){ZdcEvent.stopPropagation(_bd);return false;};ZdcUserControl.prototype.setAction=function(_be,px1,py1,px2,py2){this.action[this.aid].box.pxl1.x=px1;this.action[this.aid].box.pxl1.y=py1;this.action[this.aid].box.pxl2.x=px2;this.action[this.aid].box.pxl2.y=py2;this.action[this.aid].act=_be;this.aid++;};function ZdcUserZoomControl(){this.basetop=0;this.baseleft=0;this.doc=document.createElement("DIV");this.doc.setAttribute("id","userzoomcontrol");this.doc.style.zIndex="10200";this.doc.style.position="absolute";this.basedoc=document.createElement("DIV");this.basedoc.style.position="absolute";this.basedoc.id="basedoc";this.shadowdoc=document.createElement("DIV");this.shadowdoc.style.position="absolute";this.shadowdoc.id="shadowdoc";this.griddoc=document.createElement("DIV");this.griddoc.style.position="absolute";this.griddoc.id="griddoc";if(ZdcCommon.UserAgentIsSafari()){this.mousecursor="default";this.doc.style.cursor="default";}else{this.mousecursor="hand";if(document.all){this.basedoc.style.cursor="hand";}else{this.basedoc.style.cursor="pointer";}this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}this.doc.appendChild(this.shadowdoc);this.doc.appendChild(this.basedoc);this.doc.appendChild(this.griddoc);this.actionid="none";this.actionx=0;this.actiony=0;this.aid=1;this.setDocPositionX=0;this.setDocPositionY=0;this.gridBasePositionX=0;this.gridBasePositionY=0;this.ToolTipBasePositionX=0;this.ToolTipBasePositionY=0;this.addPositionX=0;this.addPositionY=0;this.zoomstart=0;this.zoomend=0;this.zoomslithersize=0;this.slithertype=1;this.zoomMax=18;this.zoomMin=1;this.zoomLimit=this.zoomMax-this.zoomMin+1;this.dragx=0;this.dragy=0;this.dragscreenx=0;this.dragscreeny=0;this.newscreenx=0;this.newscreeny=0;this.slithermovestatus=false;this.dragstatus=false;this.dragtype=1;this.tooltipimg=null;this.tootipsize=null;this.doctooltip=null;this.tooltipid=null;this.action=new Array();for(var i=1;i<5;i++){var _c4=new ZdcPixel(0,0);var _c5=new ZdcPixel(0,0);this.action[i]=new Object();this.action[i].box=new ZdcPixelBox(_c4,_c5);}this.doc.onmousedown=this.OnMouseDownDoc.bindAsEventListener(this);this.doc.onclick=this.OnMouseClickDoc.bindAsEventListener(this);this.doc.ondblclick=this.OnMouseDblClickDoc.bindAsEventListener(this);this.doc.onmouseup=this.OnMouseUpDoc.bindAsEventListener(this);this.doc.onmousemove=this.OnMouseMoveDoc.bindAsEventListener(this);this.doc.onmouseover=this.MouseOver.bindAsEventListener(this);this.doc.onmouseout=this.MouseOut.bindAsEventListener(this);this.griddoc.onclick=this.OnMouseClickGridDoc.bindAsEventListener(this);this.griddoc.onmousedown=this.OnMouseDownGridDoc.bindAsEventListener(this);this.griddoc.onmousemove=this.OnMouseMoveGridDoc.bindAsEventListener(this);this.griddoc.onmouseup=this.OnMouseUpGridDoc.bindAsEventListener(this);this.doc.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.doc.ontouchstart=this.OnMouseUpDoc.bindAsEventListener(this);}ZdcObjArray.push(this);}ZdcUserZoomControl.prototype.setMouseCursor=function(_c6,_c7,_c8){if(ZdcCommon.UserAgentIsSafari()){return -1;}if(_c6=="users"){this.cursorflg=true;this.usercursor1=_c7;this.usercursor2=_c8;this.basedoc.style.cursor="url("+this.usercursor1+"), pointer";this.griddoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(_c6!="default"&&_c6!="hand"){return -1;}this.cursorflg=false;this.mousecursor=_c6;if(this.mousecursor=="hand"){if(document.all){this.basedoc.style.cursor="hand";}else{this.basedoc.style.cursor="pointer";}this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}if(this.mousecursor=="default"){this.basedoc.style.cursor="default";this.griddoc.style.cursor="default";}}};ZdcUserZoomControl.prototype.SetZoomTipImage=function(_c9,_ca,_cb){this.setZoomTipImage(_c9,_ca,_cb);};ZdcUserZoomControl.prototype.setZoomTipImage=function(_cc,_cd,_ce){this.tootipimg=_cc;this.tooltipsize=new ZdcSize(_cd.width,_cd.height);this.tooltipoffset=_ce;this.doctooltip=document.createElement("DIV");this.doctooltip.id="userzoomcontroltooltip";this.doctooltip.style.zIndex=10090;this.doctooltip.style.position="absolute";this.doctooltip.style.visibility="hidden";this.doctooltip.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_cc+")";this.doctooltip.style.width=_cd.width;this.doctooltip.style.height=_cd.height;if(document.all){this.doctooltip.innerHTML="<IMG src="+_cc+" style='display:none' />";}else{this.doctooltip.innerHTML="<IMG src="+_cc+" />";}};ZdcUserZoomControl.prototype.setImage=function(_cf,_d0,_d1,_d2,_d3,_d4){this.basedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_cf+")";this.basedoc.style.width=_d0.width+"px";this.basedoc.style.height=_d0.height+"px";if(document.all){this.basedoc.innerHTML="<IMG src="+_cf+" style='display:none' />";}else{this.basedoc.innerHTML="<IMG src="+_cf+" />";}if(_d1!=null&&_d2!=null){if(document.all){this.griddoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_d1+")";this.griddoc.style.width=_d2.width+"px";this.griddoc.style.height=_d2.height+"px";this.griddoc.innerHTML="<IMG src="+_d1+" style='display:none'>";}else{this.griddoc.style.width=_d2.width+"px";this.griddoc.style.height=_d2.height+"px";this.griddoc.innerHTML="<IMG style='position:absolute; left:0px;' src='"+_d1+"' width="+_d2.width+" height="+_d2.height+" >";}}if(_d3!=null&&_d4!=null){this.shadowdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_d3+")";this.shadowdoc.style.width=_d4.width+"px";this.shadowdoc.style.height=_d4.height+"px";if(document.all){this.shadowdoc.innerHTML="<IMG src="+_d3+" style='display:none' />";}else{this.shadowdoc.innerHTML="<IMG src="+_d3+" />";}}};ZdcUserZoomControl.prototype.setZoomLimit=function(s1,s2){var vs1=parseInt(s1);var vs2=parseInt(s2);if(vs1<vs2&&Number(vs1)>=0&&Number(vs2)<19){this.zoomMin=vs1;this.zoomMax=vs2;this.zoomLimit=this.zoomMax-this.zoomMin+1;}else{return -1;}};ZdcUserZoomControl.prototype.setDocPosition=function(_d9,_da,_db,_dc){this.basedoc.style.left=_da+"px";this.basedoc.style.top=_d9+"px";if(_db!=null&&_dc!=null){this.shadowdoc.style.left=_dc+"px";this.shadowdoc.style.top=_db+"px";}this.setDocPositionY=_d9;this.setDocPositionX=_da;if(this.slithertype==1){this.griddoc.style.left=parseInt(this.gridBasePositionX)+(_da)+"px";this.griddoc.style.top=parseInt(this.addPositionY)+parseInt(this.gridBasePositionY)+(_d9)+"px";}else{this.griddoc.style.left=parseInt(this.addPositionX)+parseInt(this.gridBasePositionX)+(_da)+"px";this.griddoc.style.top=parseInt(this.gridBasePositionY)+(_d9)+"px";}if(this.doctooltip!=null){this.doctooltip.style.top=parseInt(this.ToolTipBasePositionY)+_d9+"px";this.doctooltip.style.left=parseInt(this.ToolTipBasePositionX)+_da+"px";}this.setSlitherPosition();};ZdcUserZoomControl.prototype.setAction=function(_dd,px1,py1,px2,py2){this.action[this.aid].box.pxl1.x=px1;this.action[this.aid].box.pxl1.y=py1;this.action[this.aid].box.pxl2.x=px2;this.action[this.aid].box.pxl2.y=py2;this.action[this.aid].act=_dd;if(_dd=="slither"){if(Math.abs(py2-py1)>Math.abs(px2-px1)){this.slithertype=1;this.zoomstart=py1;this.zoomend=py2;this.zoomslithersize=Math.abs(py2-py1);this.griddoc.style.left=px1+"px";this.gridBasePositionX=px1+"px";this.gridBasePositionY="0px";this.griddoc.style.top="0px";}else{this.slithertype=2;this.zoomstart=px1;this.zoomend=px2;this.zoomslithersize=Math.abs(px2-px1);this.griddoc.style.top=py1+"px";this.gridBasePositionX="0px";this.gridBasePositionY=py1+"px";this.griddoc.style.left="0px";}this.setSlitherPosition();}this.aid++;};ZdcUserZoomControl.prototype.OnMouseMoveGridDoc=function(_e2){if(ZdcDrag.IsDragging()){if(this.cursorflg==true){this.griddoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}return false;}ZdcEvent.stopPropagation(_e2);ZdcEvent.trigger(this,"mousemovegrid");return false;};ZdcUserZoomControl.prototype.OnMouseClickGridDoc=function(_e3){ZdcEvent.stopPropagation(_e3);ZdcEvent.trigger(this,"mouseclickgrid");return false;};ZdcUserZoomControl.prototype.OnMouseDownGridDoc=function(_e4){if(!this.dragstatus){this.actionid="slither";this.dragscreenx=_e4.screenX;this.dragscreeny=_e4.screenY;if(this.cursorflg==true){this.griddoc.style.cursor="url("+this.usercursor2+"), pointer";}else{if(this.mousecursor=="hand"){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";}}}ZdcEvent.stopPropagation(_e4);ZdcEvent.trigger(this,"mousedowngrid");return false;};ZdcUserZoomControl.prototype.OnMouseUpGridDoc=function(_e5){if(this.cursorflg==true){this.griddoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}ZdcEvent.trigger(this,"mouseup");return false;};ZdcUserZoomControl.prototype.OnMouseDblClickDoc=function(_e6){ZdcEvent.stopPropagation(_e6);ZdcEvent.trigger(this,"dblclickend");};ZdcUserZoomControl.prototype.OnMouseMoveDoc=function(_e7){if(ZdcDrag.IsDragging()){return false;}return false;};ZdcUserZoomControl.prototype.MouseOver=function(_e8){if(this.doctooltip){this.doctooltip.style.visibility="visible";}ZdcEvent.stopPropagation(_e8);ZdcEvent.trigger(this,"mouseover");};ZdcUserZoomControl.prototype.MouseOut=function(_e9){if(this.doctooltip){if(document.all){if(!window.event||window.event.type!="mouseout"){return;}var t=window.event.toElement;var _eb=false;while(t){if(t==this.doc){_eb=true;break;}t=t.parentElement;}if(!_eb){this.doctooltip.style.visibility="hidden";}}else{this.doctooltip.style.visibility="hidden";}}ZdcEvent.stopPropagation(_e9);if(!ZdcCommon.isiPhone()){ZdcEvent.trigger(this,"mouseout");}};ZdcUserZoomControl.prototype.OnMouseDownDoc=function(_ec){if(_ec.button==2){return;}ZdcEvent.stopPropagation(_ec);if(this.cursorflg==true){this.griddoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}this.zomDownflg=true;ZdcEvent.trigger(this,"mousedown");return false;};ZdcUserZoomControl.prototype.OnMouseUpDoc=function(_ed){if(_ed.button==2){return;}if(this.cursorflg==true){this.griddoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}if(ZdcCommon.isiPhone()){
var x=_ed.touches[0].clientX-parseInt(this.pMap.ZdcMapBase.style.left)-(parseInt(this.doc.style.left)+this.pMap.ZdcMapTileLeftpx);var y=_ed.touches[0].clientY-parseInt(this.pMap.ZdcMapBase.style.top)-(parseInt(this.doc.style.top)+this.pMap.ZdcMapTileToppx);this.actionx=x;this.actiony=y;for(var i=1;i<5;i++){if(this.action[i].box.isContainPixel(x,y)&&this.action[i].act!="slither"){this.actionid=this.action[i].act;break;}}}else{if(this.zomDownflg){this.actionid="none";if(document.all){var x=_ed.offsetX;var y=_ed.offsetY;}else{var x=_ed.layerX;var y=_ed.layerY;}this.actionx=x;this.actiony=y;for(var i=1;i<5;i++){if(this.action[i].box.isContainPixel(x,y)&&this.action[i].act!="slither"){this.actionid=this.action[i].act;break;}}this.zomDownflg=false;}}ZdcEvent.stopPropagation(_ed);ZdcEvent.trigger(this,"mouseup");};ZdcUserZoomControl.prototype.OnMouseClickDoc=function(_f1){ZdcEvent.stopPropagation(_f1);ZdcEvent.trigger(this,"clickend");};ZdcUserZoomControl.prototype.getZoom=function(){if(this.slithertype==1){var s=Math.floor((this.actiony-this.zoomstart)/(this.zoomslithersize/this.zoomLimit));}else{var s=Math.floor((this.actionx-this.zoomstart)/(this.zoomslithersize/this.zoomLimit));}if(this.dragtype==1){s=s+this.zoomMin;}else{s=this.zoomMax-s;}if(s>this.zoomMax){s=this.zoomMax;}if(s<this.zoomMin){s=this.zoomMin;}return s;};ZdcUserZoomControl.prototype.ConTextMenu=function(_f3){ZdcEvent.stopPropagation(_f3);return false;};ZdcUserZoomControl.prototype.setSlitherPosition=function(){if(this.pMap!=null){if(this.slithertype==1){if(this.dragtype==1){this.griddoc.style.top=(Math.round(this.zoomstart+((this.pMap.s-this.zoomMin)*this.zoomslithersize/this.zoomLimit)))+this.setDocPositionY+"px";}else{this.griddoc.style.top=(Math.round(this.zoomstart+((this.zoomMax-this.pMap.s)*this.zoomslithersize/this.zoomLimit)))+this.setDocPositionY+"px";}}else{if(this.dragtype==1){this.griddoc.style.left=(Math.round(this.zoomstart+((this.pMap.s-this.zoomMin)*this.zoomslithersize/this.zoomLimit)))+this.setDocPositionX+"px";}else{this.griddoc.style.left=(Math.round(this.zoomstart+((this.zoomMax-this.pMap.s)*this.zoomslithersize/this.zoomLimit)))+this.setDocPositionX+"px";}}}};ZdcUserZoomControl.prototype.setDragType=function(_f4){if(_f4!=null){if(_f4!=1&&_f4!=2){return -1;}this.dragtype=_f4;}};ZdcUserZoomControl.prototype.dragstart=function(){if(!this.dragstatus){this.dragstatus=true;var _f5;if(this.dragtype==1){_f5=Math.round(this.zoomstart+((this.pMap.s-this.zoomMin)*this.zoomslithersize/this.zoomLimit));}else{_f5=Math.round(this.zoomstart+((this.zoomMax-this.pMap.s)*this.zoomslithersize/this.zoomLimit));}this.dragfrom=_f5;this.zoomheight=Math.floor(this.zoomslithersize/this.zoomLimit);this.zoomlim=this.zoomend-this.zoomheight;this.dragflg=true;ZdcDrag.StartDragging(this.griddoc,this.dragging.bindAsEventListener(this),this.dragend.bindAsEventListener(this));return false;}else{return false;}};ZdcUserZoomControl.prototype.dragend=function(){if(this.cursorflg==true){this.basedoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.basedoc.style.cursor="pointer";if(!ZdcCommon.UserAgentIsSafari()){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}}if(this.slithertype==1){var s=Math.floor((this.dragy-this.zoomstart)/(this.zoomslithersize/this.zoomLimit));}else{var s=Math.floor((this.dragx-this.zoomstart)/(this.zoomslithersize/this.zoomLimit));}if(this.dragtype==1){s=s+this.zoomMin;}else{s=this.zoomMax-s;}this.pMap.setMapScale(s);this.dragstatus=false;this.actionid=0;ZdcDrag.ClearDraging();this.pMap.ZdcZoomChangeImage.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner1.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner2.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner3.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner4.style.visibility="hidden";return false;};ZdcUserZoomControl.prototype.dragging=function(e){if(this.cursorflg==true){this.griddoc.style.cursor="url("+this.usercursor2+"), pointer";this.basedoc.style.cursor="url("+this.usercursor2+"), pointer";}else{if(this.mousecursor=="hand"){this.griddoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";this.basedoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";}}if(this.dragstatus){if(this.slithertype==1){this.newscreeny=e.screenY;if(this.dragflg){this.dragscreenfrom=e.screenY;this.dragflg=false;}var _f8=this.dragfrom-(this.dragscreenfrom-this.newscreeny);if(this.zoomstart>_f8){this.griddoc.style.top=this.zoomstart+this.setDocPositionY+"px";this.dragy=this.zoomstart;this.dragscreeny=this.zoomstart;this.zoomImage();}else{if(this.zoomlim<_f8){this.griddoc.style.top=this.zoomlim+this.setDocPositionY+"px";this.dragy=this.zoomlim;this.dragscreeny=this.zoomlim;this.zoomImage();}else{if(Math.abs(this.dragscreeny-this.newscreeny)>=this.zoomheight){heightcnt=Math.round((_f8-this.zoomstart)/(this.zoomheight));heightpx=this.zoomstart+Math.round(heightcnt*this.zoomheight);this.griddoc.style.top=heightpx+this.setDocPositionY+"px";this.dragy=_f8;this.dragscreeny=this.newscreeny;this.zoomImage();}}}}else{this.newscreenx=e.screenX;if(this.dragflg){this.dragscreenfrom=e.screenX;this.dragflg=false;}var _f8=this.dragfrom-(this.dragscreenfrom-this.newscreenx);if(this.zoomstart>_f8){this.griddoc.style.left=this.zoomstart+this.setDocPositionX+"px";this.dragx=this.zoomstart;this.dragscreenx=this.zoomstart;this.zoomImage();}else{if(this.zoomlim<_f8){this.griddoc.style.left=this.zoomlim+this.setDocPositionX+"px";this.dragx=this.zoomlim;this.dragscreenx=this.zoomlim;this.zoomImage();}else{if(Math.abs(this.dragscreenx-this.newscreenx)>=this.zoomheight){heightcnt=Math.round((_f8-this.zoomstart)/(this.zoomheight));heightpx=this.zoomstart+Math.round(heightcnt*this.zoomheight);this.griddoc.style.left=heightpx+this.setDocPositionX+"px";this.dragx=_f8;this.dragscreenx=this.newscreenx;this.zoomImage();}}}}}};ZdcUserZoomControl.prototype.zoomImage=function(){this.pMap.ZdcZoomChangeImage.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner1.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner2.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner3.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner4.style.visibility="visible";this.pMap.ZdcZoomChangeImage.style.filter="alpha(opacity=99)";this.pMap.ZdcZoomChangeImage.style.mozOpacity="0.99";this.pMap.ZdcZoomChangeImage.style.opacity="0.99";if(this.slithertype==1){var s=Math.floor((this.dragy-this.zoomstart)/(this.zoomslithersize/this.zoomLimit));}else{var s=Math.floor((this.dragx-this.zoomstart)/(this.zoomslithersize/this.zoomLimit));}if(this.dragtype==1){s=s+this.zoomMin;}else{s=this.zoomMax-s;}if(s>this.zoomMax){s=this.zoomMax;}if(s<this.zoomMin){s=this.zoomMin;}var _fa=this.pMap.s;var _fb=s;if(_fa<=_fb){var img=this.pMap.ZoomChangeImageClear;var _fd=this.pMap.ZoomChangeImageCorner1;var _fe=this.pMap.ZoomChangeImageCorner2;var _ff=this.pMap.ZoomChangeImageCorner3;var img4=this.pMap.ZoomChangeImageCorner4;}else{var img=this.pMap.ZoomChangeImageClear;var _fd=this.pMap.ZoomChangeImageCorner4;var _fe=this.pMap.ZoomChangeImageCorner3;var _ff=this.pMap.ZoomChangeImageCorner2;var img4=this.pMap.ZoomChangeImageCorner1;}if(_fa==_fb){var _101=this.pMap.ZdcMapWpx-6;var _102=this.pMap.ZdcMapHpx-6;}else{if(_fa<_fb){var _101=Math.floor(this.pMap.ZdcMapWpx*(ZdcZoom.map_defw[_fb]/ZdcZoom.map_defw[_fa]));var _102=Math.floor(this.pMap.ZdcMapHpx*(ZdcZoom.map_defh[_fb]/ZdcZoom.map_defh[_fa]));}else{var _101=Math.floor(this.pMap.ZdcMapWpx*(ZdcZoom.map_defw[_fa]/ZdcZoom.map_defw[_fb]));var _102=Math.floor(this.pMap.ZdcMapHpx*(ZdcZoom.map_defh[_fa]/ZdcZoom.map_defh[_fb]));}}if(this.pMap.CenterFirst){var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}else{if(this.pMap.msgopenstatus){if(this.pMap.getMapBoundBox(null,_fa).isContainPoint(this.pMap.ZdcMsgWindowObj.Point)){if(_fa<_fb){var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgWindowObj.Point.mx,this.pMap.ZdcMsgWindowObj.Point.my,_fa,_fb);}else{var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgWindowObj.Point.mx,this.pMap.ZdcMsgWindowObj.Point.my,_fb,_fa);}var cx=this.pMap.ZdcMapCenterpx.x+Math.round((newp.mx-this.pMap.mx)/ZdcZoom.map_defw[_fa]);var cy=this.pMap.ZdcMapCenterpx.y+Math.round((this.pMap.my-newp.my)/ZdcZoom.map_defh[_fa]);}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}else{if(this.pMap.usermsgopenstatus){if(this.pMap.getMapBoundBox(null,_fa).isContainPoint(this.pMap.ZdcUserMsgWindow.Point)){if(_fa<_fb){var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcUserMsgWindow.Point.mx,this.pMap.ZdcUserMsgWindow.Point.my,_fa,_fb);}else{var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcUserMsgWindow.Point.mx,this.pMap.ZdcUserMsgWindow.Point.my,_fb,_fa);}var cx=this.pMap.ZdcMapCenterpx.x+Math.round((newp.mx-this.pMap.mx)/ZdcZoom.map_defw[_fa]);var cy=this.pMap.ZdcMapCenterpx.y+Math.round((this.pMap.my-newp.my)/ZdcZoom.map_defh[_fa]);}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}else{if(this.pMap.htmlopenstatus){if(this.pMap.getMapBoundBox(null,_fa).isContainPoint(this.pMap.ZdcMsgHtml.Point)){if(_fa<_fb){var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgHtml.Point.mx,this.pMap.ZdcMsgHtml.Point.my,_fa,_fb);}else{var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgHtml.Point.mx,this.pMap.ZdcMsgHtml.Point.my,_fb,_fa);}var cx=this.pMap.ZdcMapCenterpx.x+Math.round((newp.mx-this.pMap.mx)/ZdcZoom.map_defw[_fa]);var cy=this.pMap.ZdcMapCenterpx.y+Math.round((this.pMap.my-newp.my)/ZdcZoom.map_defh[_fa]);}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}}}this.pMap.ZdcZoomChangeImage.style.left=(cx-Math.floor(_101/2)-3)+"px";this.pMap.ZdcZoomChangeImage.style.top=(cy-Math.floor(_102/2)-3)+"px";this.pMap.ZdcZoomChangeImage.style.width=(_101+6)+"px";this.pMap.ZdcZoomChangeImage.style.height=(_102+6)+"px";this.pMap.ZdcZoomChangeImage.innerHTML="<DIV style='border:0px solid #007eca'><IMG style='border:4px solid #007eca' src="+img+" width="+_101+" height="+_102+"></DIV>";this.pMap.ZdcZoomChangeImage.style.position="absolute";if(document.all){this.pMap.ZdcZoomChangeImageCorner1.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft-16)+"px";this.pMap.ZdcZoomChangeImageCorner1.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop-16)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft+_101+2)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop+_102+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft+_101+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop+_102+2)+"px";this.pMap.ZdcZoomChangeImageCorner1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_fd+")";this.pMap.ZdcZoomChangeImageCorner2.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_fe+")";this.pMap.ZdcZoomChangeImageCorner3.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+_ff+")";this.pMap.ZdcZoomChangeImageCorner4.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img4+")";this.pMap.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+_fd+" style='display:none'>";this.pMap.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+_fe+" style='display:none'>";this.pMap.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+_ff+" style='display:none'>";this.pMap.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+img4+" style='display:none'>";}else{this.pMap.ZdcZoomChangeImageCorner1.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)-16)+"px";this.pMap.ZdcZoomChangeImageCorner1.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)-16)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)+_101+2)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)+_102+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)+_101+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)+_102+2)+"px";this.pMap.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+_fd+">";this.pMap.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+_fe+">";this.pMap.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+_ff+">";this.pMap.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+img4+">";}this.pMap.ZdcZoomChangeImageCorner1.style.width="20px";this.pMap.ZdcZoomChangeImageCorner1.style.height="20px";this.pMap.ZdcZoomChangeImageCorner1.style.position="absolute";this.pMap.ZdcZoomChangeImageCorner2.style.width="20px";this.pMap.ZdcZoomChangeImageCorner2.style.height="20px";this.pMap.ZdcZoomChangeImageCorner2.style.position="absolute";this.pMap.ZdcZoomChangeImageCorner3.style.width="20px";this.pMap.ZdcZoomChangeImageCorner3.style.height="20px";this.pMap.ZdcZoomChangeImageCorner3.style.position="absolute";this.pMap.ZdcZoomChangeImageCorner4.style.width="20px";this.pMap.ZdcZoomChangeImageCorner4.style.height="20px";this.pMap.ZdcZoomChangeImageCorner4.style.position="absolute";};function ZdcControl(f,opts){if(f!=null){this.type=Number(f);if(this.type>3||this.type<1){this.type=3;}}else{this.type=3;}this.largeonly=false;this.smallonly=false;this.BaseX=5;this.BaseY=0;this.Slither=false;this.SlitherPixelY=0;this.zoomstart=74;this.zoomheight=13;this.zoomend=307;this.doc=document.createElement("DIV");this.doc.setAttribute("id","control");this.doc.style.zIndex="10200";this.doc.style.position="absolute";this.mousecursor="default";this.doc.style.cursor="default";this.doc.style.webkitUserSelect="none";this.basedoc=document.createElement("DIV");this.basedoc.style.zIndex="10";this.basedoc.style.filter="alpha(opacity=100)";this.scaledoc=document.createElement("DIV");this.scaledoc.style.zIndex="80";this.scaledoc.style.width="62px";this.scaledoc.style.height="34px";this.scaledoc.style.filter="alpha(opacity=100)";this.scaleseldoc=document.createElement("DIV");this.scaleseldoc.style.zIndex="50";this.scaleslitherdoc=document.createElement("DIV");this.scaleslitherdoc.style.zIndex="50";this.changedoc=document.createElement("DIV");this.changedoc.style.zIndex="90";this.changedoc.style.filter="alpha(opacity=100)";this.basedoc.style.mozOpacity="1.0";this.basedoc.style.opacity="1.0";this.scaledoc.style.mozOpacity="1.0";this.scaledoc.style.opacity="1.0";this.changedoc.style.mozOpacity="1.0";this.changedoc.style.opacity="1.0";this.shadowlargedoc=document.createElement("DIV");this.shadowsmalldoc=document.createElement("DIV");switch(this.type){case 1:this.CtlImage=ZdcCommon.ZdcMapServer+"/img/Control1.png";this.CtlSmallImage=ZdcCommon.ZdcMapServer+"/img/ControlSmall1.png";this.CtlChgImage=ZdcCommon.ZdcMapServer+"/img/ControlChange1.png";this.CtlNoChgImage=ZdcCommon.ZdcMapServer+"/img/ControlNoChange1.png";this.CtlScaleImage=ZdcCommon.ZdcMapServer+"/img/cursorscale0.png";this.CtlScaleSelImage=ZdcCommon.ZdcMapServer+"/img/ControlScaleSelect.png";this.CtlScaleSlitherImage=ZdcCommon.ZdcMapServer+"/img/ControlSlither1.png";this.id="Control_1_1";this.width=60;this.height=320;this.doc.style.width="70px";this.doc.style.height="92px";this.doc.style.filter="alpha(opacity=60)";this.doc.style.mozOpacity="0.6";this.doc.style.opacity="0.6";this.changedoc.style.left=(this.BaseX+48)+"px";this.changedoc.style.top=(this.BaseY+66)+"px";this.scaledoc.style.left=(this.BaseX-3)+"px";this.scaledoc.style.top=(this.BaseY+100)+"px";this.scaleseldoc.style.left=(this.BaseX+1)+"px";this.scaleslitherdoc.style.left=(this.BaseX+53)+"px";break;case 2:this.CtlImage=ZdcCommon.ZdcMapServer+"/img/Control2.png";this.CtlSmallImage=ZdcCommon.ZdcMapServer+"/img/ControlSmall2.png";this.CtlChgImage=ZdcCommon.ZdcMapServer+"/img/ControlChange2.png";this.CtlNoChgImage=ZdcCommon.ZdcMapServer+"/img/ControlNoChange2.png";this.CtlScaleImage=ZdcCommon.ZdcMapServer+"/img/cursorscale0.png";this.CtlScaleSelImage=ZdcCommon.ZdcMapServer+"/img/ControlScaleSelect2.png";this.CtlScaleSlitherImage=ZdcCommon.ZdcMapServer+"/img/ControlSlither2.png";this.id="Control_1_2";this.width=60;this.height=320;this.changedoc.style.left=(this.BaseX+48)+"px";this.changedoc.style.top=(this.BaseY+62)+"px";this.scaledoc.style.left=(this.BaseX+2)+"px";this.scaledoc.style.top=(this.BaseY+100)+"px";this.scaleseldoc.style.left=(this.BaseX+9)+"px";this.scaleseldoc.style.width="45px";this.scaleslitherdoc.style.left=(this.BaseX+44)+"px";break;case 3:default:this.CtlImage=ZdcCommon.ZdcMapServer+"/img/Control3.png";this.CtlSmallImage=ZdcCommon.ZdcMapServer+"/img/ControlSmall3.png";this.CtlChgImage=ZdcCommon.ZdcMapServer+"/img/ControlChange3.png";this.CtlNoChgImage=ZdcCommon.ZdcMapServer+"/img/ControlNoChange3.png";this.CtlScaleImage=ZdcCommon.ZdcMapServer+"/img/ControlScale.png";this.CtlScaleSelImage=ZdcCommon.ZdcMapServer+"/img/scrollredline3.png";this.CtlScaleSlitherImage=ZdcCommon.ZdcMapServer+"/img/scrollbutton3.png";this.CtlShadowLargeImage=ZdcCommon.ZdcMapServer+"/img/Control-shadow.png";this.CtlShadowSmallImage=ZdcCommon.ZdcMapServer+"/img/Control-shadow-small.png";this.shadowlargedoc.style.position="absolute";this.shadowsmalldoc.style.position="absolute";this.shadowlargedoc.style.zIndex="1";this.shadowsmalldoc.style.zIndex="1";if(document.all){this.shadowlargedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.CtlShadowLargeImage+")";this.shadowsmalldoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.CtlShadowSmallImage+")";this.shadowsmalldoc.innerHTML="<IMG src="+this.CtlShadowSmallImage+" style='display:none'>";this.shadowlargedoc.innerHTML="<IMG src="+this.CtlShadowLargeImage+" style='display:none'>";}else{this.shadowsmalldoc.innerHTML="<IMG src="+this.CtlShadowSmallImage+">";this.shadowlargedoc.innerHTML="<IMG src="+this.CtlShadowLargeImage+">";}this.shadowlargedoc.style.width="64px";this.shadowlargedoc.style.height="324px";this.shadowsmalldoc.style.width="64px";this.shadowsmalldoc.style.height="92px";this.id="Control_1_3";this.width=64;this.height=324;this.changedoc.style.left=(this.BaseX+47)+"px";this.changedoc.style.top=(this.BaseY+66)+"px";this.scaledoc.style.left=(this.BaseX)+"px";this.scaledoc.style.top=(this.BaseY+100)+"px";this.scaleseldoc.style.left=(this.BaseX+3)+"px";this.scaleslitherdoc.style.left=(this.BaseX+49)+"px";this.shadowlargedoc.style.left=(this.BaseX+2)+"px";this.shadowlargedoc.style.top=(this.BaseY+2)+"px";this.shadowsmalldoc.style.left=(this.BaseX+2)+"px";this.shadowsmalldoc.style.top=(this.BaseY+2)+"px";break;}this.basedoc.innerHTML="<IMG src="+this.CtlSmallImage+">";this.changedoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlChgImage+">";this.scaledoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlScaleImage+">";this.scaleseldoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlScaleSelImage+">";this.scaleslitherdoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlScaleSlitherImage+">";this.basedoc.style.width="0px";this.basedoc.style.height="0px";this.basedoc.style.left=this.BaseX+"px";this.basedoc.style.top=this.BaseY+"px";this.basedoc.style.position="absolute";this.changedoc.style.width="12px";this.changedoc.style.height="12px";this.changedoc.style.position="absolute";this.scaledoc.style.position="absolute";this.scaledoc.style.visibility="hidden";this.scaleseldoc.style.width="58px";this.scaleseldoc.style.height="12px";this.scaleseldoc.style.top=this.BaseY+"px";this.scaleseldoc.style.position="absolute";this.scaleseldoc.style.filter="alpha(opacity=60)";this.scaleseldoc.style.opacity="0.6";this.scaleseldoc.style.mozOpacity="0.6";this.scaleseldoc.style.visibility="hidden";this.scaleslitherdoc.style.width="12px";this.scaleslitherdoc.style.height="16px";this.scaleslitherdoc.style.top=this.BaseY+"px";this.scaleslitherdoc.style.position="absolute";this.scaleslitherdoc.style.filter="alpha(opacity=100)";this.scaleslitherdoc.style.mozOpacity="1.0";this.scaleslitherdoc.style.opacity="1.0";this.scaleslitherdoc.style.visibility="hidden";ZdcObjArray.push(this);if(ZdcCommon.UserAgentIsSafari()){this.mousecursor="default";this.basedoc.style.cursor="default";}else{this.mousecursor="hand";if(document.all){this.basedoc.style.cursor="hand";this.changedoc.style.cursor="hand";this.shadowsmalldoc.style.cursor="hand";this.shadowlargedoc.style.cursor="hand";}else{this.basedoc.style.cursor="pointer";this.changedoc.style.cursor="pointer";this.shadowsmalldoc.style.cursor="pointer";this.shadowlargedoc.style.cursor="pointer";}this.scaleslitherdoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}if(opts=="large"){this.deflargeflg=true;this.basedoc.innerHTML="<IMG src="+this.CtlImage+">";this.changedoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlNoChgImage+">";this.scaleseldoc.style.visibility="visible";this.scaleslitherdoc.style.visibility="visible";if(this.type==3){this.shadowsmalldoc.style.visibility="hidden";this.shadowlargedoc.style.visibility="visible";}this.zoomlistopen=true;}else{this.zoomlistopen=false;this.changedoc.style.visibility="hidden";if(this.type==3){this.shadowlargedoc.style.visibility="hidden";this.shadowsmalldoc.style.visibility="visible";}}if(this.type==3){this.doc.appendChild(this.shadowlargedoc);this.doc.appendChild(this.shadowsmalldoc);if(this.zoomlistopen){this.shadowsmalldoc.style.visibility="hidden";}else{this.shadowlargedoc.style.visibility="hidden";}}this.doc.appendChild(this.basedoc);this.doc.appendChild(this.scaleseldoc);this.doc.appendChild(this.scaleslitherdoc);this.doc.appendChild(this.scaledoc);this.doc.appendChild(this.changedoc);this.doc.onmousedown=this.OnMouseDownDoc.bindAsEventListener(this);this.basedoc.onmousedown=this.OnMouseDownBaseDoc.bindAsEventListener(this);this.changedoc.onmousedown=this.OnMouseDownDoc.bindAsEventListener(this);this.scaleslitherdoc.onmousedown=this.OnMouseDownSlither.bindAsEventListener(this);this.scaleslitherdoc.onmouseup=this.OnMouseUpSlither.bindAsEventListener(this);this.doc.onmouseup=this.OnMouseUp.bindAsEventListener(this);this.doc.onclick=this.OnMouseDownDoc.bindAsEventListener(this);this.basedoc.onclick=this.MouseOnClick.bindAsEventListener(this);this.changedoc.onclick=this.MouseOnClickChg.bindAsEventListener(this);this.doc.onmousemove=this.OnMouseMoveDoc.bindAsEventListener(this);this.basedoc.onmousemove=this.OnMouseMoveBaseDoc.bindAsEventListener(this);this.scaleseldoc.onmousemove=this.OnMouseMoveSel.bindAsEventListener(this);this.scaleslitherdoc.onmousemove=this.OnMouseMoveSlither.bindAsEventListener(this);this.doc.onmouseover=this.OnMouseOver.bindAsEventListener(this);this.doc.onmouseout=this.OnMouseOut.bindAsEventListener(this);this.doc.ondblclick=this.OnMouseDblClick.bindAsEventListener(this);this.doc.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.basedoc.ontouchstart=this.OnMouseDownBaseDoc.bindAsEventListener(this);this.changedoc.ontouchstart=this.MouseOnClickChg.bindAsEventListener(this);}}ZdcControl.prototype.setMouseCursor=function(type,url1,url2){if(ZdcCommon.UserAgentIsSafari()){return -1;}if(type=="users"){this.cursorflg=true;this.usercursor1=url1;this.usercursor2=url2;this.basedoc.style.cursor="url("+this.usercursor1+"), pointer";this.changedoc.style.cursor="url("+this.usercursor1+"), pointer";this.scaleslitherdoc.style.cursor="url("+this.usercursor1+"), pointer";this.shadowsmalldoc.style.cursor="url("+this.usercursor1+"), pointer";this.shadowlargedoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(type!="default"&&type!="hand"){return -1;}this.cursorflg=false;this.mousecursor=type;if(this.mousecursor=="hand"){if(document.all){this.basedoc.style.cursor="hand";this.changedoc.style.cursor="hand";this.shadowsmalldoc.style.cursor="hand";this.shadowlargedoc.style.cursor="hand";}else{this.basedoc.style.cursor="pointer";this.changedoc.style.cursor="pointer";this.shadowsmalldoc.style.cursor="pointer";this.shadowlargedoc.style.cursor="pointer";}this.scaleslitherdoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}if(this.mousecursor=="default"){this.basedoc.style.cursor="default";this.changedoc.style.cursor="default";this.scaleslitherdoc.style.cursor="default";this.shadowsmalldoc.style.cursor="default";this.shadowlargedoc.style.cursor="default";}}};ZdcControl.prototype.setLargeOnly=function(){this.largeonly=true;if(this.type!=3){this.scaledoc.style.visibility="visible";}else{this.shadowsmalldoc.style.visibility="hidden";this.shadowlargedoc.style.visibility="visible";}this.scaleseldoc.style.visibility="visible";this.scaleslitherdoc.style.visibility="visible";this.changedoc.style.visibility="hidden";this.basedoc.innerHTML="<IMG src="+this.CtlImage+">";this.changedoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlNoChgImage+">";y=73+(this.pMap.s-1)*13;this.scaleseldoc.style.top=y+"px";if(this.type==3){this.scaleslitherdoc.style.top=y+"px";}else{this.scaleslitherdoc.style.top=(y-2)+"px";}this.doc.style.height="330px";this.basedoc.style.height="320px";this.zoomlistopen=true;this.scaledoc.style.visibility="hidden";};ZdcControl.prototype.setSmallOnly=function(){this.smallonly=true;if(this.smallonly){this.zoomlistopen=false;this.scaledoc.style.visibility="hidden";this.scaleseldoc.style.visibility="hidden";this.scaleslitherdoc.style.visibility="hidden";this.changedoc.style.visibility="hidden";if(this.type==3){this.shadowlargedoc.style.visibility="hidden";this.shadowsmalldoc.style.visibility="visible";}this.basedoc.innerHTML="<IMG src="+this.CtlSmallImage+">";this.changedoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlChgImage+">";this.doc.style.height="92px";}};ZdcControl.prototype.OnMouseDblClick=function(_10b){ZdcEvent.stopPropagation(_10b);};ZdcControl.prototype.OnMouseDownDoc=function(_10c){ZdcEvent.stopPropagation(_10c);return false;};ZdcControl.prototype.OnMouseDownBaseDoc=function(_10d){if(ZdcCommon.isiPhone()){var x=_10d.touches[0].clientX-parseInt(this.pMap.ZdcMapBase.style.left)-(parseInt(this.doc.style.left)+this.pMap.ZdcMapTileLeftpx);var y=_10d.touches[0].clientY-parseInt(this.pMap.ZdcMapBase.style.top)-(parseInt(this.doc.style.top)+this.pMap.ZdcMapTileToppx);var s;if(y<60){if(y<20){if(x<20){this.pMap.ScrollMapByDirection(1,1);}else{if(x>=20&&x<=40){this.pMap.ScrollMapByDirection(0,1);}else{this.pMap.ScrollMapByDirection(-1,1);}}}else{if(y>=20&&y<=40){if(x<20){this.pMap.ScrollMapByDirection(1,0);}else{if(x>=20&&x<=40){this.pMap.restoreMapLocation();}else{this.pMap.ScrollMapByDirection(-1,0);}}}else{if(x<20){this.pMap.ScrollMapByDirection(1,-1);}else{if(x>=20&&x<=40){this.pMap.ScrollMapByDirection(0,-1);}else{this.pMap.ScrollMapByDirection(-1,-1);}}}}}else{if(this.zoomlistopen){if(y<73){this.pMap.mapZoomOut(1,"zoom");s=73+(this.pMap.s-1)*13;}else{if(73<=y&&y<=307){s=73+Math.floor((y-73)/13)*13;this.pMap.setMapScale(Math.floor((y-73)/13)+1);}else{if(y>307){this.pMap.mapZoomIn(1,"zoom");s=73+(this.pMap.s-1)*13;}}}this.scaleseldoc.style.top=s+"px";if(this.type==3){this.scaleslitherdoc.style.top=s+"px";}else{this.scaleslitherdoc.style.top=(s-2)+"px";}}else{if(y<73){this.pMap.mapZoomOut(1,"zoom");}else{this.pMap.mapZoomIn(1,"zoom");}}}}ZdcEvent.stopPropagation(_10d);return false;};ZdcControl.prototype.OnMouseDownSlither=function(_111){if(document.all){this.SlitherPixelY=this.scaleslitherdoc.style.pixelTop;}else{this.SlitherPixelY=parseInt(this.scaleslitherdoc.style.top);}this.dragscreeny=_111.screenY;this.dragy=this.zoomstart+Math.floor((this.pMap.s-1)*this.zoomheight);this.Slither=true;this.dragfrom=this.dragy;this.dragscreenfrom=_111.screenY;this.zoomlim=this.zoomend-this.zoomheight;if(this.cursorflg==true){this.scaleslitherdoc.style.cursor="url("+this.usercursor2+"), pointer";}else{if(this.mousecursor=="hand"){this.scaleslitherdoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";}}ZdcDrag.StartDragging(this.scaleslitherdoc,this.dragging.bindAsEventListener(this),this.dragend.bindAsEventListener(this));ZdcEvent.stopPropagation(_111);return false;};ZdcControl.prototype.MouseOnClick=function(_112){var _113=this.pMap;if(document.all){var x=_112.offsetX;var y=_112.offsetY;}else{var x=_112.layerX;var y=_112.layerY;}var s;if(y<60){if(y<20){if(x<20){_113.ScrollMapByDirection(1,1);}else{if(x>=20&&x<=40){_113.ScrollMapByDirection(0,1);}else{_113.ScrollMapByDirection(-1,1);}}}else{if(y>=20&&y<=40){if(x<20){_113.ScrollMapByDirection(1,0);}else{if(x>=20&&x<=40){_113.restoreMapLocation();}else{_113.ScrollMapByDirection(-1,0);}}}else{if(x<20){_113.ScrollMapByDirection(1,-1);}else{if(x>=20&&x<=40){_113.ScrollMapByDirection(0,-1);}else{_113.ScrollMapByDirection(-1,-1);}}}}}else{if(this.zoomlistopen){if(y<73){_113.mapZoomOut(1,"zoom");s=73+(this.pMap.s-1)*13;}else{if(73<=y&&y<307){s=73+Math.floor((y-73)/13)*13;_113.setMapScale(Math.floor((y-73)/13)+1);}else{if(y>=307){_113.mapZoomIn(1,"zoom");s=73+(this.pMap.s-1)*13;}}}this.scaleseldoc.style.top=s+"px";if(this.type==3){this.scaleslitherdoc.style.top=s+"px";}else{this.scaleslitherdoc.style.top=(s-2)+"px";}}else{if(y<73){_113.mapZoomOut(1,"zoom");}else{_113.mapZoomIn(1,"zoom");}}}ZdcEvent.stopPropagation(_112);return false;};ZdcControl.prototype.MouseOnClickChg=function(_117){var y;this.Slither=false;if(this.zoomlistopen){this.basedoc.innerHTML="<IMG src="+this.CtlSmallImage+">";this.changedoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlChgImage+">";this.scaleseldoc.style.visibility="hidden";this.scaleslitherdoc.style.visibility="hidden";if(this.type==3){this.shadowlargedoc.style.visibility="hidden";this.shadowsmalldoc.style.visibility="visible";}this.zoomlistopen=false;this.doc.style.height="92px";this.basedoc.style.height="92px";}else{this.basedoc.innerHTML="<IMG src="+this.CtlImage+">";this.changedoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlNoChgImage+">";this.scaleseldoc.style.visibility="visible";this.scaleslitherdoc.style.visibility="visible";if(this.type==3){this.shadowsmalldoc.style.visibility="hidden";this.shadowlargedoc.style.visibility="visible";}y=73+(this.pMap.s-1)*13;this.scaleseldoc.style.top=y+"px";if(this.type==3){this.scaleslitherdoc.style.top=y+"px";}else{this.scaleslitherdoc.style.top=(y-2)+"px";}this.doc.style.height="330px";this.basedoc.style.height="320px";this.zoomlistopen=true;}ZdcEvent.stopPropagation(_117);return false;};ZdcControl.prototype.OnMouseMoveDoc=function(_119){if(ZdcDrag.IsDragging()){return false;}ZdcEvent.stopPropagation(_119);return false;};ZdcControl.prototype.ConTextMenu=function(_11a){ZdcEvent.stopPropagation(_11a);return false;};ZdcControl.prototype.dragging=function(e){if(this.cursorflg==true){this.scaleslitherdoc.style.cursor="url("+this.usercursor2+"), pointer";this.basedoc.style.cursor="url("+this.usercursor2+"), pointer";this.changedoc.style.cursor="url("+this.usercursor2+"), pointer";this.scaleseldoc.style.cursor="url("+this.usercursor2+"), pointer";this.shadowsmalldoc.style.cursor="url("+this.usercursor2+"), pointer";this.shadowlargedoc.style.cursor="url("+this.usercursor2+"), pointer";}else{if(this.mousecursor=="hand"){this.scaleslitherdoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";this.basedoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";this.changedoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";this.scaleseldoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";this.shadowsmalldoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";this.shadowlargedoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";}}this.newscreeny=e.screenY;if(this.zoomlistopen){var _11c=this.dragfrom-(this.dragscreenfrom-this.newscreeny);if(this.zoomstart>_11c){if(this.type==3){this.scaleslitherdoc.style.top=73+"px";}else{this.scaleslitherdoc.style.top=73-2+"px";}this.scaleseldoc.style.top=73+"px";this.dragy=73;this.dragscreeny=73;this.zoomImage();}else{if(this.zoomlim<_11c){if(this.type==3){this.scaleslitherdoc.style.top=this.zoomlim+"px";}else{this.scaleslitherdoc.style.top=this.zoomlim-2+"px";}this.scaleseldoc.style.top=this.zoomlim+"px";this.dragy=this.zoomlim;this.dragscreeny=this.zoomlim;this.zoomImage();}else{if(Math.abs(this.dragscreeny-this.newscreeny)>=this.zoomheight){heightcnt=Math.round((_11c-this.zoomstart)/(this.zoomheight));heightpx=73+Math.round(heightcnt*this.zoomheight);if(this.type==3){this.scaleslitherdoc.style.top=heightpx+"px";}else{this.scaleslitherdoc.style.top=heightpx-2+"px";}this.scaleseldoc.style.top=heightpx+"px";this.dragy=_11c;this.dragscreeny=this.newscreeny;this.zoomImage();}}}}};ZdcControl.prototype.zoomImage=function(){this.pMap.ZdcZoomChangeImage.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner1.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner2.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner3.style.visibility="visible";this.pMap.ZdcZoomChangeImageCorner4.style.visibility="visible";this.pMap.ZdcZoomChangeImage.style.filter="alpha(opacity=50)";this.pMap.ZdcZoomChangeImage.style.mozOpacity="0.5";this.pMap.ZdcZoomChangeImage.style.opacity="0.5";var s=Math.floor((this.dragy-this.zoomstart)/this.zoomheight)+2;var _11e=this.pMap.s;var _11f=s;if(_11e<_11f){var img=this.pMap.ZoomChangeImageIn;var img1=this.pMap.ZoomChangeImageCorner1;var img2=this.pMap.ZoomChangeImageCorner2;var img3=this.pMap.ZoomChangeImageCorner3;var img4=this.pMap.ZoomChangeImageCorner4;}else{if(_11e==_11f){var img=this.pMap.ZoomChangeImageClear;var img1=this.pMap.ZoomChangeImageCorner4;var img2=this.pMap.ZoomChangeImageCorner3;var img3=this.pMap.ZoomChangeImageCorner2;var img4=this.pMap.ZoomChangeImageCorner1;}else{var img=this.pMap.ZoomChangeImageOut;var img1=this.pMap.ZoomChangeImageCorner4;var img2=this.pMap.ZoomChangeImageCorner3;var img3=this.pMap.ZoomChangeImageCorner2;var img4=this.pMap.ZoomChangeImageCorner1;}}if(_11e==_11f){var _125=this.pMap.ZdcMapWpx-6;var _126=this.pMap.ZdcMapHpx-6;}else{if(_11e<_11f){var _125=Math.floor(this.pMap.ZdcMapWpx*(ZdcZoom.map_defw[_11f]/ZdcZoom.map_defw[_11e]));var _126=Math.floor(this.pMap.ZdcMapHpx*(ZdcZoom.map_defh[_11f]/ZdcZoom.map_defh[_11e]));}else{var _125=Math.floor(this.pMap.ZdcMapWpx*(ZdcZoom.map_defw[_11e]/ZdcZoom.map_defw[_11f]));var _126=Math.floor(this.pMap.ZdcMapHpx*(ZdcZoom.map_defh[_11e]/ZdcZoom.map_defh[_11f]));}}if(this.pMap.CenterFirst){var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}else{if(this.pMap.msgopenstatus){if(this.pMap.getMapBoundBox(null,_11e).isContainPoint(this.pMap.ZdcMsgWindowObj.Point)){if(_11e<_11f){var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgWindowObj.Point.mx,this.pMap.ZdcMsgWindowObj.Point.my,_11e,_11f);}else{var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgWindowObj.Point.mx,this.pMap.ZdcMsgWindowObj.Point.my,_11f,_11e);}var cx=this.pMap.ZdcMapCenterpx.x+Math.round((newp.mx-this.pMap.mx)/ZdcZoom.map_defw[_11e]);var cy=this.pMap.ZdcMapCenterpx.y+Math.round((this.pMap.my-newp.my)/ZdcZoom.map_defh[_11e]);}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}else{if(this.pMap.usermsgopenstatus){if(this.pMap.getMapBoundBox(null,_11e).isContainPoint(this.pMap.ZdcUserMsgWindow.Point)){if(_11e<_11f){var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcUserMsgWindow.Point.mx,this.pMap.ZdcUserMsgWindow.Point.my,_11e,_11f);}else{var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcUserMsgWindow.Point.mx,this.pMap.ZdcUserMsgWindow.Point.my,_11f,_11e);}var cx=this.pMap.ZdcMapCenterpx.x+Math.round((newp.mx-this.pMap.mx)/ZdcZoom.map_defw[_11e]);var cy=this.pMap.ZdcMapCenterpx.y+Math.round((this.pMap.my-newp.my)/ZdcZoom.map_defh[_11e]);}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}else{if(this.pMap.htmlopenstatus){if(this.pMap.getMapBoundBox(null,_11e).isContainPoint(this.pMap.ZdcMsgHtml.Point)){if(_11e<_11f){var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgHtml.Point.mx,this.pMap.ZdcMsgHtml.Point.my,_11e,_11f);}else{var newp=this.pMap.GetNewCenterPoint(this.pMap.ZdcMsgHtml.Point.mx,this.pMap.ZdcMsgHtml.Point.my,_11f,_11e);}var cx=this.pMap.ZdcMapCenterpx.x+Math.round((newp.mx-this.pMap.mx)/ZdcZoom.map_defw[_11e]);var cy=this.pMap.ZdcMapCenterpx.y+Math.round((this.pMap.my-newp.my)/ZdcZoom.map_defh[_11e]);}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}else{var cx=this.pMap.ZdcMapCenterpx.x;var cy=this.pMap.ZdcMapCenterpx.y;}}}}this.pMap.ZdcZoomChangeImage.style.left=(cx-Math.floor(_125/2)-3)+"px";this.pMap.ZdcZoomChangeImage.style.top=(cy-Math.floor(_126/2)-3)+"px";this.pMap.ZdcZoomChangeImage.style.width=(_125+6)+"px";this.pMap.ZdcZoomChangeImage.style.height=(_126+6)+"px";this.pMap.ZdcZoomChangeImage.innerHTML="<DIV style='border:0px solid #007eca'><IMG style='border:4px solid #007eca' src="+img+" width="+_125+"px height="+_126+"px ></DIV>";this.pMap.ZdcZoomChangeImage.style.position="absolute";if(document.all){this.pMap.ZdcZoomChangeImageCorner1.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft-16)+"px";this.pMap.ZdcZoomChangeImageCorner1.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop-16)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft+_125+2)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop+_126+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.left=(this.pMap.ZdcZoomChangeImage.style.pixelLeft+_125+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.top=(this.pMap.ZdcZoomChangeImage.style.pixelTop+_126+2)+"px";this.pMap.ZdcZoomChangeImageCorner1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img1+")";this.pMap.ZdcZoomChangeImageCorner2.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img2+")";this.pMap.ZdcZoomChangeImageCorner3.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img3+")";this.pMap.ZdcZoomChangeImageCorner4.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img4+")";this.pMap.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+img1+" style='display:none'>";this.pMap.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+img2+" style='display:none'>";this.pMap.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+img3+" style='display:none'>";this.pMap.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+img4+" style='display:none'>";}else{this.pMap.ZdcZoomChangeImageCorner1.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)-16)+"px";this.pMap.ZdcZoomChangeImageCorner1.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)-16)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)+_125+2)+"px";this.pMap.ZdcZoomChangeImageCorner2.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)-16)+"px";this.pMap.ZdcZoomChangeImageCorner3.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)+_126+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.left=(parseInt(this.pMap.ZdcZoomChangeImage.style.left)+_125+2)+"px";this.pMap.ZdcZoomChangeImageCorner4.style.top=(parseInt(this.pMap.ZdcZoomChangeImage.style.top)+_126+2)+"px";this.pMap.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+img1+">";this.pMap.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+img2+">";this.pMap.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+img3+">";this.pMap.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+img4+">";}this.pMap.ZdcZoomChangeImageCorner1.style.width="20px";this.pMap.ZdcZoomChangeImageCorner1.style.height="20px";this.pMap.ZdcZoomChangeImageCorner1.style.position="absolute";this.pMap.ZdcZoomChangeImageCorner2.style.width="20px";this.pMap.ZdcZoomChangeImageCorner2.style.height="20px";this.pMap.ZdcZoomChangeImageCorner2.style.position="absolute";this.pMap.ZdcZoomChangeImageCorner3.style.width="20px";this.pMap.ZdcZoomChangeImageCorner3.style.height="20px";this.pMap.ZdcZoomChangeImageCorner3.style.position="absolute";this.pMap.ZdcZoomChangeImageCorner4.style.width="20px";this.pMap.ZdcZoomChangeImageCorner4.style.height="20px";this.pMap.ZdcZoomChangeImageCorner4.style.position="absolute";};ZdcControl.prototype.OnMouseMoveBaseDoc=function(_12a){if(document.all){var x=_12a.offsetX;var y=_12a.offsetY;}else{var x=_12a.layerX;var y=_12a.layerY;}var s,sl;if(this.zoomlistopen&&this.type!=3){if(this.type!=3){this.scaledoc.style.visibility="visible";}if(73<y&&y<307&&!this.Slither){this.scaledoc.style.top=(y+4)+"px";s="1/"+ZdcZoom.map_defs[Math.abs(Math.floor((y-73)/13))+1];sl=Math.abs(Math.floor((y-73)/13))+1;this.CtlScaleImage=ZdcCommon.ZdcMapServer+"/img/cursorscale"+sl+".png";if(document.all){this.scaledoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.CtlScaleImage+")";this.scaledoc.innerHTML="<IMG src="+this.CtlScaleImage+" style='display:none'>";}else{this.scaledoc.innerHTML="<IMG style='position:absolute;' src="+this.CtlScaleImage+">";}}else{this.scaledoc.style.visibility="hidden";}}return false;};ZdcControl.prototype.OnMouseMoveSel=function(_12f){if(document.all){var id=Math.floor((this.scaleseldoc.style.pixelTop-73)/13)+1;var s="1/"+ZdcZoom.map_defs[id];var y=this.scaleseldoc.style.pixelTop;}else{var id=Math.floor((parseInt(this.scaleseldoc.style.top)-73)/13)+1;var s="1/"+ZdcZoom.map_defs[id];var y=parseInt(this.scaleseldoc.style.top);}if(this.type!=3){this.scaledoc.style.visibility="visible";}this.scaledoc.style.top=(y+4)+"px";return false;};ZdcControl.prototype.OnMouseUp=function(_133){if(this.cursorflg==true){this.scaleslitherdoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.scaleslitherdoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}if(ZdcDrag.IsDragging()){return false;}ZdcEvent.stopPropagation(_133);};ZdcControl.prototype.OnMouseUpSlither=function(_134){if(ZdcDrag.IsDragging()){return false;}};ZdcControl.prototype.dragend=function(){this.scaleseldoc.style.cursor="default";if(this.cursorflg==true){this.basedoc.style.cursor="url("+this.usercursor1+"), pointer";this.changedoc.style.cursor="url("+this.usercursor1+"), pointer";this.shadowsmalldoc.style.cursor="url("+this.usercursor1+"), pointer";this.shadowlargedoc.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.basedoc.style.cursor="pointer";this.changedoc.style.cursor="pointer";this.shadowsmalldoc.style.cursor="pointer";this.shadowlargedoc.style.cursor="pointer";if(!ZdcCommon.UserAgentIsSafari()){this.scaleslitherdoc.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}}}var s=Math.round((this.dragy-this.zoomstart)/(this.zoomheight))+1;this.pMap.setMapScale(s);this.Slither=false;ZdcDrag.ClearDraging();this.pMap.ZdcZoomChangeImage.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner1.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner2.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner3.style.visibility="hidden";this.pMap.ZdcZoomChangeImageCorner4.style.visibility="hidden";};ZdcControl.prototype.OnMouseMoveSlither=function(_136){if(document.all){var y=this.scaleslitherdoc.style.pixelTop;}else{var y=parseInt(this.scaleslitherdoc.style.top);}if(73<y&&y<307){if(document.all){var id=Math.floor((this.scaleslitherdoc.style.pixelTop-73)/13)+1;var s="1/"+ZdcZoom.map_defs[id];var y=this.scaleslitherdoc.style.pixelTop;}else{var id=Math.floor((parseInt(this.scaleslitherdoc.style.top)-73)/13)+1;var s="1/"+ZdcZoom.map_defs[id];var y=parseInt(this.scaleslitherdoc.style.top);}if(this.type!=3){this.scaledoc.style.visibility="visible";}this.scaledoc.style.top=(y+4)+"px";var sl=Math.abs(Math.floor((y-73)/13))+1;this.CtlScaleImage=ZdcCommon.ZdcMapServer+"/img/cursorscale"+sl+".png";if(document.all){this.scaledoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.CtlScaleImage+")";this.scaledoc.innerHTML="<IMG src="+this.CtlScaleImage+" style='display:none'>";}else{this.scaledoc.innerHTML="<IMG src="+this.CtlScaleImage+">";}}};ZdcControl.prototype.OnMouseOver=function(_13b){if(document.all){var x=_13b.offsetX;var y=_13b.offsetY;}else{var x=_13b.layerX;var y=_13b.layerY;}if(this.type==1&&this.pMap.mediamode=="screen"){this.doc.style.filter="alpha(opacity=100)";this.doc.style.mozOpacity="1.0";this.doc.style.opacity="1.0";}};ZdcControl.prototype.OnMouseOut=function(_13e){if(this.type==1&&this.pMap.mediamode=="screen"){this.doc.style.filter="alpha(opacity=60)";this.doc.style.mozOpacity="0.6";this.doc.style.opacity="0.6";}this.scaledoc.style.visibility="hidden";};ZdcControl.prototype.OnMouseOverChg=function(_13f){if(this.type==1&&this.pMap.mediamode=="screen"){this.changedoc.style.filter="alpha(opacity=100)";this.changedoc.style.mozOpacity="1.0";this.changedoc.style.opacity="1.0";}};ZdcControl.prototype.OnMouseOutChg=function(_140){if(this.type==1&&this.pMap.mediamode=="screen"){this.changedoc.style.filter="alpha(opacity=60)";this.changedoc.style.mozOpacity="0.6";this.changedoc.style.opacity="0.6";}};function ZdcMsgHtml(){this.openstatus=false;this.htmloffset=new ZdcPixel(0,0);this.doc=document.createElement("DIV");this.doc.style.zIndex="10100";this.doc.style.position="absolute";this.doc.setAttribute("id","msghtmldoc");this.arrowtype="center";this.wintype="small";this.htmltype="url";this.bordertype=1;this.doctitle=document.createElement("DIV");this.doctitle.style.position="absolute";this.doctitle.img=ZdcCommon.ZdcMapServer+"/usrimg/BorderTitle.png";this.doctitle.style.top="0px";this.doctitle.style.left="0px";this.doctitle.style.zIndex="2";this.titlefont="monospace";this.titlesize="16px";this.titlealign="left";this.docb_left=document.createElement("DIV");this.docb_left.style.position="absolute";this.docb_left.img=ZdcCommon.ZdcMapServer+"/usrimg/Border.png";this.docb_left.style.top="0px";this.docb_left.style.left="0px";this.docb_left.style.zIndex="2";this.docb_right=document.createElement("DIV");this.docb_right.style.position="absolute";this.docb_right.img=ZdcCommon.ZdcMapServer+"/usrimg/Border.png";this.docb_right.style.top="0px";this.docb_right.style.left="0px";this.docb_right.style.zIndex="2";this.docb_top_left=document.createElement("DIV");this.docb_top_left.style.position="absolute";this.docb_top_left.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_top_left.png";this.docb_top_left.style.top="0px";this.docb_top_left.style.left="0px";this.docb_top_left.style.zIndex="3";this.docb_top_right=document.createElement("DIV");this.docb_top_right.style.position="absolute";this.docb_top_right.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_top_right.png";this.docb_top_right.style.top="0px";this.docb_top_right.style.left="0px";this.docb_top_right.style.zIndex="3";this.docb_bot_left=document.createElement("DIV");this.docb_bot_left.style.position="absolute";this.docb_bot_left.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_bot_left.png";this.docb_bot_left.style.top="0px";this.docb_bot_left.style.left="0px";this.docb_bot_left.style.zIndex="3";this.docb_bot_right=document.createElement("DIV");this.docb_bot_right.style.position="absolute";this.docb_bot_right.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_bot_right.png";this.docb_bot_right.style.top="0px";this.docb_bot_right.style.left="0px";this.docb_bot_right.style.zIndex="3";this.docbottom=document.createElement("DIV");this.docbottom.style.position="absolute";this.docbottom.img=ZdcCommon.ZdcMapServer+"/usrimg/Bottom.png";this.docbottom.style.top="0px";this.docbottom.style.left="0px";this.docbottom.style.zIndex="2";this.docbarrow=document.createElement("DIV");this.docbarrow.style.position="absolute";this.docbarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow.png";this.docbarrow.pntimg=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow.gif";this.docbarrow.style.top="0px";this.docbarrow.style.left="0px";this.docbarrow.style.zIndex="3";this.doctext=document.createElement("DIV");this.doctext.style.position="absolute";this.doctext.text="";this.doctext.style.top="0px";this.doctext.style.left="0px";this.doctext.style.zIndex="4";this.docclose=document.createElement("DIV");this.docclose.style.position="absolute";this.docclose.img=ZdcCommon.ZdcMapServer+"/usrimg/windows_close.png";this.docclose.style.top="3px";this.docclose.style.left="3px";this.docclose.style.zIndex="5";this.docclose.status=true;if(document.all){this.docclose.style.cursor="hand";}else{this.docclose.style.cursor="pointer";}this.docwins=document.createElement("DIV");this.docwins.style.position="absolute";this.docwins.img=ZdcCommon.ZdcMapServer+"/usrimg/windows.png";this.docwins.style.top="3px";this.docwins.style.left="3px";this.docwins.style.zIndex="5";this.docwins.status=true;if(document.all){this.docwins.style.cursor="hand";}else{this.docwins.style.cursor="pointer";}this.shddoc=document.createElement("DIV");this.shdhtmloffset=new ZdcPixel(0,0);this.shddoc.style.zIndex="10099";this.shddoc.style.position="absolute";this.shddoc.setAttribute("id","msghtmlshddoc");this.shddocbase=document.createElement("DIV");this.shddocbase.style.position="absolute";this.shddocbase.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_shadow1.png";this.shddocbase.style.top="0px";this.shddocbase.style.left="0px";this.shddocbase.style.zIndex="2";this.shddocarrow=document.createElement("DIV");this.shddocarrow.style.position="absolute";this.shddocarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow_shadow1.png";this.shddocarrow.style.top="0px";this.shddocarrow.style.left="0px";this.shddocarrow.style.zIndex="2";this.shddoc.appendChild(this.shddocbase);this.shddoc.appendChild(this.shddocarrow);this.doc.appendChild(this.doctitle);this.doc.appendChild(this.docbottom);this.doc.appendChild(this.docb_left);this.doc.appendChild(this.docb_right);this.doc.appendChild(this.docb_top_left);this.doc.appendChild(this.docb_top_right);this.doc.appendChild(this.docb_bot_left);this.doc.appendChild(this.docb_bot_right);this.doc.appendChild(this.docbarrow);this.doc.appendChild(this.doctext);this.doc.appendChild(this.docclose);this.doc.appendChild(this.docwins);this.dochtml=document.createElement("DIV");this.dochtml.style.position="absolute";this.dochtml.style.top="24px";this.dochtml.style.left="0px";this.dochtml.style.backgroundColor="#FFFFFF";this.doc.appendChild(this.dochtml);ZdcObjArray.push(this);this.docclose.onclick=this.MouseClickClose.bindAsEventListener(this);this.docclose.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docwins.onclick=this.MouseClickWins.bindAsEventListener(this);this.docwins.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownDoc.bindAsEventListener(this);this.doc.ondblclick=this.MouseDownDoc.bindAsEventListener(this);this.doc.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);this.shddoc.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);this.dochtml.onclick=this.MouseDownDoc.bindAsEventListener(this);this.doctitle.onclick=this.MouseDownDoc.bindAsEventListener(this);this.docbottom.onclick=this.MouseDownDoc.bindAsEventListener(this);this.doctext.onclick=this.MouseDownDoc.bindAsEventListener(this);this.shddocbase.onmousedown=this.MouseDownDocNotPropaReturnFalse.bindAsEventListener(this);this.shddocarrow.onmousedown=this.MouseDownDocNotPropaReturnFalse.bindAsEventListener(this);this.docbarrow.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docbottom.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docb_left.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docb_right.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docb_top_left.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docb_top_right.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docb_bot_left.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docb_bot_right.onmousedown=this.MouseDownDocReturnFalse.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.dochtml.ontouchstart=this.MouseDownDoc.bindAsEventListener(this);this.doctext.ontouchstart=this.MouseDownDoc.bindAsEventListener(this);this.doc.ontouchstart=this.MouseDownDoc.bindAsEventListener(this);this.doc.ontouchend=this.MouseDownDoc.bindAsEventListener(this);this.doc.ongesturestart=this.MouseDownDoc.bindAsEventListener(this);this.doc.ongesturechange=this.MouseDownDoc.bindAsEventListener(this);this.doc.ongestureend=this.MouseDownDoc.bindAsEventListener(this);this.doc.ontouchmove=this.MouseDownDoc.bindAsEventListener(this);this.docwins.ontouchend=this.MouseClickWins.bindAsEventListener(this);this.docwins.ontouchstart=this.MouseDownDocReturnFalse.bindAsEventListener(this);this.docclose.ontouchend=this.MouseClickClose.bindAsEventListener(this);this.docclose.ontouchstart=this.MouseDownDocReturnFalse.bindAsEventListener(this);}this.AddMouseWheelListener(this.MouseDownDoc.bindAsEventListener(this),true);}ZdcMsgHtml.prototype.AddMouseWheelListener=function(func,cap){if(this.doc.addEventListener){this.doc.addEventListener("DOMMouseScroll",func,cap);this.shddoc.addEventListener("DOMMouseScroll",func,cap);this.doc.addEventListener("mousewheel",func,cap);this.shddoc.addEventListener("mousewheel",func,cap);}else{if(this.doc.attachEvent){this.doc.attachEvent("onmousewheel",func);this.shddoc.attachEvent("onmousewheel",func);}}};ZdcMap.prototype.checkHtmlMsgWindow=function(){if(this.htmlopenstatus){var w=Math.floor(parseInt(this.ZdcMsgHtml.doc.style.width)*ZdcZoom.map_defw[this.s]);var h=Math.floor(parseInt(this.ZdcMsgHtml.doc.style.height)*ZdcZoom.map_defh[this.s]);var offx=Math.floor(parseInt(this.ZdcMsgHtml.htmloffset.x)*ZdcZoom.map_defw[this.s]);var offy=Math.floor(parseInt(this.ZdcMsgHtml.htmloffset.y)*ZdcZoom.map_defh[this.s]);var p1=this.ZdcMsgHtml.Point;var p0=new ZdcPoint(p1.mx+offx,p1.my-h-offy,2);var p2=new ZdcPoint(p0.mx+w,p0.my+h,2);var _14a=new ZdcBox(p0,p2);var _14b=this.getMapBoundBox();return _14b.isContainBox(_14a);}else{return -1;}};ZdcMsgHtml.prototype.ConTextMenu=function(e){ZdcEvent.stopPropagation(e);return false;};ZdcMsgHtml.prototype.MouseClickClose=function(e){ZdcEvent.trigger(this.pMap,"htmlmsgclickclose");this.pMap.closeZdcMsgHtml();ZdcEvent.stopPropagation(e);};ZdcMsgHtml.prototype.MouseClickWins=function(e){ZdcEvent.trigger(this.pMap,"htmlmsgclickwins");ZdcEvent.stopPropagation(e);};ZdcMsgHtml.prototype.MouseDownDoc=function(e){ZdcEvent.stopPropagation(e);};ZdcMsgHtml.prototype.MouseDownDocReturnFalse=function(e){ZdcEvent.stopPropagation(e);return false;};ZdcMsgHtml.prototype.MouseDownDocNotPropaReturnFalse=function(e){return false;};ZdcMsgHtml.prototype.setHtml=function(html,_153,w,h){var ww=w+Number(8);this.doctitle.style.width=(w-Number(10))+"px";this.doctitle.style.height="24px";this.doctitle.style.top="0px";this.doctitle.style.left="9px";if(this.bordertype==1){this.doctitle.img=ZdcCommon.ZdcMapServer+"/usrimg/BorderTitle.png";}else{this.doctitle.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorderTitle.gif";}this.doctitle.innerHTML="<IMG src="+this.doctitle.img+" width="+this.doctitle.style.width+" height="+24+">";this.docbottom.style.width=(w-Number(10))+"px";this.docbottom.style.height="16px";this.docbottom.style.top=(h+Number(24))+"px";this.docbottom.style.left="9px";if(this.bordertype==1){this.docbottom.img=ZdcCommon.ZdcMapServer+"/usrimg/Bottom.png";}else{this.docbottom.img=ZdcCommon.ZdcMapServer+"/usrimg/Bbottom.gif";}this.docbottom.innerHTML="<IMG src="+this.docbottom.img+" width="+this.docbottom.style.width+" height="+16+">";var hh=h+Number(40);this.docb_left.style.width="4px";this.docb_left.style.height=h+"px";this.docb_left.style.top="24px";this.docb_left.style.left="0px";if(this.bordertype==1){this.docb_left.img=ZdcCommon.ZdcMapServer+"/usrimg/Border.png";}else{this.docb_left.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorder.gif";}this.docb_left.innerHTML="<IMG style='border:0px' src="+this.docb_left.img+" width="+4+" height="+h+">";this.docb_right.style.width="4px";this.docb_right.style.height=h+"px";this.docb_right.style.top="24px";this.docb_right.style.left=(w+Number(4))+"px";if(this.bordertype==1){this.docb_right.img=ZdcCommon.ZdcMapServer+"/usrimg/Border.png";}else{this.docb_right.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorder.gif";}this.docb_right.innerHTML="<IMG style='border:0px' src="+this.docb_right.img+" width="+4+" height="+h+">";this.docb_top_left.style.width="9px";this.docb_top_left.style.height="24px";this.docb_top_left.style.top="0px";this.docb_top_left.style.left="0px";if(this.bordertype==1){this.docb_top_left.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_top_left.png";}else{this.docb_top_left.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorder_top_left.gif";}this.docb_top_left.innerHTML="<IMG src="+this.docb_top_left.img+" >";this.docb_top_right.style.width="9px";this.docb_top_right.style.height="24px";this.docb_top_right.style.top="0px";this.docb_top_right.style.left=(w+Number(4)-Number(5))+"px";if(this.bordertype==1){this.docb_top_right.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_top_right.png";}else{this.docb_top_right.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorder_top_right.gif";}this.docb_top_right.innerHTML="<IMG style='border:0px' src="+this.docb_top_right.img+" width="+9+" height="+24+">";this.docb_bot_left.style.width="9px";this.docb_bot_left.style.height="16px";this.docb_bot_left.style.top=(h+Number(24))+"px";this.docb_bot_left.style.left="0px";if(this.bordertype==1){this.docb_bot_left.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_bot_left.png";}else{this.docb_bot_left.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorder_bot_left.gif";}this.docb_bot_left.innerHTML="<IMG style='border:0px' src="+this.docb_bot_left.img+" width="+9+" height="+16+">";this.docb_bot_right.style.width="9px";this.docb_bot_right.style.height="16px";this.docb_bot_right.style.top=(h+Number(24))+"px";this.docb_bot_right.style.left=(w+Number(4)-Number(5))+"px";if(this.bordertype==1){this.docb_bot_right.img=ZdcCommon.ZdcMapServer+"/usrimg/Border_bot_right.png";}else{this.docb_bot_right.img=ZdcCommon.ZdcMapServer+"/usrimg/BBorder_bot_right.gif";}this.docb_bot_right.innerHTML="<IMG style='border:0px' src="+this.docb_bot_right.img+" width="+9+" height="+16+">";this.docbarrow.style.width="32px";this.docbarrow.style.height="32px";this.docbarrow.style.top=(h+Number(24)+Number(14))+"px";if(this.arrowtype=="left"){if(this.bordertype==1){this.docbarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow.png";this.docbarrow.pntimg=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow.gif";}else{this.docbarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/Bbottom_left_arrow.png";this.docbarrow.pntimg=ZdcCommon.ZdcMapServer+"/usrimg/Bbottom_left_arrow.gif";}this.docbarrow.style.left="0px";}else{if(this.arrowtype=="center"){if(this.bordertype==1){this.docbarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_center_arrow.png";this.docbarrow.pntimg=ZdcCommon.ZdcMapServer+"/usrimg/bottom_center_arrow.gif";}else{this.docbarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/Bbottom_center_arrow.png";this.docbarrow.pntimg=ZdcCommon.ZdcMapServer+"/usrimg/Bbottom_center_arrow.gif";}this.docbarrow.style.left=(Math.round(w/2)+Number(4))+"px";}}if(this.pMap.mediamode=="screen"){if(document.all){this.docbarrow.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.docbarrow.img+")";this.docbarrow.innerHTML="<IMG src="+this.docbarrow.img+" style='display:none' />";}else{this.docbarrow.innerHTML="<IMG style='border:0px' src="+this.docbarrow.img+" width="+32+" height="+32+">";}}else{this.docbarrow.innerHTML="<IMG style='border:0px' src="+this.docbarrow.pntimg+" width="+32+" height="+32+">";}this.doctext.style.width=(w-20)+"px";this.doctext.style.height="24px";this.doctext.style.top="4px";this.doctext.style.left="4px";var ttop=0;if(this.docwins.status){var _159=w-40;this.doctext.style.width=(w-40)+"px";}else{var _159=w-20;this.doctext.style.width=(w-20)+"px";}var _15a=20;var _15b=0;this.doctext.style.clip="rect("+ttop+"px "+_159+"px "+_15a+"px "+_15b+"px)";if(this.bordertype==1){this.doctext.innerHTML="<DIV align='"+this.titlealign+"'><span style='font-size:"+this.titlesize+";font-family:"+this.titlefont+"'>"+_153+"</span></DIV>";}else{if(document.all){this.doctext.innerHTML="<DIV align='"+this.titlealign+"'><span style='filter:shadow(color=#555555, strength=2, direction=135);width:100%;font-size:"+this.titlesize+";font-weight:bold;font-family:"+this.titlefont+";color:#dddddd;'>"+_153+"</span></DIV>";}else{if(ZdcCommon.UserAgentIsFireFox()){this.doctext.innerHTML="<DIV align='"+this.titlealign+"'><span style='text-shadow:#555555 2px 2px 1px;width:100%;font-size:"+this.titlesize+";font-family:"+this.titlefont+";color:#eeeeee;'>"+_153+"</span></DIV>";}else{this.doctext.innerHTML="<DIV align='"+this.titlealign+"'><span style='text-shadow:#444444 2px 2px 1px;width:100%;font-size:"+this.titlesize+";font-weight:bold;font-family:"+this.titlefont+";color:#eeeeee;'>"+_153+"</span></DIV>";}}}this.doctext.text=_153;this.docclose.style.width="20px";this.docclose.style.height="20px";this.docclose.style.top="4px";this.docclose.style.left=(w-14)+"px";this.docclose.innerHTML="<IMG style='border:0px' src="+this.docclose.img+" width="+16+" height="+16+">";this.docwins.style.width="20px";this.docwins.style.height="20px";this.docwins.style.top="4px";this.docwins.style.left=(w-34)+"px";if(this.wintype=="small"){this.docwins.img=ZdcCommon.ZdcMapServer+"/usrimg/windows_open.png";}else{if(this.wintype=="large"){this.docwins.img=ZdcCommon.ZdcMapServer+"/usrimg/windows.png";}}this.docwins.innerHTML="<IMG style='border:0px' src="+this.docwins.img+" width="+16+" height="+16+">";this.dochtml.style.width=w+"px";this.dochtml.style.height=h+"px";this.dochtml.style.top="24px";this.dochtml.style.left="4px";if(this.htmltype=="url"){this.dochtml.innerHTML="<iframe style=\"border:0px;width:100%;height:100%\" src=\""+html+"\"></iframe>";}else{if(this.htmltype=="tag"){this.dochtml.innerHTML="<div>"+html+"</div>";}}this.html=html;var www=Math.round(ww*277/193);var hhh=Math.round(hh/1.6);this.shddocbase.style.width=www+"px";this.shddocbase.style.height=hhh+"px";this.shddocbase.style.top=(hh-hhh+22)+"px";this.shddocbase.style.left="10px";if(this.wintype=="small"){this.shddocbase.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_shadow1.png";}else{this.shddocbase.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_shadow2.png";}if(document.all){this.shddocbase.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.shddocbase.img+" sizingMethod='scale')";this.shddocbase.style.height=hhh+"px";this.shddocbase.style.width=www+"px";this.shddocbase.innerHTML="<IMG src="+this.shddocbase.img+" width="+www+" height="+hhh+" style='display:none'/>";}else{this.shddocbase.innerHTML="<IMG src="+this.shddocbase.img+" width="+www+" height="+hhh+">";}if(this.arrowtype=="left"){this.shddocarrow.style.width="65px";this.shddocarrow.style.height="40px";this.shddocarrow.style.top=(hh-3)+"px";this.shddocarrow.style.left="0px";}else{if(this.arrowtype=="center"){this.shddocarrow.style.width="70px";this.shddocarrow.style.height="45px";this.shddocarrow.style.top=(hh-5)+"px";this.shddocarrow.style.left=Math.round(ww/2)+"px";}}if(this.wintype=="small"){this.shddocarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow_shadow1.png";}else{this.shddocarrow.img=ZdcCommon.ZdcMapServer+"/usrimg/bottom_arrow_shadow2.png";}if(document.all){this.shddocarrow.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.shddocarrow.img+" sizingMethod='scale')";this.shddocarrow.innerHTML="<IMG src="+this.shddocarrow.img+" style='display:none'/>";}else{var sww=parseInt(this.shddocarrow.style.width);var shh=parseInt(this.shddocarrow.style.height);this.shddocarrow.innerHTML="<IMG src="+this.shddocarrow.img+" width="+sww+" height="+shh+">";}this.htmloffset.x=0;this.htmloffset.y=0-h-Number(24)-Number(16)-Number(30);if(this.docclose.status){this.docclose.style.visibility="visible";}else{this.docclose.style.visibility="hidden";}if(this.docwins.status){this.docwins.style.visibility="visible";}else{this.docwins.style.visibility="hidden";}};ZdcMsgHtml.prototype.setPoint=function(p){this.Point=p;};function ZdcUserImageLayer(url){this.layerID=null;this.url=url;this.tileWidth=256;this.tileHeight=256;this.zIndex=30;this.marginWidth=256;this.marginHeight=256;this.minzoom=1;this.maxzoom=18;this.canvasWidth=null;this.canvasHeight=null;this.addmapstatus=false;this.tiles=new Object();this.moveX=0;this.moveY=0;this.optimization_num=null;this.domains=new Array();this.common_param=new Object();if(this.url!=null){this.domains.push(this.url.split("/")[2]);}this.doc=document.createElement("div");this.doc.id=null;this.doc.style.position="absolute";this.doc.style.top="0px";this.doc.style.left="0px";this.doc.style.zIndex=this.zIndex;ZdcObjArray.push(this);}ZdcUserImageLayer.prototype.setZindex=function(_162){if(_162==""){return false;}if(_162.toString().match(/[^0-9-]{1,}/)){return false;}this.doc.style.zIndex=_162;return true;};ZdcUserImageLayer.prototype._setDomain=function(url,_164){var tmp=url.split("/");tmp[2]=_164;return tmp.join("/");};ZdcUserImageLayer.prototype.setLayerScale=ZdcUserLayer.prototype.setLayerScale;ZdcUserImageLayer.prototype.setParam=function(key,_167){if(key==""){return false;}this.common_param[key]=_167;for(var key in this.tiles){if(this.tiles.hasOwnProperty(key)){this.tiles[key].setUrl();}}return true;};ZdcUserImageLayer.prototype._checkPosition=function(_168,_169,_16a){this.moveY+=_169;this.moveX+=_168;var x=0,y=0;if(Math.abs(this.moveX)>=this.tileWidth/2){x=Math.round(this.moveX/this.tileWidth);this.moveX-=this.tileWidth*x;}if(Math.abs(this.moveY)>=this.tileHeight/2){y=Math.round(this.moveY/this.tileHeight);this.moveY-=this.tileHeight*y;}return [x,y];};ZdcUserImageLayer.prototype._controlZdcImageLayer=function(type){if(type==null||this.doc.style.visibility==type||this.addmapstatus==false){return false;}this.doc.style.visibility=type;return true;};ZdcUserImageLayer.prototype.hidden=function(){return this._controlZdcImageLayer("hidden");};ZdcUserImageLayer.prototype.visible=function(){return this._controlZdcImageLayer("visible");};function ZdcUserImageTile(url,_16f,size,zoom,left,top,_174){this.zoom=zoom;this.point=_16f;this.size=size;this.url=url;this.parent=_174;this.doc=document.createElement("img");this.doc.style.position="absolute";this.doc.alt="";if(navigator.userAgent.match(/MSIE 6.0/)){this.doc.galleryimg="no";}this.doc.style.left=left+"px";this.doc.style.top=top+"px";if(_174.layerID=="traffic"){this.param=new Object();this.param["lat"]=_16f.my;this.param["lon"]=_16f.mx;this.param["w"]=size.width;this.param["h"]=size.height;this.param["zoom"]=this.zoom;}else{this.param=new Object();this.param["ll"]=_16f.my+","+_16f.mx;this.param["size"]=size.width+","+size.height;this.param["zoom"]=this.zoom;}ZdcObjArray.push(this);}ZdcUserImageTile.prototype.setUrl=function(){for(var key in this.parent.common_param){if(this.parent.common_param.hasOwnProperty(key)){this.param[key]=this.parent.common_param[key];}}var cnt=0;var _177=this.url;for(var para in this.param){if(this.param.hasOwnProperty(para)){if(cnt==0){_177+="?";}else{_177+="&";}_177+=para+"="+this.param[para];cnt++;}}if(navigator.userAgent.match(/MSIE 6.0/)){this.doc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+_177+"')";this.doc.src=ZdcCommon.ZdcMapServer+"img/blank.gif";}else{this.doc.src=_177;cnt=10;}};function ZdcTrafficImageLayer(_179){if(!_179.toString().match(/[0-9]{12}/)){return null;}ZdcUserImageLayer.call(this,URL_TRAFFIC);this.tileWidth=512;this.tileHeight=512;this.layerID="traffic";this.marginWidth=256;this.marginHeight=256;this.rtype="ALL";this.sdate=_179;this.setParam("key",ZDC_KEY);this.setSdate(_179);return true;}ZdcTrafficImageLayer.prototype=new ZdcUserImageLayer();ZdcTrafficImageLayer.prototype.setSdate=function(_17a){if(!_17a.toString().match(/^[0-9]{12}$/)){return false;}this.sdate=_17a;return this.setParam("sdate",_17a);};ZdcTrafficImageLayer.prototype.setRoadType=function(_17b){if(!_17b.toString().match(/^(LOCAL|ALL|HIGHWAY){1,1}$/)){return false;}this.rtype=_17b;return this.setParam("rtype",_17b);};function ZdcTrafficImageLv2Layer(date,_17d){var URL=ZDC_SEARCHCGI+"/gettrafficimg_lv2.cgi";ZdcUserImageLayer.call(this,URL);this.tileWidth=512;this.tileHeight=512;this.layerID="trafficlv2";this.marginWidth=256;this.marginHeight=256;this.layer=_17d;this.date=date;this.setParam("key",ZDC_KEY);this.setDate(date);this.setLayer(_17d);}ZdcTrafficImageLv2Layer.prototype=new ZdcUserImageLayer();ZdcTrafficImageLv2Layer.prototype.setLayer=function(_17f){if(_17f==null){this.layer=_17f;return this.setParam("layer","");}else{var tmp=_17f.split(",");for(var i=0,len=tmp.length;i<len;i++){if(!tmp[i].toString().match(/^(TRAFFICJAM|ONEWAY|CLOSE|CHAIN){1,1}$/)&&tmp[i]!=""){return false;}}this.layer=_17f;return this.setParam("layer",_17f);}};ZdcTrafficImageLv2Layer.prototype.setDate=function(date){if(date==null){this.date=date;return this.setParam("date","");}else{if(!date.toString().match(/^[0-9]{12}$/)&&date!=""){return false;}this.date=date;return this.setParam("date",date);}};function ZdcSnowImageLayer(_184){var URL=ZDC_SEARCHCGI+"/gettrafficimg_lv2.cgi";ZdcUserImageLayer.call(this,URL);this.tileWidth=512;this.tileHeight=512;this.layerID="zdc_snow";this.marginWidth=256;this.marginHeight=256;this.layer=_184;this.setParam("key",ZDC_KEY);this.setLayer(_184);}ZdcSnowImageLayer.prototype=new ZdcUserImageLayer();ZdcSnowImageLayer.prototype.setLayer=function(_186){if(_186==null){this.layer=_186;return this.setParam("layer","SNOW_LIGHT,SNOW_MIDDLE,SNOW_HEAVY");}else{var tmp=_186.split(",");for(var i=0,len=tmp.length;i<len;i++){if(!tmp[i].toString().match(/^(SNOW_LIGHT|SNOW_MIDDLE|SNOW_HEAVY){1,1}$/)&&tmp[i]!=""){return false;}}this.layer=_186;return this.setParam("layer",_186);}};ZdcSnowImageLayer.prototype.reflesh=function(){var _18a=Math.floor(Math.random()*10000000000);this.setParam("reflesh",_18a);};ZdcMap.prototype.removeUserImageLayer=function(id){var flg=false;for(var key in this.ZdcUserImageLayers){if(this.ZdcUserImageLayers.hasOwnProperty(key)&&(id==null||this.ZdcUserImageLayers[key].layerID==id)){this.ZdcMapClass.removeChild(this.ZdcUserImageLayers[key].doc);this.ZdcUserImageLayers[key].addmapstatus=false;this.ZdcUserImageLayers.splice(key,1);flg=true;}}return flg;};ZdcMap.prototype.removeUserImageLayerById=function(id){if(id==null){return false;}return this.removeUserImageLayer(id);};ZdcMap.prototype.addUserImageLayer=function(_18f){for(var i=0;i<this.ZdcUserImageLayers.length;i++){if(typeof this.ZdcUserImageLayers[i]!="undefined"&&this.ZdcUserImageLayers[i].layerID==_18f.layerID){return false;}}if(_18f.marginWidth>1024){_18f.marginWidth=1024;}if(_18f.marginWidth<0){_18f.marginWidth=0;}if(_18f.marginHeight>1024){_18f.marginHeight=1024;}if(_18f.marginHeight<0){_18f.marginHeight=0;}if(_18f.tileWidth>3000){_18f.tileWidth=3000;}if(_18f.tileWidth<16){_18f.tileWidth=16;}if(_18f.tileHeight>3000){_18f.tileHeight=3000;}if(_18f.tileHeight<16){_18f.tileHeight=16;}this.ZdcUserImageLayers.push(_18f);var xx=Math.ceil((parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"))+_18f.marginWidth*2)/_18f.tileWidth);var yy=Math.ceil((parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"))+_18f.marginHeight*2)/_18f.tileHeight);_18f.canvasWidth=xx*_18f.tileWidth;_18f.canvasHeight=yy*_18f.tileHeight;_18f.optimization_num=_optimize(xx,yy);this.InitUserImageLayer(_18f);return true;};ZdcMap.prototype.ResetUserImageLayer=function(_193,_194,_195){var ary=_193._checkPosition(_194,_195,_193);if(ary[0]==0&&ary[1]==0){return false;}var _197=parseInt(_193.doc.style.left);var _198=parseInt(_193.doc.style.top);var _199=new Object(),_19a=new Object();for(var _19b in _193.tiles){if(_193.tiles.hasOwnProperty(_19b)){var tl=_193.tiles[_19b];var _19d=parseInt(tl.doc.style.left)+ary[0]*_193.tileWidth;var _19e=parseInt(tl.doc.style.top)+ary[1]*_193.tileHeight;var pix=new ZdcPixel(_19d+_197+_193.tileWidth/2,_19e+_198+_193.tileHeight/2);var _1a0=this.convertPixel2Point(pix,1);_1a0=new ZdcPoint(_1a0.lon,_1a0.lat);var key=Math.round(_1a0.mx/100)+":"+Math.round(_1a0.my/100);if(typeof _193.tiles[key]=="undefined"){var url=_193.url;var _1a3=parseInt(Math.random()*(_193.domains.length-1)+0.5);if(_193.domains.length>1){url=_193._setDomain(_193.url,_193.domains[_1a3]);}var size=new ZdcSize(_193.tileWidth,_193.tileHeight);var z=ZdcZoom.map_emag[this.getMapScale()];var tl2=new ZdcUserImageTile(url,_1a0,size,z,_19d,_19e,_193);tl2.setUrl();_193.doc.appendChild(tl2.doc);_19a[key]=tl2;}_199[key]=tl;}}for(var key in _19a){if(_19a.hasOwnProperty(key)){_193.tiles[key]=_19a[key];}}for(var key in _193.tiles){if(_193.tiles.hasOwnProperty(key)&&typeof _199[key]=="undefined"){if(document.all&&_193.tiles[key].doc.readyState!="complete"){_193.tiles[key].doc.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);}else{this.style.visibility="hidden";}};}else{_193.doc.removeChild(_193.tiles[key].doc);}delete _193.tiles[key].doc;delete _193.tiles[key];}}delete _199,delete _19a,delete del_img;};ZdcMap.prototype.InitUserImageLayer=function(_1a7){_1a7.moveX=0;_1a7.moveY=0;for(var key in _1a7.tiles){if(_1a7.tiles.hasOwnProperty(key)){if(document.all&&_1a7.tiles[key].doc.readyState!="complete"){_1a7.tiles[key].doc.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);}else{this.style.visibility="hidden";}};}else{_1a7.doc.removeChild(_1a7.tiles[key].doc);}delete _1a7.tiles[key].doc;delete _1a7.tiles[key];}}if(_1a7.minzoom>this.getMapScale()||_1a7.maxzoom<this.getMapScale()){return false;}_1a7.addmapstatus=true;_1a7.doc.id=_1a7.layerID;_1a7.tiles=new Object();var ct=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapClass,"top"));var cl=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapClass,"left"));var hh=_1a7.canvasHeight-parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"));var ww=_1a7.canvasWidth-parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"));_1a7.doc.style.top=Math.round(-1*(ct+hh/2))+"px";_1a7.doc.style.left=Math.round(-1*(cl+ww/2))+"px";this.ZdcMapClass.appendChild(_1a7.doc);for(var i=0;i<_1a7.optimization_num.length;i++){var key=_1a7.optimization_num[i].split(":");var _1ae=_1a7.tileWidth*key[0]+parseInt(_1a7.doc.style.left);var _1af=_1a7.tileHeight*key[1]+parseInt(_1a7.doc.style.top);var pix=new ZdcPixel(_1ae+_1a7.tileWidth/2,_1af+_1a7.tileHeight/2);var _1b1=this.convertPixel2Point(pix,1);_1b1=new ZdcPoint(_1b1.lon,_1b1.lat);_1ae-=parseInt(_1a7.doc.style.left);_1af-=parseInt(_1a7.doc.style.top);var url=_1a7.url;var _1b3=parseInt(Math.random()*(_1a7.domains.length-1)+0.5);if(_1a7.domains.length>1){url=_1a7._setDomain(_1a7.url,_1a7.domains[_1b3]);}var size=new ZdcSize(_1a7.tileWidth,_1a7.tileHeight);var z=ZdcZoom.map_emag[this.getMapScale()];var tl=new ZdcUserImageTile(url,_1b1,size,z,_1ae,_1af,_1a7);tl.setUrl();_1a7.doc.appendChild(tl.doc);var key=Math.round(_1b1.mx/100)+":"+Math.round(_1b1.my/100);_1a7.tiles[key]=tl;}};function ZdcTileLayer(map){var T=this;if(map==null){return;}else{T.pMap=map;}T.zoomMin=1;T.zoomMax=18;T.opacity=50;T.ext="png";T.FirstInitMap=true;T.domains=ZdcTileServers.split(",");T.tile_hash=new Object();T.tilepos=new Array();T.moveX=0;T.moveY=0;T.cntX=0;T.cntY=0;T.lx=0;T.ly=0;T._t_c=document.createElement("div");T._t_c.id="user_tile_container";T._t_c.style.position="absolute";T._t_c.style.top="0px";T._t_c.style.left="0px";T._t_c.style.filter="alpha(opacity="+T.opacity+")";T._t_c.style.mozOpacity=T.opacity/100;T._t_c.style.opacity=T.opacity/100;T._t_c.style.zIndex="11";T._t_c.parent=T;this.ZdcTileLayer=new Array();this.RemoveFlg=false;T.ZdcMapCenterpx=new ZdcPixel();T.ZdcMapClipRect=new Object;T.ZdcMapTypeObj=new ZdcMapType();T.ZdcCenter=new Object();T.ZdcCenter.px=T.ZdcMapCenterpx.x;T.ZdcCenter.py=T.ZdcMapCenterpx.y;T.ZdcTileWpx=256;T.ZdcTileHpx=256;T.mousecursor="default";ZdcObjArray.push(T);}ZdcTileLayer.prototype.setOpacity=function(op){var T=this;if(op==null||op<0||op>100){return false;}T._t_c.style.filter="alpha(opacity="+op+")";T._t_c.style.mozOpacity=op/100;T._t_c.style.opacity=op/100;return true;};ZdcTileLayer.prototype.setScaleRange=function(min,max){var T=this;min=eval(min);max=eval(max);if(min==null||max==null){return false;}if(min>max){return false;}if(min<1||max>18){return false;}T.zoomMin=min;T.zoomMax=max;T.InitTileLayer();return true;};ZdcTileLayer.prototype.setTileUrl=function(url,ext){var T=this;T.DynamicFlg=false;if(ext==null){T.ext="png";}else{T.ext=ext;if(ext=="none"){T.DynamicFlg=true;}}T.subimage=ZdcCommon.ZdcMapServer+"/img/blank.gif";if(url==null){}else{T.tileUrl=url;}if(T.FirstInitMap){T.InitMap(T.pMap.mx,T.pMap.my,T.pMap.s);}else{T.SetMapLocationAndScale(T.pMap.mx,T.pMap.my,T.pMap.s);}};ZdcTileLayer.prototype.InitMap=function(x,y,s){this.InitMapBox();this.tilepos=_optimize(this.ZdcTileLayerMaxJ,this.ZdcTileLayerMaxI);for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){this.ZdcTileLayer[j]=new Array(this.ZdcTileLayerMaxI);}switch(this.ZdcMapMode){case 1:this.lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;this.ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;case 2:this.lx=Math.floor(this.ZdcTileLayerMaxI/2);this.ly=Math.floor(this.ZdcTileLayerMaxJ/2);break;case 3:this.lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;this.ly=Math.floor(this.ZdcTileLayerMaxJ/2);break;case 4:this.lx=Math.floor(this.ZdcTileLayerMaxI/2);this.ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;default:this.lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;this.ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;}this.SetMapLocationAndScale(this.pMap.mx,this.pMap.my,this.pMap.s);this.FirstInitMap=false;};ZdcTileLayer.prototype.InitMapBox=function(){var T=this;T.ZdcMapLeftpx=0;T.ZdcMapToppx=0;var dr=ZdcEvent.GetDivClientRect(T.pMap.ZdcMapBase);if(T._t_c.style.width!=null){T.ZdcMapWpx=dr.x;T.ZdcTileLayerMaxI=Math.floor(T.ZdcMapWpx/256)+1+2;T.ZdcMapTileWpx=T.ZdcTileLayerMaxI*T.ZdcTileWpx;T.ZdcMapTileLeftpx=(-1)*(Math.floor((T.ZdcMapTileWpx-T.ZdcMapWpx)/2)-T.ZdcMapLeftpx);T.ZdcMapCenterpx.x=Math.floor(T.ZdcMapTileWpx/2);}else{T.ZdcMapWpx=512;T.ZdcMapTileWpx=1280;T.ZdcMapTileLeftpx=-320;T.ZdcMapCenterpx.x=640;}if(T._t_c.style.height!=null){T.ZdcMapHpx=dr.y;T.ZdcTileLayerMaxJ=Math.floor(T.ZdcMapHpx/256)+1+2;T.ZdcMapTileHpx=T.ZdcTileLayerMaxJ*T.ZdcTileHpx;T.ZdcMapTileToppx=(-1)*(Math.floor((T.ZdcMapTileHpx-T.ZdcMapHpx)/2)-T.ZdcMapToppx);T.ZdcMapCenterpx.y=Math.floor(T.ZdcMapTileHpx/2);}else{T.ZdcMapHpx=512;T.ZdcMapTileHpx=1280;T.ZdcMapTileToppx=-320;T.ZdcMapCenterpx.y=640;}T._t_c.style.left="0px";T._t_c.style.top="0px";T._t_c.style.width=T.ZdcTileLayerMaxI*T.ZdcTileWpx;T._t_c.style.height=T.ZdcTileLayerMaxJ*T.ZdcTileHpx;if(ZdcCommon.Math_mod(T.ZdcTileLayerMaxI,2)!=0&&ZdcCommon.Math_mod(T.ZdcTileLayerMaxJ,2)!=0){T.ZdcMapMode=1;}if(ZdcCommon.Math_mod(T.ZdcTileLayerMaxI,2)==0&&ZdcCommon.Math_mod(T.ZdcTileLayerMaxJ,2)==0){T.ZdcMapMode=2;}if(ZdcCommon.Math_mod(T.ZdcTileLayerMaxI,2)!=0&&ZdcCommon.Math_mod(T.ZdcTileLayerMaxJ,2)==0){T.ZdcMapMode=3;}if(ZdcCommon.Math_mod(T.ZdcTileLayerMaxI,2)==0&&ZdcCommon.Math_mod(T.ZdcTileLayerMaxJ,2)!=0){T.ZdcMapMode=4;}};ZdcTileLayer.prototype.SetMapLocationAndScale=function(_1c7,_1c8,_1c9){var T=this;var obj=ZdcCommon.ll2pixel(_1c7,_1c8,_1c9);var _1cc=obj.mesh;objlist=_1cc.split("_");var _1cd,_1ce;switch(T.ZdcMapMode){case 1:_1cd=(T.ZdcTileWpx/2)-Number(obj.offx);_1ce=(T.ZdcTileHpx/2)-Number(obj.offy);break;case 2:_1cd=T.ZdcTileWpx-Number(obj.offx);_1ce=T.ZdcTileHpx-Number(obj.offy);break;case 3:_1cd=(T.ZdcTileWpx/2)-Number(obj.offx);_1ce=T.ZdcTileHpx-Number(obj.offy);break;case 4:_1cd=T.ZdcTileWpx-Number(obj.offx);_1ce=(T.ZdcTileHpx/2)-Number(obj.offy);break;default:_1cd=(T.ZdcTileWpx/2)-Number(obj.offx);_1ce=(T.ZdcTileHpx/2)-Number(obj.offy);break;}this.moveX=-1*_1cd;this.moveY=-1*_1ce;this.cntX=0;this.cntY=0;for(var key in this.tile_hash){if(this.tile_hash.hasOwnProperty(key)){if(document.all&&this.tile_hash[key].doc.readyState!="complete"){this.tile_hash[key].doc.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);}else{this.style.visibility="hidden";}};}else{this._t_c.removeChild(this.tile_hash[key].doc);}delete this.tile_hash[key];}}this.SetMapImage(objlist[1],objlist[2],objlist[0]);};ZdcTileLayer.prototype.SetMapImage=function(_1d0,_1d1,_1d2){var T=this;_1d0=String(_1d0);_1d1=String(_1d1);if(ZdcCommon.StrCmp(_1d0.substr(0,1),"m")==0){var msw=_1d0.substr(1,ZdcCommon.StrLen(_1d0)-1);_1d0=(-1)*msw;}if(ZdcCommon.StrCmp(_1d1.substr(0,1),"m")==0){var msh=_1d1.substr(1,ZdcCommon.StrLen(_1d1)-1);_1d1=(-1)*msh;}T.ZdcTileCodeX=Number(_1d0);T.ZdcTileCodeY=Number(_1d1);var mx,my,_1d8,top,left;var hash=new Object();for(var op=0,_1dd=T.tilepos.length;op<_1dd;op++){var key=T.tilepos[op].split(":");i=parseInt(key[1])+1;j=parseInt(key[0])+1;mx=_1d0-T.lx+i;my=_1d1-j+T.ly;top=256*(j-1)+"px";left=256*(i-1)+"px";var _1df=mx+":"+my+":"+_1d2;if(typeof T.tile_hash[_1df]=="undefined"){if(mx<0){mx="m"+Math.abs(mx);}if(my<0){my="m"+Math.abs(my);}var _1e0=T.subimage;if(T.DynamicFlg){var tile=new ZdcMapMeshTile_UT(top,left,T.tileUrl+"?meshx="+mx+"&meshy="+my+"&zoom="+_1d2,_1e0);}else{var _1e2=T.GetImageUrl(mx,my,_1d2);var ary=_1e2.split("/");var tmp=mx;if((new String(mx)).slice(0,1)=="m"){tmp=(new String(mx)).slice(1);}if(document.all&&this.ext=="png"){var tile=new ZdcMapMeshTile_UT_IE(top,left,_1e2,_1e0);}else{var tile=new ZdcMapMeshTile_UT(top,left,_1e2,_1e0);}}T._t_c.appendChild(tile.doc);if(document.all){tile.doc.galleryimg="no";}tile.doc.alt="";T.tile_hash[_1df]=tile;}else{T.tile_hash[_1df].doc.style.left=left;T.tile_hash[_1df].doc.style.top=top;}hash[_1df]="";}for(var key in T.tile_hash){if(typeof hash[key]=="undefined"&&T.tile_hash.hasOwnProperty(key)){if(document.all&&T.tile_hash[key].doc.readyState!="complete"){T.tile_hash[key].doc.onreadystatechange=function(){if(T.readyState=="complete"){T.parentNode.removeChild(T);}else{}};}else{T._t_c.removeChild(T.tile_hash[key].doc);}delete T.tile_hash[key];}}};ZdcTileLayer.prototype.GetImageUrl=function(_1e5,_1e6,zoom){function FloatToInt(a){var b=1;if(a<0){b=-1;}return b*Math.floor(Math.abs(a));}G_LevelToTreeLevel=new Array();G_LevelToTreeLevel[18]=3;G_LevelToTreeLevel[17]=3;G_LevelToTreeLevel[16]=3;G_LevelToTreeLevel[15]=2;G_LevelToTreeLevel[14]=2;G_LevelToTreeLevel[13]=2;G_LevelToTreeLevel[12]=2;G_LevelToTreeLevel[11]=2;G_LevelToTreeLevel[10]=2;G_LevelToTreeLevel[9]=1;G_LevelToTreeLevel[8]=1;G_LevelToTreeLevel[7]=1;G_LevelToTreeLevel[6]=1;G_LevelToTreeLevel[5]=0;G_LevelToTreeLevel[4]=0;G_LevelToTreeLevel[3]=0;G_LevelToTreeLevel[2]=0;G_LevelToTreeLevel[1]=0;var _1ea,_1eb;_1ea=String(_1e5);_1eb=String(_1e6);if(ZdcCommon.StrCmp(_1ea.substr(0,1),"m")==0){var msw=_1ea.substr(1,ZdcCommon.StrLen(_1ea)-1);_1ea=(-1)*msw;}if(ZdcCommon.StrCmp(_1eb.substr(0,1),"m")==0){var msh=_1eb.substr(1,ZdcCommon.StrLen(_1eb)-1);_1eb=(-1)*msh;}var _1ee=new Number(_1ea);var _1ef=new Number(_1eb);var nX=FloatToInt(ZdcZoom.OX+(_1ee+0.5)*ZdcZoom.PX*ZdcZoom.map_defw[zoom]);var nY=FloatToInt(ZdcZoom.OY+(_1ef+0.5)*ZdcZoom.PY*(ZdcZoom.map_defh[zoom]));var nX1=FloatToInt(nX/3600/1000-100);nX-=FloatToInt((100+nX1)*3600*1000);var nX2=FloatToInt(nX*8/3600/1000);nX-=FloatToInt(nX2*3600*1000/8);var nX3=FloatToInt(nX*8*10/3600/1000);var nY1=FloatToInt(nY*3/2/3600/1000);nY-=FloatToInt(nY1*3600*1000*2/3);var nY2=FloatToInt(nY*3*8/2/3600/1000);nY-=FloatToInt(nY2*2*3600*1000/3/8);var nY3=FloatToInt(nY*3*8*10/2/3600/1000);var _1f8=""+nY1+nX1+nY2+nX2+nY3+nX3;var _1f9=G_LevelToTreeLevel[zoom];var _1fa=this.tileUrl+"/"+this.pMap.s+"/";if(_1f9>0){_1fa+="/"+_1f8.substr(0,4);if(_1f9>1){_1fa+="/"+_1f8.substr(4,2);if(_1f9>2){_1fa+="/"+_1f8.substr(6,2);}}}_1fa+="/";_1fa=_1fa+zoom+"_"+_1e5+"_"+_1e6+"."+this.ext;return _1fa;};ZdcTileLayer.prototype.InitTileLayer=function(){var T=this;if(this.RemoveFlg){return;}if(T.pMap.addtilestatus){T.pMap._t_c.removeChild(T._t_c);T._t_c.style.visibility="hidden";T.pMap.addtilestatus=false;}if(T.zoomMin<=T.pMap.s&&T.pMap.s<=T.zoomMax&&!T.pMap.addtilestatus){T.SetMapLocationAndScale(T.pMap.mx,T.pMap.my,T.pMap.s);T.pMap._t_c.appendChild(T._t_c);T.pMap.addtilestatus=true;T._t_c.style.visibility="visible";}};ZdcTileLayer.prototype.ReSetMapBase=function(){var T=this;var Xx,Yy;T.OnSetMapBase=true;var CX=T.ZdcTileCodeX;var CY=T.ZdcTileCodeY;var pos=T._checkPosition(-1*this.pMap.ZdcMoveX,-1*this.pMap.ZdcMoveY);var x=pos[0];var y=pos[1];if(x!=0||y!=0){Xx=CX+x;Yy=CY-y;T.SetMapImage(Xx,Yy,T.pMap.s);}T.OnSetMapBase=false;};ZdcTileLayer.prototype._checkPosition=function(_204,_205){this.moveY+=_205;this.moveX+=_204;var x=0,y=0;if(Math.abs(this.moveX)>=256/2){x=Math.round(this.moveX/256);this.moveX-=256*x;}if(Math.abs(this.moveY)>=256/2){y=Math.round(this.moveY/256);this.moveY-=256*y;}return [x,y];};function ZdcMap(_208,_209,_20a,_20b){this.ZdcMapBase=_208;if(ZdcEvent._getPropertyValue(this.ZdcMapBase,"position")!="absolute"){this.ZdcMapBase.style.position="relative";}this.ZdcMapPClass=document.createElement("div");this.ZdcMapPClass.style.position="absolute";this.ZdcMapPClass.style.overflow="hidden";this.ZdcMapPClass.style.left="0px";this.ZdcMapPClass.style.top="0px";this.ZdcMapPClass.style.width="100%";this.ZdcMapPClass.style.height="100%";this.ZdcMapPClass.style.zIndex="0";this.ZdcMapClass=document.createElement("div");this.ZdcMapClass.style.position="absolute";this.ZdcMapClass.style.webkitUserSelect="none";this.ZdcMapBase.style.backgroundImage="url("+ZdcCommon.ZdcMapLog+")";this.ZdcMapBase.appendChild(this.ZdcMapPClass);this.ZdcMapPClass.appendChild(this.ZdcMapClass);this.ZdcMapBase.style.overflow="hidden";this.mx=503173140;this.my=128440301;var p=new ZdcPoint(this.mx,this.my,2);this.s=7;this.SavePoint=new ZdcPoint(this.mx,this.my,2);if(_209!=null){this.mx=_209.mx;this.my=_209.my;p=_209;this.SavePoint=_209;}this.lon=p.lon;this.lat=p.lat;if(_20a!=null){this.s=_20a;}this.ControlOpen=false;this.ZdcUserControlOpen=false;this.ZdcUserZoomControlOpen=false;this.ZdcWaitOpenStatus=false;this.ScaleBarOpen=false;this.CenterOpen=false;this.CenterInfoBoxOpen=false;this.msgopenstatus=false;this.usermsgopenstatus=false;this.mapCenterInfoX=null;this.mapCenterInfoY=null;this.mapScaleBarX=null;this.mapScaleBarY=null;this.mapControlX=null;this.mapControlY=null;this.gestureflg=false;this.ZdcUserImageLayers=new Array();this.mediamode="screen";this.zoomMax=18;this.zoomMin=1;
this.ZdcCopyrightObj=new ZdcCopyright();
this.ZdcWaitObj=new ZdcWait();
this.ZdcUserLayers=new Array();this.ZdcDragStatus=true;this.ZdcMsgStatus=true;this.OnScroll=false;this.OnSetMapBase=false;this.WheelType=1;this.WheelStatus=true;this.CenterFirst=false;this.markerworkpixel1=new ZdcPixel(0,0);this.markerworkpixel2=new ZdcPixel(0,0);this.markerworkbox=new ZdcPixelBox(this.markerworkpixel1,this.markerworkpixel2);this.ZdcCtrObj=new Object();this.ZdcRouteLayer=null;this.ZdcHRouteLayer=null;this.ZdcPRouteLayer=null;this.ZdcPRouteShapeLayer=null;this.ZdcShapeLayer=[];this.ZdcTileLayer=new Array();ZdcUserTileClass=null;this.ZdcTransparent=new Object();this.ZdcTransparent=document.createElement("DIV");this.ZdcTransparentImage=ZdcCommon.ZdcMapServer+"/img/blank.gif";if(ZdcCommon.UserAgentIsSafari()){this.mousecursor="default";}else{this.mousecursor="hand";this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}this.ZdcMapAccess=ZdcCommon.ZdcMapAccess+"/log/event_log.cgi?key="+ZdcCommon.ZDC_KEY+"&event=mapapi_";ZdcMap.AccessText="10200000";this.ZdcMapType=ZdcCommon.ZdcDefaultMapType;if(_20b!=null){this.ZdcMapType=_20b;}this.ZdcMapTypeObj=new ZdcMapType();this.ZdcUserTile=false;this.ZdcUserTileBox=new ZdcBox();this.ZdcHttp=new ZdcHttpRequest();this.ZdcZoomChangeImage=new Object();this.ZdcZoomChangeImageCorner1=new Object();this.ZdcZoomChangeImageCorner2=new Object();this.ZdcZoomChangeImageCorner3=new Object();this.ZdcZoomChangeImageCorner4=new Object();this.ZoomChangeImageClear=ZdcCommon.ZdcMapServer+"/img/clear.gif";this.ZoomChangeImageIn=ZdcCommon.ZdcMapServer+"/img/ZoomChangeImageIn.png";this.ZoomChangeImageOut=ZdcCommon.ZdcMapServer+"/img/ZoomChangeImageOut.png";this.ZoomChangeImageCorner1=ZdcCommon.ZdcMapServer+"/img/ya-left-up.png";this.ZoomChangeImageCorner2=ZdcCommon.ZdcMapServer+"/img/ya-right-up.png";this.ZoomChangeImageCorner3=ZdcCommon.ZdcMapServer+"/img/ya-left-down.png";this.ZoomChangeImageCorner4=ZdcCommon.ZdcMapServer+"/img/ya-right-down.png";this.ZdcZoomChangeImage=document.createElement("DIV");this.ZdcZoomChangeImageCorner1=document.createElement("DIV");this.ZdcZoomChangeImageCorner2=document.createElement("DIV");this.ZdcZoomChangeImageCorner3=document.createElement("DIV");this.ZdcZoomChangeImageCorner4=document.createElement("DIV");this.ScrSpeed=0;this.ZdcMapLeftpx=0;this.ZdcMapToppx=0;this.ZdcMapWpx=0;this.ZdcMapHpx=0;this.ZdcMapCenterpx=new ZdcPixel();this.ZdcMapCenterInfopx=new ZdcPixel();this.ZdcScaleBarpx=new ZdcPixel();this.ZdcMapControlpx=new ZdcPixel();this.ZdcMapCopyrightpx=new ZdcPixel();this.ZdcMapClipRect=new Object;this.ZdcTileWpx=256;this.ZdcTileHpx=256;this.ZdcBaseXpx=0;this.MapChangeCnt=0;this.MaddX=0;this.MaddY=0;this.ZdcCenter=new Object();this.ZdcCenter.px=this.ZdcMapCenterpx.x;this.ZdcCenter.py=this.ZdcMapCenterpx.y;this.CountScr=0;this.CountScrMax=9;this.ZdcDragOx=0;this.ZdcDragOy=0;this.ZdcDragMx=0;this.ZdcDragMy=0;this.ZdcDragEx=0;this.ZdcDragEy=0;this.MoveSumX=0;this.MoveSumY=0;this.ZdcMoveX=0;this.ZdcMoveY=0;this.MouseMoveX=0;this.MouseMoveY=0;this.MouseLon=0;this.MouseLat=0;this.MouseMx=0;this.MouseMy=0;this.MouseClickX=0;this.MouseClickY=0;this.MouseCLon=0;this.MouseCLat=0;this.MouseCx=0;this.MouseCy=0;this.lyrmkcnt=0;this.FirstInitMap=true;this.addtilestatus=false;this.ZdcMsgHtml=new ZdcMsgHtml();this.htmlopenstatus=false;this.cursorflg=false;this.usercursor1=null;this.usercursor2=null;this.ClickUserLayerId=-1;this.ClickMarkerId=-1;var T=this;T.domains=ZdcTileServers.split(",");T.tile_hash=new Object();T.tilepos=new Array();T.moveX=0;T.moveY=0;T.cntX=0;T.cntY=0;T.lx=0;T.ly=0;T._t_c=document.createElement("div");T._t_c.id="tile_container";T._t_c.style.position="absolute";T._t_c.style.top="0px";T._t_c.style.left="0px";T._t_c.style.zIndex="10";T._t_c.parent=T;T.ZdcMapClass.appendChild(T._t_c);this.imgLayerX=0;this.imgLayerY=0;this.InitMap(this.mx,this.my,this.s);this.ZdcMapClass.ondblclick=this.MouseDblClick.bindAsEventListener(this);this.ZdcMapClass.onmousemove=this.MouseMove.bindAsEventListener(this);this.ZdcMapClass.onmousedown=this.MouseDown.bindAsEventListener(this);this.ZdcMapClass.onmouseup=this.MouseUp.bindAsEventListener(this);this.ZdcMapClass.onclick=this.MouseClick.bindAsEventListener(this);this.ZdcMapClass.onmouseover=this.MouseOver.bindAsEventListener(this);this.ZdcMapClass.onmouseout=this.MouseOut.bindAsEventListener(this);this.ZdcMapClass.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.ZdcMapClass.ontouchmove=this.MouseMove.bindAsEventListener(this);this.ZdcMapClass.ontouchstart=this.MouseDown.bindAsEventListener(this);this.ZdcMapClass.ontouchend=this.MouseClick.bindAsEventListener(this);this.ZdcMapClass.ongesturestart=this.MouseGestureStart.bindAsEventListener(this);this.ZdcMapClass.ongesturechange=this.MouseGestureChange.bindAsEventListener(this);this.ZdcMapClass.ongestureend=this.MouseGestureEnd.bindAsEventListener(this);}this.AddMouseWheelListener(this.WheelZoom.bindAsEventListener(this),false);ZdcObjArray.push(this);}ZdcMap.prototype.addTileLayer=function(tl){if(this.addtilestatus){return false;}else{this.ZdcUserTileClass=tl;this.ZdcUserTileClass.RemoveFlg=false;if(tl.zoomMin<=this.s&&this.s<=tl.zoomMax){this.ZdcUserTileClass.InitMap();this._t_c.appendChild(this.ZdcUserTileClass._t_c);this.addtilestatus=true;this.ZdcUserTileClass.ReSetMapBase();this.ReSetMapBase();}else{this.ZdcUserTileClass.RemoveFlg=false;}return true;}};ZdcMap.prototype.removeTileLayer=function(){if(this.ZdcUserTileClass==null){return false;}if(this.ZdcUserTileClass.RemoveFlg){return false;}this.ZdcUserTileClass.RemoveFlg=true;if(this.addtilestatus){this._t_c.removeChild(this.ZdcUserTileClass._t_c);this.addtilestatus=false;}return true;};ZdcMap.prototype.AddMouseWheelListener=function(func,cap){if(this.ZdcMapClass.addEventListener){this.ZdcMapClass.addEventListener("DOMMouseScroll",func,false);this.ZdcMapClass.addEventListener("mousewheel",func,cap);}else{if(this.ZdcMapClass.attachEvent){this.ZdcMapClass.attachEvent("onmousewheel",func);}}};ZdcMap.prototype.WheelZoom=function(e){if(!this.WheelStatus){return;}var _212;if(window.event&&window.event.wheelDelta){_212=window.event.wheelDelta;}else{if(e.wheelDelta){_212=e.wheelDelta;}else{_212=e.detail;_212=_212*-1;}}if(_212>0){if(this.WheelType==1){this.mapZoomOut(1,"wheel");}else{this.mapZoomIn(1,"wheel");}}else{if(this.WheelType==1){this.mapZoomIn(1,"wheel");}else{this.mapZoomOut(1,"wheel");}}ZdcEvent.stopPropagation(e);if(document.all){window.event.returnValue=false;}else{e.preventDefault();}return false;};ZdcMap.prototype.setWheelType=function(t){if(t==null){return -1;}if(t!=1&&t!=2){return -1;}this.WheelType=t;};ZdcMap.prototype.getWheelStatus=function(){return this.WheelStatus;};ZdcMap.prototype.setWheelOn=function(){this.WheelStatus=true;};ZdcMap.prototype.setWheelOff=function(){this.WheelStatus=false;};ZdcMap.prototype.setZdcMsgHtmlTitleOption=function(font,size,_216){if(font!=null){this.ZdcMsgHtml.titlefont=font;}if(size!=null){this.ZdcMsgHtml.titlesize=size;}if(_216!=null){this.ZdcMsgHtml.titlealign=_216;}};ZdcMap.prototype.setZdcMsgHtmlOption=function(opt1,opt2,opt3,opt4,opt5,w,h){if(opt1!=null){this.ZdcMsgHtml.docclose.status=opt1;}if(opt2!=null){this.ZdcMsgHtml.docwins.status=opt2;}if((opt3!=null)&&(opt3=="left"||opt3=="center")){this.ZdcMsgHtml.arrowtype=opt3;}if((opt4!=null)&&(opt4=="small"||opt4=="large")){this.ZdcMsgHtml.wintype=opt4;}if((opt5!=null)&&(opt5=="url"||opt5=="tag")){this.ZdcMsgHtml.htmltype=opt5;}var _21e=this.getMapWindowSize();if(w!=null&&h!=null){var ww=w;var hh=h;if((ww+Number(28))>parseInt(_21e.width)){ww=parseInt(_21e.width)-64;}if((hh+Number(72))>parseInt(_21e.height)){hh=parseInt(_21e.height)-136;}this.ZdcMsgHtml.doc.style.width=(ww+Number(8))+"px";this.ZdcMsgHtml.doc.style.height=(hh+Number(24)+Number(16))+"px";this.ZdcMsgHtml.w=ww;this.ZdcMsgHtml.h=hh;}else{if(this.ZdcMsgHtml.wintype=="small"){var ww=Math.round(parseInt(_21e.width)/3);var hh=Math.round(parseInt(_21e.height)/3);}else{var ww=parseInt(_21e.width)-34;var hh=parseInt(_21e.height)-136;}this.ZdcMsgHtml.doc.style.width=(ww+Number(8))+"px";this.ZdcMsgHtml.doc.style.height=(hh+Number(24)+Number(16))+"px";this.ZdcMsgHtml.w=ww;this.ZdcMsgHtml.h=hh;}};ZdcMap.prototype.reflashZdcMsgHtml=function(html,opt){if(html!=null){this.ZdcMsgHtml.html=html;}if(this.htmlopenstatus){this.closeZdcMsgHtml();if(opt!=null){this.openZdcMsgHtml(this.ZdcMsgHtml.html,this.ZdcMsgHtml.Point,this.ZdcMsgHtml.title,this.ZdcMsgHtml.w,this.ZdcMsgHtml.h,this.ZdcMsgHtml.mrkoffset,opt);}else{this.openZdcMsgHtml(this.ZdcMsgHtml.html,this.ZdcMsgHtml.Point,this.ZdcMsgHtml.title,this.ZdcMsgHtml.w,this.ZdcMsgHtml.h,this.ZdcMsgHtml.mrkoffset,1);}}};ZdcMap.prototype.setZdcMsgHtmlBorderType=function(bt){if(bt!=1&&bt!=2){return -1;}this.ZdcMsgHtml.bordertype=bt;};ZdcMap.prototype.getZdcMsgHtmlWinType=function(){return this.ZdcMsgHtml.wintype;};ZdcMap.prototype.openZdcMsgHtml=function(html,p,_226,w,h,_229,opt){this.ZdcMapClass.appendChild(this.ZdcMsgHtml.doc);this.ZdcMapClass.appendChild(this.ZdcMsgHtml.shddoc);this.ZdcMsgHtml.pMap=this;var _22b=this.getMapWindowSize();if(w!=null&&h!=null){var ww=w;var hh=h;if((ww+Number(28))>parseInt(_22b.width)){ww=parseInt(_22b.width)-64;}if((hh+Number(72))>parseInt(_22b.height)){hh=parseInt(_22b.height)-136;}this.ZdcMsgHtml.doc.style.width=(ww+Number(8))+"px";this.ZdcMsgHtml.doc.style.height=(hh+Number(24)+Number(16))+"px";this.ZdcMsgHtml.w=ww;this.ZdcMsgHtml.h=hh;}else{if(w==null&&h!=null){var w1=Math.round(parseInt(_22b.width)/3);var h1=h;var _230=parseInt(_22b.width)-64;}if(h==null&&w!=null){var w1=w;var h1=Math.round(parseInt(_22b.height)/3);var _230=w;}if(w==null&&h==null){var w1=Math.round(parseInt(_22b.width)/3);var h1=Math.round(parseInt(_22b.height)/3);var _230=parseInt(_22b.width)-64;}if(this.ZdcMsgHtml.wintype=="small"){var ww=w1;var hh=h1;if(this.ZdcMsgHtml.htmltype=="tag"){var ps=new ZdcSize(0,0);var td=document.body.ownerDocument||document;var d=td.createElement("div");td.body.appendChild(d);d.style.position="absolute";d.style.left=(-screen.width)+"px";d.style.top=(-screen.height)+"px";d.style.width=_230+"px";d.style.height=screen.height+"px";var _234;d.innerHTML="<table border=0 rules='none' cellpadding=0 cellspacing=0 hspace=0 vspace=0><tr><td>"+html+"</td></tr></table>";_234=d.firstChild;while(_234){ps.width=Math.max(ps.width,(_234.offsetLeft+_234.offsetWidth));ps.height=Math.max(ps.height,(_234.offsetTop+_234.offsetHeight));_234=_234.nextSibling;}td.body.removeChild(d);ww=parseInt(ps.width);hh=parseInt(ps.height);}}else{var ww=parseInt(_22b.width)-34;var hh=parseInt(_22b.height)-136;}this.ZdcMsgHtml.doc.style.width=(ww+Number(8))+"px";this.ZdcMsgHtml.doc.style.height=(hh+Number(24)+Number(16))+"px";this.ZdcMsgHtml.w=ww;this.ZdcMsgHtml.h=hh;}this.ZdcMsgHtml.setHtml(html,_226,ww,hh);this.ZdcMsgHtml.setPoint(p);this.ZdcMsgHtml.openstatus=true;this.htmlopenstatus=true;if(this.ZdcMsgHtml.arrowtype=="left"){this.ZdcMsgHtml.htmloffset.x=0;}else{if(this.ZdcMsgHtml.arrowtype=="center"){this.ZdcMsgHtml.htmloffset.x=(-1)*(Math.round(ww/2)+Number(4));}}var pxy=this.convertPoint2Pixel(p);if(_229!=null){this.ZdcMsgHtml.doc.style.left=(pxy.x+this.ZdcMsgHtml.htmloffset.x+_229.x)+"px";this.ZdcMsgHtml.doc.style.top=(pxy.y+this.ZdcMsgHtml.htmloffset.y+_229.y)+"px";this.ZdcMsgHtml.shddoc.style.left=(pxy.x+this.ZdcMsgHtml.htmloffset.x+_229.x)+"px";this.ZdcMsgHtml.shddoc.style.top=(pxy.y+this.ZdcMsgHtml.htmloffset.y+_229.y)+"px";this.ZdcMsgHtml.mrkoffset=_229;}else{this.ZdcMsgHtml.doc.style.left=(pxy.x+this.ZdcMsgHtml.htmloffset.x)+"px";this.ZdcMsgHtml.doc.style.top=(pxy.y+this.ZdcMsgHtml.htmloffset.y)+"px";this.ZdcMsgHtml.shddoc.style.left=(pxy.x+this.ZdcMsgHtml.htmloffset.x)+"px";this.ZdcMsgHtml.shddoc.style.top=(pxy.y+this.ZdcMsgHtml.htmloffset.y)+"px";this.ZdcMsgHtml.mrkoffset.x=0;this.ZdcMsgHtml.mrkoffset.y=0;}this.ZdcMsgHtml.doc.style.visibility="visible";if(this.mediamode=="screen"){this.ZdcMsgHtml.shddoc.style.visibility="visible";}else{this.ZdcMsgHtml.shddoc.style.visibility="hidden";}if(_226!=null){this.ZdcMsgHtml.title=_226;}else{this.ZdcMsgHtml.title="";}if(opt!=null){this.ZdcMsgHtml.movestatus=opt;switch(opt){case 1:default:this.ScrollMsgHtml(p);break;case 2:this.scrollToCenter(p);break;case 3:break;}}ZdcEvent.trigger(this,"openhtmlmsgwindow");};ZdcMap.prototype.closeZdcMsgHtml=function(){if(this.htmlopenstatus){this.ZdcMapClass.removeChild(this.ZdcMsgHtml.doc);this.ZdcMapClass.removeChild(this.ZdcMsgHtml.shddoc);this.ZdcMsgHtml.openstatus=false;this.htmlopenstatus=false;this.ZdcMsgHtml.dochtml.innerHTML="<div></div>";ZdcEvent.trigger(this,"closehtmlmsgwindow");}};ZdcMap.prototype.ScrollMsgHtml=function(p){var box=this.getMapBoundBox();var _238=Math.floor((box.maxx-p.mx)/ZdcZoom.map_defw[this.s])-this.ZdcMsgHtml.mrkoffset.x;var _239=Math.floor((p.mx-box.minx)/ZdcZoom.map_defw[this.s])+this.ZdcMsgHtml.mrkoffset.x;var _23a=Math.floor((box.maxy-p.my)/ZdcZoom.map_defh[this.s])+this.ZdcMsgHtml.mrkoffset.y;var _23b=Math.floor((p.my-box.miny)/ZdcZoom.map_defh[this.s])-this.ZdcMsgHtml.mrkoffset.y;var scrx=0;var scry=0;var _23e=this.ZdcMsgHtml.h+Number(72);if(this.ZdcMsgHtml.arrowtype=="left"){var _23f=this.ZdcMsgHtml.w+Number(6);var _240=0;}else{if(this.ZdcMsgHtml.arrowtype=="center"){var _23f=Math.round(this.ZdcMsgHtml.w/2)+Number(6);var _240=Math.round(this.ZdcMsgHtml.w/2)+Number(6);}}if(_238<_23f){scrx=_238-_23f-15;}else{if(_239<_240){scrx=_240-_239+15;}}if(_23a<_23e){scry=_23e-_23a+Number(10);}else{if(_23b<0){scry=_23b-15;}}if(!this.OnScroll&&(scrx!=0||scry!=0)){this.scrollMap(scrx,scry);return;}};ZdcMap.prototype.setBackGroundImage=function(_241){this.ZdcMapBase.style.backgroundImage="url("+_241+")";};ZdcMap.prototype.setMapZoomLimit=function(s1,s2){var vs1=parseInt(s1);var vs2=parseInt(s2);if(vs1<vs2&&Number(vs1)>=0&&Number(vs2)<19){this.zoomMin=vs1;this.zoomMax=vs2;}else{return -1;}};ZdcMap.prototype.InitMap=function(x,y,s){this.mx=x;this.my=y;this.s=s;this.InitMapBox();this.tilepos=_optimize(this.ZdcTileLayerMaxJ,this.ZdcTileLayerMaxI);for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){this.ZdcTileLayer[j]=new Array(this.ZdcTileLayerMaxI);}switch(this.ZdcMapMode){case 1:this.lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;this.ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;case 2:this.lx=Math.floor(this.ZdcTileLayerMaxI/2);this.ly=Math.floor(this.ZdcTileLayerMaxJ/2);break;case 3:this.lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;this.ly=Math.floor(this.ZdcTileLayerMaxJ/2);break;case 4:this.lx=Math.floor(this.ZdcTileLayerMaxI/2);this.ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;default:this.lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;this.ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;}this.SetTransparentOnMap();this.SetZoomChangeImageOnMap();this.ChgPg=0;this.AddCopyrightOnMap();this.SetMapLocationAndScale(this.mx,this.my,this.s);if(this.ControlOpen){this.SetControlOnMap();}if(this.CenterOpen){this.SetMapCenterOnMap();}if(this.CenterInfoBoxOpen){this.SetMapCenterInfoOnMap();}if(this.ScaleBarOpen){this.SetMapScaleOnMap();}if(this.msgopenstatus){this.reflashMsgWindow();}if(this.ZdcUserControl!=null){this.ZdcUserControlpx=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+this.ZdcUserControlBaseleft;this.ZdcUserControlpy=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+this.ZdcUserControlBasetop;this.ZdcUserControl.doc.style.left=this.ZdcUserControlpx+"px";this.ZdcUserControl.doc.style.top=this.ZdcUserControlpy+"px";}if(this.ZdcUserZoomControl!=null){this.ZdcUserZoomControlpx=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+this.ZdcUserZoomControlBaseleft;this.ZdcUserZoomControlpy=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+this.ZdcUserZoomControlBasetop;this.ZdcUserZoomControl.doc.style.left=this.ZdcUserZoomControlpx+"px";this.ZdcUserZoomControl.doc.style.top=this.ZdcUserZoomControlpy+"px";if(this.ZdcUserZoomControl.doctooltip){this.ZdcUserZoomControl.doctooltip.style.visibility="hidden";}}};ZdcMap.prototype.SetTransparentOnMap=function(){this.ZdcTransparent.style.zIndex="20";this.ZdcTransparent.style.position="absolute";this.ZdcTransparent.innerHTML="<IMG src="+this.ZdcTransparentImage+" galleryimg='no' width='"+parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"))+"px;' height='"+parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"))+"px;'>";this.ZdcTransparent.style.left=(this.ZdcMapCenterpx.x-Math.round(this.ZdcMapWpx/2))+"px";this.ZdcTransparent.style.top=(this.ZdcMapCenterpx.y-Math.round(this.ZdcMapHpx/2))+"px";this.ZdcMapClass.appendChild(this.ZdcTransparent);};ZdcMap.prototype.resizeMapWindow=function(_24a,_24b,_24c,_24d){this.ZdcMapBase.style.top=_24a+"px";this.ZdcMapBase.style.left=_24b+"px";if(_24c<0){_24c=0;}if(_24d<0){_24d=0;}this.ZdcMapBase.style.width=_24c+"px";this.ZdcMapBase.style.height=_24d+"px";if(_24a<0||_24b<0){return (-1);}this.ZdcMapWpx=_24c;this.ZdcMapHpx=_24d;this.ZdcMapToppx=_24a;this.ZdcMapLeftpx=_24b;this.ZdcMapClass.removeChild(this.ZdcZoomChangeImage);this.ZdcMapClass.removeChild(this.ZdcZoomChangeImageCorner1);this.ZdcMapClass.removeChild(this.ZdcZoomChangeImageCorner2);this.ZdcMapClass.removeChild(this.ZdcZoomChangeImageCorner3);this.ZdcMapClass.removeChild(this.ZdcZoomChangeImageCorner4);this.ZdcMapClass.removeChild(this.ZdcTransparent);if(this.ZdcUserTileClass!=null){this.ZdcUserTileClass.FirstInitMap=true;this.ZdcUserTileClass.InitMap(this.mx,this.my,this.s);}this.FirstInitMap=true;this.InitMap(this.mx,this.my,this.s);for(var i=0,_24f=this.ZdcUserImageLayers.length;i<_24f;i++){var _250=this.ZdcUserImageLayers[i];var xx=Math.ceil((parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"))+_250.marginWidth*2)/_250.tileWidth);var yy=Math.ceil((parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"))+_250.marginHeight*2)/_250.tileHeight);_250.canvasWidth=xx*_250.tileWidth;_250.canvasHeight=yy*_250.tileHeight;_250.optimization_num=_optimize(xx,yy);this.InitUserImageLayer(_250);}if(this.usermsgopenstatus){this.reflashUserMsgWindow();}ZdcEvent.trigger(this,"resizeend");};ZdcMap.prototype.InitMapBox=function(){this.ZdcMapLeftpx=0;this.ZdcMapToppx=0;var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);if(this.ZdcMapClass.style.width!=null){this.ZdcMapWpx=dr.x;this.ZdcTileLayerMaxI=Math.floor(this.ZdcMapWpx/256)+1+2;this.ZdcMapTileWpx=this.ZdcTileLayerMaxI*this.ZdcTileWpx;this.ZdcMapTileLeftpx=(-1)*(Math.floor((this.ZdcMapTileWpx-this.ZdcMapWpx)/2)-this.ZdcMapLeftpx);this.ZdcMapCenterpx.x=Math.floor(this.ZdcMapTileWpx/2);if(!this.mapCenterInfoX){this.ZdcMapCenterInfopx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+10;}else{this.ZdcMapCenterInfopx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+this.mapCenterInfoX;}if(!this.mapScaleBarX){this.ZdcScaleBarpx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+10;}else{this.ZdcScaleBarpx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+this.mapScaleBarX;}if(!this.mapControlX){this.ZdcMapControlpx.x=this.ZdcMapCenterpx.x+Math.floor(this.ZdcMapWpx/2)-80;}else{this.ZdcMapControlpx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+this.mapControlX;}this.ZdcMapCopyrightpx.x=(this.ZdcMapWpx-282);this.ZdcMapClipRect.Left=Math.floor((this.ZdcMapTileWpx-this.ZdcMapWpx)/2);this.ZdcMapClipRect.Width=this.ZdcMapWpx;}if(this.ZdcMapClass.style.height!=null){this.ZdcMapHpx=dr.y;this.ZdcTileLayerMaxJ=Math.floor(this.ZdcMapHpx/256)+1+2;this.ZdcMapTileHpx=this.ZdcTileLayerMaxJ*this.ZdcTileHpx;this.ZdcMapTileToppx=(-1)*(Math.floor((this.ZdcMapTileHpx-this.ZdcMapHpx)/2)-this.ZdcMapToppx);this.ZdcMapCenterpx.y=Math.floor(this.ZdcMapTileHpx/2);if(!this.mapCenterInfoY){this.ZdcMapCenterInfopx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+10;}else{this.ZdcMapCenterInfopx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+this.mapCenterInfoY;}if(!this.mapScaleBarY){this.ZdcScaleBarpx.y=this.ZdcMapCenterpx.y+Math.floor(this.ZdcMapHpx/2)-45;}else{this.ZdcScaleBarpx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+this.mapScaleBarY;}if(!this.mapControlY){this.ZdcMapControlpx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+10;}else{this.ZdcMapControlpx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+this.mapControlY;}this.ZdcMapCopyrightpx.y=(this.ZdcMapHpx-13);this.ZdcMapClipRect.Top=Math.floor((this.ZdcMapTileHpx-this.ZdcMapHpx)/2);this.ZdcMapClipRect.Height=this.ZdcMapHpx;}this.ZdcMapClass.style.left=this.ZdcMapTileLeftpx+"px";this.ZdcMapClass.style.top=this.ZdcMapTileToppx+"px";if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)!=0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)!=0){this.ZdcMapMode=1;}if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)==0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)==0){this.ZdcMapMode=2;}if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)!=0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)==0){this.ZdcMapMode=3;}if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)==0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)!=0){this.ZdcMapMode=4;}};ZdcMap.prototype.SetZoomChangeImageOnMap=function(){this.ZdcZoomChangeImage.style.zIndex="10010";this.ZdcMapClass.appendChild(this.ZdcZoomChangeImage);this.ZdcZoomChangeImage.style.filter="alpha(opacity=50)";this.ZdcZoomChangeImage.style.mozOpacity="0.5";this.ZdcZoomChangeImage.style.opacity="0.5";this.ZdcZoomChangeImage.style.left=this.ZdcMapCenterpx.x+"px";this.ZdcZoomChangeImage.style.top=this.ZdcMapCenterpx.y+"px";this.ZdcZoomChangeImage.style.width="154px";this.ZdcZoomChangeImage.style.height="154px";this.ZdcZoomChangeImage.innerHTML="<IMG style='border:3px solid #CC0000' src="+this.ZoomChangeImageIn+" width=148 height=148>";this.ZdcZoomChangeImage.style.visibility="hidden";this.ZdcZoomChangeImageCorner1.style.zIndex="10011";this.ZdcZoomChangeImageCorner2.style.zIndex="10012";this.ZdcZoomChangeImageCorner3.style.zIndex="10013";this.ZdcZoomChangeImageCorner4.style.zIndex="10014";this.ZdcZoomChangeImageCorner1.style.width="20px";this.ZdcZoomChangeImageCorner1.style.height="20px";this.ZdcZoomChangeImageCorner1.style.position="absolute";this.ZdcZoomChangeImageCorner2.style.width="20px";this.ZdcZoomChangeImageCorner2.style.height="20px";this.ZdcZoomChangeImageCorner2.style.position="absolute";this.ZdcZoomChangeImageCorner3.style.width="20px";this.ZdcZoomChangeImageCorner3.style.height="20px";this.ZdcZoomChangeImageCorner3.style.position="absolute";this.ZdcZoomChangeImageCorner4.style.width="20px";this.ZdcZoomChangeImageCorner4.style.height="20px";this.ZdcZoomChangeImageCorner4.style.position="absolute";this.ZdcMapClass.appendChild(this.ZdcZoomChangeImageCorner1);this.ZdcMapClass.appendChild(this.ZdcZoomChangeImageCorner2);this.ZdcMapClass.appendChild(this.ZdcZoomChangeImageCorner3);this.ZdcMapClass.appendChild(this.ZdcZoomChangeImageCorner4);this.ZdcZoomChangeImageCorner1.style.left=(this.ZdcMapCenterpx.x-20)+"px";this.ZdcZoomChangeImageCorner1.style.top=(this.ZdcMapCenterpx.y-20)+"px";this.ZdcZoomChangeImageCorner2.style.left=(this.ZdcMapCenterpx.x+20)+"px";this.ZdcZoomChangeImageCorner2.style.top=(this.ZdcMapCenterpx.y-20)+"px";this.ZdcZoomChangeImageCorner3.style.left=(this.ZdcMapCenterpx.x-20)+"px";this.ZdcZoomChangeImageCorner3.style.top=(this.ZdcMapCenterpx.y+20)+"px";this.ZdcZoomChangeImageCorner4.style.left=(this.ZdcMapCenterpx.x+20)+"px";this.ZdcZoomChangeImageCorner4.style.top=(this.ZdcMapCenterpx.y+20)+"px";this.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+this.ZoomChangeImageCorner1+">";this.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+this.ZoomChangeImageCorner2+">";this.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+this.ZoomChangeImageCorner3+">";this.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+this.ZoomChangeImageCorner4+">";this.ZdcZoomChangeImageCorner1.style.width="20px";this.ZdcZoomChangeImageCorner1.style.height="20px";this.ZdcZoomChangeImageCorner1.style.position="absolute";this.ZdcZoomChangeImageCorner2.style.width="20px";this.ZdcZoomChangeImageCorner2.style.height="20px";this.ZdcZoomChangeImageCorner2.style.position="absolute";this.ZdcZoomChangeImageCorner3.style.width="20px";this.ZdcZoomChangeImageCorner3.style.height="20px";this.ZdcZoomChangeImageCorner3.style.position="absolute";this.ZdcZoomChangeImageCorner4.style.width="20px";this.ZdcZoomChangeImageCorner4.style.height="20px";this.ZdcZoomChangeImageCorner4.style.position="absolute";this.ZdcZoomChangeImageCorner1.style.visibility="hidden";this.ZdcZoomChangeImageCorner2.style.visibility="hidden";this.ZdcZoomChangeImageCorner3.style.visibility="hidden";this.ZdcZoomChangeImageCorner4.style.visibility="hidden";};ZdcMap.prototype.SetMapLocationAndScale=function(_254,_255,_256){var obj=ZdcCommon.ll2pixel(_254,_255,_256);var _258=obj.mesh;objlist=_258.split("_");var _259,_25a;switch(this.ZdcMapMode){case 1:_259=(this.ZdcTileWpx/2)-Number(obj.offx);_25a=(this.ZdcTileHpx/2)-Number(obj.offy);break;case 2:_259=this.ZdcTileWpx-Number(obj.offx);_25a=this.ZdcTileHpx-Number(obj.offy);break;case 3:_259=(this.ZdcTileWpx/2)-Number(obj.offx);_25a=this.ZdcTileHpx-Number(obj.offy);break;case 4:_259=this.ZdcTileWpx-Number(obj.offx);_25a=(this.ZdcTileHpx/2)-Number(obj.offy);break;default:_259=(this.ZdcTileWpx/2)-Number(obj.offx);_25a=(this.ZdcTileHpx/2)-Number(obj.offy);break;}this.ZdcCenter.px=this.ZdcMapCenterpx.x-_259;this.ZdcCenter.py=this.ZdcMapCenterpx.y-_25a;this.mx=_254;this.my=_255;this.s=_256;this.SetCenterLL(this.mx,this.my);this.ZdcBaseXpx=_259;this.ZdcBaseYpx=_25a;this._t_c.style.top=_25a+"px";this._t_c.style.left=_259+"px";this.moveX=-1*_259;this.moveY=-1*_25a;this.cntX=0;this.cntY=0;for(var key in this.tile_hash){if(this.tile_hash.hasOwnProperty(key)){if(document.all&&this.tile_hash[key].doc.readyState!="complete"){this.tile_hash[key].doc.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);}else{this.style.visibility="hidden";}};}else{this._t_c.removeChild(this.tile_hash[key].doc);}delete this.tile_hash[key];}}this.SetMapImage(objlist[1],objlist[2],objlist[0],0,0);if(this.addtilestatus){this.ZdcUserTileClass.SetMapImage(objlist[1],objlist[2],objlist[0],0,0);}if(this.ZdcUserTileClass!=null){this.ZdcUserTileClass.InitTileLayer();}if(this.ZdcUserLayers.length>0){this.InitUserLayer();}this.ResetRouteLayer();this.ResetHRouteLayer();this.RedrawShapeLayer();if(this.FirstInitMap||this.reflashMapFlg){this.FirstInitMap=false;}else{this.ZdcMapAccessLog("ChangeLocation");ZdcEvent.trigger(this,"scrollmapend");}this.reflashMapFlg=false;if(this.msgopenstatus){this.reflashMsgWindow();if(ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOffDrag();}}if(this.usermsgopenstatus){this.reflashUserMsgWindow();}if(this.htmlopenstatus){this.closeZdcMsgHtml();this.openZdcMsgHtml(this.ZdcMsgHtml.html,this.ZdcMsgHtml.Point,this.ZdcMsgHtml.title,this.ZdcMsgHtml.w,this.ZdcMsgHtml.h,this.ZdcMsgHtml.mrkoffset);}for(var i=0;i<this.ZdcUserImageLayers.length;i++){this.InitUserImageLayer(this.ZdcUserImageLayers[i]);}};ZdcMap.prototype.SetControlOnMap=function(){this.ZdcMapClass.appendChild(this.ZdcCtrObj.doc);this.ZdcCtrObj.doc.style.left=(this.ZdcMapControlpx.x-Number(this.ZdcCtrObj.BaseX))+"px";this.ZdcCtrObj.doc.style.top=(this.ZdcMapControlpx.y)+"px";this.ZdcCtrObj.changedoc.style.width="12px";this.ZdcCtrObj.changedoc.style.height="12px";this.ZdcCtrObj.changedoc.style.position="absolute";if(this.ZdcMapHpx<=350){this.ZdcCtrObj.zoomlistopen=false;this.ZdcCtrObj.changedoc.style.visibility="hidden";if(this.ZdcCtrObj.type==3){this.ZdcCtrObj.shadowlargedoc.style.visibility="hidden";this.ZdcCtrObj.shadowsmalldoc.style.visibility="visible";}this.ZdcCtrObj.scaledoc.style.visibility="hidden";this.ZdcCtrObj.scaleseldoc.style.visibility="hidden";this.ZdcCtrObj.scaleslitherdoc.style.visibility="hidden";}else{if(this.ZdcCtrObj.smallonly){this.ZdcCtrObj.zoomlistopen=false;this.ZdcCtrObj.changedoc.style.visibility="hidden";}else{if(this.ZdcCtrObj.largeonly){this.ZdcCtrObj.changedoc.style.visibility="hidden";this.ZdcCtrObj.scaledoc.style.visibility="visible";this.ZdcCtrObj.scaleseldoc.style.visibility="visible";this.ZdcCtrObj.scaleslitherdoc.style.visibility="visible";}else{this.ZdcCtrObj.changedoc.style.visibility="visible";}}}if(this.ZdcCtrObj.zoomlistopen){this.ZdcCtrObj.basedoc.innerHTML="<IMG src="+this.ZdcCtrObj.CtlImage+">";if(document.all){this.ZdcCtrObj.basedoc.style.width="60px";this.ZdcCtrObj.basedoc.style.height="320px";this.ZdcCtrObj.basedoc.style.position="absolute";}this.ZdcCtrObj.changedoc.innerHTML="<IMG src="+this.ZdcCtrObj.CtlNoChgImage+">";}else{this.ZdcCtrObj.basedoc.innerHTML="<IMG src="+this.ZdcCtrObj.CtlSmallImage+">";if(document.all){this.ZdcCtrObj.basedoc.style.width="60px";this.ZdcCtrObj.basedoc.style.height="92px";this.ZdcCtrObj.basedoc.style.position="absolute";}this.ZdcCtrObj.changedoc.innerHTML="<IMG src="+this.ZdcCtrObj.CtlChgImage+">";}};ZdcMap.prototype.SetMapCenterOnMap=function(){this.ZdcMapClass.appendChild(this.ZdcCenterObj.doc);this.ZdcCenterObj.doc.style.left=(this.ZdcMapCenterpx.x+this.ZdcCenterObj.offset.x)+"px";this.ZdcCenterObj.doc.style.top=(this.ZdcMapCenterpx.y+this.ZdcCenterObj.offset.y)+"px";};ZdcMap.prototype.SetMapCenterInfoOnMap=function(){this.ZdcMapClass.appendChild(this.ZdcCenterInfoObj.doc1);this.ZdcMapClass.appendChild(this.ZdcCenterInfoObj.doc2);this.ZdcCenterInfoObj.doc1.style.left=this.ZdcMapCenterInfopx.x+"px";this.ZdcCenterInfoObj.doc1.style.top=this.ZdcMapCenterInfopx.y+"px";this.ZdcCenterInfoObj.doc2.style.left=this.ZdcMapCenterInfopx.x+"px";this.ZdcCenterInfoObj.doc2.style.top=this.ZdcMapCenterInfopx.y+"px";this.ZdcCenterInfoObj.doc1.innerHTML="<IMG src="+this.ZdcCenterInfoObj.ZdcCenterInfoImage+">";this.ZdcCenterInfoObj.doc1.style.position="absolute";var pts=ZdcCommon.ConvertMSXY2LL(this.mx,this.my,2);this.ZdcCenter.e=" E "+pts.lon;this.ZdcCenter.n=" N "+pts.lat;this.ZdcCenter.scale="1/"+ZdcZoom.map_defs[this.s];if(this.ZdcCenterInfoObj.type==1){this.ZdcCenterInfoObj.doc2.innerHTML="<DIV align='center'><span style='font-size:12px;font-family:monospace;line-height:100%;'>"+this.ZdcCenter.e+"<br>"+this.ZdcCenter.n+"</span><br><span style='font-size:12px;font-family:monospace;vertical-align:bottom;'>"+this.ZdcCenter.scale+"</span></DIV>";}else{this.ZdcCenterInfoObj.doc2.innerHTML="<DIV align='center'><span style='font-size:12px;font-family:monospace;color:#ffffff;line-height:100%;'>"+this.ZdcCenter.e+"<br>"+this.ZdcCenter.n+"</span><br><span style='font-size:12px;font-family:monospace;color:#ffffff;vertical-align:bottom;'>"+this.ZdcCenter.scale+"</span></DIV>";}};ZdcMap.prototype.SetMapScaleOnMap=function(){this.ZdcMapClass.appendChild(this.ZdcScaleBarObj.doc1);this.ZdcMapClass.appendChild(this.ZdcScaleBarObj.doc2);this.ZdcScaleText=ZdcZoom.map_defd[this.s];this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleImage+">";this.ZdcScaleBarObj.doc1.style.position="absolute";this.ZdcScaleBarObj.doc2.style.position="absolute";if(this.ZdcScaleBarObj.type==1){this.ZdcScaleBarObj.doc2.style.visible="hidden";this.ZdcScaleBarObj.doc1.style.width="120px";this.ZdcScaleBarObj.doc1.style.height="16px";this.ZdcScaleBarObj.doc1.style.left=(this.ZdcScaleBarpx.x-2)+"px";this.ZdcScaleBarObj.doc1.style.top=(this.ZdcScaleBarpx.y+22)+"px";this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";}else{if(this.ZdcScaleBarObj.type==2){this.ZdcScaleBarObj.doc1.style.width="105px";this.ZdcScaleBarObj.doc1.style.height="15px";this.ZdcScaleBarObj.doc2.style.width="45px";this.ZdcScaleBarObj.doc2.style.height="20px";this.ZdcScaleBarObj.doc1.style.left=this.ZdcScaleBarpx.x+"px";this.ZdcScaleBarObj.doc1.style.top=(this.ZdcScaleBarpx.y+14)+"px";this.ZdcScaleBarObj.doc2.style.left=(this.ZdcScaleBarpx.x+108)+"px";this.ZdcScaleBarObj.doc2.style.top=(this.ZdcScaleBarpx.y+12)+"px";this.ZdcScaleBarObj.doc2.innerHTML="<table><tr><td align='center' bgcolor=#444444>"+"<span style='font-size:12px;font-family:monospace;color:#ffffff;'>"+this.ZdcScaleText+"</span>"+"</td></tr></table>";}else{if(this.ZdcScaleBarObj.type==3){this.ZdcScaleBarObj.doc2.style.visible="hidden";this.ZdcScaleBarObj.doc1.style.width="176px";this.ZdcScaleBarObj.doc1.style.height="14px";this.ZdcScaleBarObj.doc1.style.left=(this.ZdcScaleBarpx.x-5)+"px";this.ZdcScaleBarObj.doc1.style.top=(this.ZdcScaleBarpx.y+22)+"px";if(this.mediamode=="screen"){if(this.s<10){this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+")";if(document.all){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+" style='display:none' />";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+">";}}else{this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+")";if(document.all){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+" style='display:none' />";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+">";}}}else{if(this.s<10){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".gif"+">";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";}}}}}};ZdcMap.prototype.SetCopyrightOnMap=function(){this.AddCopyrightOnMap();};
ZdcMap.prototype.AddCopyrightOnMap=function(){
if((this.ZdcMapCopyrightpx.x-10)<10){this.ZdcCopyrightObj.doc.style.left=10+"px";
}else{
this.ZdcCopyrightObj.doc.style.left=(this.ZdcMapCopyrightpx.x-10)+"px";}
this.ZdcCopyrightObj.doc.style.top=(this.ZdcMapCopyrightpx.y-4)+"px";
if(this.ZdcMapType==5){this.ZdcCopyrightObj.copyrightimg=ZdcCommon.ZdcMapServer+"/usrimg/copyright_eiji.gif";
this.ZdcCopyrightObj.doc.innerHTML="<IMG src="+this.ZdcCopyrightObj.copyrightimg+">";
}else{
this.ZdcCopyrightObj.copyrightimg=ZdcCommon.ZdcMapServer+"/usrimg/copyright_normal.gif";
this.ZdcCopyrightObj.doc.innerHTML="<IMG src="+this.ZdcCopyrightObj.copyrightimg+">";}
this.ZdcMapBase.appendChild(this.ZdcCopyrightObj.doc);
if(this.cMap!=null){var p1=ZdcEvent._getClientPosition(this.cMap.ZdcMapBase);var p2=new Object();p2.x=p1.x+parseInt(this.cMap.ZdcMapWpx);p2.y=p1.y+parseInt(this.cMap.ZdcMapHpx);var p3=ZdcEvent._getClientPosition(this.ZdcCopyrightObj.doc);
var p4=new Object();
p4.x=p3.x+274;
p4.y=p3.y+14;
var p5=ZdcEvent._getClientPosition(this.ZdcMapBase);
if(this.cMap.MapCloseFlg==true){
p2.y=p2.y-parseInt(this.cMap.ZdcMapHpx)+16;
p2.x=p2.x-parseInt(this.cMap.ZdcMapWpx)+16;
}
if(p2.y<p3.y){
this.ZdcCopyrightObj.doc.style.left=(this.ZdcMapCopyrightpx.x-10)+"px";
}else{
if(p1.x<=p4.x&&p2.x>=p3.x&&p1.y<=p4.y&&p2.y>=p3.y){
if(this.cMap.MapCloseFlg==true){
this.ZdcCopyrightObj.doc.style.left=(p1.x-p5.x-276)+"px";
}else{
this.ZdcCopyrightObj.doc.style.left=(p1.x-p5.x-282)+"px";
}
this.ZdcCopyrightObj.doc.style.top=(this.ZdcMapCopyrightpx.y-4)+"px";
}else{
if(p1.x<=p4.x&&p2.x>=p3.x){
this.ZdcCopyrightObj.doc.style.left=(this.ZdcMapCopyrightpx.x)+"px";
}
}
}
var _263=parseInt(this.ZdcMapWpx)+parseInt(this.Pnt.x);
if(p4.x+10+(p2.x-p1.x)>_263&&p2.y>=p3.y&&p1.x>=p4.x){
var pos=this.ZdcCopyrightObj.doc.style.left;
pos=parseInt(pos.replace(/px/g,""));
this.ZdcCopyrightObj.doc.style.left=(pos-10)+"px";
}
}
};
ZdcMap.prototype.SetMsgWindowOnMap=function(){
this.ZdcMsgWindowObj.Pixel=this.convertPoint2Pixel(this.ZdcMsgWindowObj.Point);this.ZdcMsgWindowObj.doc.style.left=(parseInt(this.ZdcMsgWindowObj.Pixel.x)+parseInt(this.ZdcMsgWindowObj.msgoffset.x))+"px";this.ZdcMsgWindowObj.doc.style.top=(parseInt(this.ZdcMsgWindowObj.Pixel.y)+parseInt(this.ZdcMsgWindowObj.msgoffset.y))+"px";if(this.ZdcMsgWindowObj.Point==null){this.ZdcMsgWindowObj.doc.style.left=this.ZdcMapCenterpx.x+"px";this.ZdcMsgWindowObj.doc.style.top=this.ZdcMapCenterpx.y+"px";}if(this.ZdcMsgWindowObj.title!=null){this.ZdcMsgWindowObj.doctextsmall.appendChild(this.ZdcMsgWindowObj.title);this.ZdcMsgWindowObj.doc.appendChild(this.ZdcMsgWindowObj.doctextsmall);this.ZdcMsgWindowObj.doctextsmall.style.width="200px";this.ZdcMsgWindowObj.doctextsmall.style.position="absolute";this.ZdcMsgWindowObj.doctextsmall.style.overflow="hidden";this.ZdcMsgWindowObj.doctextsmall.style.fontSize="12px";
if(document.all){this.ZdcMsgWindowObj.doctextsmall.style.lineHeight="1.25";}else{this.ZdcMsgWindowObj.doctextsmall.style.lineHeight="1.2";}}if(this.ZdcMsgWindowObj.node!=null){this.ZdcMsgWindowObj.doctextlarge.appendChild(this.ZdcMsgWindowObj.node);this.ZdcMsgWindowObj.doc.appendChild(this.ZdcMsgWindowObj.doctextlarge);this.ZdcMsgWindowObj.doctextlarge.style.width="207px";this.ZdcMsgWindowObj.doctextlarge.style.height="120px";this.ZdcMsgWindowObj.doctextlarge.style.overflow="auto";this.ZdcMsgWindowObj.doctextlarge.style.overflowY="auto";this.ZdcMsgWindowObj.doctextlarge.style.overflowX="hidden";this.ZdcMsgWindowObj.doctextlarge.style.position="absolute";this.ZdcMsgWindowObj.doctextlarge.style.fontSize="12px";if(document.all){this.ZdcMsgWindowObj.doctextlarge.style.lineHeight="1.25";}else{this.ZdcMsgWindowObj.doctextlarge.style.lineHeight="1.2";}}
if(this.ZdcMsgStatus){
if(this.ZdcMsgWindowObj.largeopen){this.ZdcMsgWindowObj.visibleLargeMsg();}else{this.ZdcMsgWindowObj.visibleSmallMsg();}this.ZdcMapClass.appendChild(this.ZdcMsgWindowObj.doc);}};ZdcMap.prototype.SetMsgWindowOnDrag=function(){
this.ZdcMsgWindowObj.doctextlarge.style.overflow="hidden";
this.ZdcMsgWindowObj.doctextlarge.style.overflowY="hidden";this.ZdcMsgWindowObj.doctextlarge.style.overflowX="hidden";};ZdcMap.prototype.SetMsgWindowOffDrag=function(){this.ZdcMsgWindowObj.doctextlarge.style.overflow="auto";this.ZdcMsgWindowObj.doctextlarge.style.overflowY="auto";this.ZdcMsgWindowObj.doctextlarge.style.overflowX="hidden";};ZdcMap.prototype.InitUserLayer=function(){for(var j=this.ZdcUserLayers.length-1;j>=0;j--){if(this.ZdcUserLayers[j].addmapstatus){this.ClearUserLayerMarker(this.ZdcUserLayers[j].layerID);this.ZdcMapClass.removeChild(this.ZdcUserLayers[j].doc);this.ZdcUserLayers[j].addmapstatus=false;}this.ZdcUserLayers[j].doc.style.left="0px";this.ZdcUserLayers[j].doc.style.top="0px";if(this.ZdcUserLayers[j].minzoom<=this.s&&this.s<=this.ZdcUserLayers[j].maxzoom&&!this.ZdcUserLayers[j].addmapstatus&&this.ZdcUserLayers[j].type!="auto"){
this.ZdcMapClass.appendChild(this.ZdcUserLayers[j].doc);this.ZdcUserLayers[j].addmapstatus=true;}
if((this.ZdcUserLayers[j].markers.length>0)&&(this.ZdcUserLayers[j].type!="auto")){this.InitUserLayerMarker(this.ZdcUserLayers[j].layerID);}if((this.ZdcUserLayers[j].tooltips.length>0)&&(this.ZdcUserLayers[j].type!="auto")){this.InitUserLayerTooltip(this.ZdcUserLayers[j].layerID);}if(this.ZdcUserLayers[j].type=="auto"){this.removeUserLayerById(this.ZdcUserLayers[j].layerID);}
this.SetLayerBoundBox(this.ZdcUserLayers[j]);}};ZdcMap.prototype.ClearUserLayerMarker=function(id,mflg){for(var k=0;k<this.ZdcUserLayers.length;k++){
if(this.ZdcUserLayers[k].layerID==id){for(var i=0;i<this.ZdcUserLayers[k].markers.length;i++){if(this.ZdcUserLayers[k].markers[i]!=null){try{this.ZdcUserLayers[k].doc.removeChild(this.ZdcUserLayers[k].markers[i].doc);if(mflg){this.ZdcUserLayers[k].markers[i]=null;}}catch(e){}}}if(this.ZdcUserLayers[k].type=="auto"){this.ZdcUserLayers[k].clearMarker(1);}break;}}};ZdcMap.prototype.ClearUserLayerTooltip=function(id,mflg){for(var k=0;k<this.ZdcUserLayers.length;k++){if(this.ZdcUserLayers[k].layerID==id){
for(var i=0;i<this.ZdcUserLayers[k].tooltips.length;i++){if(this.ZdcUserLayers[k].tooltips[i]!=null){try{this.ZdcUserLayers[k].doc.removeChild(this.ZdcUserLayers[k].tooltips[i].doc);if(mflg){this.ZdcUserLayers[k].tooltips[i]=null;}}catch(e){}}}}}};ZdcMap.prototype.InitUserLayerMarker=function(_26e){
for(var j=0;j<this.ZdcUserLayers.length;j++){if(this.ZdcUserLayers[j].layerID==_26e){break;}}
if(j>=this.ZdcUserLayers.length){return;}var id=j;var _271=parseInt(this.ZdcUserLayers[id].doc.style.left);var _272=parseInt(this.ZdcUserLayers[id].doc.style.top);var pxy;if(this.ZdcUserLayers[id].markers!=null&&this.ZdcUserLayers[id].addmapstatus){for(var i=0;i<this.ZdcUserLayers[id].markers.length;i++){
if(this.ZdcUserLayers[id].markers[i]!=null){pxy=this.convertPoint2Pixel(this.ZdcUserLayers[id].markers[i].Point);this.ZdcUserLayers[id].markers[i].doc.style.left=(pxy.x+this.ZdcUserLayers[id].markers[i].icon.offset.x-_271)+"px";this.ZdcUserLayers[id].markers[i].doc.style.top=(pxy.y+this.ZdcUserLayers[id].markers[i].icon.offset.y-_272)+"px";this.ZdcUserLayers[id].doc.appendChild(this.ZdcUserLayers[id].markers[i].doc);}}}};
ZdcMap.prototype.InitUserLayerTooltip=function(_275){for(var j=0;j<this.ZdcUserLayers.length;j++){
if(this.ZdcUserLayers[j].layerID==_275){break;}}if(j>=this.ZdcUserLayers.length){return;}var id=j;
var _278=parseInt(this.ZdcUserLayers[id].doc.style.left);var _279=parseInt(this.ZdcUserLayers[id].doc.style.top);var pxy;if(this.ZdcUserLayers[id].tooltips!=null&&this.ZdcUserLayers[id].addmapstatus){for(var i=0;i<this.ZdcUserLayers[id].tooltips.length;i++){
if(this.ZdcUserLayers[id].tooltips[i]!=null){pxy=this.convertPoint2Pixel(this.ZdcUserLayers[id].tooltips[i].Point);this.ZdcUserLayers[id].tooltips[i].doc.style.left=(parseInt(pxy.x)+parseInt(this.ZdcUserLayers[id].tooltips[i].offset.x)-_278)+"px";this.ZdcUserLayers[id].tooltips[i].doc.style.top=(parseInt(pxy.y)+parseInt(this.ZdcUserLayers[id].tooltips[i].offset.y)-_279)+"px";
this.ZdcUserLayers[id].doc.appendChild(this.ZdcUserLayers[id].tooltips[i].doc);}}}};ZdcMap.prototype.SetZoomPointVisible=function(mx,my,sflg){if(sflg!=0){
this.ZdcZoomChangeImageCorner1.style.visibility="visible";
this.ZdcZoomChangeImageCorner2.style.visibility="visible";
this.ZdcZoomChangeImageCorner3.style.visibility="visible";
this.ZdcZoomChangeImageCorner4.style.visibility="visible";}
if(sflg<0){var img1=this.ZoomChangeImageCorner1;var img2=this.ZoomChangeImageCorner2;var img3=this.ZoomChangeImageCorner3;var img4=this.ZoomChangeImageCorner4;
}else{
var img1=this.ZoomChangeImageCorner4;var img2=this.ZoomChangeImageCorner3;var img3=this.ZoomChangeImageCorner2;var img4=this.ZoomChangeImageCorner1;}var _283=20;var _284=20;
var pxl=this.convertPoint2Pixel(new ZdcPoint(mx,my,2));var plx=pxl.x-15;var ply=pxl.y-15;if(document.all){this.ZdcZoomChangeImageCorner1.style.left=(plx-16)+"px";this.ZdcZoomChangeImageCorner1.style.top=(ply-16)+"px";
this.ZdcZoomChangeImageCorner2.style.left=(plx+_283+2)+"px";this.ZdcZoomChangeImageCorner2.style.top=(ply-16)+"px";
this.ZdcZoomChangeImageCorner3.style.left=(plx-16)+"px";this.ZdcZoomChangeImageCorner3.style.top=(ply+_284+2)+"px";this.ZdcZoomChangeImageCorner4.style.left=(plx+_283+2)+"px";this.ZdcZoomChangeImageCorner4.style.top=(ply+_284+2)+"px";this.ZdcZoomChangeImageCorner1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img1+")";this.ZdcZoomChangeImageCorner2.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img2+")";this.ZdcZoomChangeImageCorner3.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img3+")";this.ZdcZoomChangeImageCorner4.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+img4+")";this.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+img1+" style='display:none'>";this.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+img2+" style='display:none'>";
this.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+img3+" style='display:none'>";this.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+img4+" style='display:none'>";}else{this.ZdcZoomChangeImageCorner1.style.left=(plx-16)+"px";this.ZdcZoomChangeImageCorner1.style.top=(ply-16)+"px";this.ZdcZoomChangeImageCorner2.style.left=(plx+_283+2)+"px";this.ZdcZoomChangeImageCorner2.style.top=(ply-16)+"px";this.ZdcZoomChangeImageCorner3.style.left=(plx-16)+"px";this.ZdcZoomChangeImageCorner3.style.top=(ply+_284+2)+"px";this.ZdcZoomChangeImageCorner4.style.left=(plx+_283+2)+"px";this.ZdcZoomChangeImageCorner4.style.top=(ply+_284+2)+"px";this.ZdcZoomChangeImageCorner1.innerHTML="<IMG src="+img1+">";this.ZdcZoomChangeImageCorner2.innerHTML="<IMG src="+img2+">";this.ZdcZoomChangeImageCorner3.innerHTML="<IMG src="+img3+">";this.ZdcZoomChangeImageCorner4.innerHTML="<IMG src="+img4+">";}this.ZdcZoomChangeImageCorner1.style.width="20px";this.ZdcZoomChangeImageCorner1.style.height="20px";this.ZdcZoomChangeImageCorner1.style.position="absolute";this.ZdcZoomChangeImageCorner2.style.width="20px";this.ZdcZoomChangeImageCorner2.style.height="20px";this.ZdcZoomChangeImageCorner2.style.position="absolute";this.ZdcZoomChangeImageCorner3.style.width="20px";this.ZdcZoomChangeImageCorner3.style.height="20px";this.ZdcZoomChangeImageCorner3.style.position="absolute";this.ZdcZoomChangeImageCorner4.style.width="20px";this.ZdcZoomChangeImageCorner4.style.height="20px";this.ZdcZoomChangeImageCorner4.style.position="absolute";this.overtime=0;return;};ZdcMap.prototype.SetZoomPointHidden=function(){if(this.overtime>32){this.overtime=0;this.ZdcZoomChangeImageCorner1.style.visibility="hidden";this.ZdcZoomChangeImageCorner2.style.visibility="hidden";this.ZdcZoomChangeImageCorner3.style.visibility="hidden";this.ZdcZoomChangeImageCorner4.style.visibility="hidden";clearTimeout(this.TimeIDByZoomPoint);return;}else{if(ZdcCommon.Math_mod(this.overtime,16)==0){this.ZdcZoomChangeImageCorner1.style.visibility="hidden";this.ZdcZoomChangeImageCorner2.style.visibility="hidden";this.ZdcZoomChangeImageCorner3.style.visibility="hidden";this.ZdcZoomChangeImageCorner4.style.visibility="hidden";}else{this.ZdcZoomChangeImageCorner1.style.visibility="visible";this.ZdcZoomChangeImageCorner2.style.visibility="visible";this.ZdcZoomChangeImageCorner3.style.visibility="visible";this.ZdcZoomChangeImageCorner4.style.visibility="visible";}this.overtime++;}this.TimeIDByZoomPoint=setTimeout((function(){this.SetZoomPointHidden();}).bind(this),this.ScrSpeed);};ZdcMap.prototype.GetNewCenterPoint=function(mx,my,orgs,news){if(orgs==null){orgs=this.s;}if(news==null){news=this.s;}var w=(this.mx-mx)/ZdcZoom.map_defw[orgs];var h=(this.my-my)/ZdcZoom.map_defh[orgs];var newx=mx+Math.round(w*ZdcZoom.map_defw[news]);var newy=my+Math.round(h*ZdcZoom.map_defh[news]);var pt=new ZdcPoint(newx,newy,2);return pt;};ZdcMap.prototype.SetScale=function(opt){if(this.CenterFirst){var obj=ZdcCommon.ll2pixel(this.mx,this.my,this.s);var _293=obj.mesh;objlist=_293.split("_");}else{if(this.CenterFirst!=null){if(this.msgopenstatus){if(this.getMapBoundBox(null,this.orgs).isContainPoint(this.ZdcMsgWindowObj.Point)){var p=this.GetNewCenterPoint(this.ZdcMsgWindowObj.Point.mx,this.ZdcMsgWindowObj.Point.my,this.orgs);this.mx=p.mx;this.my=p.my;}}else{if(this.usermsgopenstatus){if(this.getMapBoundBox(null,this.orgs).isContainPoint(this.ZdcUserMsgWindow.Point)){var p=this.GetNewCenterPoint(this.ZdcUserMsgWindow.Point.mx,this.ZdcUserMsgWindow.Point.my,this.orgs);this.mx=p.mx;this.my=p.my;}}else{if(this.htmlopenstatus){if(this.getMapBoundBox(null,this.orgs).isContainPoint(this.ZdcMsgHtml.Point)){var p=this.GetNewCenterPoint(this.ZdcMsgHtml.Point.mx,this.ZdcMsgHtml.Point.my,this.orgs);this.mx=p.mx;this.my=p.my;}}else{if(opt=="wheel"){var p=this.GetNewCenterPoint(this.MouseMx,this.MouseMy,this.orgs);this.mx=p.mx;this.my=p.my;this.SetZoomPointVisible(this.MouseMx,this.MouseMy,(this.orgs-this.s));}}}}}
var obj=ZdcCommon.ll2pixel(this.mx,this.my,this.s);
var _293=obj.mesh;
objlist=_293.split("_");
}
if(this.ZdcUserTileClass!=null){this.ZdcUserTileClass.InitTileLayer();}
var _295;
var _296;
switch(this.ZdcMapMode){
case 1:
_295=(this.ZdcTileWpx/2)-Number(obj.offx);
_296=(this.ZdcTileHpx/2)-Number(obj.offy);break;
case 2:
_295=this.ZdcTileWpx-Number(obj.offx);
_296=this.ZdcTileHpx-Number(obj.offy);break;
case 3:
_295=(this.ZdcTileWpx/2)-Number(obj.offx);
_296=this.ZdcTileHpx-Number(obj.offy);break;
case 4:
_295=this.ZdcTileWpx-Number(obj.offx);
_296=(this.ZdcTileHpx/2)-Number(obj.offy);break;
default:
_295=(this.ZdcTileWpx/2)-Number(obj.offx);
_296=(this.ZdcTileHpx/2)-Number(obj.offy);break;}
this.ZdcCenter.px=this.ZdcMapCenterpx.x-_295;
this.ZdcCenter.py=this.ZdcMapCenterpx.y-_296;
this.SetCenterLL(this.mx,this.my);
this.ZdcBaseXpx=_295;
this.ZdcBaseYpx=_296;
this._t_c.style.top=_296+"px";
this._t_c.style.left=_295+"px";
this.moveX=-1*_295;
this.moveY=-1*_296;
for(var key in this.tile_hash){
if(this.tile_hash.hasOwnProperty(key)){
if(document.all&&this.tile_hash[key].doc.readyState!="complete"){
this.tile_hash[key].doc.onreadystatechange=function(){
if(this.readyState=="complete"){this.parentNode.removeChild(this);}else{this.style.visibility="hidden";
}
};
}else{
this._t_c.removeChild(this.tile_hash[key].doc);}delete this.tile_hash[key];}}this.cntX=0;this.cntY=0;this.SetMapImage(objlist[1],objlist[2],objlist[0],0,0);if(this.addtilestatus){this.ZdcUserTileClass.SetMapImage(objlist[1],objlist[2],objlist[0],0,0);}for(var i=0;i<this.ZdcUserImageLayers.length;i++){this.InitUserImageLayer(this.ZdcUserImageLayers[i]);}if(this.ZdcUserLayers.length>0){this.InitUserLayer();}if(this.msgopenstatus){this.reflashMsgWindow();}if(this.usermsgopenstatus){this.reflashUserMsgWindow();}if(this.htmlopenstatus){this.closeZdcMsgHtml();this.openZdcMsgHtml(this.ZdcMsgHtml.html,this.ZdcMsgHtml.Point,this.ZdcMsgHtml.title,this.ZdcMsgHtml.w,this.ZdcMsgHtml.h,this.ZdcMsgHtml.mrkoffset);}this.ResetRouteLayer();this.ResetHRouteLayer();this.RedrawShapeLayer();ZdcEvent.trigger(this,"changezoomend");this.ZdcMapAccessLog("ChangeZoom");if(opt=="wheel"&&!this.CenterFirst&&!this.msgopenstatus&&!this.usermsgopenstatus&&!this.htmlopenstatus){this.SetZoomPointHidden();}};ZdcMap.prototype.SetMapImage=function(_299,_29a,_29b){var T=this;_299=String(_299);_29a=String(_29a);if(ZdcCommon.StrCmp(_299.substr(0,1),"m")==0){var msw=_299.substr(1,ZdcCommon.StrLen(_299)-1);_299=(-1)*msw;}if(ZdcCommon.StrCmp(_29a.substr(0,1),"m")==0){var msh=_29a.substr(1,ZdcCommon.StrLen(_29a)-1);_29a=(-1)*msh;}T.ZdcTileCodeX=Number(_299);T.ZdcTileCodeY=Number(_29a);var mx,my,_2a1,top,left;var hash=new Object();for(var op=0,_2a6=T.tilepos.length;op<_2a6;op++){var key=T.tilepos[op].split(":");i=parseInt(key[1])+1;j=parseInt(key[0])+1;mx=_299-T.lx+i;my=_29a-j+T.ly;top=256*(j-1)+"px";left=256*(i-1)+"px";var _2a8=mx+":"+my+":"+_29b;if(typeof T.tile_hash[_2a8]=="undefined"){if(mx<0){mx="m"+Math.abs(mx);}if(my<0){my="m"+Math.abs(my);}var _2a9=T.GetImageUrl(mx,my,_29b);var ary=_2a9.split("/");var tmp=mx;if((new String(mx)).slice(0,1)=="m"){tmp=(new String(mx)).slice(1);}ary[2]=T.domains[parseInt(tmp)%T.domains.length];_2a9=ary.join("/");var _2ac=ZdcCommon.ZdcMapServer+"img/tileerr.png";var tile=new ZdcMapMeshTile(top,left,_2a9);T._t_c.appendChild(tile.doc);if(document.all){tile.doc.galleryimg="no";}tile.doc.alt="";tile.doc.onerror=function(){this.src=_2ac;if(document.all){this.width=256;this.height=256;}};T.tile_hash[_2a8]=tile;}else{T.tile_hash[_2a8].doc.style.left=left;T.tile_hash[_2a8].doc.style.top=top;}hash[_2a8]="";}for(var key in T.tile_hash){if(typeof hash[key]=="undefined"&&T.tile_hash.hasOwnProperty(key)){if(document.all&&T.tile_hash[key].doc.readyState!="complete"){T.tile_hash[key].doc.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);}else{this.style.visibility="hidden";}};}else{T._t_c.removeChild(T.tile_hash[key].doc);}delete T.tile_hash[key];}}};ZdcMap.prototype.SetCenterLL=function(x,y){var zpt=ZdcCommon.ConvertMSXY2LL(x,y,1);this.ZdcCenter.lon=zpt.lon;this.ZdcCenter.lat=zpt.lat;var pts=ZdcCommon.ConvertMSXY2LL(x,y,2);if(this.CenterInfoBoxOpen){this.ZdcCenter.e=" E "+pts.lon;this.ZdcCenter.n=" N "+pts.lat;this.ZdcCenter.scale="1/"+ZdcZoom.map_defs[this.s];if(this.ZdcCenterInfoObj.type==1){this.ZdcCenterInfoObj.doc2.innerHTML="<DIV align='center'><span style='font-size:12px;font-family:monospace;line-height:100%'>"+this.ZdcCenter.e+"<br>"+this.ZdcCenter.n+"</span><br><span style='font-size:12px;font-family:monospace;vertical-align:bottom;'>"+this.ZdcCenter.scale+"</span></DIV>";}else{this.ZdcCenterInfoObj.doc2.innerHTML="<DIV align='center'><span style='font-size:12px;font-family:monospace;color:#ffffff;line-height:100%'>"+this.ZdcCenter.e+"<br>"+this.ZdcCenter.n+"</span><br><span style='font-size:12px;font-family:monospace;color:#ffffff;vertical-align:bottom;'>"+this.ZdcCenter.scale+"</span></DIV>";}}};ZdcMap.prototype.ScrollMapByDirection=function(mx,my){if(this.OnScroll){return;}var px=mx*Math.round(this.ZdcMapWpx*3/5);var py=my*Math.round(this.ZdcMapHpx*3/5);ZdcEvent.trigger(this,"scrollmapstart");if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOnDrag();}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="hidden";this.ZdcMsgHtml.shddoc.style.visibility="hidden";this.ZdcMsgHtml.docclose.style.visibility="hidden";this.ZdcMsgHtml.docwins.style.visibility="hidden";}this.CountScr=0;this.PanTo(px,py);};ZdcMap.prototype.scrollMap=function(px,py,setp){if(this.OnScroll){return;}if(px==0&&py==0){return -1;}if(Math.abs(px)>2048||Math.abs(py)>2048){var _2b9=this.mx-Math.floor(px*ZdcZoom.map_defw[this.s]);var _2ba=this.my+Math.floor(py*ZdcZoom.map_defh[this.s]);this.SetMapLocationAndScale(_2b9,_2ba,this.s);}else{ZdcEvent.trigger(this,"scrollmapstart");if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOnDrag();}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="hidden";this.ZdcMsgHtml.shddoc.style.visibility="hidden";this.ZdcMsgHtml.docclose.style.visibility="hidden";this.ZdcMsgHtml.docwins.style.visibility="hidden";}this.CountScr=0;this.PanTo(px,py,setp);}return 1;};ZdcMap.prototype.PanTo=function(px,py,setp){this.OnScroll=true;var _2be=0;switch(this.CountScr){case 0:this.MoveSumX=0;this.MoveSumY=0;_2be=16;break;case 1:_2be=8;break;case 2:_2be=4;break;case 3:_2be=4;break;case 4:_2be=8;break;case 5:_2be=16;break;case 6:_2be=16;break;case 7:_2be=32;break;case 8:_2be=64;break;case 9:_2be=64;break;default:_2be=0;break;}var nx=Math.round(px/_2be);var ny=Math.round(py/_2be);if(this.CountScr==this.CountScrMax){nx=px-this.imgLayerX;ny=py-this.imgLayerY;this.imgLayerX=this.imgLayerY=0;}else{this.imgLayerX+=nx;this.imgLayerY+=ny;}if(nx==0){var _2c1=1;}else{var _2c1=Math.abs(nx)/nx;}if(ny==0){var _2c2=1;}else{var _2c2=Math.abs(ny)/ny;}if(Math.abs(nx)>Math.abs(px)-Math.abs(this.MoveSumX)){nx=(Math.abs(px)-Math.abs(this.MoveSumX))*_2c1;}if(Math.abs(ny)>Math.abs(py)-Math.abs(this.MoveSumY)){ny=(Math.abs(py)-Math.abs(this.MoveSumY))*_2c2;}if(this.CountScr==9){nx=(Math.abs(px)-Math.abs(this.MoveSumX))*_2c1;ny=(Math.abs(py)-Math.abs(this.MoveSumY))*_2c2;}this.MoveSumX+=nx;this.MoveSumY+=ny;this.ZdcMapTileMoveX=Math.round((Math.abs(nx)))*_2c1;this.ZdcMapTileMoveY=Math.round((Math.abs(ny)))*_2c2;this.ZdcMoveX=this.ZdcMapTileMoveX;this.ZdcMoveY=this.ZdcMapTileMoveY;ZdcEvent.trigger(this,"scrollmap");this.MoveMapByXY(this.ZdcMoveX,this.ZdcMoveY);this.ReSetMapBase();if(this.addtilestatus){this.ZdcUserTileClass.ReSetMapBase();}this.CountScr++;if(this.CountScr>this.CountScrMax){clearTimeout(this.TimeID);this.CountScr=0;this.OnScroll=false;if(setp!=null){var obj=ZdcCommon.ll2pixel(setp.mx,setp.my,this.s);var _2c4=obj.mesh;objlist=_2c4.split("_");var _2c5;var _2c6;switch(this.ZdcMapMode){case 1:_2c5=(this.ZdcTileWpx/2)-Number(obj.offx);_2c6=(this.ZdcTileHpx/2)-Number(obj.offy);break;case 2:_2c5=this.ZdcTileWpx-Number(obj.offx);_2c6=this.ZdcTileHpx-Number(obj.offy);break;case 3:_2c5=(this.ZdcTileWpx/2)-Number(obj.offx);_2c6=this.ZdcTileHpx-Number(obj.offy);break;case 4:_2c5=this.ZdcTileWpx-Number(obj.offx);_2c6=(this.ZdcTileHpx/2)-Number(obj.offy);break;default:_2c5=(this.ZdcTileWpx/2)-Number(obj.offx);_2c6=(this.ZdcTileHpx/2)-Number(obj.offy);break;}this.ZdcCenter.px=this.ZdcMapCenterpx.x-_2c5;this.ZdcCenter.py=this.ZdcMapCenterpx.y-_2c6;var px=(this.mx-setp.mx)/ZdcZoom.map_defw[this.s];var py=(this.my-setp.my)/ZdcZoom.map_defh[this.s];if(Math.abs(px)>1||Math.abs(py)>1){for(var i=0;i<this.ZdcUserImageLayers.length;i++){this.InitUserImageLayer(this.ZdcUserImageLayers[i]);}}this.mx=setp.mx;this.my=setp.my;this.SetCenterLL(this.mx,this.my);this.ZdcBaseXpx=_2c5;this.ZdcBaseYpx=_2c6;if(this.ZdcUserLayers.length>0){this.InitUserLayer();}if(this.msgopenstatus){this.reflashMsgWindow();if(ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOffDrag();}}if(this.usermsgopenstatus){this.reflashUserMsgWindow();}if(this.htmlopenstatus){this.closeZdcMsgHtml();this.openZdcMsgHtml(this.ZdcMsgHtml.html,this.ZdcMsgHtml.Point,this.ZdcMsgHtml.title,this.ZdcMsgHtml.w,this.ZdcMsgHtml.h,this.ZdcMsgHtml.mrkoffset);}}this.RedrawRouteLayer();this.RedrawHRouteLayer();this.RedrawShapeLayer();ZdcEvent.trigger(this,"scrollmapend");if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOffDrag();}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="visible";this.ZdcMsgHtml.shddoc.style.visibility="visible";if(this.ZdcMsgHtml.docclose.status){this.ZdcMsgHtml.docclose.style.visibility="visible";}else{this.ZdcMsgHtml.docclose.style.visibility="hidden";}if(this.ZdcMsgHtml.docwins.status){this.ZdcMsgHtml.docwins.style.visibility="visible";}else{this.ZdcMsgHtml.docwins.style.visibility="hidden";}}this.ZdcMapAccessLog("scrollTo");return;}this.TimeID=setTimeout((function(){this.PanTo(px,py,setp);}).bind(this),this.ScrSpeed);};ZdcMap.prototype.SetZoom=function(zm,opt){this.orgs=this.s;this.s=Number(this.s)+zm;if(this.s<this.zoomMin){this.s=this.zoomMin;}if(this.s>this.zoomMax){this.s=this.zoomMax;}if(this.orgs!=this.s){this.SetScale(opt);this.ShowScaleInfo();}};ZdcMap.prototype.ShowScaleInfo=function(){var pts=ZdcCommon.ConvertMSXY2LL(this.mx,this.my,2);if(this.CenterInfoBoxOpen){this.ZdcCenter.e=" E "+pts.lon;this.ZdcCenter.n=" N "+pts.lat;this.ZdcCenter.scale="1/"+ZdcZoom.map_defs[this.s];if(this.ZdcCenterInfoObj.type==1){this.ZdcCenterInfoObj.doc2.innerHTML="<DIV align='center'><span style='font-size:12px;font-family:monospace;line-height:100%;'>"+this.ZdcCenter.e+"<br>"+this.ZdcCenter.n+"</span><br><span style='font-size:12px;font-family:monospace;vertical-align:bottom;'>"+this.ZdcCenter.scale+"</span></DIV>";}else{this.ZdcCenterInfoObj.doc2.innerHTML="<DIV align='center'><span style='font-size:12px;font-family:monospace;color:#ffffff;line-height:100%;'>"+this.ZdcCenter.e+"<br>"+this.ZdcCenter.n+"</span><br><span style='font-size:12px;font-family:monospace;color:#ffffff;vertical-align:bottom;'>"+this.ZdcCenter.scale+"</span></DIV>";}this.ZdcCenterInfoObj.doc2.style.position="absolute";this.ZdcCenterInfoObj.doc2.style.width="120px";this.ZdcCenterInfoObj.doc2.style.height="45px";if(document.all){this.ZdcCenterInfoObj.doc2.style.lineHeight="1.25";}else{this.ZdcCenterInfoObj.doc2.style.lineHeight="1.05";}if(navigator.userAgent.indexOf("Safari")>=0){this.ZdcCenterInfoObj.doc2.style.lineHeight="1.2";}}if(this.ScaleBarOpen){this.ZdcScaleText=ZdcZoom.map_defd[this.s];if(this.ZdcScaleBarObj.type==1){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";}else{if(this.ZdcScaleBarObj.type==2){this.ZdcScaleBarObj.doc2.innerHTML="<table><tr><td align='center' bgcolor=#444444>"+"<span style='font-size:12px;font-family:monospace;color:#ffffff;'>"+this.ZdcScaleText+"</span>"+"</td></tr></table>";this.ZdcScaleBarObj.doc2.style.width="45px";this.ZdcScaleBarObj.doc2.style.height="20px";}else{if(this.ZdcScaleBarObj.type==3){if(this.mediamode=="screen"){if(this.s<10){this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+")";if(document.all){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+" style='display:none' />";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+">";}}else{this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+")";if(document.all){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+" style='display:none' />";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+">";}}}else{if(this.s<10){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".gif"+">";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";}}}}}this.ZdcScaleBarObj.doc2.style.position="absolute";}};ZdcMap.prototype.MoveMapByXY=function(_2cb,_2cc){this._t_c.style.top=(parseInt(this._t_c.style.top)+_2cc)+"px";this._t_c.style.left=(parseInt(this._t_c.style.left)+_2cb)+"px";for(var i=0;i<this.ZdcUserLayers.length;i++){this.ZdcUserLayers[i].doc.style.top=(parseInt(this.ZdcUserLayers[i].doc.style.top)+_2cc)+"px";this.ZdcUserLayers[i].doc.style.left=(parseInt(this.ZdcUserLayers[i].doc.style.left)+_2cb)+"px";}this.MoveShapeLayerByXY(_2cb,_2cc);if(this.msgopenstatus){this.ZdcMsgWindowObj.doc.style.top=(parseInt(this.ZdcMsgWindowObj.doc.style.top)+_2cc)+"px";this.ZdcMsgWindowObj.doc.style.left=(parseInt(this.ZdcMsgWindowObj.doc.style.left)+_2cb)+"px";}if(this.usermsgopenstatus){this.ZdcUserMsgWindow.doc.style.top=(parseInt(this.ZdcUserMsgWindow.doc.style.top)+_2cc)+"px";this.ZdcUserMsgWindow.doc.style.left=(parseInt(this.ZdcUserMsgWindow.doc.style.left)+_2cb)+"px";}if(this.htmlopenstatus){this.ZdcMsgHtml.doc.style.top=(parseInt(this.ZdcMsgHtml.doc.style.top)+_2cc)+"px";this.ZdcMsgHtml.doc.style.left=(parseInt(this.ZdcMsgHtml.doc.style.left)+_2cb)+"px";this.ZdcMsgHtml.shddoc.style.top=(parseInt(this.ZdcMsgHtml.shddoc.style.top)+_2cc)+"px";this.ZdcMsgHtml.shddoc.style.left=(parseInt(this.ZdcMsgHtml.shddoc.style.left)+_2cb)+"px";}for(var i=0;i<this.ZdcUserImageLayers.length;i++){this.ZdcUserImageLayers[i].doc.style.top=parseInt(this.ZdcUserImageLayers[i].doc.style.top)+_2cc+"px";this.ZdcUserImageLayers[i].doc.style.left=parseInt(this.ZdcUserImageLayers[i].doc.style.left)+_2cb+"px";}};ZdcMap.prototype.ReSetMapBase=function(){var T=this;var Xx,Yy;T.OnSetMapBase=true;var CX=T.ZdcTileCodeX;var CY=T.ZdcTileCodeY;T.mx=Math.round(T.mx-T.ZdcMoveX*(ZdcZoom.map_defw[T.s]));T.my=Math.round(T.my+T.ZdcMoveY*(ZdcZoom.map_defh[T.s]));T.SetCenterLL(T.mx,T.my);var pos=T._checkPosition(-1*this.ZdcMoveX,-1*this.ZdcMoveY);var x=pos[0];var y=pos[1];if(x!=0||y!=0){Xx=CX+x;Yy=CY-y;T.SetMapImage(Xx,Yy,T.s);T._t_c.style.top=parseInt(T._t_c.style.top)+y*256+"px";T._t_c.style.left=parseInt(T._t_c.style.left)+x*256+"px";}for(var i=0;i<this.ZdcUserImageLayers.length;i++){this.ResetUserImageLayer(this.ZdcUserImageLayers[i],-1*this.ZdcMoveX,-1*this.ZdcMoveY);}T.OnSetMapBase=false;};ZdcMap.prototype.setMapLocation=function(p,s){if(s==null){s=this.s;}else{var orgs=this.s;}if(s<this.zoomMin||s>this.zoomMax){return -1;}if(p.mx==this.mx&&p.my==this.my&&s==null){return -1;}if(p.mx==this.mx&&p.my==this.my&&s==this.s){return -1;}if(p.mx!=this.mx||p.my!=this.my){var sfw=Math.round((this.mx-p.mx)/ZdcZoom.map_defw[this.s]);var sfh=Math.round((p.my-this.my)/ZdcZoom.map_defh[this.s]);this.lon=p.lon;this.lat=p.lat;this.mx=p.mx;this.my=p.my;this.s=s;this.SetMapLocationAndScale(p.mx,p.my,s);}this.ShowScaleInfo();if(this.ControlOpen){if(this.ZdcCtrObj.zoomlistopen){var y=73+(this.s-1)*13;this.ZdcCtrObj.scaleseldoc.style.top=y+"px";if(this.ZdcCtrObj.type==3){this.ZdcCtrObj.scaleslitherdoc.style.top=y+"px";}else{this.ZdcCtrObj.scaleslitherdoc.style.top=(y-2)+"px";}}}if(this.ZdcUserZoomControl!=null){this.ZdcUserZoomControl.setSlitherPosition();}if(this.usermsgopenstatus){this.reflashUserMsgWindow();}if(this.htmlopenstatus){this.closeZdcMsgHtml();this.openZdcMsgHtml(this.ZdcMsgHtml.html,this.ZdcMsgHtml.Point,this.ZdcMsgHtml.title,this.ZdcMsgHtml.w,this.ZdcMsgHtml.h,this.ZdcMsgHtml.mrkoffset);}if(orgs!=null&&this.s!=orgs){ZdcEvent.trigger(this,"changezoomend");}};ZdcMap.prototype.setMapScale=function(s){if(s<this.zoomMin||s>this.zoomMax){return (-1);}if(this.s!=s){this.orgs=this.s;this.s=s;this.SetScale("zoom");this.ShowScaleInfo();if(this.ControlOpen){if(this.ZdcCtrObj.zoomlistopen){var y=73+(this.s-1)*13;this.ZdcCtrObj.scaleseldoc.style.top=y+"px";if(this.ZdcCtrObj.type==3){this.ZdcCtrObj.scaleslitherdoc.style.top=y+"px";}else{this.ZdcCtrObj.scaleslitherdoc.style.top=(y-2)+"px";}}}if(this.ZdcUserZoomControl!=null){this.ZdcUserZoomControl.setSlitherPosition();}return 1;}else{return -1;}};ZdcMap.prototype.getMapWindowSize=function(){var _2df=new ZdcWindow();_2df.top=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"top"));_2df.left=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"left"));_2df.width=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"));_2df.height=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"));var blw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderLeftWidth"));var brw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderRightWidth"));var btw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderTopWidth"));var bbw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderBottomWidth"));if(isNaN(blw)){blw=0;}if(isNaN(brw)){brw=0;}if(isNaN(btw)){btw=0;}if(isNaN(bbw)){bbw=0;}if(isNaN(_2df.top)){_2df.top=parseInt(this.ZdcMapBase.clientTop)-btw;}if(isNaN(_2df.left)){_2df.left=parseInt(this.ZdcMapBase.clientLeft)-blw;}if(isNaN(_2df.width)){_2df.width=parseInt(this.ZdcMapBase.clientWidth)+blw+brw;}if(isNaN(_2df.height)){_2df.height=parseInt(this.ZdcMapBase.clientHeight)+btw+bbw;}return _2df;};ZdcMap.prototype.getMapLocation=function(){var p=new ZdcPoint(this.mx,this.my,2);return p;};ZdcMap.prototype.getMapScale=function(){return this.s;};ZdcMap.prototype.getMapBoxScale=function(box,pt){var s=-1;if(pt==null){var w=Math.abs(box.maxx-box.minx);var h=Math.abs(box.maxy-box.miny);for(var i=this.zoomMax;i>=this.zoomMin;i--){if(w<(this.ZdcMapWpx*ZdcZoom.map_defw[i])&&h<(this.ZdcMapHpx*ZdcZoom.map_defh[i])){s=i;break;}}}else{var mx1;var mx2;var my1;var my2;for(var i=this.zoomMax;i>=this.zoomMin;i--){mx1=pt.mx-Math.floor((this.ZdcMapWpx*ZdcZoom.map_defw[i])/2);my1=pt.my-Math.floor((this.ZdcMapHpx*ZdcZoom.map_defh[i])/2);mx2=pt.mx+Math.floor((this.ZdcMapWpx*ZdcZoom.map_defw[i])/2);my2=pt.my+Math.floor((this.ZdcMapHpx*ZdcZoom.map_defh[i])/2);var ckbx=new ZdcBox(new ZdcPoint(mx1,my1,2),new ZdcPoint(mx2,my2,2));if(ckbx.isContainBox(box)==1){s=i;break;}}}return s;};ZdcMap.prototype.getMapBoundBox=function(p,s){var box=new ZdcBox();if(p!=null&&s!=null){if(s<this.zoomMin||s>this.zoomMax){s=this.s;}box.minx=p.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.maxx=p.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.miny=p.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);box.maxy=p.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}else{if(p!=null&&s==null){box.minx=p.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.maxx=p.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.miny=p.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);box.maxy=p.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}else{if(p==null&&s!=null){if(s<this.zoomMin||s>this.zoomMax){s=this.s;}box.minx=this.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.maxx=this.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.miny=this.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);box.maxy=this.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}else{box.minx=this.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.maxx=this.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.miny=this.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);box.maxy=this.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}}}box.minlon=p1.lon;box.minlat=p1.lat;box.maxlon=p2.lon;box.maxlat=p2.lat;box.p1=p1;box.p2=p2;return box;};ZdcMap.prototype.mapZoomIn=function(gap,opt){if(this.MouseMx==0&&this.MouseMy==0){return this.s;}if(this.s==this.zoomMax){return -1;}if(gap==null){gap=1;}if(opt==null){opt="zoom";}this.SetZoom(gap,opt);this.ShowScaleInfo();if(this.ControlOpen){if(this.ZdcCtrObj.zoomlistopen){var y=73+(this.s-1)*13;this.ZdcCtrObj.scaleseldoc.style.top=y+"px";if(this.ZdcCtrObj.type==3){this.ZdcCtrObj.scaleslitherdoc.style.top=y+"px";}else{this.ZdcCtrObj.scaleslitherdoc.style.top=(y-2)+"px";}}}if(this.ZdcUserZoomControl!=null){this.ZdcUserZoomControl.setSlitherPosition();}return this.s;};ZdcMap.prototype.mapZoomOut=function(gap,opt){if(this.MouseMx==0&&this.MouseMy==0){return this.s;}if(this.s==this.zoomMin){return -1;}if(gap==null){gap=1;}if(opt==null){opt="zoom";}this.SetZoom(-1*gap,opt);this.ShowScaleInfo();if(this.ControlOpen){if(this.ZdcCtrObj.zoomlistopen){var y=73+(this.s-1)*13;this.ZdcCtrObj.scaleseldoc.style.top=y+"px";if(this.ZdcCtrObj.type==3){this.ZdcCtrObj.scaleslitherdoc.style.top=y+"px";}else{this.ZdcCtrObj.scaleslitherdoc.style.top=(y-2)+"px";}}}if(this.ZdcUserZoomControl!=null){this.ZdcUserZoomControl.setSlitherPosition();}return this.s;};ZdcMap.prototype.saveMapLocation=function(p){if(p!=null&&p.mx&&p.my&&p.lon&&p.lat){this.SavePoint.mx=p.mx;this.SavePoint.my=p.my;}else{this.SavePoint.mx=this.mx;this.SavePoint.my=this.my;}};ZdcMap.prototype.restoreMapLocation=function(){var p=new ZdcPoint(this.SavePoint.mx,this.SavePoint.my,2);this.scrollToCenter(p);if(this.usermsgopenstatus){this.closeUserMsgWindow();}if(this.msgopenstatus){this.closeMsgWindow();}};ZdcMap.prototype.openUserMsgWindow=function(msgw,p,node,_300,opt){if(this.usermsgopenstatus){return -1;}if(msgw==null){return -1;}if(!this.ZdcMsgStatus){return -1;}this.ZdcUserMsgWindow=msgw;if(_300!=null){this.ZdcUserMsgWindow.msgoffset.x=_300.x;this.ZdcUserMsgWindow.msgoffset.y=_300.y;}if(node!=null){this.ZdcUserMsgWindow.textdoc.appendChild(node);}if(opt==null){opt=1;}switch(opt){case 1:default:this.ScrollUserMsgWindow(p);break;case 2:this.ScrollUserMsgToCenter(p);break;case 3:break;}this.ZdcMapClass.appendChild(msgw.doc);this.ZdcUserMsgWindow.Point=p;this.ZdcUserMsgWindow.msgpixel=this.convertPoint2Pixel(p);this.ZdcUserMsgWindow.doc.style.left=(this.ZdcUserMsgWindow.msgpixel.x+this.ZdcUserMsgWindow.baseoffsetx+this.ZdcUserMsgWindow.msgoffset.x)+"px";this.ZdcUserMsgWindow.doc.style.top=(this.ZdcUserMsgWindow.msgpixel.y+this.ZdcUserMsgWindow.baseoffsety+this.ZdcUserMsgWindow.msgoffset.y)+"px";this.ZdcUserMsgWindow.pMap=this;this.ZdcUserMsgWindow.doc.style.visibility="visible";this.usermsgopenstatus=true;this.ZdcUserMsgWindow.openstatus=true;if(this.mediamode=="print"){this.SetMsgPrintMode();}else{this.SetMsgScreenMode();}if(this.usermsgwindowchangeflg){this.ZdcUserMsgWindow.changedoc.style.cursor="pointer";this.usermsgwindowchangeflg=false;}ZdcEvent.trigger(this,"openusermsgwindow");return 1;};ZdcMap.prototype.reflashUserMsgWindow=function(){if(this.usermsgopenstatus){if(this.ZdcUserMsgWindow.doc.style.visibility=="visible"){this.ZdcUserMsgWindow.msgpixel=this.convertPoint2Pixel(this.ZdcUserMsgWindow.Point);this.ZdcUserMsgWindow.doc.style.left=(this.ZdcUserMsgWindow.msgpixel.x+this.ZdcUserMsgWindow.baseoffsetx+this.ZdcUserMsgWindow.msgoffset.x)+"px";this.ZdcUserMsgWindow.doc.style.top=(this.ZdcUserMsgWindow.msgpixel.y+this.ZdcUserMsgWindow.baseoffsety+this.ZdcUserMsgWindow.msgoffset.y)+"px";}}};ZdcMap.prototype.closeUserMsgWindow=function(msgw){if(this.usermsgopenstatus){this.ZdcUserMsgWindow.doc.style.visibility="hidden";if(msgw!=null){this.ZdcMapClass.removeChild(msgw.doc);while(msgw.textdoc.lastChild!=null){msgw.textdoc.removeChild(msgw.textdoc.lastChild);}}else{this.ZdcMapClass.removeChild(this.ZdcUserMsgWindow.doc);while(this.ZdcUserMsgWindow.textdoc.lastChild!=null){this.ZdcUserMsgWindow.textdoc.removeChild(this.ZdcUserMsgWindow.textdoc.lastChild);}}this.usermsgopenstatus=false;this.ZdcUserMsgWindow.openstatus=false;ZdcEvent.trigger(this,"closeusermsgwindow");}else{this.usermsgopenstatus=false;this.ZdcUserMsgWindow.openstatus=false;return -1;}};ZdcMap.prototype.ScrollUserMsgWindow=function(p){var box=this.getMapBoundBox();var _305=Math.floor((box.maxx-p.mx)/ZdcZoom.map_defw[this.s]);var _306=Math.floor((p.mx-box.minx)/ZdcZoom.map_defw[this.s]);var _307=Math.floor((box.maxy-p.my)/ZdcZoom.map_defh[this.s]);var _308=Math.floor((p.my-box.miny)/ZdcZoom.map_defh[this.s]);var scrx=0;var scry=0;if((this.ZdcUserMsgWindow.msgoffset.x+this.ZdcUserMsgWindow.baseoffsetx+parseInt(this.ZdcUserMsgWindow.basedoc.style.width))>_305){scrx=(-1)*(this.ZdcUserMsgWindow.msgoffset.x+this.ZdcUserMsgWindow.baseoffsetx+parseInt(this.ZdcUserMsgWindow.basedoc.style.width)-_305+10);}else{if((_306+this.ZdcUserMsgWindow.msgoffset.x+this.ZdcUserMsgWindow.baseoffsetx)<0){scrx=Math.abs(this.ZdcUserMsgWindow.msgoffset.x+this.ZdcUserMsgWindow.baseoffsetx+_306);}}if((_307+this.ZdcUserMsgWindow.msgoffset.y)<parseInt(this.ZdcUserMsgWindow.basedoc.style.height)&&this.ZdcMapHpx>parseInt(this.ZdcUserMsgWindow.basedoc.style.height)){scry=parseInt(this.ZdcUserMsgWindow.basedoc.style.height)-_307-this.ZdcUserMsgWindow.msgoffset.y+10;}else{if((_308-parseInt(this.ZdcUserMsgWindow.msgoffset.y))<0){scry=(-1)*Math.abs((-1)*parseInt(this.ZdcUserMsgWindow.msgoffset.y)+_308-15);}}if(!this.OnScroll&&(scrx!=0||scry!=0)){this.scrollMap(scrx,scry);return;}};ZdcMap.prototype.ScrollUserMsgToCenter=function(p){var w=Math.floor((this.mx-p.mx)/ZdcZoom.map_defw[this.s]);var h=Math.floor((p.my-this.my)/ZdcZoom.map_defh[this.s]);this.scrollMap(w,h);};ZdcMap.prototype.checkUserMsgWindow=function(){if(this.usermsgopenstatus){var w=Math.floor(parseInt(this.ZdcUserMsgWindow.basedoc.style.width)*ZdcZoom.map_defw[this.s]);var h=Math.floor(parseInt(this.ZdcUserMsgWindow.basedoc.style.height)*ZdcZoom.map_defh[this.s]);var offx=Math.floor(parseInt(this.ZdcUserMsgWindow.baseoffsetx)*ZdcZoom.map_defw[this.s]);var offy=Math.floor(parseInt(this.ZdcUserMsgWindow.baseoffsety)*ZdcZoom.map_defh[this.s]);var p1=this.ZdcUserMsgWindow.Point;var p0=new ZdcPoint(p1.mx+offx,p1.my-h-offy,2);var p2=new ZdcPoint(p0.mx+w,p0.my+h,2);var _315=new ZdcBox(p0,p2);var _316=this.getMapBoundBox();return _316.isContainBox(_315);}else{return -1;}};ZdcMap.prototype.addZdcWait=function(wtop,_318,str){if(this.ZdcWaitOpenStatus){return false;}this.ZdcWaitOpenStatus=true;this.ZdcMapClass.appendChild(this.ZdcWaitObj.doc);this.ZdcWaitpx=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+_318;this.ZdcWaitpy=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+wtop;this.ZdcWaitObj.doc.style.left=this.ZdcWaitpx+"px";this.ZdcWaitObj.doc.style.top=this.ZdcWaitpy+"px";if(str!=null){this.ZdcWaitObj.showtxt=String(str);}return true;};ZdcMap.prototype.hiddenZdcWait=function(){this.ZdcWaitObj.backdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";this.ZdcWaitObj.doc.style.width="0px";this.ZdcWaitObj.doc.style.height="0px";this.ZdcWaitObj.backdoc.style.width="0px";this.ZdcWaitObj.backdoc.style.height="0px";this.ZdcWaitObj.backdoc.innerHTML="";this.ZdcWaitObj.movedoc.innerHTML="";this.ZdcWaitObj.textdoc.innerHTML="";};ZdcMap.prototype.visibleZdcWait=function(){if(document.all){this.ZdcWaitObj.backdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcWaitObj.backdoc.image+")";this.ZdcWaitObj.backdoc.innerHTML="<IMG src="+this.ZdcWaitObj.backdoc.image+" style='display:none' />";}else{this.ZdcWaitObj.backdoc.innerHTML="<IMG src="+this.ZdcWaitObj.backdoc.image+" />";}this.ZdcWaitObj.doc.style.width="121px";this.ZdcWaitObj.doc.style.height="31px";this.ZdcWaitObj.backdoc.style.width="121px";this.ZdcWaitObj.backdoc.style.height="31px";this.ZdcWaitObj.movedoc.innerHTML="<IMG src="+this.ZdcWaitObj.movedoc.image+" />";this.ZdcWaitObj.textdoc.innerHTML="<div style='font-size:12px;font-family:monospace; color:#888888;'>"+String(this.ZdcWaitObj.showtxt)+"</div>";};ZdcMap.prototype.removeZdcWait=function(){if(this.ZdcWaitOpenStatus){this.ZdcMapClass.removeChild(this.ZdcWaitObj.doc);this.ZdcWaitOpenStatus=false;}return;};ZdcMap.prototype.addUserControl=function(udoc,ctop,_31c){if(this.ZdcUserControlOpen){return -1;}this.ZdcUserControl=udoc;this.ZdcMapClass.appendChild(this.ZdcUserControl.doc);this.ZdcUserControlpx=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+_31c;this.ZdcUserControlpy=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+ctop;this.ZdcUserControl.doc.style.left=this.ZdcUserControlpx+"px";this.ZdcUserControl.doc.style.top=this.ZdcUserControlpy+"px";this.ZdcUserControlBaseleft=_31c;this.ZdcUserControlBasetop=ctop;this.ZdcUserControl.pMap=this;this.ZdcUserControlOpen=true;return 1;};ZdcMap.prototype.removeUserControl=function(){if(this.ZdcUserControlOpen){if(this.ZdcMapClass.removeChild(this.ZdcUserControl.doc)){this.ZdcUserControlOpen=false;return 1;}}else{return -1;}};ZdcMap.prototype.addUserZoomControl=function(udoc,ztop,_31f){if(this.ZdcUserZoomControlOpen){return -1;}this.ZdcUserZoomControl=udoc;this.ZdcMapClass.appendChild(this.ZdcUserZoomControl.doc);this.ZdcUserZoomControlpx=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+_31f;this.ZdcUserZoomControlpy=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+ztop;this.ZdcUserZoomControl.doc.style.left=this.ZdcUserZoomControlpx+"px";this.ZdcUserZoomControl.doc.style.top=this.ZdcUserZoomControlpy+"px";this.ZdcUserZoomControlBaseleft=_31f;this.ZdcUserZoomControlBasetop=ztop;this.ZdcUserZoomControl.pMap=this;this.ZdcUserZoomControlOpen=true;if(udoc.doctooltip){this.ZdcMapClass.appendChild(udoc.doctooltip);var h=parseInt(this.ZdcUserZoomControl.basedoc.style.height);udoc.doctooltip.style.top=eval(this.ZdcUserZoomControlpy+(h-udoc.tooltipsize.height)/2)+udoc.setDocPositionY+"px";udoc.doctooltip.style.left=eval(this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+_31f-udoc.tooltipsize.width)+udoc.setDocPositionX+"px";udoc.ToolTipBasePositionX=eval(this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+_31f-udoc.tooltipsize.width)+"px";udoc.ToolTipBasePositionY=eval(this.ZdcUserZoomControlpy+(h-udoc.tooltipsize.height)/2)+"px";if(udoc.tooltipoffset){udoc.doctooltip.style.top=parseInt(udoc.doctooltip.style.top)+udoc.tooltipoffset.y+"px";udoc.doctooltip.style.left=parseInt(udoc.doctooltip.style.left)+udoc.tooltipoffset.x+"px";udoc.ToolTipBasePositionX=parseInt(udoc.ToolTipBasePositionX)+udoc.tooltipoffset.x+"px";udoc.ToolTipBasePositionY=parseInt(udoc.ToolTipBasePositionY)+udoc.tooltipoffset.y+"px";}}udoc.addPositionX=_31f;udoc.addPositionY=ztop;udoc.setSlitherPosition();return 1;};ZdcMap.prototype.removeUserZoomControl=function(){if(this.ZdcUserZoomControlOpen){if(this.ZdcUserZoomControl.doctooltip){this.ZdcMapClass.removeChild(this.ZdcUserZoomControl.doctooltip);}if(this.ZdcMapClass.removeChild(this.ZdcUserZoomControl.doc)){this.ZdcUserZoomControlOpen=false;return 1;}}else{return -1;}};ZdcMap.prototype.addMapControl=function(cdoc,x,y){if(this.ControlOpen){return -1;}else{this.ZdcCtrObj=cdoc;if(x!=null&&y!=null){this.mapControlX=x;this.mapControlY=y;this.ZdcMapControlpx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+x;this.ZdcMapControlpx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+y;}cdoc.pMap=this;this.SetControlOnMap();this.ControlOpen=true;if(this.ZdcCtrObj.deflargeflg==true){var y=73+(this.s-1)*13;this.ZdcCtrObj.scaleseldoc.style.top=y+"px";if(this.ZdcCtrObj.type==3){this.ZdcCtrObj.scaleslitherdoc.style.top=y+"px";}else{this.ZdcCtrObj.scaleslitherdoc.style.top=(y-2)+"px";}if(this.ZdcCtrObj.type==1){this.ZdcCtrObj.doc.style.height="320px";}}return 1;}};ZdcMap.prototype.removeMapControl=function(){this.mapControlX=null;this.mapControlY=null;this.ZdcMapControlpx.x=this.ZdcMapCenterpx.x+Math.floor(this.ZdcMapWpx/2)-80;this.ZdcMapControlpx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+10;if(this.ControlOpen){this.ZdcMapClass.removeChild(this.ZdcCtrObj.doc);this.ControlOpen=false;return 1;}else{return -1;}};ZdcMap.prototype.addMapScaleBar=function(sdoc,x,y){if(this.ScaleBarOpen){return -1;}else{if(x!=null&&y!=null){this.mapScaleBarX=x;this.mapScaleBarY=y;this.ZdcScaleBarpx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+x;this.ZdcScaleBarpx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+y;}this.ZdcScaleBarObj=sdoc;sdoc.pMap=this;this.SetMapScaleOnMap();this.ScaleBarOpen=true;return 1;}};ZdcMap.prototype.dragOnScaleBar=function(){this.ZdcScaleBarObj.doc1.onmousedown=null;this.ZdcScaleBarObj.doc1.ondblclick=null;};ZdcMap.prototype.dragOffScaleBar=function(){this.ZdcScaleBarObj.doc1.onmousedown=this.ZdcScaleBarObj.OnMouseDownDoc.bindAsEventListener(this.ZdcScaleBarObj);this.ZdcScaleBarObj.doc1.ondblclick=this.ZdcScaleBarObj.OnMouseDblClickDoc.bindAsEventListener(this.ZdcScaleBarObj);};ZdcMap.prototype.removeMapScaleBar=function(){this.mapScaleBarX=null;this.mapScaleBarY=null;this.ZdcScaleBarpx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+10;this.ZdcScaleBarpx.y=this.ZdcMapCenterpx.y+Math.floor(this.ZdcMapHpx/2)-45;if(this.ScaleBarOpen){this.ZdcMapClass.removeChild(this.ZdcScaleBarObj.doc1);this.ZdcMapClass.removeChild(this.ZdcScaleBarObj.doc2);this.ScaleBarOpen=false;return 1;}else{return -1;}};ZdcMap.prototype.addMapCenter=function(cdoc){if(this.CenterOpen){return -1;}else{this.ZdcCenterObj=cdoc;cdoc.pMap=this;this.SetMapCenterOnMap();this.CenterOpen=true;return 1;}};ZdcMap.prototype.removeMapCenter=function(){if(this.CenterOpen){this.ZdcMapClass.removeChild(this.ZdcCenterObj.doc);this.CenterOpen=false;return 1;}else{return -1;}};ZdcMap.prototype.addMapCenterInfoBox=function(cdoc,x,y){if(this.CenterInfoBoxOpen){return -1;}else{if(x!=null&&y!=null){this.mapCenterInfoX=x;this.mapCenterInfoY=y;this.ZdcMapCenterInfopx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+x;this.ZdcMapCenterInfopx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+y;}this.ZdcCenterInfoObj=cdoc;cdoc.pMap=this;this.SetMapCenterInfoOnMap();this.CenterInfoBoxOpen=true;this.ShowScaleInfo();return 1;}};ZdcMap.prototype.removeMapCenterInfoBox=function(){this.mapCenterInfoX=null;this.mapCenterInfoY=null;this.ZdcMapCenterInfopx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+10;this.ZdcMapCenterInfopx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+10;if(this.CenterInfoBoxOpen){this.ZdcMapClass.removeChild(this.ZdcCenterInfoObj.doc1);this.ZdcMapClass.removeChild(this.ZdcCenterInfoObj.doc2);this.CenterInfoBoxOpen=false;return 1;}else{return -1;}};ZdcMap.prototype.dragOnCenterInfoBox=function(){this.ZdcCenterInfoObj.doc1.onmousedown=null;this.ZdcCenterInfoObj.doc1.ondblclick=null;this.ZdcCenterInfoObj.doc2.onmousedown=null;this.ZdcCenterInfoObj.doc2.ondblclick=null;};ZdcMap.prototype.dragOffCenterInfoBox=function(){this.ZdcCenterInfoObj.doc1.onmousedown=this.ZdcCenterInfoObj.OnMouseDownDoc.bindAsEventListener(this.ZdcCenterInfoObj);this.ZdcCenterInfoObj.doc1.ondblclick=this.ZdcCenterInfoObj.OnMouseDblClickDoc.bindAsEventListener(this.ZdcCenterInfoObj);this.ZdcCenterInfoObj.doc2.onmousedown=this.ZdcCenterInfoObj.OnMouseDownDoc.bindAsEventListener(this.ZdcCenterInfoObj);this.ZdcCenterInfoObj.doc2.ondblclick=this.ZdcCenterInfoObj.OnMouseDblClickDoc.bindAsEventListener(this.ZdcCenterInfoObj);};ZdcMap.prototype.reflashMsgWindow=function(){if(!this.msgopenstatus){return -1;}this.ZdcMsgWindowObj.Pixel=this.convertPoint2Pixel(this.ZdcMsgWindowObj.Point);this.ZdcMsgWindowObj.doc.style.left=(parseInt(this.ZdcMsgWindowObj.Pixel.x)+parseInt(this.ZdcMsgWindowObj.msgoffset.x))+"px";this.ZdcMsgWindowObj.doc.style.top=(parseInt(this.ZdcMsgWindowObj.Pixel.y)+parseInt(this.ZdcMsgWindowObj.msgoffset.y))+"px";};ZdcMap.prototype.createMsgWindow=function(t){if(0<=t&&t<19){this.ZdcMsgWindowObj=new ZdcMsgWindow(t);}else{this.ZdcMsgWindowObj=new ZdcMsgWindow();}this.ZdcMsgWindowObj.doc.style.position="absolute";};ZdcMap.prototype.openMsgWindow=function(p,_32d,node,ofxy,opt1,opt2,opt3){if(this.msgopenstatus){return -1;}else{if(this.ZdcMsgStatus){if(this.ZdcMsgWindowObj==null){this.ZdcMsgWindowObj=new ZdcMsgWindow();this.ZdcMsgWindowObj.doc.style.position="absolute";}if(p!=null){this.ZdcMsgWindowObj.Point=new ZdcPoint(p.mx,p.my,2);}if(_32d!=null){this.ZdcMsgWindowObj.title=_32d;}if(node!=null){this.ZdcMsgWindowObj.node=node;}if(opt3!=null){this.ZdcMsgWindowObj.smallonly=opt3;}if(opt1!=null){this.ZdcMsgWindowObj.largeonly=opt1;if(opt1){this.ZdcMsgWindowObj.largeopen=opt1;}}if(ofxy!=null){this.ZdcMsgWindowObj.msgoffset=ofxy;}this.ZdcMsgWindowObj.pMap=this;this.SetMsgWindowOnMap();this.msgopenstatus=true;this.ZdcMsgWindowObj.openstatus=true;if(opt2==null){opt2=1;}switch(opt2){case 1:default:this.ScrollMsgWindow(p);break;case 2:this.ScrollMsgWindowToCenter(p);break;case 3:break;}if(this.mediamode=="print"){this.SetMsgPrintMode();}else{this.SetMsgScreenMode();}}ZdcEvent.trigger(this,"openmsgwindow");return 1;}};ZdcMap.prototype.ScrollMsgWindow=function(p){var box=this.getMapBoundBox();var _335=Math.floor((box.maxx-p.mx)/ZdcZoom.map_defw[this.s]);var _336=Math.floor((p.mx-box.minx)/ZdcZoom.map_defw[this.s]);var _337=Math.floor((box.maxy-p.my)/ZdcZoom.map_defh[this.s]);var _338=Math.floor((p.my-box.miny)/ZdcZoom.map_defh[this.s]);var scrx=0;var scry=0;if((parseInt(this.ZdcMsgWindowObj.msgoffset.x)+240)>_335){scrx=(-1)*(parseInt(this.ZdcMsgWindowObj.msgoffset.x)+240-_335+10);}else{if((_336+parseInt(this.ZdcMsgWindowObj.msgoffset.x))<0){scrx=Math.abs(parseInt(this.ZdcMsgWindowObj.msgoffset.x)+_336);}}if((_337+parseInt(this.ZdcMsgWindowObj.msgoffset.y))<160&&this.ZdcMapHpx>160){scry=160-_337-parseInt(this.ZdcMsgWindowObj.msgoffset.y)+10;}else{if((_338-parseInt(this.ZdcMsgWindowObj.msgoffset.y))<0){scry=(-1)*Math.abs((-1)*parseInt(this.ZdcMsgWindowObj.msgoffset.y)+_338-15);}}if(!this.OnScroll&&(scrx!=0||scry!=0)){this.scrollMap(scrx,scry);return;}};ZdcMap.prototype.closeMsgWindow=function(){if(this.msgopenstatus){this.ZdcMsgWindowObj.largeonly=false;this.ZdcMsgWindowObj.smallonly=false;this.ZdcMsgWindowObj.hiddenMsg();this.ZdcMapClass.removeChild(this.ZdcMsgWindowObj.doc);this.msgopenstatus=false;this.ZdcMsgWindowObj.openstatus=false;if(ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOnDrag();}return 1;}else{return -1;}};ZdcMap.prototype.ScrollMsgWindowToCenter=function(p){var w=Math.floor((this.mx-p.mx)/ZdcZoom.map_defw[this.s]);var h=Math.floor((p.my-this.my)/ZdcZoom.map_defh[this.s]);this.scrollMap(w,h);};ZdcMap.prototype.checkMsgWindow=function(){if(this.msgopenstatus){var p1=this.ZdcMsgWindowObj.Point;var w=Math.floor(parseInt(this.ZdcMsgWindowObj.doclarge.style.width)*ZdcZoom.map_defw[this.s]);var h=Math.floor(parseInt(this.ZdcMsgWindowObj.doclarge.style.height)*ZdcZoom.map_defh[this.s]);var p2=new ZdcPoint(p1.mx+w,p1.my+h,2);var _342=new ZdcBox(p1,p2);var _343=this.getMapBoundBox();return _343.isContainBox(_342);}else{return -1;}};ZdcMap.prototype.scrollToCenter=function(p){if(this.getMapBoundBox().isContainPoint(p)){var _345=Math.round((this.mx-p.mx)/ZdcZoom.map_defw[this.s]);var _346=Math.round((p.my-this.my)/ZdcZoom.map_defh[this.s]);this.scrollMap(_345,_346,p);}else{this.SetMapLocationAndScale(p.mx,p.my,this.s);}return;};ZdcMap.prototype.convertPoint2Pixel=function(p,opt){if(opt==null){opt=1;}if(opt==1){var _349=Math.round((p.mx-this.mx)/ZdcZoom.map_defw[this.s]);var _34a=Math.round((p.my-this.my)/ZdcZoom.map_defh[this.s]);var pxy=new ZdcPixel();pxy.x=this.ZdcMapCenterpx.x+_349;pxy.y=this.ZdcMapCenterpx.y-_34a;return pxy;}else{if(opt==2){var _349=Math.round((p.mx-this.mx)/ZdcZoom.map_defw[this.s]);var _34a=Math.round((p.my-this.my)/ZdcZoom.map_defh[this.s]);var pxy=new ZdcPixel();pxy.x=Math.round(this.ZdcMapWpx/2)+_349;pxy.y=Math.round(this.ZdcMapHpx/2)-_34a;return pxy;}}};ZdcMap.prototype.convertPixel2Point=function(p,opt){if(opt==null){opt=1;}if(opt==1){distpw=Math.round((p.x-this.ZdcMapCenterpx.x)*ZdcZoom.map_defw[this.s]);distph=Math.round((p.y-this.ZdcMapCenterpx.y)*ZdcZoom.map_defh[this.s]);var pmxy=new ZdcPoint();pmxy.mx=this.mx+distpw;pmxy.my=this.my-distph;var pts=ZdcCommon.ConvertMSXY2LL(pmxy.mx,pmxy.my,1);return pts;}else{if(opt==2){distpw=Math.round((p.x-this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);distph=Math.round((p.y-this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);var pmxy=new ZdcPoint();pmxy.mx=this.mx+distpw;pmxy.my=this.my-distph;var pts=ZdcCommon.ConvertMSXY2LL(pmxy.mx,pmxy.my,1);return pts;}}};ZdcMap.prototype.checkLayerBoxById=function(id){var i=-1;for(var k=0;k<this.ZdcUserLayers.length;k++){if(this.ZdcUserLayers[k].layerID==id){i=k;break;}}if(i!=-1){return this.ZdcUserLayers[i].boundBox.isContainBox(this.getMapBoundBox());}else{return 0;}};ZdcMap.prototype.SetLayerBoundBox=function(lyr){if(lyr!=null){var px1=new ZdcPixel(0,lyr.canvasHeight);var px2=new ZdcPixel(lyr.canvasWidth,0);var ptx1=this.mx-Math.round((this.ZdcMapCenterpx.x-px1.x)*ZdcZoom.map_defw[this.s]);var pty1=this.my-Math.round((px1.y-this.ZdcMapCenterpx.y)*ZdcZoom.map_defh[this.s]);var ptx2=this.mx+Math.round((px2.x-this.ZdcMapCenterpx.x)*ZdcZoom.map_defw[this.s]);var pty2=this.my+Math.round((this.ZdcMapCenterpx.y-px2.y)*ZdcZoom.map_defh[this.s]);var pt1=new ZdcPoint(ptx1,pty1,2);var pt2=new ZdcPoint(ptx2,pty2,2);lyr.boundBox=new ZdcBox(pt1,pt2);}};ZdcMap.prototype.addUserLayer=function(lyr,idx){var l=-1;if(lyr.layerID!=-1){return lyr.layerID;}lyr.layerID=0;for(var k=0;k<this.ZdcUserLayers.length;k++){if(this.ZdcUserLayers[k].layerID+1>lyr.layerID){lyr.layerID=this.ZdcUserLayers[k].layerID+1;}}var k=this.ZdcUserLayers.length;this.ZdcUserLayers[k]=lyr;if(lyr.minzoom<=this.s&&this.s<=lyr.maxzoom){this.ZdcMapClass.appendChild(this.ZdcUserLayers[k].doc);this.ZdcUserLayers[k].addmapstatus=true;this.ZdcUserLayers[k].doc.style.left="0px";this.ZdcUserLayers[k].doc.style.top="0px";}if(10<idx&&idx<10210){this.ZdcUserLayers[k].doc.style.zIndex=(parseInt(idx))+"";}else{this.ZdcUserLayers[k].doc.style.zIndex=(parseInt(3000)+this.lyrmkcnt)+"";}if(this.ZdcUserLayers[k].markers.length>0){this.InitUserLayerMarker(lyr.layerID);}if(this.ZdcUserLayers[k].tooltips.length>0){this.InitUserLayerTooltip(lyr.layerID);}this.SetLayerBoundBox(this.ZdcUserLayers[k]);this.ZdcUserLayers[k].pMap=this;this.lyrmkcnt++;ZdcEvent.trigger(this,"adduserlayer");return lyr.layerID;};ZdcMap.prototype.removeUserLayer=function(lyr){return this.removeUserLayerById(lyr.layerID);};ZdcMap.prototype.removeUserLayerById=function(id){var lyr=null;for(var k=0;k<this.ZdcUserLayers.length;k++){if(this.ZdcUserLayers[k].layerID==id){lyr=this.ZdcUserLayers[k];break;}}if(!lyr){return -1;}if(this.ZdcUserLayers[k].markers.length>0){this.ClearUserLayerMarker(this.ZdcUserLayers[k].layerID,true);}if(this.ZdcUserLayers[k].tooltips.length>0){this.ClearUserLayerTooltip(this.ZdcUserLayers[k].layerID,true);}if(this.ZdcUserLayers[k].addmapstatus){this.ZdcMapClass.removeChild(this.ZdcUserLayers[k].doc);this.ZdcUserLayers[k].addmapstatus=false;}this.ZdcUserLayers[k].layerID=-1;this.ZdcUserLayers[k]=null;var _364=this.ZdcUserLayers;this.ZdcUserLayers=new Array();for(var k=0;k<_364.length;k++){if(_364[k]){this.ZdcUserLayers[this.ZdcUserLayers.length]=_364[k];}}_364=null;ZdcEvent.trigger(this,"removeuserlayer");return 1;};ZdcMap.prototype.clearUserLayer=function(){if(this.ZdcUserLayers.length==0){return -1;}for(var i=0;i<this.ZdcUserLayers.length;i++){if(this.ZdcUserLayers[i].addmapstatus){if(this.ZdcUserLayers[i].markers.length>0){this.ClearUserLayerMarker(this.ZdcUserLayers[i].layerID,true);}if(this.ZdcUserLayers[i].tooltips.length>0){this.ClearUserLayerTooltip(this.ZdcUserLayers[i].layerID,true);}this.ZdcMapClass.removeChild(this.ZdcUserLayers[i].doc);this.ZdcUserLayers[i].addmapstatus=false;this.ZdcUserLayers[i].status=false;this.ZdcUserLayers[i].layerID=-1;}}this.lyrmkcnt=0;this.ZdcUserLayers=new Array();ZdcEvent.trigger(this,"clearuserlayer");return 1;};ZdcMap.prototype.getUserLayerById=function(id){for(var i=0;i<this.ZdcUserLayers.length;i++){if(this.ZdcUserLayers[i].layerID==id&&this.ZdcUserLayers[i].addmapstatus==true){return this.ZdcUserLayers[i];}}return null;};ZdcMap.prototype.MouseOverMarker=function(){var ox=Math.round(this.ZdcMapWpx/2);var oy=Math.round(this.ZdcMapHpx/2);for(var j=this.ZdcUserLayers.length-1;j>=0;j--){if(this.ZdcUserLayers[j].minzoom<=this.s&&this.s<=this.ZdcUserLayers[j].maxzoom){for(var i=this.ZdcUserLayers[j].markers.length-1;i>=0;i--){if(this.ZdcUserLayers[j].markers[i]!=null){this.markerworkpixel1.x=ox-Math.round((this.mx-this.ZdcUserLayers[j].markers[i].Point.mx)/ZdcZoom.map_defw[this.s])+this.ZdcUserLayers[j].markers[i].icon.offset.x;this.markerworkpixel1.y=oy-Math.round((this.ZdcUserLayers[j].markers[i].Point.my-this.my)/ZdcZoom.map_defh[this.s])+this.ZdcUserLayers[j].markers[i].icon.offset.y;this.markerworkpixel2.x=this.markerworkpixel1.x+parseInt(this.ZdcUserLayers[j].markers[i].icondoc.style.width);this.markerworkpixel2.y=this.markerworkpixel1.y+parseInt(this.ZdcUserLayers[j].markers[i].icondoc.style.height);this.markerworkbox.pxl1=this.markerworkpixel1;this.markerworkbox.pxl2=this.markerworkpixel2;if(this.markerworkbox.isContainPixel(this.MouseMoveX,this.MouseMoveY)){this.ClickUserLayerId=j;this.ClickMarkerId=i;return;break;}}}}}return 0;};ZdcMap.prototype.dragOn=function(){this.ZdcDragStatus=true;};ZdcMap.prototype.dragOff=function(){this.ZdcDragStatus=false;};ZdcMap.prototype.getDragStatus=function(){return this.ZdcDragStatus;};ZdcMap.prototype.msgOn=function(){this.ZdcMsgStatus=true;};ZdcMap.prototype.msgOff=function(){this.ZdcMsgStatus=false;};ZdcMap.prototype.getMsgStatus=function(){return this.ZdcMsgStatus;};ZdcMap.prototype.getHtmlMsgOpenStatus=function(){return this.htmlopenstatus;};ZdcMap.prototype.getUserMsgOpenStatus=function(){return this.usermsgopenstatus;};ZdcMap.prototype.getMsgOpenStatus=function(){return this.msgopenstatus;};ZdcMap.prototype.MouseClick=function(_36c){if(ZdcCommon.isiPhone()){this.gestureflg=false;}if(!document.all&&!ZdcCommon.isiPhone()){this.ZdcMapBase.focus();this.ZdcMapBase.blur();var p=ZdcEvent.GetEventPosition(_36c,this.ZdcMapBase);var x=p.x;var y=p.y;var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _371=x-Math.floor(dr.x/2);var _372=Math.floor(dr.y/2)-y;var mx=Math.round(_371*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.round(_372*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseClickX=x;this.MouseClickY=y;this.MouseCLon=pt.lon;this.MouseCLat=pt.lat;this.MouseCx=mx;this.MouseCy=my;this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;}this.ClickUserLayerId=-1;this.ClickMarkerId=-1;this.MouseOverMarker();if(this.ClickUserLayerId!=-1&&this.ClickMarkerId!=-1){ZdcEvent.trigger(this.ZdcUserLayers[this.ClickUserLayerId].markers[this.ClickMarkerId],"mouseclickmarker");}if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"clickmapnodrag");}else{ZdcEvent.trigger(this,"clickmap");}if(ZdcCommon.isiPhone()){if(this.dblClick==true){if(this.OnScroll){return;}if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"dblclicknodragend");}else{this.scrollMap(this.Idistw,this.Idisth);ZdcEvent.trigger(this,"dblclickend");}}this.dblClick=true;this.timerId=setTimeout((function(){this.dblClick=false;}).bind(this),400);if(ZdcDrag.IsDragging()){}else{ZdcEvent.trigger(this,"mouseupmap");}ZdcEvent.trigger(this,"mouseovermap");}};ZdcMap.prototype.MouseMove=function(_376){if(ZdcDrag.IsDragging()){ZdcEvent.trigger(this,"dragmap");return false;}var p=ZdcEvent.GetEventPosition(_376,this.ZdcMapBase);var x=p.x;var y=p.y;var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _37b=x-Math.floor(dr.x/2);var _37c=Math.floor(dr.y/2)-y;var mx=Math.round(_37b*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.round(_37c*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;if(!ZdcCommon.isiPhone()){ZdcEvent.trigger(this,"mousemove");}return false;};ZdcMap.prototype.MouseOver=function(){ZdcEvent.trigger(this,"mouseovermap");};ZdcMap.prototype.MouseOut=function(){ZdcEvent.trigger(this,"mouseoutmap");};ZdcMap.prototype.MouseGestureStart=function(_380){var T=this;T.gestureflg=true;T.gestureendflg=false;T.zoomincounter=0;T.zoomoutcounter=0;return false;};ZdcMap.prototype.MouseGestureChange=function(_382){var T=this;if(T.gestureendflg){return false;}if(_382.scale<1){T.zoomincounter++;T.zoomoutcounter=0;if(T.zoomincounter==5){T.mapZoomOut(1);T.gestureendflg=true;}}else{T.zoomoutcounter++;T.zoomincounter=0;if(T.zoomoutcounter==5){T.mapZoomIn(1);T.gestureendflg=true;}}return false;};ZdcMap.prototype.MouseGestureEnd=function(_384){this.gestureendflg=false;return false;};ZdcMap.prototype.MouseDown=function(_385){if(ZdcCommon.isiPhone()){if(this.gestureflg){return;}}var p=ZdcEvent.GetEventPosition(_385,this.ZdcMapBase);var x=p.x;var y=p.y;var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _38a=x-Math.floor(dr.x/2);var _38b=Math.floor(dr.y/2)-y;var mx=Math.round(_38a*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.round(_38b*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseClickX=x;this.MouseClickY=y;this.MouseCLon=pt.lon;this.MouseCLat=pt.lat;this.MouseCx=mx;this.MouseCy=my;this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;if(_385.button==2){return;}this.ClickUserLayerId=-1;this.ClickMarkerId=-1;this.MouseOverMarker();if(this.ClickUserLayerId!=-1&&this.ClickMarkerId!=-1){ZdcEvent.trigger(this.ZdcUserLayers[this.ClickUserLayerId].markers[this.ClickMarkerId],"mousedownmarker");if(this.ZdcUserLayers[this.ClickUserLayerId].markers[this.ClickMarkerId].dragopt!=true){return false;}}if(this.ZdcDragStatus&&!this.OnScroll){ZdcEvent.trigger(this,"dragmapstart");if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOnDrag();}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="hidden";this.ZdcMsgHtml.shddoc.style.visibility="hidden";this.ZdcMsgHtml.docclose.style.visibility="hidden";this.ZdcMsgHtml.docwins.style.visibility="hidden";}if(this.cursorflg==true){this.ZdcMapClass.style.cursor="url("+this.usercursor2+"), pointer";}else{if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";if(ZdcCommon.UserAgentIsSafari()){this.ZdcMapClass.style.cursor="move";}}else{if(document.all){this.ZdcMapClass.style.cursor="all-scroll";}else{this.ZdcMapClass.style.cursor="move";}}}this.MaddX=0;this.MaddY=0;if(ZdcCommon.isiPhone()){if(this.ZdcDragOx==0&&this.ZdcDragOy==0){this.ZdcDragOx=_385.touches[0].screenX;this.ZdcDragOy=_385.touches[0].screenY;}this.ZdcDragMx=_385.touches[0].screenX;this.ZdcDragMy=_385.touches[0].screenY;this.ZdcDragEx=_385.touches[0].screenX;this.ZdcDragEy=_385.touches[0].screenY;this.Idistw=Math.floor(dr.x/2)-x;this.Idisth=Math.floor(dr.y/2)-y;}else{if(this.ZdcDragOx==0&&this.ZdcDragOy==0){this.ZdcDragOx=_385.screenX;this.ZdcDragOy=_385.screenY;}this.ZdcDragMx=_385.screenX;this.ZdcDragMy=_385.screenY;this.ZdcDragEx=_385.screenX;this.ZdcDragEy=_385.screenY;}var now=new Date();this.ZdcDragTime=now.getTime();this.tmpWheelStatus=this.WheelStatus;if(this.WheelStatus){this.setWheelOff();}ZdcDrag.StartDragging(this,this.DraggingMap.bindAsEventListener(this),this.DraggingMapEnd.bindAsEventListener(this));}else{ZdcEvent.trigger(this,"mousedownmap");}return false;};ZdcMap.prototype.MouseUp=function(_390){if(_390.button==2){return;}if(this.ClickUserLayerId!=-1&&this.ClickMarkerId!=-1){ZdcEvent.trigger(this.ZdcUserLayers[this.ClickUserLayerId].markers[this.ClickMarkerId],"mouseupmarker");}if(ZdcDrag.IsDragging()){return false;}else{ZdcEvent.trigger(this,"mouseupmap");}return false;};ZdcMap.prototype.ConTextMenu=function(_391){this.ZdcMapBase.oncontextmenu=function(){return false;};if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"clickmaprightnodrag");}else{ZdcEvent.trigger(this,"clickmapright");}};ZdcMap.prototype.TabKeyOnFocus=function(_392){ZdcEvent.trigger(this,"clickmap");};ZdcMap.prototype.MouseDblClick=function(_393){if(this.OnScroll){return;}if(document.all){var d=ZdcEvent.GetDivClientRect(this.ZdcMapBase);_395=Math.floor(d.x/2)-this.MouseClickX;_396=Math.floor(d.y/2)-this.MouseClickY;}else{var p=ZdcEvent.GetEventPosition(_393,this.ZdcMapBase);var x=p.x;var y=p.y;var d=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _395=x-Math.floor(d.x/2);var _396=Math.floor(d.y/2)-y;var mx=Math.floor(_395*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.floor(_396*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseClickX=x;this.MouseClickY=y;this.MouseCLon=pt.lon;this.MouseCLat=pt.lat;this.MouseCx=mx;this.MouseCy=my;this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;_395=Math.floor(d.x/2)-x;_396=Math.floor(d.y/2)-y;}if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"dblclicknodragend");}else{this.scrollMap(_395,_396);ZdcEvent.trigger(this,"dblclickend");}return;};ZdcMap.prototype.DraggingMap=function(e){if(ZdcCommon.isiPhone()){if(this.gestureflg){return;}}var now=new Date();var _39f=now.getTime();var _3a0=Math.abs(this.ZdcDragTime-_39f);this.ZdcDragTime=_39f;if(document.all){this.ZdcDragMx=event.screenX;this.ZdcDragMy=event.screenY;}else{if(e){if(ZdcCommon.isiPhone()){this.ZdcDragMx=e.touches[0].screenX;this.ZdcDragMy=e.touches[0].screenY;}else{this.ZdcDragMx=e.screenX;this.ZdcDragMy=e.screenY;}}}var _3a1;if(_3a0>15){_3a1=1;}if(_3a0<=15&&_3a0>12){_3a1=32;}if(_3a0<=12&&_3a0>10){_3a1=64;}if(_3a0<=10&&_3a0>8){_3a1=128;}if(_3a0<=8&&_3a0>5){_3a1=356;}if(_3a0<=5&&_3a0>3){_3a1=368;}if(_3a0<=3){_3a1=512;}if(Math.abs(this.ZdcDragEx-this.ZdcDragMx)>_3a1||Math.abs(this.ZdcDragEy-this.ZdcDragMy)>_3a1){var sX=this.ZdcDragMx-this.ZdcDragEx;var sY=this.ZdcDragMy-this.ZdcDragEy;this.ZdcDragEx=this.ZdcDragMx;this.ZdcDragEy=this.ZdcDragMy;this.OnScroll=true;this.MoveMapByXY(sX,sY);this.OnScroll=false;this.MaddX=this.MaddX+sX;this.MaddY=this.MaddY+sY;this.MapChangeCnt++;this.MaddX=0;this.MaddY=0;this.ZdcMoveX=this.ZdcDragEx-this.ZdcDragOx;this.ZdcMoveY=this.ZdcDragEy-this.ZdcDragOy;this.CountScr=this.CountScrMax;this.ReSetMapBase();if(this.addtilestatus){this.ZdcUserTileClass.ReSetMapBase();}this.ZdcDragOx=this.ZdcDragEx;this.ZdcDragOy=this.ZdcDragEy;this.DraggingMap();}return false;};ZdcMap.prototype.DraggingMapEnd=function(e){if(this.tmpWheelStatus){this.setWheelOn();}ZdcDrag.ClearDraging();if(document.all){this.ZdcDragMx=event.screenX;this.ZdcDragMy=event.screenY;}else{if(e){if(ZdcCommon.isiPhone()){}else{this.ZdcDragMx=e.screenX;this.ZdcDragMy=e.screenY;}}else{return;}}var sX=this.ZdcDragMx-this.ZdcDragEx;var sY=this.ZdcDragMy-this.ZdcDragEy;this.ZdcDragEx=this.ZdcDragMx;this.ZdcDragEy=this.ZdcDragMy;this.MoveMapByXY(sX,sY);this.ZdcMoveX=this.ZdcDragEx-this.ZdcDragOx;this.ZdcMoveY=this.ZdcDragEy-this.ZdcDragOy;this.CountScr=this.CountScrMax;this.ReSetMapBase();if(this.addtilestatus){this.ZdcUserTileClass.ReSetMapBase();}if(this.cursorflg==true){this.ZdcMapClass.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}else{this.ZdcMapClass.style.cursor="default";}}this.RedrawRouteLayer();this.RedrawHRouteLayer();this.UpdateShapeLayer();if(this.ZdcDragOx!=this.ZdcDragEx||this.ZdcDragOy!=this.ZdcDragEy||(this.MapChangeCnt>0)){this.ZdcMapAccessLog("DragMap");ZdcEvent.trigger(this,"dragmapend");if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOffDrag();}}else{ZdcEvent.trigger(this,"clickmapnomove");}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="visible";this.ZdcMsgHtml.shddoc.style.visibility="visible";if(this.ZdcMsgHtml.docclose.status){this.ZdcMsgHtml.docclose.style.visibility="visible";}else{this.ZdcMsgHtml.docclose.style.visibility="hidden";}if(this.ZdcMsgHtml.docwins.status){this.ZdcMsgHtml.docwins.style.visibility="visible";}else{this.ZdcMsgHtml.docwins.style.visibility="hidden";}}this.ZdcDragOx=0;this.ZdcDragOy=0;this.MapChangeCnt=0;return false;};ZdcMap.prototype.getMousePoint=function(){var p=new ZdcPoint(this.MouseLon,this.MouseLat);return p;};ZdcMap.prototype.ZdcMapAccessLog=function(txt){var _3a9=this.ZdcMapAccess+txt+"_lon"+this.mx+"_lat"+this.my+"_scale"+this.s+"_mtype"+this.ZdcMapType+"&opt="+ZdcCommon.ZDC_OPT;this.ZdcHttp.request(_3a9,ZdcMap.getZdcMapAccesslog,10000);return;};ZdcMap.prototype.getMousePixel=function(){var p=new ZdcPixel(this.MouseMoveX,this.MouseMoveY);return p;};ZdcMap.prototype.GetImageUrl=function(_3ab,_3ac,zoom){function FloatToInt(a){var b=1;if(a<0){b=-1;}return b*Math.floor(Math.abs(a));}G_LevelToTreeLevel=new Array();G_LevelToTreeLevel[18]=3;G_LevelToTreeLevel[17]=3;G_LevelToTreeLevel[16]=3;G_LevelToTreeLevel[15]=2;G_LevelToTreeLevel[14]=2;G_LevelToTreeLevel[13]=2;G_LevelToTreeLevel[12]=2;G_LevelToTreeLevel[11]=2;G_LevelToTreeLevel[10]=2;G_LevelToTreeLevel[9]=1;G_LevelToTreeLevel[8]=1;G_LevelToTreeLevel[7]=1;G_LevelToTreeLevel[6]=1;G_LevelToTreeLevel[5]=0;G_LevelToTreeLevel[4]=0;G_LevelToTreeLevel[3]=0;G_LevelToTreeLevel[2]=0;G_LevelToTreeLevel[1]=0;var _3b0,_3b1;_3b0=String(_3ab);_3b1=String(_3ac);if(ZdcCommon.StrCmp(_3b0.substr(0,1),"m")==0){var msw=_3b0.substr(1,ZdcCommon.StrLen(_3b0)-1);_3b0=(-1)*msw;}if(ZdcCommon.StrCmp(_3b1.substr(0,1),"m")==0){var msh=_3b1.substr(1,ZdcCommon.StrLen(_3b1)-1);_3b1=(-1)*msh;}var _3b4=new Number(_3b0);var _3b5=new Number(_3b1);var nX=FloatToInt(ZdcZoom.OX+(_3b4+0.5)*ZdcZoom.PX*ZdcZoom.map_defw[zoom]);var nY=FloatToInt(ZdcZoom.OY+(_3b5+0.5)*ZdcZoom.PY*(ZdcZoom.map_defh[zoom]));var nX1=FloatToInt(nX/3600/1000-100);nX-=FloatToInt((100+nX1)*3600*1000);var nX2=FloatToInt(nX*8/3600/1000);nX-=FloatToInt(nX2*3600*1000/8);var nX3=FloatToInt(nX*8*10/3600/1000);var nY1=FloatToInt(nY*3/2/3600/1000);nY-=FloatToInt(nY1*3600*1000*2/3);var nY2=FloatToInt(nY*3*8/2/3600/1000);nY-=FloatToInt(nY2*2*3600*1000/3/8);var nY3=FloatToInt(nY*3*8*10/2/3600/1000);var _3be=""+nY1+nX1+nY2+nX2+nY3+nX3;var _3bf=G_LevelToTreeLevel[zoom];var _3c0=this.ZdcMapTypeObj.server[this.ZdcMapType]+zoom;if(_3bf>0){_3c0+="/"+_3be.substr(0,4);if(_3bf>1){_3c0+="/"+_3be.substr(4,2);if(_3bf>2){_3c0+="/"+_3be.substr(6,2);}}}_3c0+="/";_3c0=_3c0+zoom+"_"+_3ab+"_"+_3ac+"."+this.ZdcMapTypeObj.ext[this.ZdcMapType];return _3c0;};ZdcMap.prototype.SetMsgPrintMode=function(){if(this.msgopenstatus){this.ZdcMsgWindowObj.doclarge.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";this.ZdcMsgWindowObj.doclarge.innerHTML="<IMG src="+this.ZdcMsgWindowObj.LargePrintImage+" />";this.ZdcMsgWindowObj.docsmall.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";this.ZdcMsgWindowObj.docsmall.innerHTML="<IMG src="+this.ZdcMsgWindowObj.SmallPrintImage+" />";}if(this.usermsgopenstatus){this.ZdcUserMsgWindow.basedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";this.ZdcUserMsgWindow.basedoc.innerHTML="<IMG src="+this.ZdcUserMsgWindow.printimage+" />";this.ZdcUserMsgWindow.shadowdoc.style.visibility="hidden";}if(this.htmlopenstatus){this.ZdcMsgHtml.docbarrow.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";this.ZdcMsgHtml.docbarrow.innerHTML="<IMG src="+this.ZdcMsgHtml.docbarrow.pntimg+">";this.ZdcMsgHtml.shddoc.style.visibility="hidden";}};ZdcMap.prototype.SetMsgScreenMode=function(){if(this.msgopenstatus){if(document.all){this.ZdcMsgWindowObj.doclarge.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcMsgWindowObj.LargeImage+" Enabled='1')";this.ZdcMsgWindowObj.doclarge.innerHTML="<IMG src="+this.ZdcMsgWindowObj.LargeImage+" style='display:none'/>";this.ZdcMsgWindowObj.docsmall.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcMsgWindowObj.SmallImage+" Enabled='1')";this.ZdcMsgWindowObj.docsmall.innerHTML="<IMG src="+this.ZdcMsgWindowObj.SmallImage+" style='display:none'/>";}else{this.ZdcMsgWindowObj.doclarge.innerHTML="<IMG src="+this.ZdcMsgWindowObj.LargeImage+" />";this.ZdcMsgWindowObj.docsmall.innerHTML="<IMG src="+this.ZdcMsgWindowObj.SmallImage+" />";}}if(this.usermsgopenstatus){this.ZdcUserMsgWindow.basedoc.innerHTML="<IMG src="+this.ZdcUserMsgWindow.baseimage+" />";this.ZdcUserMsgWindow.basedoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcUserMsgWindow.baseimage+" Enabled='1')";if(document.all){this.ZdcUserMsgWindow.basedoc.innerHTML="<IMG src="+this.ZdcUserMsgWindow.baseimage+" style='display:none' />";}else{this.ZdcUserMsgWindow.basedoc.innerHTML="<IMG src="+this.ZdcUserMsgWindow.baseimage+" />";}this.ZdcUserMsgWindow.shadowdoc.style.visibility="visible";}if(this.htmlopenstatus){if(document.all){this.ZdcMsgHtml.docbarrow.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.ZdcMsgHtml.docbarrow.img+"')";this.ZdcMsgHtml.docbarrow.innerHTML="<IMG src="+this.ZdcMsgHtml.docbarrow.img+" style='display:none' />";}else{this.ZdcMsgHtml.docbarrow.innerHTML="<IMG src="+this.ZdcMsgHtml.docbarrow.img+">";}this.ZdcMsgHtml.shddoc.style.visibility="visible";}};ZdcMap.prototype.setPrintMode=function(){if(this.mediamode=="print"){return;}if(ZdcCommon.UserAgentIsFireFox()){if(ZdcCommon.UserAgentIsFireFoxVer3()){return;}if(ZdcCommon.UserAgentIsFireFoxVer2()){for(var k=0;k<this.ZdcShapeLayer.length;k++){var _3c2=this.ZdcShapeLayer[k];this.ShapeLayerTmpWidth=_3c2.doc.style.width;this.ShapeLayerTmpHeight=_3c2.doc.style.height;_3c2.doc.style.width="0px";_3c2.doc.style.height="0px";}}}this.mediamode="print";this.SetMsgPrintMode();for(var i=0;i<this.ZdcUserLayers.length;i++){if(this.ZdcUserLayers[i].addmapstatus){for(var j=0;j<this.ZdcUserLayers[i].markers.length;j++){if(this.ZdcUserLayers[i].markers[j]!=null){if(document.all&&this.ZdcUserLayers[i].markers[j].printicongif){this.ZdcUserLayers[i].markers[j].icondoc.removeChild(this.ZdcUserLayers[i].markers[j].iconimgdoc);this.ZdcUserLayers[i].markers[j].icondoc.innerHTML="<IMG src="+this.ZdcUserLayers[i].markers[j].icon.printimage+" />";}else{if(document.all&&!this.ZdcUserLayers[i].markers[j].printicongif){this.ZdcUserLayers[i].markers[j].iconimgdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\""+this.ZdcUserLayers[i].markers[j].icon.printimage+"\")";this.ZdcUserLayers[i].markers[j].iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";}else{this.ZdcUserLayers[i].markers[j].iconimgdoc.style.filter=null;this.ZdcUserLayers[i].markers[j].iconimgdoc.src=this.ZdcUserLayers[i].markers[j].icon.printimage;}}this.ZdcUserLayers[i].markers[j].shadowdoc.style.visibility="hidden";this.ZdcUserLayers[i].markers[j].icondoc.style.width=this.ZdcUserLayers[i].markers[j].icon.printsize.width+"px";this.ZdcUserLayers[i].markers[j].icondoc.style.height=this.ZdcUserLayers[i].markers[j].icon.printsize.height+"px";this.ZdcUserLayers[i].markers[j].doc.style.width=this.ZdcUserLayers[i].markers[j].icon.printsize.width+"px";this.ZdcUserLayers[i].markers[j].doc.style.height=this.ZdcUserLayers[i].markers[j].icon.printsize.height+"px";}}}}if(this.CenterInfoBoxOpen){this.ZdcCenterInfoObj.doc1.style.filter="alpha(opacity=100)";this.ZdcCenterInfoObj.doc1.style.mozOpacity="1.0";this.ZdcCenterInfoObj.doc1.style.opacity="1.0";}if(this.ScaleBarOpen){if(this.ZdcScaleBarObj.type==1||this.ZdcScaleBarObj.type==3){if(this.ZdcScaleBarObj.type==1){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";}else{if(this.ZdcScaleBarObj.type==3){this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";if(this.s<10){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".gif"+">";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";}}else{this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(Enabled='0' src='')";if(this.s<10){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"pr_0"+this.s+".gif"+">";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"pr_"+this.s+".gif"+">";}}}this.ZdcScaleBarObj.doc1.style.filter="alpha(opacity=100)";this.ZdcScaleBarObj.doc1.style.mozOpacity="1.0";this.ZdcScaleBarObj.doc1.style.opacity="1.0";}}if(this.CenterOpen){if(document.all){this.ZdcCenterObj.doc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcCenterObj.image+" Enabled='0')";}this.ZdcCenterObj.doc.innerHTML="<IMG src="+this.ZdcCenterObj.printimage+">";}if(this.ControlOpen){if(this.ZdcCtrObj.type==1){this.ZdcCtrObj.doc.style.width="";this.ZdcCtrObj.doc.style.height="";this.ZdcCtrObj.doc.style.filter="";this.ZdcCtrObj.doc.style.mozOpacity="";this.ZdcCtrObj.doc.style.opacity="";}}if(!document.all){this.ZdcTransparent.style.visibility="hidden";if(this.cMap){this.cMap.ZdcTransparent.style.visibility="hidden";}}};ZdcMap.prototype.setScreenMode=function(){if(this.mediamode=="screen"){return;}if(ZdcCommon.UserAgentIsFireFox()){if(ZdcCommon.UserAgentIsFireFoxVer3()){return;}if(ZdcCommon.UserAgentIsFireFoxVer2()){for(var k=0;k<this.ZdcShapeLayer.length;k++){var _3c6=this.ZdcShapeLayer[k];_3c6.doc.style.width=this.ShapeLayerTmpWidth;_3c6.doc.style.height=this.ShapeLayerTmpHeight;}}}this.mediamode="screen";this.SetMsgScreenMode();for(var i=0;i<this.ZdcUserLayers.length;i++){if(this.ZdcUserLayers[i].addmapstatus){for(var j=0;j<this.ZdcUserLayers[i].markers.length;j++){if(this.ZdcUserLayers[i].markers[j]!=null){if(document.all&&this.ZdcUserLayers[i].markers[j].icongif){this.ZdcUserLayers[i].markers[j].icondoc.innerHTML="";this.ZdcUserLayers[i].markers[j].iconimgdoc.style.filter=null;this.ZdcUserLayers[i].markers[j].iconimgdoc.src=this.ZdcUserLayers[i].markers[j].icon.image;this.ZdcUserLayers[i].markers[j].icondoc.appendChild(this.ZdcUserLayers[i].markers[j].iconimgdoc);}else{if(document.all&&!this.ZdcUserLayers[i].markers[j].icongif){if(this.ZdcUserLayers[i].markers[j].printicongif){this.ZdcUserLayers[i].markers[j].icondoc.innerHTML="";this.ZdcUserLayers[i].markers[j].icondoc.appendChild(this.ZdcUserLayers[i].markers[j].iconimgdoc);}this.ZdcUserLayers[i].markers[j].iconimgdoc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\""+this.ZdcUserLayers[i].markers[j].icon.image+"\")";this.ZdcUserLayers[i].markers[j].iconimgdoc.src=ZdcCommon.ZdcMapServer+"/img/blank.gif";}else{this.ZdcUserLayers[i].markers[j].iconimgdoc.style.filter=null;this.ZdcUserLayers[i].markers[j].iconimgdoc.src=this.ZdcUserLayers[i].markers[j].icon.image;}}this.ZdcUserLayers[i].markers[j].icondoc.style.width=this.ZdcUserLayers[i].markers[j].icon.size.width+"px";this.ZdcUserLayers[i].markers[j].icondoc.style.height=this.ZdcUserLayers[i].markers[j].icon.size.height+"px";this.ZdcUserLayers[i].markers[j].doc.style.width=this.ZdcUserLayers[i].markers[j].icon.size.width+"px";this.ZdcUserLayers[i].markers[j].doc.style.height=this.ZdcUserLayers[i].markers[j].icon.size.height+"px";this.ZdcUserLayers[i].markers[j].shadowdoc.style.visibility="visible";}}}}if(this.ScaleBarOpen){if(this.ZdcScaleBarObj.type==1||this.ZdcScaleBarObj.type==3){if(this.ZdcScaleBarObj.type==1){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".gif"+">";this.ZdcScaleBarObj.doc1.style.filter="alpha(opacity=75)";this.ZdcScaleBarObj.doc1.style.mozOpacity="0.75";this.ZdcScaleBarObj.doc1.style.opacity="0.75";}else{if(this.s<10){this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+")";if(document.all){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+" style='display:none' />";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+"0"+this.s+".png"+">";}}else{this.ZdcScaleBarObj.doc1.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+")";if(document.all){this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+" style='display:none' />";}else{this.ZdcScaleBarObj.doc1.innerHTML="<IMG src="+this.ZdcScaleBarObj.ZdcScaleBaseImage+this.s+".png"+">";}}}}}if(this.CenterInfoBoxOpen){if(this.ZdcCenterInfoObj.type==1){this.ZdcCenterInfoObj.doc1.style.filter="alpha(opacity=75)";this.ZdcCenterInfoObj.doc1.style.mozOpacity="0.75";this.ZdcCenterInfoObj.doc1.style.opacity="0.75";}else{this.ZdcCenterInfoObj.doc1.style.filter="alpha(opacity=50)";this.ZdcCenterInfoObj.doc1.style.mozOpacity="0.5";this.ZdcCenterInfoObj.doc1.style.opacity="0.5";}}if(this.CenterOpen){if(document.all){this.ZdcCenterObj.doc.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.ZdcCenterObj.image+" Enabled='1')";this.ZdcCenterObj.doc.innerHTML="<IMG src="+this.ZdcCenterObj.image+" style='display:none' />";}else{this.ZdcCenterObj.doc.innerHTML="<IMG src="+this.ZdcCenterObj.image+">";}}if(this.ControlOpen){if(this.ZdcCtrObj.type==1){this.ZdcCtrObj.doc.style.width="70px";this.ZdcCtrObj.doc.style.height="330px";this.ZdcCtrObj.doc.style.filter="alpha(opacity=60)";this.ZdcCtrObj.doc.style.mozOpacity="0.6";this.ZdcCtrObj.doc.style.opacity="0.6";}}if(!document.all){this.ZdcTransparent.style.visibility="visible";if(this.cMap){this.cMap.ZdcTransparent.style.visibility="visible";}}};ZdcMap.prototype.addUserTile=function(path,box){this.ZdcUserTile=true;this.ZdcUserTileBox=box;this.ZdcUserTilePath=path;};ZdcMap.prototype.removeUserTile=function(){this.ZdcUserTile=false;};ZdcMap.prototype.setMouseCursor=function(type,url1,url2){if(ZdcCommon.UserAgentIsSafari()){return -1;}if(type=="users"){this.cursorflg=true;this.usercursor1=url1;this.usercursor2=url2;this.ZdcMapClass.style.cursor="url("+this.usercursor1+"), pointer";}else{if(type!="default"&&type!="hand"){return -1;}this.cursorflg=false;this.mousecursor=type;if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}if(this.mousecursor=="default"){this.ZdcMapClass.style.cursor="default";}}};ZdcMap.prototype.setMapType=function(t,opt){if(this.ZdcMapTypeObj.server[t]!=null){this.ZdcMapType=t;if(opt!=null){this.ZdcMapTypeOpt=opt;}this.SetCopyrightOnMap();}else{return -1;}};ZdcMap.prototype.getMapType=function(){return this.ZdcMapType;};ZdcMap.prototype.reflashMap=function(){this.reflashMapFlg=true;this.SetMapLocationAndScale(this.mx,this.my,this.s);};ZdcMap.prototype._checkPosition=function(_3d0,_3d1){this.moveY+=_3d1;this.moveX+=_3d0;var x=0,y=0;if(Math.abs(this.moveX)>=256/2){x=Math.round(this.moveX/256);this.moveX-=256*x;}if(Math.abs(this.moveY)>=256/2){y=Math.round(this.moveY/256);this.moveY-=256*y;}return [x,y];};function _optimize(x,y){var ary=new Array();for(var i=0;i<x;i++){var t=new Array();for(var j=0;j<y;j++){t.push(i+":"+j);}ary.push(t);}var res=new Array();var max=Math.max(ary.length,ary[0].length);if(max>2){var tm;while(max>2){tm=_reduce(ary);max=Math.max(ary.length,ary[0].length);res.push(tm[1]);}res.push(tm[0]);}else{res.push(ary);}return res.reverse().toString().split(",");}function _reduce(ary){var del=new Array();if(ary.length>2){var tmp=ary.shift();var tmp2=ary.pop();del.push(tmp.shift());if(tmp.length>0){del.push(tmp.pop());}del.push(tmp2.shift());if(tmp2.length>0){del.push(tmp2.pop());}while(tmp.length>2){del.push(tmp.shift());del.push(tmp.pop());}while(tmp2.length>2){del.push(tmp2.shift());del.push(tmp2.pop());}if(tmp.length>0){del.push(tmp);}if(tmp2.length>0){del.push(tmp2);}}if(ary[0].length>2){for(i=0;i<ary.length/2;i++){del.push(ary[i].shift());del.push(ary[i].pop());if(i==ary.length-1-i){break;}del.push(ary[ary.length-1-i].shift());del.push(ary[ary.length-1-i].pop());}}return [ary,del.reverse()];}function ZdcMapMeshTile(t,l,url){var T=this;T.doc=document.createElement("img");var TD=T.doc;TD.style.position="absolute";TD.style.top=t;TD.style.left=l;TD.src=url;if(ZdcCommon.UserAgentIsFireFox()){TD.width=0;TD.height=0;TD.onload=function(){this.width=256;this.height=256;};}}function ZdcMapMeshTile_UT(t,l,url,_3e9){var T=this;T.doc=document.createElement("img");var TD=T.doc;TD.style.position="absolute";TD.style.top=t;TD.style.left=l;TD.src=url;TD.onerror=function(){this.src=_3e9;};if(ZdcCommon.UserAgentIsFireFox()){TD.width=0;TD.height=0;TD.onload=function(){this.width=256;this.height=256;};}}function ZdcMapMeshTile_UT_IE(t,l,url){var T=this;T.doc=document.createElement("div");var TD=T.doc;TD.style.position="absolute";TD.style.top=t;TD.style.left=l;TD.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+url+")";TD.style.width="256px";TD.style.height="256px";}ZdcMap.prototype.EndSearchRouteHandler=function(){if(!this.objRouteSearch||!this.objRouteSearch.getResult()){return;}var _3f1=new ZdcUserRouteLayer();_3f1.SetRouteResult(this.objRouteSearch.getResult());this.AddRouteLayer(_3f1);};ZdcMap.prototype.addRouteSearch=function(rs){this.objRouteSearch=rs;this.objRouteSearch.objMap=this;};ZdcMap.prototype.removeRouteSearch=function(){if(this.objRouteSearch){this.objRouteSearch.objMap=null;}this.objRouteSearch=null;this.ClearRouteLayer();};ZdcMap.prototype.getRouteSearch=function(){if(!this.objRouteSearch){this.objRouteSearch=null;}return this.objRouteSearch;};ZdcMap.prototype.ClearRouteLayer=function(type){if(this.ZdcRouteLayer==null){return;}this.removeShapeLayer(this.ZdcRouteLayer.LinkLayer);this.ZdcRouteLayer.LinkLayer=null;if(!type){if(this.ZdcRouteLayer.IconLayer.LayerID>=0){this.removeUserLayerById(this.ZdcRouteLayer.IconLayer.LayerID);this.ZdcRouteLayer.IconLayer.LayerID=-1;}this.ZdcRouteLayer.result=null;if(this.objRouteSearch&&this.objRouteSearch.result){this.objRouteSearch.result.Clear();}}this.ZdcRouteLayer=null;if(this.msgopenstatus){this.closeMsgWindow();}return;};ZdcMap.prototype.AddRouteLayer=function(lyr){this.ZdcRouteLayer=lyr;this.addShapeLayer(this.ZdcRouteLayer.LinkLayer);this.ZdcRouteLayer.LinkLayer.doc.style.zIndex="3998";this.ZdcRouteLayer.LinkLayer.width=this.ZdcMapTileWpx;this.ZdcRouteLayer.LinkLayer.height=this.ZdcMapTileHpx;var mt=this;var _3f6=this.ZdcRouteLayer.result.options;var _3f7=this.ZdcRouteLayer.result;if(this.ZdcRouteLayer.result.options.showMarker){if(this.ZdcRouteLayer.IconLayer.LayerID==-1){this.ZdcRouteLayer.IconLayer.clearMarker();this.ZdcRouteLayer.IconLayer.addMarker(_3f7.getLinkMarker("start"));this.ZdcRouteLayer.IconLayer.addMarker(_3f7.getLinkMarker("end"));for(var k=1;k<_3f7.links.length-1;k++){var mrk=_3f7.getLinkMarker(k);if(mrk){ZdcEvent.addListener(mrk,"mouseclickmarker",function(){if(mt.msgopenstatus){mt.closeMsgWindow();}this.openMsgWindow(this.Point,this.title,this.node,true);});this.ZdcRouteLayer.IconLayer.addMarker(mrk);}}}}this.ZdcRouteLayer.IconLayer.LayerID=this.addUserLayer(this.ZdcRouteLayer.IconLayer);this.ZdcRouteLayer.IconLayer.doc.style.zIndex="3999";this.RedrawRouteLayer();return;};ZdcMap.prototype.ResetRouteLayer=function(){if(this.ZdcRouteLayer==null){return;}var _3fa=this.ZdcRouteLayer.IconLayer;var k,j,i;var r=this.ZdcRouteLayer.result;this.ClearRouteLayer(1);for(k=0;k<r.links.length;k++){l=r.links[k];for(j=0;j<l.l2.length;j++){l.l2[j].idDom=-1;}for(j=0;j<l.l6.length;j++){l.l6[j].idDom=-1;}for(j=0;j<l.ld.length;j++){l.ld[j].idDom=-1;}}var _3ff=new ZdcUserRouteLayer();_3ff.SetRouteResult(r);_3ff.IconLayer=_3fa;_3fa=null;this.AddRouteLayer(_3ff);};ZdcMap.prototype.RedrawRouteLayer=function(){if(this.ZdcRouteLayer==null||this.ZdcRouteLayer.result==null||this.ZdcRouteLayer.LinkLayer==null){return;}var _400=this.ZdcRouteLayer.LinkLayer;var ptLB=new ZdcPixel(parseInt(_400.doc.style.left),parseInt(_400.doc.style.top)+_400.height);var ptRT=new ZdcPixel(parseInt(_400.doc.style.left)+_400.width,parseInt(_400.doc.style.top));var tpt=this.convertPixel2Point(ptLB);var _404=new ZdcPoint(tpt.lon,tpt.lat);tpt=this.convertPixel2Point(ptRT);var _405=new ZdcPoint(tpt.lon,tpt.lat);var _406=new ZdcBox(_404,_405);if(_406.isContainBox(this.getMapBoundBox())>1){this.ResetRouteLayer();return;}var _407=this.ZdcRouteLayer.LinkLayer;var box=this.getMapBoundBox();var r,p,k,jj,i,j,pxy;var _410=this.ZdcRouteLayer.result;r=_410.range;if(r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){return;}for(k=0;k<_410.links.length;k++){r=_410.links[k].range;if(r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{l=_410.links[k];r=l.range;if(r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{if(this.getMapScale()<=2){for(j=0;j<l.l2.length;j++){r=l.l2[j].range;if(!l.l2[j].idDom){l.l2[j].idDom=-1;}if(l.l2[j].idDom>0||r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{p=new ZdcShape.Polyline();for(i=0;i<l.l2[j].x.length;i++){p.addPoint(new ZdcPoint(l.l2[j].x[i],l.l2[j].y[i],2));}p.strokeColor=this.objRouteSearch.getRouteColor(l.roadType,l.toll_link);p.strokeStyle=this.objRouteSearch.getRouteStyle(l.roadType);p.strokeWeight=this.objRouteSearch.routeWidth;p.opacity=this.objRouteSearch.routeOpacity;l.l2[j].idDom=this.ZdcRouteLayer.LinkLayer.addShape(p)+1;}}}else{if(this.getMapScale()<=6){for(j=0;j<l.l6.length;j++){r=l.l6[j].range;if(!l.l6[j].idDom){l.l6[j].idDom=-1;}if(l.l6[j].idDom>0||r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{p=new ZdcShape.Polyline();for(i=0;i<l.l6[j].x.length;i++){p.addPoint(new ZdcPoint(l.l6[j].x[i],l.l6[j].y[i],2));}p.strokeColor=this.objRouteSearch.getRouteColor(l.roadType,l.toll_link);p.strokeStyle=this.objRouteSearch.getRouteStyle(l.roadType);p.strokeWeight=this.objRouteSearch.routeWidth;p.opacity=this.objRouteSearch.routeOpacity;l.l6[j].idDom=this.ZdcRouteLayer.LinkLayer.addShape(p)+1;}}}else{for(j=0;j<l.ld.length;j++){r=l.ld[j].range;if(!l.ld[j].idDom){l.ld[j].idDom=-1;}if(l.ld[j].idDom>0||r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{p=new ZdcShape.Polyline();for(i=0;i<l.ld[j].x.length;i++){p.addPoint(new ZdcPoint(l.ld[j].x[i],l.ld[j].y[i],2));}p.strokeColor=this.objRouteSearch.getRouteColor(l.roadType,l.toll_link);p.strokeStyle=this.objRouteSearch.getRouteStyle(l.roadType);p.strokeWeight=this.objRouteSearch.routeWidth;p.opacity=this.objRouteSearch.routeOpacity;l.ld[j].idDom=this.ZdcRouteLayer.LinkLayer.addShape(p)+1;}}}}}}}};ZdcMap.prototype.setChildMap=function(cMap,opt1,opt2,opt3,opt4){var pMap=this;this.pMap=this;this.cMap=cMap;cMap.pMap=pMap;cMap.SynchronizedFlg=true;cMap.FirstSynchroFlg=true;cMap.mx=pMap.mx;cMap.my=pMap.my;cMap.s=pMap.s;if(opt1==null){opt1=0;}cMap.zoomopt=opt1;if(opt2>=1&&opt2<=4){cMap.subzoomopt=opt2;}else{cMap.subzoomopt=0;}if(opt3>50){opt3=50;}if(opt3<0){opt3=0;}if(opt3>=0&&opt3<=50){}else{opt3=15;}cMap.SetMapClip(opt3);cMap.subzoomopt2=opt3;cMap.subzoomopt3=opt4;cMap.SetZoomImage(pMap,opt1,opt2,opt3,opt4);var _417=eval(this.s)+eval(cMap.zoomopt);if(_417>cMap.zoomMax){_417=cMap.zoomMax;}if(_417<cMap.zoomMin){_417=cMap.zoomMin;}cMap.setMapScale(_417);cMap.setMapLocation(this.getMapLocation());ZdcEvent.addListener(cMap,"dragmapend",function(){pMap.setMapLocation(this.getMapLocation());});ZdcEvent.addListener(cMap,"scrollmapend",function(){pMap.setMapLocation(this.getMapLocation());});ZdcEvent.addListener(cMap,"clickmap",function(){pMap.setMapLocation(this.getMapLocation());});ZdcEvent.addListener(cMap,"changezoomend",function(){if(!pMap.firstflg&&this.onlyzoomin==false&&this.onlyzoomout==false){this.firstflg=true;var _418=eval(this.getMapScale())-eval(this.zoomopt);if(_418>=pMap.zoomMax){_418=pMap.zoomMax;}if(_418<=pMap.zoomMin){_418=pMap.zoomMin;}var _419=pMap.CenterFirst;pMap.CenterFirst=null;pMap.setMapScale(_418);this.SetZoomImage(pMap,this.zoomopt,opt2,this.subzoomopt2,this.subzoomopt3);pMap.CenterFirst=_419;this.firstflg=false;}if(this.onlyzoomin==true||this.onlyzoomout==true){if(this.onlyzoomin==true){this.zoomopt=eval(this.zoomopt)+1;}if(this.onlyzoomout==true){this.zoomopt=eval(this.zoomopt)-1;}this.ChangeZoomSubMapOnly(this.zoomopt,pMap);this.onlyzoomin=false;this.onlyzoomout=false;}});this.SetCopyrightOnMap();};ZdcMap.prototype.SetZoomImage=function(cMap,opt){var _41c=this.getMapScale();var _41d=eval(this.getMapScale())+eval(opt);if(_41c==this.zoomMax){_41d=this.getMapScale()+eval(opt);}if(_41d>cMap.zoomMax){_41d=cMap.zoomMax;}if(_41d<=cMap.zoomMin){_41d=cMap.zoomMin;}var _41e=Math.floor(this.ZdcMapWpx*(ZdcZoom.map_defw[_41c]/ZdcZoom.map_defw[_41d]));var _41f=Math.floor(this.ZdcMapHpx*(ZdcZoom.map_defh[_41c]/ZdcZoom.map_defh[_41d]));if(_41e>2000){_41e=2000;}if(_41f>2000){_41f=2000;}cMap.ZdcpMapRangeImage.style.zIndex="19";cMap.ZdcpMapRangeImage.style.visibility="visible";cMap.ZdcpMapRangeImage.style.left=(cMap.ZdcMapCenterpx.x-Math.floor(_41e/2)-3)+"px";cMap.ZdcpMapRangeImage.style.top=(cMap.ZdcMapCenterpx.y-Math.floor(_41f/2)-3)+"px";cMap.ZdcpMapRangeImage.style.borderBottom="1px #390088 solid";cMap.ZdcpMapRangeImage.style.borderRight="1px #390088 solid";cMap.ZdcpMapRangeImage.style.borderTop="1px #7b68ff solid";cMap.ZdcpMapRangeImage.style.borderLeft="1px #7b68ff solid";cMap.ZdcMapClass.appendChild(cMap.ZdcpMapRangeImage);if((navigator.userAgent.match(/MSIE 6/))){cMap.ZdcpMapRangeImage.innerHTML="<IMG style='BORDER-BOTTOM: #7b68ff 2px outset; BORDER-LEFT: #7b68ff 2px outset; BORDER-TOP: #7b68ff 2px outset; BORDER-RIGHT: #7b68ff 2px outset' src="+cMap.pMapRangeInnerImageClear+" width="+_41e+" height="+_41f+">";cMap.ZdcMapClass.appendChild(cMap.ZdcpMapRangeInnerImage);cMap.ZdcpMapRangeInnerImage.style.zIndex="18";cMap.ZdcpMapRangeInnerImage.style.position="absolute";cMap.ZdcpMapRangeInnerImage.style.visibility="visible";cMap.ZdcpMapRangeInnerImage.style.backgroundColor="#7b68ff";cMap.ZdcpMapRangeInnerImage.style.filter="alpha(opacity=25)";cMap.ZdcpMapRangeInnerImage.style.mozOpacity="0.25";cMap.ZdcpMapRangeInnerImage.style.opacity="0.25";cMap.ZdcpMapRangeInnerImage.style.left=(cMap.ZdcMapCenterpx.x-Math.floor(_41e/2))+"px";cMap.ZdcpMapRangeInnerImage.style.top=(cMap.ZdcMapCenterpx.y-Math.floor(_41f/2))+"px";cMap.ZdcpMapRangeInnerImage.innerHTML="<img height="+_41f+" width="+_41e+" src="+cMap.pMapRangeInnerImageClear+">";}else{cMap.ZdcpMapRangeImage.innerHTML="<DIV style='border-bottom:2px #390088 solid; border-right:2px #390088 solid; border-top:2px #7b68ff solid; border-left:2px #7b68ff solid; width:"+(_41e)+"px; height:"+(_41f)+"px;'><DIV style='width:"+(_41e)+"px; height:"+(_41f)+"px; filter:alpha(opacity=25); -moz-pacity:0.25; opacity:0.25; background-color:#7b68ff;'></DIV>";}cMap.ZdcpMapRangeImage.style.position="absolute";};function ZdcSubMap(_420,opts){this.ZdcMapBase=_420;if(ZdcEvent._getPropertyValue(this.ZdcMapBase,"position")!="absolute"){this.ZdcMapBase.style.position="relative";}this.ZdcMapBorder3=document.createElement("div");this.ZdcMapBorder3.style.position="absolute";this.ZdcMapBorder3.style.zIndex="0";this.ZdcMapBorder3.style.backgroundColor="#777777";this.ZdcMapBase.appendChild(this.ZdcMapBorder3);this.ZdcMapBorder2=document.createElement("div");this.ZdcMapBorder2.style.position="absolute";this.ZdcMapBorder2.style.zIndex="0";this.ZdcMapBorder2.style.backgroundColor="#ffffff";this.ZdcMapBase.appendChild(this.ZdcMapBorder2);this.ZdcMapBorder=document.createElement("div");this.ZdcMapBorder.style.position="absolute";this.ZdcMapBorder.style.zIndex="0";this.ZdcMapBorder.style.backgroundColor="#777777";this.ZdcMapBase.appendChild(this.ZdcMapBorder);this.ZdcMapPClass=document.createElement("div");this.ZdcMapPClass.style.position="absolute";this.ZdcMapPClass.style.overflow="hidden";this.ZdcMapPClass.style.left="0px";this.ZdcMapPClass.style.top="0px";this.ZdcMapPClass.style.width="100%";this.ZdcMapPClass.style.height="100%";this.ZdcMapPClass.style.zIndex="0";this.ZdcMapClass=document.createElement("div");this.ZdcMapClass.style.webkitUserSelect="none";this.ZdcMapClass.style.position="absolute";this.ZdcMapClass.style.backgroundImage="url("+ZdcCommon.ZdcMapLog+")";this.ZdcMapBase.appendChild(this.ZdcMapPClass);this.ZdcMapPClass.appendChild(this.ZdcMapClass);this.ZdcMapBase.style.overflow="hidden";this.zoomMax=18;this.zoomMin=1;this.ZdcDragStatus=true;this.OnScroll=false;this.WheelType=1;this.WheelStatus=true;this.OnSetMapBase=false;this.SynchronizedFlg=false;this.FirstSynchroFlg=false;this.MapCloseFlg=false;this.ZdcMapType=ZdcCommon.ZdcDefaultMapType;this.ZdcMapTypeObj=new ZdcMapType();this.ZdcTileLayer=new Array();if(ZdcCommon.UserAgentIsSafari()){this.mousecursor="default";}else{this.mousecursor="hand";this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}this.StorageButtonSize=16;this.ZdcMapAccess=ZdcCommon.ZdcMapAccess+"/log/event_log.cgi?key="+ZdcCommon.ZDC_KEY+"&event=mapapi_";ZdcMap.AccessText="10200000";this.ZdcHttp=new ZdcHttpRequest();this.onlyzoomin=false;this.onlyzoomout=false;this.ZdcpMapRangeImage=new Object();this.ZdcpMapRangeImage=document.createElement("DIV");this.ZdcpMapRangeInnerImage=new Object();this.ZdcpMapRangeInnerImage=document.createElement("DIV");this.pMapRangeInnerImageClear=ZdcCommon.ZdcMapServer+"/img/clear.gif";this.ZdcMapZoomInImage=new Object();this.ZdcMapZoomInImage=document.createElement("DIV");this.ZdcMapZoomIn=ZdcCommon.ZdcMapServer+"/img/submapZoomIn.png";this.ZdcMapZoomOutImage=new Object();this.ZdcMapZoomOutImage=document.createElement("DIV");this.ZdcMapZoomOut=ZdcCommon.ZdcMapServer+"/img/submapZoomOut.png";this.ZdcMapOpenImage=new Object();this.ZdcMapOpenImage=document.createElement("DIV");this.ZdcMapOpen=ZdcCommon.ZdcMapServer+"/img/ControlChange3.png";this.ZdcMapCloseImage=new Object();this.ZdcMapCloseImage=document.createElement("DIV");this.ZdcMapClose=ZdcCommon.ZdcMapServer+"/img/ControlNoChange3.png";this.ScrSpeed=0;this.ZdcMapLeftpx=0;this.ZdcMapToppx=0;this.ZdcMapWpx=0;this.ZdcMapHpx=0;this.ZdcMapCenterpx=new ZdcPixel();this.ZdcMapCenterInfopx=new ZdcPixel();this.ZdcMapClipRect=new Object;this.ZdcTileWpx=256;this.ZdcTileHpx=256;this.ZdcBaseXpx=0;this.MaddY=0;this.ZdcCenter=new Object();this.ZdcCenter.px=this.ZdcMapCenterpx.x;this.ZdcCenter.py=this.ZdcMapCenterpx.y;this.CountScr=0;this.CountScrMax=7;this.ZdcDragOx=0;this.ZdcDragOy=0;this.ZdcDragMx=0;this.ZdcDragMy=0;this.ZdcDragEx=0;this.ZdcDragEy=0;this.MouseClickX=0;this.MouseClickY=0;this.MouseCLon=0;this.MouseCLat=0;this.MouseCx=0;this.MouseCy=0;this.MouseMoveX=0;this.MouseMoveY=0;this.MouseLon=0;this.MouseLat=0;this.MouseMx=0;this.MouseMy=0;this.FirstInitMap=true;this.reflashMapFlg=false;this.ZdcTransparent=new Object();this.ZdcTransparent=document.createElement("DIV");this.ZdcTransparentImage=ZdcCommon.ZdcMapServer+"/img/blank.gif";this.InitMap(this.mx,this.my,this.s);this.ZdcMapClass.ondblclick=this.MouseDblClick.bindAsEventListener(this);this.ZdcMapClass.onmousemove=this.MouseMove.bindAsEventListener(this);this.ZdcMapClass.onmousedown=this.MouseDown.bindAsEventListener(this);this.ZdcMapClass.onmouseup=this.MouseUp.bindAsEventListener(this);this.ZdcMapClass.onclick=this.MouseClick.bindAsEventListener(this);this.ZdcMapClass.onmouseover=this.MouseOver.bindAsEventListener(this);this.ZdcMapClass.onmouseout=this.MouseOut.bindAsEventListener(this);this.ZdcMapClass.oncontextmenu=this.ConTextMenu.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.ZdcMapClass.ontouchmove=this.MouseMove.bindAsEventListener(this);this.ZdcMapClass.ontouchstart=this.MouseDown.bindAsEventListener(this);this.ZdcMapClass.ontouchend=this.MouseClick.bindAsEventListener(this);}this.AddMouseWheelListener(this.WheelZoom.bindAsEventListener(this),false);this.ZdcMapZoomInImage.ondblclick=this.MouseDblClickZoom.bindAsEventListener(this);this.ZdcMapZoomInImage.onclick=this.MouseClickZoomIn.bindAsEventListener(this);this.ZdcMapZoomInImage.onmousedown=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapZoomInImage.onmouseup=this.MouseUpZoom.bindAsEventListener(this);this.ZdcMapZoomInImage.onmouseover=this.MouseOverZoom.bindAsEventListener(this);this.ZdcMapZoomInImage.onmouseout=this.MouseOutZoom.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.ZdcMapZoomInImage.ontouchstart=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapZoomInImage.ontouchend=this.MouseClickZoomIn.bindAsEventListener(this);}this.ZdcMapZoomOutImage.ondblclick=this.MouseDblClickZoom.bindAsEventListener(this);this.ZdcMapZoomOutImage.onclick=this.MouseClickZoomOut.bindAsEventListener(this);this.ZdcMapZoomOutImage.onmousedown=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapZoomOutImage.onmouseup=this.MouseUpZoom.bindAsEventListener(this);this.ZdcMapZoomOutImage.onmouseover=this.MouseOverZoom.bindAsEventListener(this);this.ZdcMapZoomOutImage.onmouseout=this.MouseOutZoom.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.ZdcMapZoomOutImage.ontouchstart=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapZoomOutImage.ontouchend=this.MouseClickZoomOut.bindAsEventListener(this);}this.ZdcMapOpenImage.ondblclick=this.MouseDblClickZoom.bindAsEventListener(this);this.ZdcMapOpenImage.onclick=this.MouseClickOpen.bindAsEventListener(this);this.ZdcMapOpenImage.onmousedown=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapOpenImage.onmouseup=this.MouseUpZoom.bindAsEventListener(this);this.ZdcMapOpenImage.onmouseover=this.MouseOverZoom.bindAsEventListener(this);this.ZdcMapOpenImage.onmouseout=this.MouseOutZoom.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.ZdcMapOpenImage.ontouchstart=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapOpenImage.ontouchend=this.MouseClickOpen.bindAsEventListener(this);}this.ZdcMapCloseImage.ondblclick=this.MouseDblClickZoom.bindAsEventListener(this);this.ZdcMapCloseImage.onclick=this.MouseClickClose.bindAsEventListener(this);this.ZdcMapCloseImage.onmousedown=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapCloseImage.onmouseup=this.MouseUpZoom.bindAsEventListener(this);this.ZdcMapCloseImage.onmouseover=this.MouseOverZoom.bindAsEventListener(this);this.ZdcMapCloseImage.onmouseout=this.MouseOutZoom.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.ZdcMapCloseImage.ontouchstart=this.MouseDownZoom.bindAsEventListener(this);this.ZdcMapCloseImage.ontouchend=this.MouseClickClose.bindAsEventListener(this);}this.formatWidth=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"));this.formatHeight=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"));this.formatTop=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"top"));this.formatLeft=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"left"));ZdcObjArray.push(this);}ZdcSubMap.prototype.MouseOverZoom=function(_422){if(document.all){this.ZdcMapZoomInImage.style.cursor="hand";this.ZdcMapZoomOutImage.style.cursor="hand";this.ZdcMapOpenImage.style.cursor="hand";this.ZdcMapCloseImage.style.cursor="hand";}else{this.ZdcMapZoomInImage.style.cursor="pointer";this.ZdcMapZoomOutImage.style.cursor="pointer";this.ZdcMapOpenImage.style.cursor="pointer";this.ZdcMapCloseImage.style.cursor="pointer";}};ZdcSubMap.prototype.MouseOutZoom=function(_423){if(ZdcDrag.IsDragging()){return false;}if(this.cursorflg==true){this.ZdcMapClass.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}else{this.ZdcMapClass.style.cursor="default";}}};ZdcSubMap.prototype.AddMouseWheelListener=function(func,cap){if(this.ZdcMapClass.addEventListener){this.ZdcMapClass.addEventListener("DOMMouseScroll",func,cap);this.ZdcMapClass.addEventListener("mousewheel",func,cap);}else{if(this.ZdcMapClass.attachEvent){this.ZdcMapClass.attachEvent("onmousewheel",func);}}};ZdcSubMap.prototype.WheelZoom=function(e){if(!this.WheelStatus){return;}var _427;if(window.event&&window.event.wheelDelta){_427=window.event.wheelDelta;}else{if(e.wheelDelta){_427=e.wheelDelta;}else{_427=e.detail;_427=_427*(-1);}}if(_427>0){if(this.WheelType==1){this.mapZoomOut(1,"wheel");}else{this.mapZoomIn(1,"wheel");}}else{if(this.WheelType==1){this.mapZoomIn(1,"wheel");}else{this.mapZoomOut(1,"wheel");}}ZdcEvent.stopPropagation(e);if(document.all){window.event.returnValue=false;}else{e.preventDefault();}return false;};ZdcSubMap.prototype.setWheelType=function(t){if(t==null){return -1;}if(t!=1&&t!=2){return -1;}this.WheelType=t;};ZdcSubMap.prototype.getWheelStatus=function(){return this.WheelStatus;};ZdcSubMap.prototype.setWheelOn=function(){this.WheelStatus=true;};ZdcSubMap.prototype.setWheelOff=function(){this.WheelStatus=false;};ZdcSubMap.prototype.setBackGroundImage=function(_429){this.ZdcMapClass.style.backgroundImage="url("+_429+")";};ZdcSubMap.prototype.setMapZoomLimit=function(s1,s2){if(s1<s2&&s1>=0&&s2<19){this.zoomMin=Number(s1);this.zoomMax=Number(s2);}else{return -1;}};ZdcSubMap.prototype.InitMap=function(x,y,s){this.mx=x;this.my=y;this.s=s;this.InitMapBox();for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){this.ZdcTileLayer[j]=new Array(this.ZdcTileLayerMaxI);for(var i=1;i<=this.ZdcTileLayerMaxI;i++){this.ZdcTileLayer[j][i]=document.createElement("DIV");this.ZdcTileLayer[j][i].style.position="absolute";this.ZdcTileLayer[j][i].style.zIndex="10";this.ZdcMapClass.appendChild(this.ZdcTileLayer[j][i]);}}this.SetTransparentOnMap();if(this.pMap){this.SetZoomImage(this.pMap,this.zoomopt,this.subzoomopt,this.subzoomopt2,this.subzoomopt3);}this.ChgPg=0;if(this.FirstSynchroFlg){this.SetMapLocationAndScale(this.mx,this.my,this.s);}};ZdcSubMap.prototype.SetTransparentOnMap=function(){this.ZdcTransparent.style.zIndex="20";this.ZdcTransparent.style.position="absolute";this.ZdcTransparent.innerHTML="<IMG src="+this.ZdcTransparentImage+" galleryimg='no' width='"+this.ZdcMapBase.style.width+"px;' height='"+this.ZdcMapBase.style.height+"px;'>";this.ZdcTransparent.style.left=(this.ZdcMapCenterpx.x-Math.round(this.ZdcMapWpx/2))+"px";this.ZdcTransparent.style.top=(this.ZdcMapCenterpx.y-Math.round(this.ZdcMapHpx/2))+"px";this.ZdcMapClass.appendChild(this.ZdcTransparent);};ZdcSubMap.prototype.resizeMapWindow=function(_431,_432,_433,_434){this.ZdcMapBase.style.top=_431+"px";this.ZdcMapBase.style.left=_432+"px";if(_433<0){_433=0;}if(_434<0){_434=0;}if(this.MapCloseFlg==true){this.formatWidth=parseInt(_433);this.formatHeight=parseInt(_434);this.formatTop=parseInt(_431);this.formatLeft=parseInt(_432);var _435=parseInt(ZdcEvent._getPropertyValue(this.pMap.ZdcMapBase,"width"));var _436=parseInt(ZdcEvent._getPropertyValue(this.pMap.ZdcMapBase,"height"));if(isNaN(_435)){_435=parseInt(this.pMap.ZdcMapBase.clientWidth);}if(isNaN(this.formatHeight)){_436=parseInt(this.pMap.ZdcMapBase.clientHeight);}this.pMap.Pnt=ZdcEvent._getClientPosition(this.pMap.ZdcMapBase);this.pMap.DocCenterX=_435/2;this.pMap.DocCenterY=_436/2;this.Pnt=ZdcEvent._getClientPosition(this.ZdcMapBase);this.DocCenterX=parseInt(this.formatLeft)+this.formatWidth/2;this.DocCenterY=parseInt(this.formatTop)+this.formatHeight/2;if(this.pMap.DocCenterX>=this.DocCenterX&&this.pMap.DocCenterY>=this.DocCenterY){this.MapPosition=1;}if(this.pMap.DocCenterX<this.DocCenterX&&this.pMap.DocCenterY>=this.DocCenterY){this.MapPosition=2;this.ZdcMapBase.style.left=(parseInt(this.ZdcMapBase.style.left)+parseInt(this.formatWidth)-16)+"px";}if(this.pMap.DocCenterX>=this.DocCenterX&&this.pMap.DocCenterY<this.DocCenterY){this.MapPosition=3;this.ZdcMapBase.style.top=(parseInt(this.ZdcMapBase.style.top)+parseInt(this.formatHeight)-16)+"px";}if(this.pMap.DocCenterX<this.DocCenterX&&this.pMap.DocCenterY<this.DocCenterY){this.MapPosition=4;this.ZdcMapBase.style.left=(parseInt(this.ZdcMapBase.style.left)+parseInt(this.formatWidth)-16)+"px";this.ZdcMapBase.style.top=(parseInt(this.ZdcMapBase.style.top)+parseInt(this.formatHeight)-16)+"px";}this.Sft_Width=-30;this.Sft_Height=-30;switch(this.MapPosition){case 1:this.Sft_Left=0;this.Sft_Top=0;break;case 2:this.Sft_Left=30;this.Sft_Top=0;break;case 3:this.Sft_Left=0;this.Sft_Top=30;break;case 4:default:this.Sft_Left=30;this.Sft_Top=30;break;}if(this.pMap!=null){this.pMap.SetCopyrightOnMap();}return;}else{this.formatWidth=parseInt(_433);this.formatHeight=parseInt(_434);this.formatTop=parseInt(_431);this.formatLeft=parseInt(_432);this.ZdcMapBase.style.width=_433+"px";this.ZdcMapBase.style.height=_434+"px";}if(_433>2048||_434>2048||_431<0||_432<0){return (-1);}this.ZdcMapWpx=_433;this.ZdcMapHpx=_434;this.ZdcMapToppx=_431;this.ZdcMapLeftpx=_432;for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){for(var i=1;i<=this.ZdcTileLayerMaxI;i++){this.ZdcMapClass.removeChild(this.ZdcTileLayer[j][i]);}}this.FirstInitMap=true;this.InitMap(this.mx,this.my,this.s);if(this.pMap!=null){this.pMap.SetCopyrightOnMap();}ZdcEvent.trigger(this,"resizeend");};ZdcSubMap.prototype.InitMapBox=function(){this.ZdcMapLeftpx=0;this.ZdcMapToppx=0;var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);if(this.ZdcMapClass.style.width!=null){if(this.ZdcMapWpx==0){this.ZdcMapWpx=dr.x;}this.ZdcTileLayerMaxI=Math.floor(this.ZdcMapWpx/256)+1+2;this.ZdcMapTileWpx=this.ZdcTileLayerMaxI*this.ZdcTileWpx;this.ZdcMapTileLeftpx=(-1)*(Math.floor((this.ZdcMapTileWpx-this.ZdcMapWpx)/2)-this.ZdcMapLeftpx);this.ZdcMapCenterpx.x=Math.floor(this.ZdcMapTileWpx/2);this.ZdcMapCenterInfopx.x=this.ZdcMapCenterpx.x-Math.floor(this.ZdcMapWpx/2)+10;this.ZdcMapClipRect.Left=Math.floor((this.ZdcMapTileWpx-this.ZdcMapWpx)/2);this.ZdcMapClipRect.Width=this.ZdcMapWpx;}else{this.ZdcMapWpx=512;this.ZdcMapTileWpx=1280;this.ZdcMapTileLeftpx=-320;this.ZdcMapCenterpx.x=640;this.ZdcMapCenterInfopx.x=340;this.ZdcMapClipRect.Left=384;this.ZdcMapClipRect.Width=512;}if(this.ZdcMapClass.style.height!=null){if(this.ZdcMapHpx==0){this.ZdcMapHpx=dr.y;}this.ZdcTileLayerMaxJ=Math.floor(this.ZdcMapHpx/256)+1+2;this.ZdcMapTileHpx=this.ZdcTileLayerMaxJ*this.ZdcTileHpx;this.ZdcMapTileToppx=(-1)*(Math.floor((this.ZdcMapTileHpx-this.ZdcMapHpx)/2)-this.ZdcMapToppx);this.ZdcMapCenterpx.y=Math.floor(this.ZdcMapTileHpx/2);this.ZdcMapCenterInfopx.y=this.ZdcMapCenterpx.y-Math.floor(this.ZdcMapHpx/2)+10;this.ZdcMapClipRect.Top=Math.floor((this.ZdcMapTileHpx-this.ZdcMapHpx)/2);this.ZdcMapClipRect.Height=this.ZdcMapHpx;}else{this.ZdcMapHpx=512;this.ZdcMapTileHpx=1280;this.ZdcMapTileToppx=-320;this.ZdcMapCenterpx.y=640;this.ZdcMapCenterInfopx.y=340;this.ZdcMapClipRect.Top=384;this.ZdcMapClipRect.Height=512;}this.ZdcMapClass.style.left=this.ZdcMapTileLeftpx+"px";this.ZdcMapClass.style.top=this.ZdcMapTileToppx+"px";this.ZdcMapClass.style.width=this.ZdcMapTileWpx+"px";this.ZdcMapClass.style.height=this.ZdcMapTileHpx+"px";var _43a=Number(this.ZdcMapClipRect.Left)+Number(this.ZdcMapClipRect.Width);var _43b=Number(this.ZdcMapClipRect.Top)+Number(this.ZdcMapClipRect.Height);this.ZdcMapClass.style.clip="rect("+this.ZdcMapClipRect.Top+"px "+_43a+"px "+_43b+"px "+this.ZdcMapClipRect.Left+"px)";if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)!=0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)!=0){this.ZdcMapMode=1;}if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)==0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)==0){this.ZdcMapMode=2;}if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)!=0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)==0){this.ZdcMapMode=3;}if(ZdcCommon.Math_mod(this.ZdcTileLayerMaxI,2)==0&&ZdcCommon.Math_mod(this.ZdcTileLayerMaxJ,2)!=0){this.ZdcMapMode=4;}};ZdcSubMap.prototype.SetMapLocationAndScale=function(_43c,_43d,_43e){var obj=ZdcCommon.ll2pixel(_43c,_43d,_43e);var _440=obj.mesh;objlist=_440.split("_");this.SetMapImage(objlist[1],objlist[2],objlist[0]);var _441;var _442;switch(this.ZdcMapMode){case 1:_441=(this.ZdcTileWpx/2)-Number(obj.offx);_442=(this.ZdcTileHpx/2)-Number(obj.offy);break;case 2:_441=this.ZdcTileWpx-Number(obj.offx);_442=this.ZdcTileHpx-Number(obj.offy);break;case 3:_441=(this.ZdcTileWpx/2)-Number(obj.offx);_442=this.ZdcTileHpx-Number(obj.offy);break;case 4:_441=this.ZdcTileWpx-Number(obj.offx);_442=(this.ZdcTileHpx/2)-Number(obj.offy);break;default:_441=(this.ZdcTileWpx/2)-Number(obj.offx);_442=(this.ZdcTileHpx/2)-Number(obj.offy);break;}this.ZdcCenter.px=this.ZdcMapCenterpx.x-_441;this.ZdcCenter.py=this.ZdcMapCenterpx.y-_442;this.mx=_43c;this.my=_43d;this.s=_43e;this.SetCenterLL(this.mx,this.my);this.ZdcBaseXpx=_441;this.ZdcBaseYpx=_442;this.SetMapLayerPos(_441,_442);if(this.FirstInitMap||this.reflashMapFlg){this.FirstInitMap=false;}else{this.ZdcMapAccessLog("ChangeLocation");ZdcEvent.trigger(this,"scrollmapend");}this.reflashMapFlg=false;};ZdcSubMap.prototype.SetScale=function(opt){var obj=ZdcCommon.ll2pixel(this.mx,this.my,this.s);var _445=obj.mesh;objlist=_445.split("_");this.SetMapImage(objlist[1],objlist[2],objlist[0]);var _446;var _447;switch(this.ZdcMapMode){case 1:_446=(this.ZdcTileWpx/2)-Number(obj.offx);_447=(this.ZdcTileHpx/2)-Number(obj.offy);break;case 2:_446=this.ZdcTileWpx-Number(obj.offx);_447=this.ZdcTileHpx-Number(obj.offy);break;case 3:_446=(this.ZdcTileWpx/2)-Number(obj.offx);_447=this.ZdcTileHpx-Number(obj.offy);break;case 4:_446=this.ZdcTileWpx-Number(obj.offx);_447=(this.ZdcTileHpx/2)-Number(obj.offy);break;default:_446=(this.ZdcTileWpx/2)-Number(obj.offx);_447=(this.ZdcTileHpx/2)-Number(obj.offy);break;}this.ZdcCenter.px=this.ZdcMapCenterpx.x-_446;this.ZdcCenter.py=this.ZdcMapCenterpx.y-_447;this.SetCenterLL(this.mx,this.my);this.ZdcBaseXpx=_446;this.ZdcBaseYpx=_447;this.SetMapLayerPos(_446,_447);ZdcEvent.trigger(this,"changezoomend");this.ZdcMapAccessLog("ChangeZoom");};ZdcSubMap.prototype.SetMapImage=function(_448,_449,_44a){_448=String(_448);_449=String(_449);if(ZdcCommon.StrCmp(_448.substr(0,1),"m")==0){var msw=_448.substr(1,ZdcCommon.StrLen(_448)-1);_448=(-1)*msw;}if(ZdcCommon.StrCmp(_449.substr(0,1),"m")==0){var msh=_449.substr(1,ZdcCommon.StrLen(_449)-1);_449=(-1)*msh;}this.ZdcTileCodeX=Number(_448);this.ZdcTileCodeY=Number(_449);var mx;var my;var _44f;switch(this.ZdcMapMode){case 1:var lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;var ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;case 2:var lx=Math.floor(this.ZdcTileLayerMaxI/2);var ly=Math.floor(this.ZdcTileLayerMaxJ/2);break;case 3:var lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;var ly=Math.floor(this.ZdcTileLayerMaxJ/2);break;case 4:var lx=Math.floor(this.ZdcTileLayerMaxI/2);var ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;default:var lx=Math.floor(this.ZdcTileLayerMaxI/2)+1;var ly=Math.floor(this.ZdcTileLayerMaxJ/2)+1;break;}for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){for(var i=1;i<=this.ZdcTileLayerMaxI;i++){mx=_448-lx+i;my=_449-j+ly;if(mx<0){mx="m"+Math.abs(mx);}if(my<0){my="m"+Math.abs(my);}_44f=_44a+"_"+mx+"_"+my+"_"+0+"_"+this.ZdcMapTypeOpt;var _454=ZdcCommon.ZdcMapServer+"img/tileerr.png";if(ZdcMap.AccessText=="10200000"){var _455=this.GetImageUrl(mx,my,_44a);this.ZdcTileLayer[j][i].innerHTML="<IMG src="+_455+" style='margin:0px;' galleryimg='no' alt='' onError=this.src='"+_454+"'>";}else{this.ZdcTileLayer[j][i].innerHTML="<IMG src="+ZdcCommon.ZdcMapLog+" style='margin:0px;' galleryimg='no' alt='' >";}this.ZdcTileLayer[j][i].style.overflow="hidden";this.ZdcTileLayer[j][i].id=_44f;}}};ZdcSubMap.prototype.SetCenterLL=function(x,y){var zpt=ZdcCommon.ConvertMSXY2LL(x,y,1);this.ZdcCenter.lon=zpt.lon;this.ZdcCenter.lat=zpt.lat;var pts=ZdcCommon.ConvertMSXY2LL(x,y,2);};ZdcSubMap.prototype.SetMapLayerPos=function(_45a,_45b){for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){for(var i=1;i<=this.ZdcTileLayerMaxI;i++){this.ZdcTileLayer[j][i].style.left=(_45a-(1*this.ZdcTileWpx)+(i*this.ZdcTileWpx))+"px";this.ZdcTileLayer[j][i].style.top=(_45b-(1*this.ZdcTileHpx)+(j*this.ZdcTileHpx))+"px";}}return;};ZdcSubMap.prototype.scrollMap=function(px,py,setp){if(this.OnScroll){return;}if(px==0&&py==0){return -1;}if(Math.abs(px)>2048||Math.abs(py)>2048){var _461=this.mx-Math.floor(px*ZdcZoom.map_defw[this.s]);var _462=this.my+Math.floor(py*ZdcZoom.map_defh[this.s]);this.SetMapLocationAndScale(_461,_462,this.s);}else{ZdcEvent.trigger(this,"scrollmapstart");this.CountScr=0;this.panTo(px,py,setp);}return 1;};ZdcSubMap.prototype.panTo=function(px,py,setp){if(setp==null){setp=null;}this.OnScroll=true;var _466=0;switch(this.CountScr){case 0:_466=4;break;case 1:_466=4;break;case 2:_466=4;break;case 3:_466=8;break;case 4:_466=16;break;case 5:_466=32;break;case 6:_466=64;break;case 7:_466=64;break;default:_466=0;break;}var nx=px/_466;var ny=py/_466;if(nx==0){var _469=1;}else{var _469=Math.abs(nx)/nx;}if(ny==0){var _46a=1;}else{var _46a=Math.abs(ny)/ny;}this.ZdcMapTileMoveX=Math.round((Math.abs(nx)))*_469;this.ZdcMapTileMoveY=Math.round((Math.abs(ny)))*_46a;this.ZdcMoveX=this.ZdcMapTileMoveX;this.ZdcMoveY=this.ZdcMapTileMoveY;ZdcEvent.trigger(this,"scrollmap");this.MoveMapByXY(this.ZdcMoveX,this.ZdcMoveY);this.ReSetMapBase();this.CountScr++;if(this.CountScr>this.CountScrMax){clearTimeout(this.TimeID);this.CountScr=0;this.OnScroll=false;if(setp!=null){this.mx=setp.mx;this.my=setp.my;this.SetCenterLL(this.mx,this.my);}ZdcEvent.trigger(this,"scrollmapend");this.ZdcMapAccessLog("scrollTo");return;}this.TimeID=setTimeout((function(){this.panTo(px,py,setp);}).bind(this),this.ScrSpeed);};ZdcSubMap.prototype.SetZoom=function(zm,opt){this.orgs=this.s;this.s=Number(this.s)+zm;if(this.s<this.zoomMin){this.s=this.zoomMin;}if(this.s>this.zoomMax){this.s=this.zoomMax;}if(this.orgs!=this.s){this.SetScale(opt);}};ZdcSubMap.prototype.MoveMapByXY=function(_46d,_46e){for(var j=1;j<=this.ZdcTileLayerMaxJ;j++){for(var i=1;i<=this.ZdcTileLayerMaxI;i++){this.ZdcTileLayer[j][i].style.top=(parseInt(this.ZdcTileLayer[j][i].style.top)+_46e)+"px";this.ZdcTileLayer[j][i].style.left=(parseInt(this.ZdcTileLayer[j][i].style.left)+_46d)+"px";}}};ZdcSubMap.prototype.ReSetMapBase=function(){var Xx,Yy;var ratx=1;var raty=1;this.OnSetMapBase=true;if(this.ZdcMoveY!=0){this.ZdcBaseYpx=this.ZdcBaseYpx+this.ZdcMoveY;this.ZdcCenter.py=this.ZdcCenter.py+this.ZdcMoveY;raty=Math.floor(Math.abs(this.ZdcBaseYpx/this.ZdcTileHpx))+1;}if(this.ZdcMoveX!=0){this.ZdcBaseXpx=this.ZdcBaseXpx+this.ZdcMoveX;this.ZdcCenter.px=this.ZdcCenter.px+this.ZdcMoveX;ratx=Math.floor(Math.abs(this.ZdcBaseXpx/this.ZdcTileWpx))+1;}if(this.CountScr==this.CountScrMax){if(this.ZdcBaseYpx>=this.ZdcTileHpx&&this.ZdcBaseXpx>=this.ZdcTileWpx&&this.ChgPg==0){Xx=this.ZdcTileCodeX-1*ratx;Yy=this.ZdcTileCodeY+1*raty;this.ZdcBaseXpx=this.ZdcBaseXpx-this.ZdcTileWpx*ratx;this.ZdcBaseYpx=this.ZdcBaseYpx-this.ZdcTileHpx*raty;this.ChgPg=1;}if(this.ZdcBaseYpx<=(-1*this.ZdcTileHpx)&&this.ZdcBaseXpx<=(-1*this.ZdcTileWpx)&&this.ChgPg==0){Xx=this.ZdcTileCodeX+1*ratx;Yy=this.ZdcTileCodeY-1*raty;this.ZdcBaseXpx=this.ZdcBaseXpx+this.ZdcTileWpx*ratx;this.ZdcBaseYpx=this.ZdcBaseYpx+this.ZdcTileHpx*raty;this.ChgPg=1;}if(this.ZdcBaseYpx>=this.ZdcTileHpx&&this.ZdcBaseXpx<=(-1*this.ZdcTileWpx)&&this.ChgPg==0){Xx=this.ZdcTileCodeX+1*ratx;Yy=this.ZdcTileCodeY+1*raty;this.ZdcBaseXpx=this.ZdcBaseXpx+this.ZdcTileWpx*ratx;this.ZdcBaseYpx=this.ZdcBaseYpx-this.ZdcTileHpx*raty;this.ChgPg=1;}if(this.ZdcBaseYpx<=(-1*this.ZdcTileHpx)&&this.ZdcBaseXpx>=this.ZdcTileWpx&&this.ChgPg==0){Xx=this.ZdcTileCodeX-1*ratx;Yy=this.ZdcTileCodeY-1*raty;this.ZdcBaseXpx=this.ZdcBaseXpx-this.ZdcTileWpx*ratx;this.ZdcBaseYpx=this.ZdcBaseYpx+this.ZdcTileHpx*raty;this.ChgPg=1;}if(this.ZdcBaseYpx<=(-1*this.ZdcTileHpx)&&this.ChgPg==0){Xx=this.ZdcTileCodeX;Yy=this.ZdcTileCodeY-1*raty;this.ZdcBaseYpx=this.ZdcBaseYpx+this.ZdcTileHpx*raty;this.ChgPg=1;}if(this.ZdcBaseYpx>=this.ZdcTileHpx&&this.ChgPg==0){Xx=this.ZdcTileCodeX;Yy=this.ZdcTileCodeY+1*raty;this.ZdcBaseYpx=this.ZdcBaseYpx-this.ZdcTileHpx*raty;this.ChgPg=1;}if(this.ZdcBaseXpx<=(-1*this.ZdcTileWpx)&&this.ChgPg==0){Xx=this.ZdcTileCodeX+1*ratx;Yy=this.ZdcTileCodeY;this.ZdcBaseXpx=this.ZdcBaseXpx+this.ZdcTileWpx*ratx;this.ChgPg=1;}if(this.ZdcBaseXpx>=this.ZdcTileWpx&&this.ChgPg==0){Xx=this.ZdcTileCodeX-1*ratx;Yy=this.ZdcTileCodeY;this.ZdcBaseXpx=this.ZdcBaseXpx-this.ZdcTileWpx*ratx;this.ChgPg=1;}}this.mx=Math.round(this.mx-this.ZdcMoveX*(ZdcZoom.map_defw[this.s]));this.my=Math.round(Number(this.my)+Number(this.ZdcMoveY*(ZdcZoom.map_defh[this.s])));this.SetCenterLL(this.mx,this.my);if(this.ChgPg!=0){this.ChgPg=0;this.SetMapImage(Xx,Yy,this.s);this.SetMapLayerPos(this.ZdcBaseXpx,this.ZdcBaseYpx);}this.OnSetMapBase=false;};ZdcSubMap.prototype.setMapLocation=function(p,s){if(s==null){s=this.s;}else{var orgs=this.s;}if(s<this.zoomMin||s>this.zoomMax){return -1;}if(p.mx==this.mx&&p.my==this.my&&s==null){return -1;}if(p.mx==this.mx&&p.my==this.my&&s==this.s){return -1;}if(p.mx!=this.mx||p.my!=this.my){var sfw=Math.round((this.mx-p.mx)/ZdcZoom.map_defw[this.s]);var sfh=Math.round((p.my-this.my)/ZdcZoom.map_defh[this.s]);this.lon=p.lon;this.lat=p.lat;this.mx=p.mx;this.my=p.my;this.s=s;if(this.FirstSynchroFlg){this.SetMapLocationAndScale(this.mx,this.my,this.s);}}if((orgs!=null)&&(this.s!=orgs)){ZdcEvent.trigger(this,"changezoomend");}};ZdcSubMap.prototype.setMapScale=function(s){if(s<this.zoomMin||s>this.zoomMax){return (-1);}if(this.s!=s){this.orgs=this.s;this.s=s;this.SetScale("zoom");}};ZdcSubMap.prototype.getMapWindowSize=function(){var _47b=new ZdcWindow();_47b.top=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"top"));_47b.left=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"left"));_47b.width=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"width"));_47b.height=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"height"));var blw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderLeftWidth"));var brw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderRightWidth"));var btw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderTopWidth"));var bbw=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"borderBottomWidth"));if(isNaN(blw)){blw=0;}if(isNaN(brw)){brw=0;}if(isNaN(btw)){btw=0;}if(isNaN(bbw)){bbw=0;}if(isNaN(_47b.top)){_47b.top=parseInt(this.ZdcMapBase.clientTop)-btw;}if(isNaN(_47b.left)){_47b.left=parseInt(this.ZdcMapBase.clientLeft)-blw;}if(isNaN(_47b.width)){_47b.width=parseInt(this.ZdcMapBase.clientWidth)+blw+brw;}if(isNaN(_47b.height)){_47b.height=parseInt(this.ZdcMapBase.clientHeight)+btw+bbw;}return _47b;};ZdcSubMap.prototype.getMapLocation=function(){var p=new ZdcPoint(this.mx,this.my,2);return p;};ZdcSubMap.prototype.getMapScale=function(){return this.s;};ZdcSubMap.prototype.getMapBoundBox=function(p,s){var box=new ZdcBox();if(p!=null&&s!=null){if(s<this.zoomMin||s>this.zoomMax){s=this.s;}box.minx=p.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.maxx=p.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.miny=p.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);box.maxy=p.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}else{if(p!=null&&s==null){box.minx=p.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.maxx=p.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.miny=p.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);box.maxy=p.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}else{if(p==null&&s!=null){box.minx=this.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.maxx=this.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[s]);box.miny=this.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);box.maxy=this.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}else{box.minx=this.mx-Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.maxx=this.mx+Math.round((this.ZdcMapWpx/2)*ZdcZoom.map_defw[this.s]);box.miny=this.my-Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);box.maxy=this.my+Math.round((this.ZdcMapHpx/2)*ZdcZoom.map_defh[this.s]);var p1=new ZdcPoint(box.minx,box.miny,2);var p2=new ZdcPoint(box.maxx,box.maxy,2);}}}box.minlon=p1.lon;box.minlat=p1.lat;box.maxlon=p2.lon;box.maxlat=p2.lat;return box;};ZdcSubMap.prototype.mapZoomIn=function(gap,opt){if(this.s==this.zoomMax){return -1;}if(gap==null){gap=1;}if(opt==null){opt="zoom";}this.SetZoom(gap,opt);return this.s;};ZdcSubMap.prototype.mapZoomOut=function(gap,opt){if(this.s==this.zoomMin){return -1;}if(gap==null){gap=1;}if(opt==null){opt="zoom";}this.SetZoom(-1*gap,opt);return this.s;};ZdcSubMap.prototype.scrollToCenter=function(p){if(this.getMapBoundBox().isContainPoint(p)){var _48b=Math.round((this.mx-p.mx)/ZdcZoom.map_defw[this.s]);var _48c=Math.round((p.my-this.my)/ZdcZoom.map_defh[this.s]);this.scrollMap(_48b,_48c);}else{this.SetMapLocationAndScale(p.mx,p.my,this.s);}return;};ZdcSubMap.prototype.openMap=function(){this.ZdcMapOpenImage.style.visibility="hidden";if(parseInt(this.ZdcMapBase.style.width)<parseInt(this.formatWidth)){this.ZdcMapBase.style.width=(parseInt(this.ZdcMapBase.style.width)+this.Sft_Width*(-1))+"px";this.ZdcMapBase.style.left=(parseInt(this.ZdcMapBase.style.left)+this.Sft_Left*(-1))+"px";}if(parseInt(this.ZdcMapBase.style.height)<parseInt(this.formatHeight)){this.ZdcMapBase.style.height=(parseInt(this.ZdcMapBase.style.height)+this.Sft_Height*(-1))+"px";this.ZdcMapBase.style.top=(parseInt(this.ZdcMapBase.style.top)+this.Sft_Top*(-1))+"px";}if(parseInt(this.ZdcMapBase.style.width)>parseInt(this.formatWidth)){this.ZdcMapBase.style.width=parseInt(this.formatWidth)+"px";this.ZdcMapBase.style.left=parseInt(this.formatLeft)+"px";this.ZdcMapBase.style.height=parseInt(this.formatHeight)+"px";this.ZdcMapBase.style.top=parseInt(this.formatTop)+"px";}if(parseInt(this.ZdcMapBase.style.height)>parseInt(this.formatHeight)){this.ZdcMapBase.style.width=parseInt(this.formatWidth)+"px";this.ZdcMapBase.style.left=parseInt(this.formatLeft)+"px";this.ZdcMapBase.style.height=parseInt(this.formatHeight)+"px";this.ZdcMapBase.style.top=parseInt(this.formatTop)+"px";}if(parseInt(this.ZdcMapBase.style.height)==parseInt(this.formatHeight)&&parseInt(this.ZdcMapBase.style.width)==parseInt(this.formatWidth)){this.MapCloseFlg=false;this.ZdcMapCloseImage.style.visibility="visible";if(this.pMap&&this.MapPosition==4){this.pMap.SetCopyrightOnMap();}this.ZdcMapWpx=this.formatWidth;this.ZdcMapHpx=this.formatHeight;this.ZdcMapToppx=this.formatTop;this.ZdcMapLeftpx=this.formatLeft;this.SetZoomImage(this.pMap,this.zoomopt,this.subzoomopt,this.subzoomopt2,this.subzoomopt3);this.InitMap(this.mx,this.my,this.s);return;}this.ZdcMapClass.style.cursor="hand";setTimeout((function(){this.openMap();}).bind(this),0);};ZdcSubMap.prototype.closeMap=function(){this.ZdcMapClass.style.cursor="hand";this.tmpBaseWidth=this.ZdcMapBase.style.width;this.tmpBaseHeight=this.ZdcMapBase.style.height;this.tmpBaseLeft=this.ZdcMapBase.style.left;this.tmpBaseTop=this.ZdcMapBase.style.top;if(this.MapPosition==1){if(parseInt(this.ZdcMapBase.style.width)>30){this.ZdcMapBase.style.width=(parseInt(this.ZdcMapBase.style.width)+this.Sft_Width)+"px";this.ZdcMapBase.style.left=(parseInt(this.ZdcMapBase.style.left)+this.Sft_Left)+"px";}if(parseInt(this.ZdcMapBase.style.height)>30){this.ZdcMapBase.style.height=(parseInt(this.ZdcMapBase.style.height)+this.Sft_Height)+"px";this.ZdcMapBase.style.top=(parseInt(this.ZdcMapBase.style.top)+this.Sft_Top)+"px";}if(parseInt(this.ZdcMapBase.style.width)<31){this.ZdcMapBase.style.width=this.StorageButtonSize+"px";}if(parseInt(this.ZdcMapBase.style.height)<31){this.ZdcMapBase.style.height=this.StorageButtonSize+"px";}}else{if(this.MapPosition==2){if(parseInt(this.ZdcMapBase.style.width)>30){this.ZdcMapBase.style.width=(parseInt(this.ZdcMapBase.style.width)+this.Sft_Width)+"px";this.ZdcMapBase.style.left=(parseInt(this.ZdcMapBase.style.left)+this.Sft_Left)+"px";}if(parseInt(this.ZdcMapBase.style.height)>30){this.ZdcMapBase.style.height=(parseInt(this.ZdcMapBase.style.height)+this.Sft_Height)+"px";}if(parseInt(this.ZdcMapBase.style.width)<31){this.ZdcMapBase.style.width=this.StorageButtonSize+"px";this.ZdcMapBase.style.left=(parseInt(this.tmpBaseWidth)+parseInt(this.tmpBaseLeft)-16)+"px";}if(parseInt(this.ZdcMapBase.style.height)<31){this.ZdcMapBase.style.height=this.StorageButtonSize+"px";}}else{if(this.MapPosition==3){if(parseInt(this.ZdcMapBase.style.width)>30){this.ZdcMapBase.style.width=(parseInt(this.ZdcMapBase.style.width)+this.Sft_Width)+"px";}if(parseInt(this.ZdcMapBase.style.height)>30){this.ZdcMapBase.style.height=(parseInt(this.ZdcMapBase.style.height)+this.Sft_Height)+"px";this.ZdcMapBase.style.top=(parseInt(this.ZdcMapBase.style.top)+this.Sft_Top)+"px";}if(parseInt(this.ZdcMapBase.style.width)<31){this.ZdcMapBase.style.width=this.StorageButtonSize+"px";}if(parseInt(this.ZdcMapBase.style.height)<31){this.ZdcMapBase.style.height=this.StorageButtonSize+"px";this.ZdcMapBase.style.top=(parseInt(this.tmpBaseHeight)+parseInt(this.tmpBaseTop)-16)+"px";}}else{if(this.MapPosition==4){if(parseInt(this.ZdcMapBase.style.width)>30){this.ZdcMapBase.style.width=(parseInt(this.ZdcMapBase.style.width)+this.Sft_Width)+"px";this.ZdcMapBase.style.left=(parseInt(this.ZdcMapBase.style.left)+this.Sft_Left)+"px";}if(parseInt(this.ZdcMapBase.style.height)>30){this.ZdcMapBase.style.height=(parseInt(this.ZdcMapBase.style.height)+this.Sft_Height)+"px";this.ZdcMapBase.style.top=(parseInt(this.ZdcMapBase.style.top)+this.Sft_Top)+"px";}if(parseInt(this.ZdcMapBase.style.width)<31){this.ZdcMapBase.style.width=this.StorageButtonSize+"px";this.ZdcMapBase.style.left=(parseInt(this.tmpBaseWidth)+parseInt(this.tmpBaseLeft)-16)+"px";}if(parseInt(this.ZdcMapBase.style.height)<31){this.ZdcMapBase.style.height=this.StorageButtonSize+"px";this.ZdcMapBase.style.top=(parseInt(this.tmpBaseHeight)+parseInt(this.tmpBaseTop)-16)+"px";}}}}}if(parseInt(this.ZdcMapBase.style.height)==this.StorageButtonSize&&parseInt(this.ZdcMapBase.style.width)==this.StorageButtonSize){this.MapCloseFlg=true;this.ZdcMapOpenImage.style.visibility="visible";this.ZdcMapCloseImage.style.visibility="hidden";if(this.pMap&&this.MapPosition==4){this.pMap.SetCopyrightOnMap();}return;}setTimeout((function(){this.closeMap();}).bind(this),0);};ZdcSubMap.prototype.dragOn=function(){this.ZdcDragStatus=true;};ZdcSubMap.prototype.dragOff=function(){this.ZdcDragStatus=false;};ZdcSubMap.prototype.getDragStatus=function(){return this.ZdcDragStatus;};ZdcSubMap.prototype.MouseClick=function(_48d){if(!document.all&&!ZdcCommon.isiPhone()){var p=ZdcEvent.GetEventPosition(_48d,this.ZdcMapBase);var x=p.x;var y=p.y;var d=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _492=x-Math.floor(d.x/2);var _493=Math.floor(d.y/2)-y;var mx=Math.floor(_492*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.floor(_493*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseClickX=x;this.MouseClickY=y;this.MouseCLon=pt.lon;this.MouseCLat=pt.lat;this.MouseCx=mx;this.MouseCy=my;this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;this.distw=Math.floor(d.x/2)-x;this.disth=Math.floor(d.y/2)-y;}if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"clickmapnodrag");}else{ZdcEvent.trigger(this,"clickmap");}if(ZdcCommon.isiPhone()){if(this.dblClick==true){if(this.OnScroll){return;}if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"dblclicknodragend");}else{this.scrollMap(this.Idistw,this.Idisth);ZdcEvent.trigger(this,"dblclickend");}}this.dblClick=true;this.timerId=setTimeout((function(){this.dblClick=false;}).bind(this),400);if(ZdcDrag.IsDragging()){}else{ZdcEvent.trigger(this,"mouseupmap");}ZdcEvent.trigger(this,"mouseovermap");}};ZdcSubMap.prototype.MouseClickZoomIn=function(_497){if(this.s<this.zoomMax){this.onlyzoomin=true;}this.setMapScale(eval(this.getMapScale())+1);ZdcEvent.stopPropagation(_497);return false;};ZdcSubMap.prototype.MouseClickZoomOut=function(_498){if(this.s>this.zoomMin){this.onlyzoomout=true;}this.setMapScale(eval(this.getMapScale())-1);ZdcEvent.stopPropagation(_498);return false;};ZdcSubMap.prototype.MouseClickOpen=function(_499){this.openMap();ZdcEvent.stopPropagation(_499);return false;};ZdcSubMap.prototype.MouseClickClose=function(_49a){this.ZdcMapBase.style.top=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"top"))+"px";this.ZdcMapBase.style.left=parseInt(ZdcEvent._getPropertyValue(this.ZdcMapBase,"left"))+"px";if(isNaN(this.ZdcMapBase.style.top)){this.ZdcMapBase.style.top=parseInt(this.ZdcMapBase.offsetTop)+"px";}if(isNaN(this.ZdcMapBase.style.left)){this.ZdcMapBase.style.left=parseInt(this.ZdcMapBase.offsetLeft)+"px";}this.closeMap();ZdcEvent.stopPropagation(_49a);return false;};ZdcSubMap.prototype.MouseMove=function(_49b){if(ZdcDrag.IsDragging()){ZdcEvent.trigger(this,"dragmap");return false;}var p=ZdcEvent.GetEventPosition(_49b,this.ZdcMapBase);var x=p.x;var y=p.y;var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _4a0=x-Math.floor(dr.x/2);var _4a1=Math.floor(dr.y/2)-y;var mx=Math.floor(_4a0*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.floor(_4a1*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;ZdcEvent.trigger(this,"mousemove");return false;};ZdcSubMap.prototype.MouseOver=function(){ZdcEvent.trigger(this,"mouseovermap");};ZdcSubMap.prototype.MouseOut=function(){ZdcEvent.trigger(this,"mouseoutmap");};ZdcSubMap.prototype.MouseDown=function(_4a5){if(_4a5.button==2){return;}var p=ZdcEvent.GetEventPosition(_4a5,this.ZdcMapBase);var x=p.x;var y=p.y;var d=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _4aa=x-Math.floor(d.x/2);var _4ab=Math.floor(d.y/2)-y;var mx=Math.floor(_4aa*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.floor(_4ab*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseClickX=x;this.MouseClickY=y;this.MouseCLon=pt.lon;this.MouseCLat=pt.lat;this.MouseCx=mx;this.MouseCy=my;this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;this.distw=Math.floor(d.x/2)-x;this.disth=Math.floor(d.y/2)-y;ZdcEvent.trigger(this,"dragmapstart");if(this.ZdcDragStatus){if(this.cursorflg==true){this.ZdcMapClass.style.cursor="url("+this.usercursor2+"), pointer";}else{if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-12.cur"+"), pointer";if(ZdcCommon.UserAgentIsSafari()){this.ZdcMapClass.style.cursor="move";}}else{if(document.all){this.ZdcMapClass.style.cursor="all-scroll";}else{this.ZdcMapClass.style.cursor="move";}}}this.MaddX=0;this.MaddY=0;if(ZdcCommon.isiPhone()){if(this.ZdcDragOx==0&&this.ZdcDragOy==0){this.ZdcDragOx=_4a5.touches[0].screenX;this.ZdcDragOy=_4a5.touches[0].screenY;}this.ZdcDragMx=_4a5.touches[0].screenX;this.ZdcDragMy=_4a5.touches[0].screenY;this.ZdcDragEx=_4a5.touches[0].screenX;this.ZdcDragEy=_4a5.touches[0].screenY;this.Idistw=Math.floor(d.x/2)-x;this.Idisth=Math.floor(d.y/2)-y;}else{if(this.ZdcDragOx==0&&this.ZdcDragOy==0){this.ZdcDragOx=_4a5.screenX;this.ZdcDragOy=_4a5.screenY;}this.ZdcDragMx=_4a5.screenX;this.ZdcDragMy=_4a5.screenY;this.ZdcDragEx=_4a5.screenX;this.ZdcDragEy=_4a5.screenY;}var now=new Date();this.ZdcDragTime=now.getTime();this.tmpWheelStatus=this.WheelStatus;if(this.WheelStatus){this.setWheelOff();}ZdcDrag.StartDragging(this,this.DraggingMap.bindAsEventListener(this),this.DraggingMapEnd.bindAsEventListener(this));}else{ZdcEvent.trigger(this,"mousedownmap");}return false;};ZdcSubMap.prototype.MouseDownZoom=function(_4b0){ZdcEvent.stopPropagation(_4b0);return false;};ZdcSubMap.prototype.MouseUp=function(_4b1){if(_4b1.button==2){return;}if(ZdcDrag.IsDragging()){return false;}else{ZdcEvent.trigger(this,"mouseupmap");}return false;};ZdcSubMap.prototype.ConTextMenu=function(_4b2){this.ZdcMapBase.oncontextmenu=function(){return false;};if(this.ZdcDragStatus==true){ZdcEvent.trigger(this,"clickmapright");}else{ZdcEvent.trigger(this,"clickmaprightnodrag");}};ZdcSubMap.prototype.MouseUpZoom=function(_4b3){ZdcEvent.trigger(this,"clickbutton");return false;};ZdcSubMap.prototype.MouseDblClick=function(_4b4){if(this.OnScroll){return;}if(document.all){var d=ZdcEvent.GetDivClientRect(this.ZdcMapBase);_4b6=Math.floor(d.x/2)-this.MouseClickX;_4b7=Math.floor(d.y/2)-this.MouseClickY;}else{var p=ZdcEvent.GetEventPosition(_4b4,this.ZdcMapBase);var x=p.x;var y=p.y;var d=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var _4b6=x-Math.floor(d.x/2);var _4b7=Math.floor(d.y/2)-y;var mx=Math.floor(_4b6*ZdcZoom.map_defw[this.s]+this.mx);var my=Math.floor(_4b7*ZdcZoom.map_defh[this.s]+this.my);var pt=ZdcCommon.ConvertMSXY2LL(mx,my,1);this.MouseLon=pt.lon;this.MouseLat=pt.lat;this.MouseMoveX=x;this.MouseMoveY=y;this.MouseMx=mx;this.MouseMy=my;_4b6=Math.floor(d.x/2)-x;_4b7=Math.floor(d.y/2)-y;}if(!this.ZdcDragStatus){ZdcEvent.trigger(this,"dblclicknodragend");}else{this.scrollMap(_4b6,_4b7);ZdcEvent.trigger(this,"dblclickend");}return;};ZdcSubMap.prototype.MouseDblClickZoom=function(_4be){ZdcEvent.stopPropagation(_4be);return false;};ZdcSubMap.prototype.DraggingMap=function(e){var now=new Date();var _4c1=now.getTime();var _4c2=Math.abs(this.ZdcDragTime-_4c1);this.ZdcDragTime=_4c1;if(document.all){this.ZdcDragMx=event.screenX;this.ZdcDragMy=event.screenY;}else{if(e){if(ZdcCommon.isiPhone()){this.ZdcDragMx=e.touches[0].screenX;this.ZdcDragMy=e.touches[0].screenY;}else{this.ZdcDragMx=e.screenX;this.ZdcDragMy=e.screenY;}}}var _4c3;if(_4c2>15){_4c3=1;}if(_4c2<=15&&_4c2>12){_4c3=32;}if(_4c2<=12&&_4c2>10){_4c3=64;}if(_4c2<=10&&_4c2>8){_4c3=128;}if(_4c2<=8&&_4c2>5){_4c3=356;}if(_4c2<=5&&_4c2>3){_4c3=368;}if(_4c2<=3){_4c3=512;}if(Math.abs(this.ZdcDragEx-this.ZdcDragMx)>_4c3||Math.abs(this.ZdcDragEy-this.ZdcDragMy)>_4c3){var sX=this.ZdcDragMx-this.ZdcDragEx;var sY=this.ZdcDragMy-this.ZdcDragEy;this.ZdcDragEx=this.ZdcDragMx;this.ZdcDragEy=this.ZdcDragMy;this.OnScroll=true;this.MoveMapByXY(sX,sY);this.OnScroll=false;this.MaddX=this.MaddX+sX;this.MaddY=this.MaddY+sY;if(Math.abs(this.MaddX)>(this.ZdcTileWpx)||Math.abs(this.MaddY)>(this.ZdcTileHpx)){this.MaddX=0;this.MaddY=0;this.ZdcMoveX=this.ZdcDragEx-this.ZdcDragOx;this.ZdcMoveY=this.ZdcDragEy-this.ZdcDragOy;this.CountScr=this.CountScrMax;this.ReSetMapBase();this.ZdcDragOx=this.ZdcDragEx;this.ZdcDragOy=this.ZdcDragEy;}this.DraggingMap();}return false;};ZdcSubMap.prototype.DraggingMapEnd=function(e){if(this.tmpWheelStatus){this.setWheelOn();}ZdcDrag.ClearDraging();if(document.all){this.ZdcDragMx=event.screenX;this.ZdcDragMy=event.screenY;}else{if(e){if(ZdcCommon.isiPhone()){}else{this.ZdcDragMx=e.screenX;this.ZdcDragMy=e.screenY;}}else{return;}}var sX=this.ZdcDragMx-this.ZdcDragEx;var sY=this.ZdcDragMy-this.ZdcDragEy;this.ZdcDragEx=this.ZdcDragMx;this.ZdcDragEy=this.ZdcDragMy;this.MoveMapByXY(sX,sY);this.ZdcMoveX=this.ZdcDragEx-this.ZdcDragOx;this.ZdcMoveY=this.ZdcDragEy-this.ZdcDragOy;this.CountScr=this.CountScrMax;this.ReSetMapBase();if(this.cursorflg==true){this.ZdcMapClass.style.cursor="url("+this.usercursor1+"), pointer";}else{if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}else{this.ZdcMapClass.style.cursor="default";}}if(this.ZdcDragOx!=this.ZdcDragEx||this.ZdcDragOy!=this.ZdcDragEy){this.ZdcMapAccessLog("DragMap");ZdcEvent.trigger(this,"dragmapend");}else{ZdcEvent.trigger(this,"clickmapnomove");}this.ZdcDragOx=0;this.ZdcDragOy=0;return false;};ZdcSubMap.prototype.ZdcMapAccessLog=function(txt){if(!this.SynchronizedFlg){var _4ca=this.ZdcMapAccess+txt+"_lon"+this.mx+"_lat"+this.my+"_scale"+this.s+"_mtype"+this.ZdcMapType+"&opt="+ZdcCommon.ZDC_OPT;this.ZdcHttp.request(_4ca,ZdcMap.getZdcMapAccesslog,10000);return;}};ZdcSubMap.prototype.setMouseCursor=function(type,url1,url2){if(ZdcCommon.UserAgentIsSafari()){return -1;}if(type=="users"){this.cursorflg=true;this.usercursor1=url1;this.usercursor2=url2;this.ZdcMapClass.style.cursor="url("+this.usercursor1+"), pointer";}else{if(type!="default"&&type!="hand"){return -1;}this.cursorflg=false;this.mousecursor=type;if(this.mousecursor=="hand"){this.ZdcMapClass.style.cursor="url("+ZdcCommon.ZdcMapServer+"/cursor/hand-11.cur"+"), pointer";}if(this.mousecursor=="default"){this.ZdcMapClass.style.cursor="default";}}};ZdcSubMap.prototype.setMapType=function(t,opt){if(this.ZdcMapTypeObj.server[t]!=null){this.ZdcMapType=t;if(opt!=null){this.ZdcMapTypeOpt=opt;}}else{return -1;}};ZdcSubMap.prototype.getMapType=function(){return this.ZdcMapType;};ZdcSubMap.prototype.reflashMap=function(){this.reflashMapFlg=true;this.SetMapLocationAndScale(this.mx,this.my,this.s);};ZdcSubMap.prototype.GetImageUrl=function(_4d0,_4d1,zoom){function FloatToInt(a){var b=1;if(a<0){b=-1;}return b*Math.floor(Math.abs(a));}G_LevelToTreeLevel=new Array();G_LevelToTreeLevel[18]=3;G_LevelToTreeLevel[17]=3;G_LevelToTreeLevel[16]=3;G_LevelToTreeLevel[15]=2;G_LevelToTreeLevel[14]=2;G_LevelToTreeLevel[13]=2;G_LevelToTreeLevel[12]=2;G_LevelToTreeLevel[11]=2;G_LevelToTreeLevel[10]=2;G_LevelToTreeLevel[9]=1;G_LevelToTreeLevel[8]=1;G_LevelToTreeLevel[7]=1;G_LevelToTreeLevel[6]=1;G_LevelToTreeLevel[5]=0;G_LevelToTreeLevel[4]=0;G_LevelToTreeLevel[3]=0;G_LevelToTreeLevel[2]=0;G_LevelToTreeLevel[1]=0;var _4d5,_4d6;_4d5=String(_4d0);_4d6=String(_4d1);if(ZdcCommon.StrCmp(_4d5.substr(0,1),"m")==0){var msw=_4d5.substr(1,ZdcCommon.StrLen(_4d5)-1);_4d5=(-1)*msw;}if(ZdcCommon.StrCmp(_4d6.substr(0,1),"m")==0){var msh=_4d6.substr(1,ZdcCommon.StrLen(_4d6)-1);_4d6=(-1)*msh;}var _4d9=new Number(_4d5);var _4da=new Number(_4d6);var nX=FloatToInt(ZdcZoom.OX+(_4d9+0.5)*ZdcZoom.PX*ZdcZoom.map_defw[zoom]);var nY=FloatToInt(ZdcZoom.OY+(_4da+0.5)*ZdcZoom.PY*(ZdcZoom.map_defh[zoom]));var nX1=FloatToInt(nX/3600/1000-100);nX-=FloatToInt((100+nX1)*3600*1000);var nX2=FloatToInt(nX*8/3600/1000);nX-=FloatToInt(nX2*3600*1000/8);var nX3=FloatToInt(nX*8*10/3600/1000);var nY1=FloatToInt(nY*3/2/3600/1000);nY-=FloatToInt(nY1*3600*1000*2/3);var nY2=FloatToInt(nY*3*8/2/3600/1000);nY-=FloatToInt(nY2*2*3600*1000/3/8);var nY3=FloatToInt(nY*3*8*10/2/3600/1000);var _4e3=""+nY1+nX1+nY2+nX2+nY3+nX3;var _4e4=G_LevelToTreeLevel[zoom];var _4e5=this.ZdcMapTypeObj.server[this.ZdcMapType]+zoom;if(_4e4>0){_4e5+="/"+_4e3.substr(0,4);if(_4e4>1){_4e5+="/"+_4e3.substr(4,2);if(_4e4>2){_4e5+="/"+_4e3.substr(6,2);}}}_4e5+="/";_4e5=_4e5+zoom+"_"+_4d0+"_"+_4d1+"."+this.ZdcMapTypeObj.ext[this.ZdcMapType];return _4e5;};ZdcSubMap.prototype.setParentMap=function(pMap,opt){var cMap=this;this.pMap=pMap;this.cMap=this;ZdcEvent.addListener(pMap,"dblclickend",function(){cMap.setMapLocation(pMap.getMapLocation());});ZdcEvent.addListener(pMap,"dragmapend",function(){cMap.setMapLocation(pMap.getMapLocation());});ZdcEvent.addListener(pMap,"scrollmapend",function(){cMap.setMapLocation(pMap.getMapLocation());});ZdcEvent.addListener(pMap,"clickmap",function(){cMap.setMapLocation(pMap.getMapLocation());});ZdcEvent.addListener(pMap,"resizeend",function(){if(!cMap.firstflg){opt=cMap.s-pMap.s;this.SetZoomImage(cMap,opt);this.firstflg=true;var _4e9=eval(this.getMapScale())+eval(opt);cMap.setMapScale(_4e9);cMap.setMapLocation(this.getMapLocation());this.firstflg=false;}});ZdcEvent.addListener(pMap,"changezoomend",function(){if(!cMap.firstflg){this.SetZoomImage(cMap,cMap.zoomopt);this.firstflg=true;var _4ea=eval(this.getMapScale())+eval(cMap.zoomopt);if(this.getMapScale()+cMap.zoomopt<=cMap.zoomMin){_4ea=cMap.zoomMin;}if(this.getMapScale()+cMap.zoomopt>cMap.zoomMax){_4ea=cMap.zoomMax;}cMap.setMapScale(_4ea);cMap.setMapLocation(this.getMapLocation());this.firstflg=false;}});};ZdcSubMap.prototype.SetZoomImage=function(pMap,opt1,opt2,opt3,opt4){var dr=ZdcEvent.GetDivClientRect(this.ZdcMapBase);var img=this.pMapRangeImageClear;var _4f2=this.pMapRangeInnerImageClear;var _4f3=this.ZdcMapZoomIn;var _4f4=this.ZdcMapZoomOut;var _4f5=this.ZdcMapOpen;var _4f6=this.ZdcMapClose;var _4f7=eval(pMap.getMapScale());var _4f8=eval(_4f7+opt1);if(_4f7==pMap.zoomMax){_4f8=this.getMapScale();}if(_4f8>this.zoomMax){_4f8=this.zoomMax;}if(_4f8<this.zoomMin){_4f8=this.zoomMin;}var _4f9=15-opt3;var _4fa=Math.floor(pMap.ZdcMapWpx*(ZdcZoom.map_defw[_4f7]/ZdcZoom.map_defw[_4f8]));var _4fb=Math.floor(pMap.ZdcMapHpx*(ZdcZoom.map_defh[_4f7]/ZdcZoom.map_defh[_4f8]));if(_4fa>2000){_4fa=2000;}if(_4fb>2000){_4fb=2000;}if((navigator.userAgent.match(/MSIE 6/))){this.ZdcpMapRangeImage.innerHTML="<IMG style='BORDER-BOTTOM: #7b68ff 2px outset; BORDER-LEFT: #7b68ff 2px outset; BORDER-TOP: #7b68ff 2px outset; BORDER-RIGHT: #7b68ff 2px outset' src="+this.pMapRangeInnerImageClear+" width="+_4fa+" height="+_4fb+">";this.ZdcMapClass.appendChild(this.ZdcpMapRangeInnerImage);this.ZdcpMapRangeInnerImage.style.zIndex="18";this.ZdcpMapRangeInnerImage.style.position="absolute";this.ZdcpMapRangeInnerImage.style.visibility="visible";this.ZdcpMapRangeInnerImage.style.backgroundColor="#7b68ff";this.ZdcpMapRangeInnerImage.style.filter="alpha(opacity=25)";this.ZdcpMapRangeInnerImage.style.mozOpacity="0.25";this.ZdcpMapRangeInnerImage.style.opacity="0.25";this.ZdcpMapRangeInnerImage.style.left=(this.ZdcMapCenterpx.x-Math.floor(_4fa/2))+"px";this.ZdcpMapRangeInnerImage.style.top=(this.ZdcMapCenterpx.y-Math.floor(_4fb/2))+"px";this.ZdcpMapRangeInnerImage.innerHTML="<img height="+_4fb+" width="+_4fa+" src="+this.pMapRangeInnerImageClear+">";}else{this.ZdcpMapRangeImage.innerHTML="<DIV style='border-bottom:2px #390088 solid; border-right:2px #390088 solid; border-top:2px #7b68ff solid; border-left:2px #7b68ff solid; width:"+(_4fa)+"px; height:"+(_4fb)+"px;'><DIV style='width:"+(_4fa)+"px; height:"+(_4fb)+"px; filter:alpha(opacity=25); -moz-pacity:0.25; opacity:0.25; background-color:#7b68ff;'></DIV>";}this.ZdcpMapRangeImage.style.zIndex="19";this.ZdcpMapRangeImage.style.visibility="visible";this.ZdcpMapRangeImage.style.left=(this.ZdcMapCenterpx.x-Math.floor(_4fa/2)-3)+"px";this.ZdcpMapRangeImage.style.top=(this.ZdcMapCenterpx.y-Math.floor(_4fb/2)-3)+"px";this.ZdcpMapRangeImage.style.borderBottom="1px #390088 solid";this.ZdcpMapRangeImage.style.borderRight="1px #390088 solid";this.ZdcpMapRangeImage.style.borderTop="1px #7b68ff solid";this.ZdcpMapRangeImage.style.borderLeft="1px #7b68ff solid";this.ZdcMapClass.appendChild(this.ZdcpMapRangeImage);if(opt2!=0){this.ZdcMapZoomInImage.style.zIndex="0";this.ZdcMapBase.appendChild(this.ZdcMapZoomInImage);this.ZdcMapZoomOutImage.style.zIndex="0";this.ZdcMapBase.appendChild(this.ZdcMapZoomOutImage);this.ZdcMapZoomInImage.style.visibility="visible";this.ZdcMapZoomOutImage.style.visibility="visible";switch(opt2){case 1:this.ZdcMapZoomInImage.style.left="18px";this.ZdcMapZoomInImage.style.top="1px";this.ZdcMapZoomOutImage.style.left="35px";this.ZdcMapZoomOutImage.style.top="1px";break;case 2:this.ZdcMapZoomInImage.style.left=(dr.x-50)+"px";this.ZdcMapZoomInImage.style.top="1px";this.ZdcMapZoomOutImage.style.left=(dr.x-33)+"px";this.ZdcMapZoomOutImage.style.top="1px";break;case 3:this.ZdcMapZoomInImage.style.left="18px";this.ZdcMapZoomInImage.style.top=(dr.y-17)+"px";this.ZdcMapZoomOutImage.style.left="35px";this.ZdcMapZoomOutImage.style.top=(dr.y-17)+"px";break;case 4:default:this.ZdcMapZoomInImage.style.left=(dr.x-50)+"px";this.ZdcMapZoomInImage.style.top=(dr.y-17)+"px";this.ZdcMapZoomOutImage.style.left=(dr.x-33)+"px";this.ZdcMapZoomOutImage.style.top=(dr.y-17)+"px";break;}this.ZdcMapZoomInImage.innerHTML="<IMG src="+_4f3+" width="+this.StorageButtonSize+" height="+this.StorageButtonSize+">";this.ZdcMapZoomOutImage.innerHTML="<IMG src="+_4f4+" width="+this.StorageButtonSize+" height="+this.StorageButtonSize+">";this.ZdcMapZoomInImage.style.position="absolute";this.ZdcMapZoomOutImage.style.position="absolute";}else{this.ZdcMapZoomInImage.style.visibility="hidden";this.ZdcMapZoomOutImage.style.visibility="hidden";}var _4fc=parseInt(ZdcEvent._getPropertyValue(pMap.ZdcMapBase,"width"));var _4fd=parseInt(ZdcEvent._getPropertyValue(pMap.ZdcMapBase,"height"));if(isNaN(_4fc)){_4fc=parseInt(pMap.ZdcMapBase.clientWidth);}if(isNaN(this.formatHeight)){_4fd=parseInt(pMap.ZdcMapBase.clientHeight);}pMap.Pnt=ZdcEvent._getClientPosition(pMap.ZdcMapBase);pMap.DocCenterX=parseInt(pMap.Pnt.x)+_4fc/2;pMap.DocCenterY=parseInt(pMap.Pnt.y)+_4fd/2;this.Pnt=ZdcEvent._getClientPosition(this.ZdcMapBase);this.DocCenterX=parseInt(this.Pnt.x)+this.formatWidth/2;this.DocCenterY=parseInt(this.Pnt.y)+this.formatHeight/2;if(pMap.DocCenterX>=this.DocCenterX&&pMap.DocCenterY>=this.DocCenterY){this.MapPosition=1;}if(pMap.DocCenterX<this.DocCenterX&&pMap.DocCenterY>=this.DocCenterY){this.MapPosition=2;}if(pMap.DocCenterX>=this.DocCenterX&&pMap.DocCenterY<this.DocCenterY){this.MapPosition=3;}if(pMap.DocCenterX<this.DocCenterX&&pMap.DocCenterY<this.DocCenterY){this.MapPosition=4;}if(this.MapPosition!=0){this.ZdcMapOpenImage.style.zIndex="0";this.ZdcMapBase.appendChild(this.ZdcMapOpenImage);this.ZdcMapCloseImage.style.zIndex="0";this.ZdcMapBase.appendChild(this.ZdcMapCloseImage);this.ZdcMapOpenImage.style.visibility="visible";this.ZdcMapCloseImage.style.visibility="visible";switch(this.MapPosition){case 1:this.ZdcMapOpenImage.style.left="1px";this.ZdcMapOpenImage.style.top="1px";this.ZdcMapCloseImage.style.left="1px";this.ZdcMapCloseImage.style.top="1px";break;case 2:this.ZdcMapOpenImage.style.left="1px";this.ZdcMapOpenImage.style.top="1px";this.ZdcMapCloseImage.style.left=(dr.x-17)+"px";this.ZdcMapCloseImage.style.top="1px";break;case 3:this.ZdcMapOpenImage.style.left="1px";this.ZdcMapOpenImage.style.top="1px";this.ZdcMapCloseImage.style.left="1px";this.ZdcMapCloseImage.style.top=(dr.y-17)+"px";break;case 4:default:this.ZdcMapOpenImage.style.left="1px";this.ZdcMapOpenImage.style.top="1px";this.ZdcMapCloseImage.style.left=(dr.x-17)+"px";this.ZdcMapCloseImage.style.top=(dr.y-17)+"px";break;}if(opt4!=false){this.ZdcMapOpenImage.innerHTML="<IMG src="+_4f5+" width="+this.StorageButtonSize+" height="+this.StorageButtonSize+">";this.ZdcMapCloseImage.innerHTML="<IMG src="+_4f6+" width="+this.StorageButtonSize+" height="+this.StorageButtonSize+">";this.ZdcMapOpenImage.style.position="absolute";this.ZdcMapCloseImage.style.position="absolute";if(this.MapCloseFlg==true){this.ZdcMapOpenImage.style.visibility="visible";this.ZdcMapCloseImage.style.visibility="hidden";}else{this.ZdcMapOpenImage.style.visibility="hidden";this.ZdcMapCloseImage.style.visibility="visible";}}this.Sft_Width=-30;this.Sft_Height=-30;switch(this.MapPosition){case 1:this.Sft_Left=0;this.Sft_Top=0;break;case 2:this.Sft_Left=30;this.Sft_Top=0;break;case 3:this.Sft_Left=0;this.Sft_Top=30;break;case 4:default:this.Sft_Left=30;this.Sft_Top=30;break;}}else{this.ZdcMapOpenImage.style.visibility="hidden";this.ZdcMapCloseImage.style.visibility="hidden";}this.ZdcpMapRangeImage.style.position="absolute";this.SetMapClip(opt3);};ZdcSubMap.prototype.ChangeZoomSubMapOnly=function(opt,pMap){var _500=eval(pMap.getMapScale()-this.getMapScale());var _501=pMap.getMapScale();var _502=_501-_500;if(_501==pMap.zoomMax){_502=this.getMapScale();}if(_502>this.zoomMax){_502=this.zoomMax;}if(_502<this.zoomMin){_502=this.zoomMin;}var _503=Math.floor(pMap.ZdcMapWpx*(ZdcZoom.map_defw[_501]/ZdcZoom.map_defw[_502]));var _504=Math.floor(pMap.ZdcMapHpx*(ZdcZoom.map_defh[_501]/ZdcZoom.map_defh[_502]));if(_503>2000){_503=2000;}if(_504>2000){_504=2000;}this.ZdcpMapRangeImage.style.left=(this.ZdcMapCenterpx.x-Math.floor(_503/2)-3)+"px";this.ZdcpMapRangeImage.style.top=(this.ZdcMapCenterpx.y-Math.floor(_504/2)-3)+"px";this.ZdcpMapRangeImage.style.borderBottom="1px #390088 solid";this.ZdcpMapRangeImage.style.borderRight="1px #390088 solid";this.ZdcpMapRangeImage.style.borderTop="1px #7b68ff solid";this.ZdcpMapRangeImage.style.borderLeft="1px #7b68ff solid";this.ZdcpMapRangeImage.style.zIndex="19";if((navigator.userAgent.match(/MSIE 6/))){this.ZdcpMapRangeImage.innerHTML="<IMG style='BORDER-BOTTOM: #7b68ff 2px outset; BORDER-LEFT: #7b68ff 2px outset; BORDER-TOP: #7b68ff 2px outset; BORDER-RIGHT: #7b68ff 2px outset' src="+this.pMapRangeInnerImageClear+" width="+_503+" height="+_504+">";this.ZdcMapClass.appendChild(this.ZdcpMapRangeInnerImage);this.ZdcpMapRangeInnerImage.style.zIndex="18";this.ZdcpMapRangeInnerImage.style.position="absolute";this.ZdcpMapRangeInnerImage.style.visibility="visible";this.ZdcpMapRangeInnerImage.style.backgroundColor="#7b68ff";this.ZdcpMapRangeInnerImage.style.filter="alpha(opacity=25)";this.ZdcpMapRangeInnerImage.style.mozOpacity="0.25";this.ZdcpMapRangeInnerImage.style.opacity="0.25";this.ZdcpMapRangeInnerImage.style.left=(this.ZdcMapCenterpx.x-Math.floor(_503/2))+"px";this.ZdcpMapRangeInnerImage.style.top=(this.ZdcMapCenterpx.y-Math.floor(_504/2))+"px";this.ZdcpMapRangeInnerImage.innerHTML="<img height="+_504+" width="+_503+" src="+this.pMapRangeInnerImageClear+">";}else{this.ZdcpMapRangeImage.innerHTML="<DIV style='border-bottom:2px #390088 solid; border-right:2px #390088 solid; border-top:2px #7b68ff solid; border-left:2px #7b68ff solid; width:"+(_503)+"px; height:"+(_504)+"px;'><DIV style='width:"+(_503)+"px; height:"+(_504)+"px; filter:alpha(opacity=25); -moz-pacity:0.25; opacity:0.25; background-color:#7b68ff;'></DIV>";}};ZdcSubMap.prototype.SetMapClip=function(opt){var _506=this.ZdcMapClipRect.Top+eval(opt);var _507=this.ZdcMapClipRect.Left+eval(opt);clipright=_507+eval(this.ZdcMapWpx)-eval(opt)*2;clipbottom=_506+eval(this.ZdcMapHpx)-eval(opt)*2;this.ZdcMapClass.style.clip="rect("+_506+"px "+clipright+"px "+clipbottom+"px "+_507+"px)";this.ZdcMapBorder.style.top=(eval(opt)-1)+"px";this.ZdcMapBorder.style.left=(eval(opt)-1)+"px";this.ZdcMapBorder.style.width=(this.ZdcMapWpx-eval(opt)*2+2)+"px";this.ZdcMapBorder.style.height=(this.ZdcMapHpx-eval(opt)*2+2)+"px";this.ZdcMapBorder2.style.top="1px";this.ZdcMapBorder2.style.left="1px";this.ZdcMapBorder2.style.width=(this.ZdcMapWpx-2)+"px";this.ZdcMapBorder2.style.height=(this.ZdcMapHpx-2)+"px";this.ZdcMapBorder3.style.top="0px";this.ZdcMapBorder3.style.left="0px";this.ZdcMapBorder3.style.width=this.ZdcMapWpx+"px";this.ZdcMapBorder3.style.height=this.ZdcMapHpx+"px";};ZdcSubMap.prototype.setClose=function(pMap){if(pMap==null){return;}var cMap=this;this.pMap=pMap;this.cMap=this;this.ZdcMapClass.style.cursor="hand";this.tmpBaseWidth=this.ZdcMapBase.style.width;this.tmpBaseHeight=this.ZdcMapBase.style.height;this.tmpBaseLeft=this.ZdcMapBase.style.left;this.tmpBaseTop=this.ZdcMapBase.style.top;this.formatTop=parseInt(this.tmpBaseTop);this.formatLeft=parseInt(this.tmpBaseLeft);if(isNaN(this.formatTop)){this.formatTop=parseInt(this.ZdcMapBase.offsetTop);}if(isNaN(this.formatLeft)){this.formatLeft=parseInt(this.ZdcMapBase.offsetLeft);}var _50a=parseInt(ZdcEvent._getPropertyValue(this.pMap.ZdcMapBase,"width"));var _50b=parseInt(ZdcEvent._getPropertyValue(this.pMap.ZdcMapBase,"height"));if(isNaN(_50a)){basewidth=parseInt(this.pMap.ZdcMapBase.clientWidth);}if(isNaN(_50b)){baseheight=parseInt(this.pMap.ZdcMapBase.clientHeight);}this.pMap.Pnt=ZdcEvent._getClientPosition(this.pMap.ZdcMapBase);this.pMap.DocCenterX=parseInt(this.pMap.Pnt.x)+_50a/2;this.pMap.DocCenterY=parseInt(this.pMap.Pnt.y)+_50b/2;this.Pnt=ZdcEvent._getClientPosition(this.ZdcMapBase);this.DocCenterX=parseInt(this.Pnt.x)+parseInt(this.tmpBaseWidth)/2;this.DocCenterY=parseInt(this.Pnt.y)+parseInt(this.tmpBaseHeight)/2;if(this.pMap.DocCenterX>=this.DocCenterX&&this.pMap.DocCenterY>=this.DocCenterY){this.MapPosition=1;this.ZdcMapBase.style.width=this.StorageButtonSize+"px";this.ZdcMapBase.style.height=this.StorageButtonSize+"px";}if(this.pMap.DocCenterX<this.DocCenterX&&this.pMap.DocCenterY>=this.DocCenterY){this.MapPosition=2;this.ZdcMapBase.style.width=this.StorageButtonSize+"px";this.ZdcMapBase.style.left=(parseInt(this.tmpBaseWidth)+parseInt(this.tmpBaseLeft)-16)+"px";this.ZdcMapBase.style.height=this.StorageButtonSize+"px";}if(this.pMap.DocCenterX>=this.DocCenterX&&this.pMap.DocCenterY<this.DocCenterY){this.MapPosition=3;this.ZdcMapBase.style.width=this.StorageButtonSize+"px";this.ZdcMapBase.style.height=this.StorageButtonSize+"px";this.ZdcMapBase.style.top=(parseInt(this.tmpBaseHeight)+parseInt(this.tmpBaseTop)-16)+"px";}if(this.pMap.DocCenterX<this.DocCenterX&&this.pMap.DocCenterY<this.DocCenterY){this.MapPosition=4;this.ZdcMapBase.style.width=this.StorageButtonSize+"px";this.ZdcMapBase.style.left=(parseInt(this.tmpBaseWidth)+parseInt(this.tmpBaseLeft)-16)+"px";this.ZdcMapBase.style.height=this.StorageButtonSize+"px";this.ZdcMapBase.style.top=(parseInt(this.tmpBaseHeight)+parseInt(this.tmpBaseTop)-16)+"px";}this.MapCloseFlg=true;this.ZdcMapOpenImage.style.visibility="visible";this.ZdcMapCloseImage.style.visibility="hidden";this.pMap.SetCopyrightOnMap();};function ZdcUserRouteLayer(opt){this.result=null;this.LinkLayer=new ZdcShape.Layer();this.IconLayer=new ZdcUserLayer(opt);this.IconLayer.setLayerScale(1,18);this.IconLayer.setLayerType("manual");this.IconLayer.LayerID=-1;}ZdcUserRouteLayer.prototype.SetRouteResult=function(r){if(r.status!=0){return false;}this.result=r;return true;};ZdcMap.prototype.getShapeLayer=ZdcMap.prototype.getShapeLayerById;ZdcMap.prototype.addShapeLayer=function(_50e){var id=0;var k=0;var tail=true;for(k=0;k<this.ZdcShapeLayer.length;k++){if(this.ZdcShapeLayer[k]==_50e){return -1;}}for(k=0;k<this.ZdcShapeLayer.length;k++){if(this.ZdcShapeLayer[k].layerID>k){id=k;tail=false;break;}}if(tail){_50e.layerID=this.ZdcShapeLayer.length;this.ZdcShapeLayer[_50e.layerID]=_50e;}else{var t=this.ZdcShapeLayer;_50e.layerID=id;this.ZdcShapeLayer=[];for(k=0;k<id;k++){this.ZdcShapeLayer[k]=t[k];}this.ZdcShapeLayer[id]=_50e;for(k=id;k<t.length;k++){this.ZdcShapeLayer[k+1]=t[k];}t=[];}_50e.parent=this;_50e.InitCavas();_50e.InitShapes();return _50e.layerID;};ZdcMap.prototype.removeShapeLayerById=function(id){var k;for(k=0;k<this.ZdcShapeLayer.length;k++){if(this.ZdcShapeLayer[k].layerID==id){var _515=this.ZdcShapeLayer[k];_515.clearShapes();_515.RemoveDom();_515.parent=null;var t=this.ZdcShapeLayer;this.ZdcShapeLayer=[];for(var j=0;j<t.length;j++){if(k==j){continue;}this.ZdcShapeLayer[this.ZdcShapeLayer.length]=t[j];}return true;}}return false;};ZdcMap.prototype.removeShapeLayer=function(_518){return this.removeShapeLayerById(_518.layerID);};ZdcMap.prototype.clearShapeLayer=function(){for(var k=0;k<this.ZdcShapeLayer.length;k++){var _51a=this.ZdcShapeLayer[k];_51a.clearShapes();_51a.RemoveDom();_51a.parent=null;}this.ZdcShapeLayer=[];};ZdcMap.prototype.getShapeLayerById=function(id){for(var k=0;k<this.ZdcShapeLayer.length;k++){if(this.ZdcShapeLayer[k].layerID==id){return this.ZdcShapeLayer[k];}}return null;};ZdcMap.prototype.getShapeLayerID=function(l){for(var k=0;k<this.ZdcShapeLayer.length;k++){if(l==this.ZdcShapeLayer[k]){return k;}}return -1;};ZdcMap.prototype.RedrawShapeLayer=function(a,_520){var d=_520||0;var id=a||"";if(!d){if(!id){for(var k=0;k<this.ZdcShapeLayer.length;k++){if(this.ZdcShapeLayer[k].hiddenflg==false){this.ZdcShapeLayer[k].redraw();}}}else{if(id>=0&&id<this.ZdcShapeLayer.length){if(this.ZdcShapeLayer[id].hiddenflg==false){this.ZdcShapeLayer[id].redraw();}}}}else{setTimeout((function(){this.RedrawShapeLayer(id);}).bind(this),_520);}};ZdcMap.prototype.UpdateShapeLayer=function(){for(var k=0;k<this.ZdcShapeLayer.length;k++){if(this.ZdcShapeLayer[k].hiddenflg==true){break;}var _525=this.ZdcShapeLayer[k];var ptLB=new ZdcPixel(parseInt(_525.doc.style.left),parseInt(_525.doc.style.top)+_525.height);var ptRT=new ZdcPixel(parseInt(_525.doc.style.left)+_525.width,parseInt(_525.doc.style.top));var tpt=this.convertPixel2Point(ptLB);var _529=new ZdcPoint(tpt.lon,tpt.lat);tpt=this.convertPixel2Point(ptRT);var _52a=new ZdcPoint(tpt.lon,tpt.lat);var _52b=new ZdcBox(_529,_52a);if(_52b.isContainBox(this.getMapBoundBox())>1){this.RedrawShapeLayer("",100);break;}}};ZdcMap.prototype.MoveShapeLayerByXY=function(x,y){for(var k=0;k<this.ZdcShapeLayer.length;k++){var _52f=this.ZdcShapeLayer[k];var _530,ntop;if(document.all){ntop=_52f.doc.style.pixelTop+y;_530=_52f.doc.style.pixelLeft+x;}else{ntop=parseInt(_52f.doc.style.top)+y;_530=parseInt(_52f.doc.style.left)+x;}_52f.doc.style.left=_530+"px";_52f.doc.style.top=ntop+"px";}};ZdcMap.prototype.addPRouteSearch=function(prs){this.objPRouteSearch=prs;this.objPRouteSearch.objMap=this;};ZdcMap.prototype.removePRouteSearch=function(){if(this.objPRouteSearch){this.objPRouteSearch.clearRoute();this.objPRouteSearch.objMap=null;}this.objPRouteSearch=null;};ZdcMap.prototype.getPRouteSearch=function(){if(!this.objPRouteSearch){this.objPRouteSearch=null;}return this.objPRouteSearch;};ZdcMap.prototype.EndHSearchRouteHandler=function(){if(!this.objHRouteSearch||!this.objHRouteSearch.getResult()){return;}var _533=new ZdcUserRouteLayer();_533.DetailIconLayer=new ZdcUserLayer();_533.DetailIconLayer.setLayerScale(7,18);_533.DetailIconLayer.setLayerType("manual");_533.DetailIconLayer.LayerID=-1;_533.SetRouteResult(this.objHRouteSearch.getResult());this.AddHRouteLayer(_533);};ZdcMap.prototype.addHRouteSearch=function(rs){this.objHRouteSearch=rs;this.objHRouteSearch.objMap=this;};ZdcMap.prototype.removeHRouteSearch=function(){if(this.objHRouteSearch){this.objHRouteSearch.objMap=null;}this.objHRouteSearch=null;this.ClearHRouteLayer();};ZdcMap.prototype.getHRouteSearch=function(){if(!this.objHRouteSearch){this.objHRouteSearch=null;}return this.objHRouteSearch;};ZdcMap.prototype.ClearHRouteLayer=function(type){if(!this.ZdcHRouteLayer){return;}this.removeShapeLayer(this.ZdcHRouteLayer.LinkLayer);this.ZdcHRouteLayer.LinkLayer=null;if(!type){if(this.ZdcHRouteLayer.IconLayer.LayerID>=0){this.removeUserLayerById(this.ZdcHRouteLayer.IconLayer.LayerID);this.ZdcHRouteLayer.IconLayer.LayerID=-1;}if(this.ZdcHRouteLayer.DetailIconLayer&&this.ZdcHRouteLayer.DetailIconLayer.LayerID>=0){this.removeUserLayerById(this.ZdcHRouteLayer.DetailIconLayer.LayerID);this.ZdcHRouteLayer.DetailIconLayer.LayerID=-1;}this.ZdcHRouteLayer.result=null;if(this.objHRouteSearch&&this.objHRouteSearch.result){this.objHRouteSearch.result.Clear();}}this.ZdcHRouteLayer=null;return;};ZdcMap.prototype.AddHRouteLayer=function(lyr){this.ZdcHRouteLayer=lyr;this.addShapeLayer(this.ZdcHRouteLayer.LinkLayer);this.ZdcHRouteLayer.LinkLayer.doc.style.zIndex="3997";var k;var mt=this;var icon,mrk;var _53b=decodeURIComponent("%E5%8C%BA%E9%96%93%E6%83%85%E5%A0%B1");var _53c=decodeURIComponent("%E5%8C%BA%E9%96%93%E5%90%8D%E7%A7%B0");var _53d=decodeURIComponent("%E5%88%86");var _53e=decodeURIComponent("%E5%8C%BA%E9%96%93%E6%97%85%E8%A1%8C%E6%99%82%E9%96%93");var _53f=decodeURIComponent("%E5%8C%BA%E9%96%93%E6%B8%8B%E6%BB%9E%E5%BA%A6");var _540=new Array(decodeURIComponent("%E9%A0%86%E8%AA%BF"),decodeURIComponent("%E6%B7%B7%E9%9B%91"),decodeURIComponent("%E6%B8%8B%E6%BB%9E"));if(this.ZdcHRouteLayer.IconLayer.LayerID==-1){this.ZdcHRouteLayer.IconLayer.clearMarker();if(this.ZdcHRouteLayer.result.options.iconDeparture){icon=this.ZdcHRouteLayer.result.options.iconDeparture;}else{icon=new ZdcIcon();icon.image=ZdcMapServer+"img/RouteStart.png";icon.printimage=ZdcMapServer+"img/RouteStart.gif";icon.size=new ZdcSize(54,36);icon.offset=new ZdcPixel(-4,-33);}mrk=new ZdcMarker(this.ZdcHRouteLayer.result.options.departurePoint,icon);mrk.setType("static");this.ZdcHRouteLayer.IconLayer.addMarker(mrk);if(this.ZdcHRouteLayer.result.options.iconArrival){icon=this.ZdcHRouteLayer.result.options.iconArrival;}else{icon=new ZdcIcon();icon.image=ZdcMapServer+"img/RouteEnd.png";icon.printimage=ZdcMapServer+"img/RouteEnd.gif";icon.size=new ZdcSize(54,36);icon.offset=new ZdcPixel(-4,-33);}mrk=new ZdcMarker(this.ZdcHRouteLayer.result.options.arrivalPoint,icon);mrk.setType("static");this.ZdcHRouteLayer.IconLayer.addMarker(mrk);this.ZdcHRouteLayer.IconLayer.LayerID=this.addUserLayer(this.ZdcHRouteLayer.IconLayer);this.ZdcHRouteLayer.IconLayer.doc.style.zIndex="3998";}if(this.ZdcHRouteLayer.DetailIconLayer&&this.ZdcHRouteLayer.DetailIconLayer.LayerID==-1){this.ZdcHRouteLayer.DetailIconLayer.clearMarker();icon=new ZdcIcon();var _541=1;var _542=new ZdcIcon();var _543=new ZdcIcon();var _544=new ZdcIcon();var _545=new ZdcIcon();var _546=new ZdcIcon();_543.offset=new ZdcPixel(-12,-9);_543.size=new ZdcSize(24,18);_543.image=ZdcMapServer+"img/RouteJct.png";_543.printimage=ZdcMapServer+"img/RouteJct.gif";_542.offset=new ZdcPixel(-9,-9);_542.size=new ZdcSize(18,18);_542.image=ZdcMapServer+"img/RouteIc.png";_542.printimage=ZdcMapServer+"img/RouteIc.gif";_544.offset=new ZdcPixel(-9,-9);_544.size=new ZdcSize(18,18);_544.image=ZdcMapServer+"img/RouteFt.png";_544.printimage=ZdcMapServer+"img/RouteFt.gif";_545.offset=new ZdcPixel(-9,-9);_545.size=new ZdcSize(18,18);_545.image=ZdcMapServer+"img/RouteSa.png";_545.printimage=ZdcMapServer+"img/RouteSa.gif";_546.offset=new ZdcPixel(-9,-9);_546.size=new ZdcSize(18,18);_546.image=ZdcMapServer+"img/RoutePa.png";_546.printimage=ZdcMapServer+"img/RoutePa.gif";for(var k=0;k<this.ZdcHRouteLayer.result.sections.length-1;k++){mrk=null;var x=this.ZdcHRouteLayer.result.sections[k].end_x;var y=this.ZdcHRouteLayer.result.sections[k].end_y;if(this.ZdcHRouteLayer.result.sections[k].section_type=="04"){mrk=new ZdcMarker(new ZdcPoint(x,y,2),_543);}else{if(this.ZdcHRouteLayer.result.sections[k].section_type=="03"){mrk=new ZdcMarker(new ZdcPoint(x,y,2),_542);}else{if(this.ZdcHRouteLayer.result.sections[k].section_type=="05"){mrk=new ZdcMarker(new ZdcPoint(x,y,2),_544);}else{if(this.ZdcHRouteLayer.result.sections[k].section_type=="06"){mrk=new ZdcMarker(new ZdcPoint(x,y,2),_545);}else{if(this.ZdcHRouteLayer.result.sections[k].section_type=="07"){mrk=new ZdcMarker(new ZdcPoint(x,y,2),_546);}else{if(this.ZdcHRouteLayer.result.sections[k].section_type=="01"){var _549=new ZdcIcon();_549.offset=new ZdcPixel(-9,-9);_549.size=new ZdcSize(18,18);_549.image=ZdcMapServer+"img/RouteP"+_541+".png";_549.printimage=ZdcMapServer+"img/RouteP"+_541+".gif";mrk=new ZdcMarker(new ZdcPoint(x,y,2),_549);_541++;}}}}}}this.ZdcHRouteLayer.DetailIconLayer.addMarker(mrk);var _54a=Number(this.ZdcHRouteLayer.result.sections[k].section_type);if(mrk&&_54a>=1&&_54a<=7){mrk.title=document.createTextNode(this.ZdcHRouteLayer.result.sections[k].section_name);mrk.node=document.createElement("DIV");mrk.node.innerHTML="<TABLE border=\"0\" width=\"200px\" height=\"30px\"><tr><td valign=\"center\" align=\"center\"><b>"+_53b+"</b></td></tr></table>"+"<TABLE border=\"1\" width=\"200px\">"+"<TR><TD style=\"font-size:10pt;\">"+_53c+"</TD><TD style=\"font-size:10pt;\">"+this.ZdcHRouteLayer.result.sections[k].section_name+"</TD></TR>"+"<TR><TD style=\"font-size:10pt;\">"+_53e+"</TD><TD style=\"font-size:10pt;\">"+this.ZdcHRouteLayer.result.sections[k].trip_time+_53d+"</TD></TR>"+"<TR><TD style=\"font-size:10pt;\">"+_53f+"</TD><TD style=\"font-size:10pt;\">"+_540[Number(this.ZdcHRouteLayer.result.sections[k].congestion)]+"</TD></TR>"+"</TABLE>";ZdcEvent.addListener(mrk,"mouseclickmarker",function(){if(mt.msgopenstatus){mt.closeMsgWindow();}mrk.openMsgWindow(this.Point,this.title,this.node,false);});}}this.ZdcHRouteLayer.DetailIconLayer.LayerID=this.addUserLayer(this.ZdcHRouteLayer.DetailIconLayer);this.ZdcHRouteLayer.DetailIconLayer.doc.style.zIndex="3999";}this.RedrawHRouteLayer();return;};ZdcMap.prototype.ResetHRouteLayer=function(){if(this.ZdcHRouteLayer==null){return;}var _54b=this.ZdcHRouteLayer.IconLayer;var _54c=this.ZdcHRouteLayer.DetailIconLayer;var k,j,i;var r=this.ZdcHRouteLayer.result;this.ClearHRouteLayer(1);for(k=0;k<r.sections.length;k++){l=r.sections[k];for(j=0;j<l.detail_links.length;j++){l.detail_links[j].idDom=-1;}for(j=0;j<l.simple2_links.length;j++){l.simple2_links[j].idDom=-1;}for(j=0;j<l.simple6_links.length;j++){l.simple6_links[j].idDom=-1;}}var _551=new ZdcUserRouteLayer();_551.SetRouteResult(r);_551.IconLayer=_54b;_551.DetailIconLayer=_54c;_54b=null;this.AddHRouteLayer(_551);};ZdcMap.prototype.RedrawHRouteLayer=function(){if(this.ZdcHRouteLayer==null||this.ZdcHRouteLayer.result==null||this.ZdcHRouteLayer.LinkLayer==null){return;}var _552=this.ZdcHRouteLayer.LinkLayer;var ptLB=new ZdcPixel(parseInt(_552.doc.style.left),parseInt(_552.doc.style.top)+_552.height);var ptRT=new ZdcPixel(parseInt(_552.doc.style.left)+_552.width,parseInt(_552.doc.style.top));var tpt=this.convertPixel2Point(ptLB);var _556=new ZdcPoint(tpt.lon,tpt.lat);tpt=this.convertPixel2Point(ptRT);var _557=new ZdcPoint(tpt.lon,tpt.lat);var _558=new ZdcBox(_556,_557);if(_558.isContainBox(this.getMapBoundBox())>1){this.ResetHRouteLayer();return;}var _559=this.ZdcHRouteLayer.LinkLayer;var box=this.getMapBoundBox();var r,p,k,jj,i,j,pxy,_562;var _563=this.ZdcHRouteLayer.result;r=_563.range;if(r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){return;}for(k=0;k<_563.sections.length;k++){r=_563.sections[k].range;if(r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{if(this.getMapScale()<=2){_562=_563.sections[k].simple2_links;}else{if(this.getMapScale()<=6){_562=_563.sections[k].simple6_links;}else{_562=_563.sections[k].detail_links;}}for(var m=0;m<_562.length;m++){l=_562[m];r=l.range;if(!l.idDom){l.idDom=-1;}if(l.idDom>0||r.minx>box.maxx||r.maxx<box.minx||r.miny>box.maxy||r.maxy<box.miny){}else{p=new ZdcShape.Polyline();for(i=0;i<l.points.length;i++){p.addPoint(new ZdcPoint(l.points[i].x,l.points[i].y,2));}p.strokeColor=this.objHRouteSearch.routeColor;p.strokeWeight=this.objHRouteSearch.routeWidth;p.opacity=this.objHRouteSearch.routeOpacity;l.idDom=this.ZdcHRouteLayer.LinkLayer.addShape(p)+1;}}}}};ZdcMap.prototype.addZdcKeyControl=function(){document.pMap=this;this.ZdcMapBase.onfocus=this.TabKeyOnFocus.bindAsEventListener(this);this.KeyBoardMoveSpeed=0;this.KeyBoardUpFlg=false;this.KeyBoardDownFlg=false;this.KeyBoardLeftFlg=false;this.KeyBoardRightFlg=false;this.KeyBoardFirstMove=true;this.KeyBoardAcceleration=30;this.KeyBoardMaxMoveSpeed=180;this.KeyBoardDirectionPoint=0;document.onmouseup=function(e){document.pMap.KeyBoardOn=false;};ZdcEvent.addListener(document.pMap,"scrollmapend",function(){this.KeyBoardOn=true;});ZdcEvent.addListener(document.pMap,"clickmap",function(){this.KeyBoardOn=true;});ZdcEvent.addListener(document.pMap,"clickmapnodrag",function(){this.KeyBoardOn=true;});document.onkeyup=function(e){document.pMap.ZdcKeyUp(e);};document.onkeydown=function(e){if(document.pMap.KeyBoardOn){if(document.all){event.returnValue=false;}else{if(e!=null){this.keycode=e.which;}if(this.keycode!=9&&!ZdcCommon.UserAgentIsSafari()){e.preventDefault();}}document.pMap.ZdcKeyDown(e);}else{return;}};};ZdcMap.prototype.ZdcKeyDown=function(e){if(e!=null){this.keycode=e.which;}else{this.keycode=event.keyCode;}switch(this.keycode){case 35:case 97:this.ScrollMapByDirection(-1,0);break;case 36:case 103:this.ScrollMapByDirection(1,0);break;case 33:case 105:this.ScrollMapByDirection(0,1);break;case 34:case 99:this.ScrollMapByDirection(0,-1);break;case 107:this.mapZoomIn(1);break;case 109:this.mapZoomOut(1);break;case 67:case 101:case 12:this.restoreMapLocation();break;case 38:case 104:if(!this.KeyBoardUpFlg){this.KeyBoardDirectionPoint+=1;}this.KeyBoardUpFlg=true;break;case 40:case 98:if(!this.KeyBoardDownFlg){this.KeyBoardDirectionPoint+=10;}this.KeyBoardDownFlg=true;break;case 37:case 100:if(!this.KeyBoardLeftFlg){this.KeyBoardDirectionPoint+=100;}this.KeyBoardLeftFlg=true;break;case 39:case 102:if(!this.KeyBoardRightFlg){this.KeyBoardDirectionPoint+=1000;}this.KeyBoardRightFlg=true;break;default:break;}if(RegExp("Safari").test(navigator.userAgent)&&RegExp("Version/5").test(navigator.userAgent)){switch(this.keycode){case 187:this.mapZoomIn(1);break;case 189:this.mapZoomOut(1);break;default:break;}}if((this.KeyBoardFirstMove==true)&&(this.KeyBoardDirectionPoint>0)&&this.ZdcDragStatus){if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOffDrag();}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="hidden";this.ZdcMsgHtml.shddoc.style.visibility="hidden";this.ZdcMsgHtml.docclose.style.visibility="hidden";this.ZdcMsgHtml.docwins.style.visibility="hidden";}this.ZdcKeyMove();this.KeyBoardFirstMove=false;}if(!ZdcCommon.UserAgentIsSafari()){if(this.keycode==9){if(document.all){event.returnValue=true;}else{}this.KeyBoardOn=false;}}};ZdcMap.prototype.ZdcKeyUp=function(e){if(e!=null){this.keycode=e.which;}else{this.keycode=event.keyCode;}switch(this.keycode){case 38:case 104:if(this.KeyBoardUpFlg){this.KeyBoardDirectionPoint-=1;}this.KeyBoardUpFlg=false;break;case 40:case 98:if(this.KeyBoardDownFlg){this.KeyBoardDirectionPoint-=10;}this.KeyBoardDownFlg=false;break;case 37:case 100:if(this.KeyBoardLeftFlg){this.KeyBoardDirectionPoint-=100;}this.KeyBoardLeftFlg=false;break;case 39:case 102:if(this.KeyBoardRightFlg){this.KeyBoardDirectionPoint-=1000;}this.KeyBoardRightFlg=false;break;default:break;}if((this.KeyBoardDirectionPoint==0)&&!this.KeyBoardFirstMove&&this.ZdcDragStatus){if(this.msgopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.SetMsgWindowOffDrag();}if(this.htmlopenstatus&&ZdcCommon.UserAgentIsFireFox()){this.ZdcMsgHtml.doc.style.visibility="visible";this.ZdcMsgHtml.shddoc.style.visibility="visible";if(this.ZdcMsgHtml.docclose.status){this.ZdcMsgHtml.docclose.style.visibility="visible";}else{this.ZdcMsgHtml.docclose.style.visibility="hidden";}if(this.ZdcMsgHtml.docwins.status){this.ZdcMsgHtml.docwins.style.visibility="visible";}else{this.ZdcMsgHtml.docwins.style.visibility="hidden";}}this.RedrawRouteLayer();this.RedrawHRouteLayer();this.UpdateShapeLayer();clearTimeout(this.TimeIDByKey);this.ZdcKeyMove("end");this.KeyBoardFirstMove=true;this.KeyBoardMoveSpeed=0;ZdcEvent.trigger(this,"scrollmapend");this.ZdcMapAccessLog("scrollTo");}};ZdcMap.prototype.ZdcKeyMove=function(opt){if(opt=="end"){return;}if(this.KeyBoardMoveSpeed<this.KeyBoardMaxMoveSpeed){this.KeyBoardMoveSpeed=this.KeyBoardMoveSpeed+this.KeyBoardAcceleration;this.ZdcMapTileMoveX=this.KeyBoardMoveSpeed;this.ZdcMapTileMoveY=this.KeyBoardMoveSpeed;}this.ZdcMoveX=Math.ceil(this.ZdcMapTileMoveX/3);this.ZdcMoveY=Math.ceil(this.ZdcMapTileMoveY/3);switch(this.KeyBoardDirectionPoint){case 101:break;case 1001:this.ZdcMoveX=this.ZdcMoveX*(-1);break;case 110:this.ZdcMoveY=this.ZdcMoveY*(-1);break;case 1010:this.ZdcMoveX=this.ZdcMoveX*(-1);this.ZdcMoveY=this.ZdcMoveY*(-1);break;case 1:this.ZdcMoveX=0;break;case 10:this.ZdcMoveX=0;this.ZdcMoveY=this.ZdcMoveY*(-1);break;case 100:this.ZdcMoveY=0;break;case 1000:this.ZdcMoveX=this.ZdcMoveX*(-1);this.ZdcMoveY=0;break;default:break;}if(this.KeyBoardDirectionPoint>0){this.MoveMapByXY(this.ZdcMoveX,this.ZdcMoveY);this.CountScr=this.CountScrMax;this.ReSetMapBase();if(this.addtilestatus){this.ZdcUserTileClass.ReSetMapBase();}}this.TimeIDByKey=setTimeout((function(){this.ZdcKeyMove();}).bind(this),80);};window.ZdcIcon=ZdcIcon;window.ZdcMarker=ZdcMarker;window.ZdcUserLayer=ZdcUserLayer;window.ZdcUserRouteLayer=ZdcUserRouteLayer;window.ZdcControl=ZdcControl;window.ZdcUserControl=ZdcUserControl;window.ZdcUserZoomControl=ZdcUserZoomControl;window.ZdcScaleBar=ZdcScaleBar;window.ZdcMapCenter=ZdcMapCenter;window.ZdcMapCenterInfoBox=ZdcMapCenterInfoBox;window.ZdcMsgWindow=ZdcMsgWindow;window.ZdcMsgHtml=ZdcMsgHtml;window.ZdcUserMsgWindow=ZdcUserMsgWindow;window.ZdcMapType=ZdcMapType;window.ZdcMap=ZdcMap;window.ZdcSubMap=ZdcSubMap;window.ZdcTooltip=ZdcTooltip;window.ZdcTileLayer=ZdcTileLayer;window.ZdcUserImageLayer=ZdcUserImageLayer;window.ZdcUserImageTile=ZdcUserImageTile;window.ZdcTrafficImageLayer=ZdcTrafficImageLayer;window.ZdcTrafficImageLv2Layer=ZdcTrafficImageLv2Layer;window.ZdcSnowImageLayer=ZdcSnowImageLayer;window.ZDC.ZdcIcon=ZdcIcon;window.ZDC.ZdcMarker=ZdcMarker;window.ZDC.ZdcUserLayer=ZdcUserLayer;window.ZDC.ZdcControl=ZdcControl;window.ZDC.ZdcUserControl=ZdcUserControl;window.ZDC.ZdcUserZoomControl=ZdcUserZoomControl;window.ZDC.ZdcScaleBar=ZdcScaleBar;window.ZDC.ZdcMapCenter=ZdcMapCenter;window.ZDC.ZdcMapCenterInfoBox=ZdcMapCenterInfoBox;window.ZDC.ZdcMsgWindow=ZdcMsgWindow;window.ZDC.ZdcMsgHtml=ZdcMsgHtml;window.ZDC.ZdcUserMsgWindow=ZdcUserMsgWindow;window.ZDC.ZdcMapType=ZdcMapType;window.ZDC.ZdcMap=ZdcMap;window.ZDC.ZdcSubMap=ZdcSubMap;window.ZDC.ZdcTooltip=ZdcTooltip;window.ZDC.ZdcTileLayer=ZdcTileLayer;window.ZDC.ZdcUserImageLayer=ZdcUserImageLayer;window.ZDC.ZdcUserImageTile=ZdcUserImageTile;window.ZDC.ZdcTrafficImageLayer=ZdcTrafficImageLayer;window.ZDC.ZdcTrafficImageLv2Layer=ZdcTrafficImageLv2Layer;window.ZDC.ZdcSnowImageLayer=ZdcSnowImageLayer;})();var err_msg = "";(function(){var _1=ZDC_SEARCHCGI+"/route/search_route.cgi";var _2="310";var _3=1000;var _4=300000;var _5=ZDC_SEARCHCGI+"/route/get_route_image.cgi";var _6=_2+"00000";var _7="\u4ea4\u5dee\u70b9\u540d";var _8="\u9053\u8def\u540d";var _9=new ZdcRouteIcon();var _a={"2":"etc","3":"jct","4":"cross","5":"cross3d","6":"distsign","8":"lane","9":"sa","10":"sa","11":"sa"};var _b={start:"start_1",end:"end_1","2":"is_1","3":"jct_1","4":"is_1","5":"is_1","6":"is_1","8":"is_1","9":"sa_1","10":"sa_1","11":"pa_1"};var _c={"8001":"\uff33\uff21","8002":"\uff30\uff21","8003":"\u30b8\u30e3\u30d1\u30f3\u30a8\u30ca\u30b8\u30fc","8004":"\u30bc\u30cd\u30e9\u30eb\u77f3\u6cb9","8005":"\u30ad\u30b0\u30ca\u30b9\u77f3\u6cb9","8006":"\u30b3\u30b9\u30e2\u77f3\u6cb9","8007":"\u662d\u548c\u30b7\u30a7\u30eb\u77f3\u6cb9","8008":"\u30e2\u30fc\u30d3\u30eb\u77f3\u6cb9","8009":"\u65e5\u77f3\u4e09\u83f1","8010":"\u51fa\u5149\u8208\u7523","8011":"\uff25\uff33\uff33\uff2f\u77f3\u6cb9","8012":"SOLATO","8014":"\u6e29\u6cc9","8015":"FAX","8016":"\u30a4\u30f3\u30d5\u30a9\u30e1\u30fc\u30b7\u30e7\u30f3","8017":"\u98a8\u5442","8018":"\u30b3\u30a4\u30f3\u30b7\u30e3\u30ef\u30fc","8019":"\u30b3\u30a4\u30f3\u30e9\u30f3\u30c9\u30ea\u30fc","8020":"\u30b3\u30a4\u30f3\u6d17\u8eca\u6a5f","8021":"\u30b3\u30fc\u30d2\u30fc","8022":"\u30c9\u30e9\u30c3\u30b0","8023":"\u30cf\u30a4\u30a6\u30a7\u30a4\u60c5\u5831\u30bf\u30fc\u30df\u30ca\u30eb","8024":"\u5bbf\u6cca\u65bd\u8a2d","8025":"\u90f5\u4fbf\u30dd\u30b9\u30c8","8026":"\u30ec\u30b9\u30c8\u30e9\u30f3","8027":"\u4f11\u61a9\u6240","8028":"\u8efd\u98df","8029":"\u8eab\u969c\u8005\u7528\u30c8\u30a4\u30ec","8030":"\u30d9\u30d3\u30fc\u30d9\u30c3\u30c9\u3001\u6388\u4e73\u5ba4","8031":"\u5b9d\u304f\u3058","8032":"\u540d\u7523","8033":"\u30ad\u30e3\u30c3\u30b7\u30e5\u30b3\u30fc\u30ca\u30fc","8034":"\u30c8\u30a4\u30ec","8035":"\u516c\u8846\u96fb\u8a71","8036":"\u9280\u884c","8037":"\u90f5\u4fbf\u5c40","8038":"\u30ab\u30fc\u30a8\u30cd\u30af\u30b9","8039":"\u5b9d\u30d5\u30ea\u30fc\u30c8","8040":"am/pm","8041":"D\u2019space","8042":"HighwayPit","8043":"ISM","8044":"ReSPOT","8045":"\u30b3\u30b3\u30b9\u30c8\u30a2","8046":"\u30b5\u30fc\u30af\u30eb\uff2b","8047":"\u30b5\u30f3\u30af\u30b9","8048":"\u30b9\u30ea\u30fc\u30a8\u30d5","8049":"\u30bb\u30a4\u30b3\u30fc\u30de\u30fc\u30c8","8050":"\u30bb\u30fc\u30d6\u30aa\u30f3","8051":"\u30bb\u30d6\u30f3\u30a4\u30ec\u30d6\u30f3","8052":"\u30c7\u30a4\u30ea\u30fc\u30e4\u30de\u30b6\u30ad","8053":"\u30cf\u30a4\u30a6\u30a7\u30a4\u5f69\u5bb6","8054":"\u30d5\u30a1\u30df\u30ea\u30fc\u30de\u30fc\u30c8","8055":"\u30dd\u30d7\u30e9","8056":"\u30df\u30cb\u30b9\u30c8\u30c3\u30d7","8057":"\u30e4\u30de\u30b6\u30adY\u30b7\u30e7\u30c3\u30d7","8058":"\u30ed\u30fc\u30bd\u30f3","8059":"\u30b3\u30f3\u30d3\u30cb\u30a8\u30f3\u30b9\u30b9\u30c8\u30a2"};var _d={etc:function(_e,_f,_10){var _11=_5+"?key="+_e+"&enc=SJIS&sid="+_f+"&rid="+_10+"&type=2";var _12="<table cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"width:180px;\">"+"<TR><TD>"+"<img name=\"image_guide\" border=\"0\" "+"src=\""+_11+"\">"+"</TD></TR></TABLE>"+"<BR>";return _12;},jct:function(_13,_14,_15){var _16=_5+"?key="+_13+"&enc=SJIS&sid="+_14+"&rid="+_15+"&pid=0&type=3";var _17=_5+"?key="+_13+"&enc=SJIS&sid="+_14+"&rid="+_15+"&pid=1&type=3";var _18="<table cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"width:180px;\">"+"<TR><TD background=\""+_16+"\">"+"<img name=\"image_guide\" border=\"0\" "+"src=\""+_17+"\">"+"</TD></TR></TABLE>"+"<BR>";return _18;},cross:function(_19,_1a,_1b){var _1c=_5+"?key="+_19+"&enc=SJIS&sid="+_1a+"&rid="+_1b+"&type=4";var _1d="<table cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"width:180px;\">"+"<TR><TD>"+"<img name=\"image_guide\" border=\"0\" "+"src=\""+_1c+"\">"+"</TD></TR></TABLE>"+"<BR>";return _1d;},cross3d:function(_1e,_1f,_20){var _21=_5+"?key="+_1e+"&enc=SJIS&sid="+_1f+"&rid="+_20+"&pid=0&type=5";var _22=_5+"?key="+_1e+"&enc=SJIS&sid="+_1f+"&rid="+_20+"&pid=1&type=5";var _23="<table cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"width:180px;\">"+"<TR><TD background=\""+_21+"\">"+"<img name=\"image_guide\" border=\"0\" "+"src=\""+_22+"\">"+"</TD></TR></TABLE>"+"<BR>";return _23;},distsign:function(_24,_25,_26){var _27=_5+"?key="+_24+"&enc=SJIS&sid="+_25+"&rid="+_26+"&pid=0&type=6";var _28=_5+"?key="+_24+"&enc=SJIS&sid="+_25+"&rid="+_26+"&pid=1&type=6";var _29="<table cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"width:160px;\">"+"<TR><TD background=\""+_27+"\">"+"<img name=\"image_guide\" border=\"0\" "+"src=\""+_28+"\">"+"</TD></TR></TABLE>"+"<BR>";return _29;},lane:function(_2a,_2b,_2c){var _2d=_5+"?key="+_2a+"&enc=SJIS&sid="+_2b+"&rid="+_2c+"&type=8";var _2e="<table cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"width:180px;\">"+"<TR><TD>"+"<img name=\"image_guide\" border=\"0\" "+"src=\""+_2d+"\">"+"</TD></TR></TABLE>"+"<BR>";return _2e;}};function ZdcRouteStopPoint(){this.point=null;this.type="0";this.name=null;}function ZdcRouteSearch(){this.obHttp=null;this.result=null;this.options=null;this.objMap=null;this.fcallback=null;this.urlRouteSearch=_1;this.urlRouteGetImage=_5;this.routeColor="#E8003C";this.routeStyle="solid";this.routeWidth=4;this.routeOpacity="0.65";this.tollColorTable={};this.routeColorTable={};this.routeStyleTable={};this.routeIconTable=_b;}ZdcRouteSearch.prototype.parseRouteData=function(_2f,_30){this.result=new ZdcRouteSearchResult();this.result.options=this.options;this.result.search=this;this.result.status=_30;if(_30==0){var req=ZdcXml.parse(_2f);if(req){this.ParseRouteXmlData(req);if(this.result&&(this.result.status==0)){if(this.fcallback){this.fcallback(this.getResult());}if(this.objMap&&this.objMap.EndSearchRouteHandler){this.objMap.EndSearchRouteHandler();}}}else{this.result.status=9;}}ZDC.ZdcEvent.trigger(this,"end",this.result);};ZdcRouteSearch.AbortHttpRequest=function(){if(this.obHttp){this.obHttp.abort();}};ZdcRouteSearch.prototype.reset=function(){this.options=null;this.obHttp=null;this.result=null;};ZdcRouteSearch.prototype.getResult=function(){return this.result;};ZdcRouteSearch.prototype.getMap=function(){return this.objMap;};ZdcRouteSearch.prototype.addEventHandler=function(key,_33,_34){ZDC.ZdcEvent.bind(this,key,this,_33);};ZdcRouteSearch.prototype.clearEventHandler=function(key){ZdcEvent.clearListeners(this,key);};ZdcRouteSearch.prototype.abort=function(){var req=this.obHttp;if(req&&(req.readyState!=4)){req.abort();}};ZdcRouteSearch.prototype.getRouteColor=function(_37,_38){var t=String(_37);var _3a=this.routeColorTable[t];if(_38=="1"){var _3b=this.tollColorTable[t];}else{var _3b=false;}return _3b?_3b:_3a?_3a:this.routeColor;};ZdcRouteSearch.prototype.tollColorOn=function(){this.routeColorTable={"0":"#00b818","1":"#00b818","2":"#00b818","3":"#00b818","4":"#00b818","5":"#00b818","6":"#00b818","7":"#00b818","8":"#00b818","9":"#00b818","10":"#00b818","15":"#00b818"};this.tollColorTable={"0":"#4060e8","1":"#4060e8","2":"#4060e8","3":"#4060e8","4":"#4060e8","5":"#4060e8","6":"#4060e8","7":"#4060e8","8":"#4060e8","9":"#4060e8","10":"#4060e8","15":"#4060e8"};};ZdcRouteSearch.prototype.getRouteStyle=function(_3c){var t=String(_3c);var _3e=this.routeStyleTable[t];return _3e?_3e:this.routeStyle;};ZdcRouteSearch.prototype.showWholeRoute=ZdcCommon.prototype.showWholeRoute;ZdcRouteSearchResult.prototype.getLinkCount=function(_3f){if(this.status!==0){return 0;}if((!_3f)||(_3f==0)){return this.links.length;}else{var _40=0;for(var k=0;k<this.links.length;k++){_40+=this.links[k].ld.length;}return _40;}};ZdcRouteSearchResult.prototype.getRouteIcon=function(_42){var t=String(_42);var _44=this.search.routeIconTable[t]?this.search.routeIconTable[t]:_b[t];var _45=_9.getIcon(_44);return _45?_45:null;};ZdcRouteSearchResult.prototype.getLinkMarker=function(_46){if(_46=="start"){return new ZdcMarker(this.options.departurePoint,this.getRouteIcon("start"),"static");}if(_46=="end"){return new ZdcMarker(this.options.arrivalPoint,this.getRouteIcon("end"),"static");}var _47=this.links[_46].guideType;if(_47===null){return null;}switch(Number(_47)){case 9:case 10:case 11:return this.markerSAPA(_46);case 2:case 3:case 4:case 5:case 6:case 8:return this.markerCross(_46);default:return null;}};ZdcRouteSearchResult.prototype.markerCross=function(_48){var _49=this.links[_48];var _4a="";for(var _4b in _49.guideAll){var get=_a[_49.guideAll[_4b]];if(get){_4a+=_d[_a[_49.guideAll[_4b]]](this.options.keyAPI,this.searchID,_49.id);}}_4a+="<BR>"+"<TABLE border=\"1\" style=\"width:180px;\">"+"<TR><TD width=35% style=\"font-size:10pt;\">"+_8+"</TD><TD style=\"font-size:10pt;\">"+_49.roadName+"</TD></TR>"+"<TR><TD style=\"font-size:10pt;\">"+_7+"</TD><TD style=\"font-size:10pt;\">"+_49.crossName+"</TD></TR>"+"</TABLE>";var _4d=new ZdcMarker(new ZdcPoint(_49.ld[0].x[0],_49.ld[0].y[0],2),this.getRouteIcon(_49.guideType));_4d.title=document.createTextNode(_49.crossName);_4d.node=document.createElement("DIV");_4d.node.innerHTML=_4a;return _4d;};ZdcRouteSearchResult.prototype.markerSAPA=function(_4e){var _4f="\u7279\u5fb4";var _50="\u304a\u3059\u3059\u3081\u30e1\u30cb\u30e5\u30fc";var _51="\u304a\u571f\u7523";var _52="\u30b5\u30fc\u30d3\u30b9";var _53=this.links[_4e];var _54=_53.sapaServiceCode;var _55=[];for(var i=0;i<_54.length;i++){if(_c[_54[i]]){_55[i]=_c[_54[i]];}}var _57=_55.join(",");var _58="<p>"+_53.crossName+"</p>"+"<TABLE border=\"1\" style=\"width:180px;table-layout: fixed;\">"+"<TR>"+"<TD width=35% style=\"font-size:9pt;\">"+_4f+"</TD>"+"<TD style=\"font-size:9pt;\">"+(_53.sapaText1||"")+"</TD>"+"</TR>"+"<TR>"+"<TD style=\"font-size:9pt;\">"+_50+"</TD>"+"<TD style=\"font-size:9pt;\">"+(_53.sapaText2||"")+"</TD>"+"</TR>"+"<TR>"+"<TD style=\"font-size:9pt;\">"+_51+"</TD>"+"<TD style=\"font-size:8pt;\">"+(_53.sapaText3||"")+"</TD>"+"</TR>"+"<TR>"+"<TD style=\"font-size:9pt;\">"+_52+"</TD>"+"<TD style=\"font-size:9pt;\">"+_57+"</TD>"+"</TR>"+"</TABLE>";var _59=new ZdcMarker(new ZdcPoint(_53.ld[0].x[0],_53.ld[0].y[0],2),this.getRouteIcon(_53.guideType));_59.title=document.createTextNode(_53.crossName);_59.node=document.createElement("DIV");_59.node.innerHTML=_58;return _59;};function getValue(dom,tag){var _5c=dom.getElementsByTagName(tag);if(_5c[0]&&0<_5c[0].childNodes.length){return _5c[0].childNodes[0].nodeValue;}return null;}function ZdcRouteSearchOptions(){this.keyAPI=ZDC_KEY;this.departurePoint=null;this.departurePointName=null;this.arrivalPoint=null;this.arrivalPointName=null;this.stops=[];this.timeout=60000;this.pointFlg=2;this.chg="1";this.dtf="1";this.str="0";this.vt="1";this.gcf="";this.showMarker=true;this.guideType={};this.sic="0";}function ZdcRouteSearchResult(){this.searchID=null;this.status=0;this.options=null;this.distance=0;this.toll=0;this.tollFlag=0;this.routeExtent=null;this.range=[];this.links=[];this.intersections=[];this.search=null;}ZdcRouteSearchResult.prototype.Clear=function(){this.searchID=null;this.status=9;this.options=null;this.distance=0;this.toll=0;this.tollFlag=0;this.routeExtent=null;this.range=[];this.links=[];this.intersections=[];this.search=null;};ZdcRouteSearchResult.prototype.getLink=function(_5d,_5e){if(this.status!==0){return null;}if(!_5e){_5e=0;}if(_5d<0||_5d>=this.getLinkCount(_5e)){return null;}var _5f=[];var i,j,k;var c=0;if(_5e==0){_5f.id=this.links[_5d].id;_5f.roadName=this.links[_5d].roadName;_5f.roadType=this.links[_5d].roadType;_5f.direction=this.links[_5d].direction;_5f.distance=this.links[_5d].distance;_5f.crossName=this.links[_5d].crossName;_5f.guidType=this.links[_5d].guideType;_5f.guideType=this.links[_5d].guideType;_5f.toll=this.links[_5d].toll;_5f.guideAll=this.links[_5d].guideAll;_5f.toll_link=this.links[_5d].toll_link;_5f.lons=[];_5f.lats=[];for(k=0;k<this.links[_5d].ld.length;k++){for(j=0;j<this.links[_5d].ld[k].x.length;j++){if(this.options.pointFlg==1){_5f.lons[_5f.lons.length]=this.links[_5d].ld[k].x[j]*1/3600000;_5f.lats[_5f.lats.length]=this.links[_5d].ld[k].y[j]*1/3600000;}else{_5f.lons[_5f.lons.length]=this.links[_5d].ld[k].x[j];_5f.lats[_5f.lats.length]=this.links[_5d].ld[k].y[j];}}}var _64=this.links[_5d].sapaServiceCode;var _65=[];var _66=null;var _67=[];if(_64!=undefined){for(var i=0;i<_64.length;i++){if(_c[_64[i]]){_65[i]=_c[_64[i]];}}_66=_65.join(",");_67[0]=this.links[_5d].sapaText1;_67[1]=this.links[_5d].sapaText2;_67[2]=this.links[_5d].sapaText3;_67[3]=_66;_5f.sapainfo=_67;}}else{for(i=0;i<this.links.length;i++){if(_5d<(c+this.links[i].ld.length)){break;}else{c+=this.links[i].ld.length;}}k=_5d-c;_5f.id=this.links[i].ld[k].id;_5f.roadName=this.links[i].ld[k].roadName;_5f.roadType=this.links[i].ld[k].roadType;_5f.direction=this.links[i].ld[k].direction;_5f.distance=this.links[i].ld[k].distance;_5f.crossName=this.links[i].ld[k].crossName;_5f.guidType=this.links[i].ld[k].guideType;_5f.guideType=this.links[i].ld[k].guideType;_5f.toll=this.links[i].ld[k].toll;_5f.guideAll=this.links[i].ld[k].guideAll;_5f.toll_link=this.links[i].ld[k].toll_link;_5f.lons=[];_5f.lats=[];for(j=0;j<this.links[i].ld[k].x.length;j++){if(this.options.pointFlg==1){_5f.lons[_5f.lons.length]=this.links[i].ld[k].x[j]*1/3600000;_5f.lats[_5f.lats.length]=this.links[i].ld[k].y[j]*1/3600000;}else{_5f.lons[_5f.lons.length]=this.links[i].ld[k].x[j];_5f.lats[_5f.lats.length]=this.links[i].ld[k].y[j];}}var _64=this.links[i].ld[k].sapaServiceCode;var _65=[];var _66=null;var _67=[];if(_64!=undefined){for(var i=0;i<_64.length;i++){if(_c[_64[i]]){_65[i]=_c[_64[i]];}}_66=_65.join(",");_67[0]=this.links[_5d].sapaText1;_67[1]=this.links[_5d].sapaText2;_67[2]=this.links[_5d].sapaText3;_67[3]=_66;_5f.sapainfo=_67;}}return _5f;};ZdcRouteSearchResult.prototype.getGuideImage=function(rid,_69){var _6a=new Array();switch(parseInt(_69)){case 2:_6a[0]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&type=2";break;case 3:_6a[0]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&pid=0&type=3";_6a[1]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&pid=1&type=3";break;case 4:_6a[0]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&type=4";break;case 5:_6a[0]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&pid=0&type=5";_6a[1]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&pid=1&type=5";break;case 6:_6a[0]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&pid=0&type=6";_6a[1]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&pid=1&type=6";break;case 8:_6a[0]=_5+"?key="+ZDC_KEY+"&enc=SJIS&sid="+this.searchID+"&rid="+rid+"&type=8";break;default:_6a=null;}return _6a;};ZdcRouteSearch.prototype.search=function(rs,_6c){if(rs.departurePoint==null||rs.arrivalPoint==null||rs.timeout==""||String(rs.timeout).match(/[^0-9]/)||rs.timeout<1||rs.timeout>_4){this.result=new ZdcRouteSearchResult();this.result.options=rs;this.result.status=1;ZDC.ZdcEvent.trigger(this,"end",this.result);return;}if(rs.timeout<_3){rs.timeout=_3;}if(this.objMap&&this.objMap.ClearRouteLayer){this.objMap.ClearRouteLayer();}this.options=rs;this.fcallback=_6c?_6c:null;this.obHttp=new ZdcHttpRequest("UTF-8");var _6d="?key="+rs.keyAPI+"&enc=UTF8"+"&stx="+rs.departurePoint.mx+"&sty="+rs.departurePoint.my+"&edx="+rs.arrivalPoint.mx+"&edy="+rs.arrivalPoint.my+"&chg="+rs.chg+"&dtf="+rs.dtf+"&str="+rs.str+"&odt="+rs.odt+"&vt="+rs.vt+"&gcf="+rs.gcf;if(rs.guideType.etc!==undefined){_6d+="&etc="+(rs.guideType.etc?1:0);}if(rs.guideType.jct!==undefined){_6d+="&jct="+(rs.guideType.jct?1:0);}if(rs.guideType.cross!==undefined){_6d+="&cross="+(rs.guideType.cross?1:0);}if(rs.guideType.cross3d!==undefined){_6d+="&cross3d="+(rs.guideType.cross3d?1:0);}if(rs.guideType.distsign!==undefined){_6d+="&distsign="+(rs.guideType.distsign?1:0);}if(rs.guideType.lane!==undefined){_6d+="&lane="+(rs.guideType.lane?1:0);}if(rs.guideType.sa!==undefined){_6d+="&sa="+(rs.guideType.sa?1:0);}if(rs.guideType.sapa!==undefined){_6d+="&sapa="+(rs.guideType.sapa?1:0);}_6d+="&sic="+rs.sic;for(var k=0;k<rs.stops.length;k++){_6d+="&mt"+(k+1)+"="+rs.stops[k].type+"&mx"+(k+1)+"="+rs.stops[k].point.mx+"&my"+(k+1)+"="+rs.stops[k].point.my;}if(typeof ZDC_OPT!="undefined"){_6d+="&opt="+ZDC_OPT;}this.obHttp.request(this.urlRouteSearch+_6d,ZdcEvent.callback(this,this.parseRouteData),rs.timeout);};ZdcRouteSearch.prototype.ParseRouteXmlData=function(_6f){var _70=_6f.getElementsByTagName("status");if(!_70){return;}var _71=_70[0].getElementsByTagName("error_code")[0].firstChild.nodeValue;if(_71!=_6||_71.length==0){this.result.status=9;return;}this.result.searchID=_70[0].getElementsByTagName("search_id")[0].firstChild.nodeValue;this.result.distance=Number(_70[0].getElementsByTagName("distance")[0].firstChild.nodeValue);this.result.toll=Number(_70[0].getElementsByTagName("toll")[0].firstChild.nodeValue);this.result.tollFlag=Number(_70[0].getElementsByTagName("toll_flag")[0].firstChild.nodeValue);var _72=_6f.getElementsByTagName("rect");if(_72==null){return;}var v=_72.item(0).firstChild.nodeValue;var t=v.split(",");if(t.length!=4){return;}this.result.routeExtent=[];this.result.routeExtent.minx=Number(t[0]);this.result.routeExtent.miny=Number(t[1]);this.result.routeExtent.maxx=Number(t[2]);this.result.routeExtent.maxy=Number(t[3]);var _75=_6f.getElementsByTagName("links");if(_75==null){return;}var _76=_75.item(0).getElementsByTagName("ls");for(var k=0;k<_76.length;k++){var _78=_76[k];this.result.links[k]=[];this.result.links[k].range=[];t=_78.getElementsByTagName("rs").item(0).firstChild.nodeValue.split(",");this.result.links[k].range.minx=Number(t[0]);this.result.links[k].range.miny=Number(t[1]);this.result.links[k].range.maxx=Number(t[2]);this.result.links[k].range.maxy=Number(t[3]);t=_78.getElementsByTagName("is").item(0).firstChild.nodeValue.split(",");this.result.links[k].id=t[0];this.result.links[k].roadName=t[1];this.result.links[k].roadType=t[2];this.result.links[k].direction=t[3];this.result.links[k].distance=t[4];this.result.links[k].crossName=t[5];this.result.links[k].guideType=t[6];this.result.links[k].toll=t[7];this.result.links[k].toll_link=t[8];t=_78.getElementsByTagName("guide_type_all").item(0).firstChild;this.result.links[k].guideAll=t?t.nodeValue.split(","):null;var sa=_78.getElementsByTagName("service_code").item(0).firstChild;if(sa){this.result.links[k].sapaText1=getValue(_78,"text1");this.result.links[k].sapaText2=getValue(_78,"text2");this.result.links[k].sapaText3=getValue(_78,"text3");this.result.links[k].sapaServiceCode=sa.nodeValue.split(",");}this.result.links[k].l2=[];this.result.links[k].l6=[];this.result.links[k].ld=[];var ls=_78.getElementsByTagName("l2");for(var j=0;j<ls.length;j++){this.result.links[k].l2[j]=[];this.result.links[k].l2[j].range=[];this.result.links[k].l2[j].x=[];this.result.links[k].l2[j].y=[];t=ls[j].getElementsByTagName("r2").item(0).firstChild.nodeValue.split(",");this.result.links[k].l2[j].range.minx=Number(t[0]);this.result.links[k].l2[j].range.miny=Number(t[1]);this.result.links[k].l2[j].range.maxx=Number(t[2]);this.result.links[k].l2[j].range.maxy=Number(t[3]);t=ls[j].getElementsByTagName("c2").item(0).firstChild.nodeValue.split(",");for(var i=0;i<t.length/2;i++){this.result.links[k].l2[j].x[i]=Number(t[2*i]);this.result.links[k].l2[j].y[i]=Number(t[2*i+1]);}}ls=_78.getElementsByTagName("l6");for(j=0;j<ls.length;j++){this.result.links[k].l6[j]=[];this.result.links[k].l6[j].range=[];this.result.links[k].l6[j].x=[];this.result.links[k].l6[j].y=[];t=ls[j].getElementsByTagName("r6").item(0).firstChild.nodeValue.split(",");this.result.links[k].l6[j].range.minx=Number(t[0]);this.result.links[k].l6[j].range.miny=Number(t[1]);this.result.links[k].l6[j].range.maxx=Number(t[2]);this.result.links[k].l6[j].range.maxy=Number(t[3]);t=ls[j].getElementsByTagName("c6").item(0).firstChild.nodeValue.split(",");for(i=0;i<t.length/2;i++){this.result.links[k].l6[j].x[i]=Number(t[2*i]);this.result.links[k].l6[j].y[i]=Number(t[2*i+1]);}}ls=_78.getElementsByTagName("ld");for(j=0;j<ls.length;j++){this.result.links[k].ld[j]=[];this.result.links[k].ld[j].range=[];this.result.links[k].ld[j].x=[];this.result.links[k].ld[j].y=[];t=ls[j].getElementsByTagName("rd").item(0).firstChild.nodeValue.split(",");this.result.links[k].ld[j].range.minx=Number(t[0]);this.result.links[k].ld[j].range.miny=Number(t[1]);this.result.links[k].ld[j].range.maxx=Number(t[2]);this.result.links[k].ld[j].range.maxy=Number(t[3]);t=ls[j].getElementsByTagName("cd").item(0).firstChild.nodeValue.split(",");for(i=0;i<t.length/2;i++){this.result.links[k].ld[j].x[i]=Number(t[2*i]);this.result.links[k].ld[j].y[i]=Number(t[2*i+1]);}t=ls[j].getElementsByTagName("id").item(0).firstChild.nodeValue.split(",");this.result.links[k].ld[j].id=t[0];this.result.links[k].ld[j].roadName=t[1];this.result.links[k].ld[j].roadType=t[2];this.result.links[k].ld[j].direction=t[3];this.result.links[k].ld[j].distance=t[4];this.result.links[k].ld[j].crossName=t[5];this.result.links[k].ld[j].guideType=t[6];this.result.links[k].ld[j].toll=t[7];this.result.links[k].ld[j].toll_link=t[8];t=ls[j].getElementsByTagName("guide_type_all").item(0).firstChild;this.result.links[k].ld[j].guideAll=t?t.nodeValue.split(","):null;}}k=0;for(i=0;i<this.result.links.length;i++){for(j=0;j<this.result.links[i].ld.length;j++){this.result.intersections[k]=[];this.result.intersections[k].id=this.result.links[i].ld[j].id;this.result.intersections[k].roadName=this.result.links[i].ld[j].roadName;this.result.intersections[k].roadType=this.result.links[i].ld[j].roadType;this.result.intersections[k].direction=this.result.links[i].ld[j].direction;this.result.intersections[k].distance=this.result.links[i].ld[j].distance;this.result.intersections[k].crossName=this.result.links[i].ld[j].crossName;this.result.intersections[k].guidType=this.result.links[i].ld[j].guideType;this.result.intersections[k].guideType=this.result.links[i].ld[j].guideType;this.result.intersections[k].toll=this.result.links[i].ld[j].toll;this.result.intersections[k].guideAll=this.result.links[i].ld[j].guideAll;this.result.intersections[k].toll_link=this.result.links[i].ld[j].toll_link;if(this.options.pointFlg==1){this.result.intersections[k].lat=this.result.links[i].ld[j].y[0]*1/3600000;this.result.intersections[k].lon=this.result.links[i].ld[j].x[0]*1/3600000;}else{this.result.intersections[k].lat=this.result.links[i].ld[j].y[0];this.result.intersections[k].lon=this.result.links[i].ld[j].x[0];}var _7d=this.result.links[i].sapaServiceCode;var _7e=[];var _7f=null;var _80=[];if(_7d!=undefined){for(var v=0;v<_7d.length;v++){if(_c[_7d[v]]){_7e[v]=_c[_7d[v]];}}_7f=_7e.join(",");_80[0]=this.result.links[i].sapaText1;_80[1]=this.result.links[i].sapaText2;_80[2]=this.result.links[i].sapaText3;_80[3]=_7f;this.result.intersections[k].sapainfo=_80;}k++;}}};function ZdcRouteIcon(){this.start_1=null;this.end_1=null;this.ft_1=null;this.ic_1=null;this.is_1=null;this.jct_1=null;this.p1_1=null;this.p2_1=null;this.p3_1=null;this.p4_1=null;this.p5_1=null;this.start_2=null;this.end_2=null;this.ft_2=null;this.ic_2=null;this.is_2=null;this.jct_2=null;this.p1_2=null;this.p2_2=null;this.p3_2=null;this.p4_2=null;this.p5_2=null;this.start_3=null;this.end_3=null;this.ft_3=null;this.ic_3=null;this.is_3=null;this.jct_3=null;this.p1_3=null;this.p2_3=null;this.p3_3=null;this.p4_3=null;this.p5_3=null;}ZdcRouteIcon.prototype.getIcon=function(_81){if(this[_81]){return this[_81];}if(_82[_81]){this[_81]=_82[_81]();return this[_81];}else{return false;}};var _82={};_82.start_1=function(){var _83=new ZdcIcon();_83.image=ZdcMapServer+"img/RouteStart.png";_83.printimage=ZdcMapServer+"img/RouteStart.gif";_83.size=new ZdcSize(54,36);_83.offset=new ZdcPixel(-4,-33);return _83;};_82.end_1=function(){var _84=new ZdcIcon();_84.image=ZdcMapServer+"img/RouteEnd.png";_84.printimage=ZdcMapServer+"img/RouteEnd.gif";_84.size=new ZdcSize(54,36);_84.offset=new ZdcPixel(-4,-33);return _84;};_82.ft_1=function(){var _85=new ZdcIcon();_85.offset=new ZdcPixel(-8,-8);_85.size=new ZdcSize(16,16);_85.image=ZdcMapServer+"img/RouteFt.png";_85.printimage=ZdcMapServer+"img/RouteFt.gif";return _85;};_82.ic_1=function(){var _86=new ZdcIcon();_86.offset=new ZdcPixel(-8,-8);_86.size=new ZdcSize(16,16);_86.image=ZdcMapServer+"img/RouteIc.png";_86.printimage=ZdcMapServer+"img/RouteIc.gif";return _86;};_82.is_1=function(){var _87=new ZdcIcon();_87.offset=new ZdcPixel(-8,-8);_87.size=new ZdcSize(16,16);_87.image=ZdcMapServer+"img/RouteIs.png";_87.printimage=ZdcMapServer+"img/RouteIs.gif";return _87;};_82.jct_1=function(){var _88=new ZdcIcon();_88.offset=new ZdcPixel(-12,-9);_88.size=new ZdcSize(24,18);_88.image=ZdcMapServer+"img/RouteJct.png";_88.printimage=ZdcMapServer+"img/RouteJct.gif";return _88;};_82.p1_1=function(){var _89=new ZdcIcon();_89.offset=new ZdcPixel(-8,-8);_89.size=new ZdcSize(16,16);_89.image=ZdcMapServer+"img/RouteP1.png";_89.printimage=ZdcMapServer+"img/RouteP1.gif";return _89;};_82.p2_1=function(){var _8a=new ZdcIcon();_8a.offset=new ZdcPixel(-8,-8);_8a.size=new ZdcSize(16,16);_8a.image=ZdcMapServer+"img/RouteP2.png";_8a.printimage=ZdcMapServer+"img/RouteP2.gif";return _8a;};_82.p3_1=function(){var _8b=new ZdcIcon();_8b.offset=new ZdcPixel(-8,-8);_8b.size=new ZdcSize(16,16);_8b.image=ZdcMapServer+"img/RouteP3.png";_8b.printimage=ZdcMapServer+"img/RouteP3.gif";return _8b;};_82.p4_1=function(){var _8c=new ZdcIcon();_8c.offset=new ZdcPixel(-8,-8);_8c.size=new ZdcSize(16,16);_8c.image=ZdcMapServer+"img/RouteP4.png";_8c.printimage=ZdcMapServer+"img/RouteP4.gif";return _8c;};_82.p5_1=function(){var _8d=new ZdcIcon();_8d.offset=new ZdcPixel(-8,-8);_8d.size=new ZdcSize(16,16);_8d.image=ZdcMapServer+"img/RouteP5.png";_8d.printimage=ZdcMapServer+"img/RouteP5.gif";return _8d;};_82.pa_1=function(){var _8e=new ZdcIcon();_8e.offset=new ZdcPixel(-8,-8);_8e.size=new ZdcSize(16,16);_8e.image=ZdcMapServer+"img/RoutePa.png";_8e.printimage=ZdcMapServer+"img/RoutePa.gif";return _8e;};_82.sa_1=function(){var _8f=new ZdcIcon();_8f.offset=new ZdcPixel(-8,-8);_8f.size=new ZdcSize(16,16);_8f.image=ZdcMapServer+"img/RouteSa.png";_8f.printimage=ZdcMapServer+"img/RouteSa.gif";return _8f;};_82.start_2=function(){var _90=new ZdcIcon();_90.image=ZdcMapServer+"img/route_blue/RouteStart.png";_90.printimage=ZdcMapServer+"img/route_blue/RouteStart.gif";_90.size=new ZdcSize(54,36);_90.offset=new ZdcPixel(-4,-33);return _90;};_82.end_2=function(){var _91=new ZdcIcon();_91.image=ZdcMapServer+"img/route_blue/RouteEnd.png";_91.printimage=ZdcMapServer+"img/route_blue/RouteEnd.gif";_91.size=new ZdcSize(54,36);_91.offset=new ZdcPixel(-4,-33);return _91;};_82.ft_2=function(){var _92=new ZdcIcon();_92.offset=new ZdcPixel(-8,-8);_92.size=new ZdcSize(16,16);_92.image=ZdcMapServer+"img/route_blue/RouteFt.png";_92.printimage=ZdcMapServer+"img/route_blue/RouteFt.gif";return _92;};_82.ic_2=function(){var _93=new ZdcIcon();_93.offset=new ZdcPixel(-8,-8);_93.size=new ZdcSize(16,16);_93.image=ZdcMapServer+"img/route_blue/RouteIc.png";_93.printimage=ZdcMapServer+"img/route_blue/RouteIc.gif";return _93;};_82.is_2=function(){var _94=new ZdcIcon();_94.offset=new ZdcPixel(-8,-8);_94.size=new ZdcSize(16,16);_94.image=ZdcMapServer+"img/route_blue/RouteIs.png";_94.printimage=ZdcMapServer+"img/route_blue/RouteIs.gif";return _94;};_82.jct_2=function(){var _95=new ZdcIcon();_95.offset=new ZdcPixel(-12,-9);_95.size=new ZdcSize(24,18);_95.image=ZdcMapServer+"img/route_blue/RouteJct.png";_95.printimage=ZdcMapServer+"img/route_blue/RouteJct.gif";return _95;};_82.p1_2=function(){var _96=new ZdcIcon();_96.offset=new ZdcPixel(-8,-8);_96.size=new ZdcSize(16,16);_96.image=ZdcMapServer+"img/route_blue/RouteP1.png";_96.printimage=ZdcMapServer+"img/route_blue/RouteP1.gif";return _96;};_82.p2_2=function(){var _97=new ZdcIcon();_97.offset=new ZdcPixel(-8,-8);_97.size=new ZdcSize(16,16);_97.image=ZdcMapServer+"img/route_blue/RouteP2.png";_97.printimage=ZdcMapServer+"img/route_blue/RouteP2.gif";return _97;};_82.p3_2=function(){var _98=new ZdcIcon();_98.offset=new ZdcPixel(-8,-8);_98.size=new ZdcSize(16,16);_98.image=ZdcMapServer+"img/route_blue/RouteP3.png";_98.printimage=ZdcMapServer+"img/route_blue/RouteP3.gif";return _98;};_82.p4_2=function(){var _99=new ZdcIcon();_99.offset=new ZdcPixel(-8,-8);_99.size=new ZdcSize(16,16);_99.image=ZdcMapServer+"img/route_blue/RouteP4.png";_99.printimage=ZdcMapServer+"img/route_blue/RouteP4.gif";return _99;};_82.p5_2=function(){var _9a=new ZdcIcon();_9a.offset=new ZdcPixel(-8,-8);_9a.size=new ZdcSize(16,16);_9a.image=ZdcMapServer+"img/route_blue/RouteP5.png";_9a.printimage=ZdcMapServer+"img/route_blue/RouteP5.gif";return _9a;};_82.pa_2=function(){var _9b=new ZdcIcon();_9b.offset=new ZdcPixel(-8,-8);_9b.size=new ZdcSize(16,16);_9b.image=ZdcMapServer+"img/route_blue/RoutePa.png";_9b.printimage=ZdcMapServer+"img/route_blue/RoutePa.gif";return _9b;};_82.sa_2=function(){var _9c=new ZdcIcon();_9c.offset=new ZdcPixel(-8,-8);_9c.size=new ZdcSize(16,16);_9c.image=ZdcMapServer+"img/route_blue/RouteSa.png";_9c.printimage=ZdcMapServer+"img/route_blue/RouteSa.gif";return _9c;};_82.start_3=function(){var _9d=new ZdcIcon();_9d.image=ZdcMapServer+"img/route_blue2/RouteStart.png";_9d.printimage=ZdcMapServer+"img/route_blue2/RouteStart.gif";_9d.size=new ZdcSize(54,36);_9d.offset=new ZdcPixel(-4,-33);return _9d;};_82.end_3=function(){var _9e=new ZdcIcon();_9e.image=ZdcMapServer+"img/route_blue2/RouteEnd.png";_9e.printimage=ZdcMapServer+"img/route_blue2/RouteEnd.gif";_9e.size=new ZdcSize(54,36);_9e.offset=new ZdcPixel(-4,-33);return _9e;};_82.ft_3=function(){var _9f=new ZdcIcon();_9f.offset=new ZdcPixel(-8,-8);_9f.size=new ZdcSize(16,16);_9f.image=ZdcMapServer+"img/route_blue2/RouteFt.png";_9f.printimage=ZdcMapServer+"img/route_blue2/RouteFt.gif";return _9f;};_82.ic_3=function(){var _a0=new ZdcIcon();_a0.offset=new ZdcPixel(-8,-8);_a0.size=new ZdcSize(16,16);_a0.image=ZdcMapServer+"img/route_blue2/RouteIc.png";_a0.printimage=ZdcMapServer+"img/route_blue2/RouteIc.gif";return _a0;};_82.is_3=function(){var _a1=new ZdcIcon();_a1.offset=new ZdcPixel(-8,-8);_a1.size=new ZdcSize(16,16);_a1.image=ZdcMapServer+"img/route_blue2/RouteIs.png";_a1.printimage=ZdcMapServer+"img/route_blue2/RouteIs.gif";return _a1;};_82.jct_3=function(){var _a2=new ZdcIcon();_a2.offset=new ZdcPixel(-12,-9);_a2.size=new ZdcSize(24,18);_a2.image=ZdcMapServer+"img/route_blue2/RouteJct.png";_a2.printimage=ZdcMapServer+"img/route_blue2/RouteJct.gif";return _a2;};_82.p1_3=function(){var _a3=new ZdcIcon();_a3.offset=new ZdcPixel(-8,-8);_a3.size=new ZdcSize(16,16);_a3.image=ZdcMapServer+"img/route_blue2/RouteP1.png";_a3.printimage=ZdcMapServer+"img/route_blue2/RouteP1.gif";return _a3;};_82.p2_3=function(){var _a4=new ZdcIcon();_a4.offset=new ZdcPixel(-8,-8);_a4.size=new ZdcSize(16,16);_a4.image=ZdcMapServer+"img/route_blue2/RouteP2.png";_a4.printimage=ZdcMapServer+"img/route_blue2/RouteP2.gif";return _a4;};_82.p3_3=function(){var _a5=new ZdcIcon();_a5.offset=new ZdcPixel(-8,-8);_a5.size=new ZdcSize(16,16);_a5.image=ZdcMapServer+"img/route_blue2/RouteP3.png";_a5.printimage=ZdcMapServer+"img/route_blue2/RouteP3.gif";return _a5;};_82.p4_3=function(){var _a6=new ZdcIcon();_a6.offset=new ZdcPixel(-8,-8);_a6.size=new ZdcSize(16,16);_a6.image=ZdcMapServer+"img/route_blue2/RouteP4.png";_a6.printimage=ZdcMapServer+"img/route_blue2/RouteP4.gif";return _a6;};_82.p5_3=function(){var _a7=new ZdcIcon();_a7.offset=new ZdcPixel(-8,-8);_a7.size=new ZdcSize(16,16);_a7.image=ZdcMapServer+"img/route_blue2/RouteP5.png";_a7.printimage=ZdcMapServer+"img/route_blue2/RouteP5.gif";return _a7;};_82.pa_3=function(){var _a8=new ZdcIcon();_a8.offset=new ZdcPixel(-8,-8);_a8.size=new ZdcSize(16,16);_a8.image=ZdcMapServer+"img/route_blue2/RoutePa.png";_a8.printimage=ZdcMapServer+"img/route_blue2/RoutePa.gif";return _a8;};_82.sa_3=function(){var _a9=new ZdcIcon();_a9.offset=new ZdcPixel(-8,-8);_a9.size=new ZdcSize(16,16);_a9.image=ZdcMapServer+"img/route_blue2/RouteSa.png";_a9.printimage=ZdcMapServer+"img/route_blue2/RouteSa.gif";return _a9;};window.ZdcRouteStopPoint=ZdcRouteStopPoint;window.ZdcRouteSearchOptions=ZdcRouteSearchOptions;window.ZdcRouteSearch=ZdcRouteSearch;window.ZdcRouteSearchResult=ZdcRouteSearchResult;})();var err_msg = "";(function(){var _1=1000;var _2=300000;var _3=new ZdcPRouteIcon();var _4={start:"start_1",end:"end_1","r1":"toho1_1","r2":"toho1_4","r3":"toho1_3","r4":"toho1_7","r5":"toho1_5","r6":"toho1_5","b1":"toho1_2","b2":"toho1_6","b3":"toho1_8","b4":"toho1_9","b5":"toho1_10"};function ZdcPRoutePoint(){this.point=null;this.floorFlg=0;this.stationFlg=0;this.floor=0;this.name="";}ZdcPRoutePoint.prototype.GetTypeString=function(){var _5="",_6="";var t1=(Number(this.floorFlg)<<6)+(Number(this.stationFlg)<<5);_5=t1.toString(16);if(_5.length==0){_5="00";}else{if(_5.length==1){_5="0"+_5;}else{if(_5.length>2){_5=_5.substr(_5.length-2);}}}_6=_5;var t2=Number(this.floor);if(t2<0){t2+=256;}_5=t2.toString(16);if(_5.length==0){_5="00";}else{if(_5.length==1){_5="0"+_5;}else{if(_5.length>2){_5=_5.substr(_5.length-2);}}}return _6+_5;};function ZdcPRouteStopPoint(){this.point=null;this.floorFlg=0;this.type=0;this.floor=0;this.name="";}ZdcPRouteStopPoint.prototype.GetTypeString=function(){var _9="",_a="";var t1=(Number(this.floorFlg)<<6)+(Number(this.type)<<4);_9=t1.toString(16);if(_9.length==0){_9="00";}else{if(_9.length==1){_9="0"+_9;}else{if(_9.length>2){_9=_9.substr(_9.length-2);}}}_a=_9;var t2=Number(this.floor);if(t2<0){t2+=256;}_9=t2.toString(16);if(_9.length==0){_9="00";}else{if(_9.length==1){_9="0"+_9;}else{if(_9.length>2){_9=_9.substr(_9.length-2);}}}return _a+_9;};function ZdcPRouteSearchOptions(){this.keyAPI="";if(ZDC_KEY){this.keyAPI=ZDC_KEY;}this.departurePoint=new ZdcPRoutePoint();this.arrivalPoint=new ZdcPRoutePoint();this.stops=[];this.timeout=60000;this.pointFlg=2;this.psc="1";this.showMarker=true;this.iconDeparture=null;this.iconArrival=null;}function ZdcPRouteSearch(){this.obHttp=null;this.result=null;this.options=null;if(typeof (ZDC_SEARCHCGI)!="undefined"){this.urlPRouteSearch=ZDC_SEARCHCGI+"/route/search_proute.cgi";}else{this.urlPRouteSearch="http://"+window.location.host+"/ssapi/route/search_proute.cgi";}this.objMap=null;this.fcallback=null;this.routeColor="#E8003C";this.routeWidth=4;this.routeOpacity="0.65";this.routeStyle="solid";this.lineProperty={};this.routeIconTable=_4;this.iconMemory=null;}ZdcPRouteSearch.AbortHttpRequest=function(){if(this.obHttp){this.obHttp.abort();}};ZdcPRouteSearch.prototype.reset=function(){this.options=null;this.obHttp=null;this.result=null;};ZdcPRouteSearch.prototype.search=function(rs,_e){this.clearRoute();if(rs.departurePoint==null||rs.arrivalPoint==null||rs.timeout==""||String(rs.timeout).match(/[^0-9]/)||rs.timeout<1||rs.timeout>_2){this.result=new ZdcPRouteSearchResult();this.result.options=rs;this.result.status=1;ZDC.ZdcEvent.trigger(this,"end",this.result);return;}if(rs.timeout<_1){rs.timeout=_1;}this.options=rs;this.fcallback=_e?_e:null;this.obHttp=new ZdcHttpRequest("UTF-8");var _f="?key="+rs.keyAPI+"&enc=UTF8";_f+="&stx="+rs.departurePoint.point.mx+"&sty="+rs.departurePoint.point.my+"&stt="+rs.departurePoint.GetTypeString()+"&edx="+rs.arrivalPoint.point.mx+"&edy="+rs.arrivalPoint.point.my+"&edt="+rs.arrivalPoint.GetTypeString()+"&psc="+rs.psc;for(var k=0;k<rs.stops.length;k++){_f+="&mt"+(k+1)+"="+rs.stops[k].GetTypeString()+"&mx"+(k+1)+"="+rs.stops[k].point.mx+"&my"+(k+1)+"="+rs.stops[k].point.my;}if(typeof ZDC_OPT!="undefined"){_f+="&opt="+ZDC_OPT;}this.obHttp.request(this.urlPRouteSearch+_f,ZdcEvent.callback(this,this.parseRouteData),rs.timeout);};ZdcPRouteSearch.prototype.getResult=function(){return this.result;};ZdcPRouteSearch.prototype.getMap=function(){return this.objMap;};ZdcPRouteSearch.prototype.addEventHandler=function(key,_12,_13){ZDC.ZdcEvent.bind(this,key,this,_12);};ZdcPRouteSearch.prototype.clearEventHandler=function(key){ZdcEvent.clearListeners(this,key);};ZdcPRouteSearch.prototype.abort=function(){var req=this.obHttp;if(req&&(req.readyState!=4)){req.abort();}};ZdcPRouteSearch.prototype.parseRouteData=function(_16,_17){this.result=new ZdcPRouteSearchResult();this.result.options=this.options;this.result.status=_17;if(_17==0){var req=ZdcXml.parse(_16);if(req){this.ParseRouteXmlData(req);if(this.result&&(this.result.status==0)){if(this.fcallback){this.fcallback(this.getResult());}if(this.objMap){this.showRoute();}}}else{this.result.status=9;}}ZDC.ZdcEvent.trigger(this,"end",this.result);};ZdcPRouteSearch.prototype.ParseRouteXmlData=function(_19){var _1a=_19.getElementsByTagName("status");var p;if(!_1a||_1a.length<1){return;}p=_1a[0].firstChild;while(p){switch(p.tagName){case "error_code":if(p.firstChild){this.result.status=p.firstChild.nodeValue;}break;case "search_id":if(p.firstChild){this.result.searchID=p.firstChild.nodeValue;}break;case "distance":if(p.firstChild){this.result.distance=Number(p.firstChild.nodeValue);}break;}p=p.nextSibling;}if((this.result.status!=="31600000")||(this.result.searchID.length==0)){this.result.status=9;return;}this.result.status=0;this.result.links=[];var _1c=_19.getElementsByTagName("links");if(_1c==null||_1c.length<1){return;}var _1d=_1c.item(0).getElementsByTagName("link");if(_1d==null||_1d.length<1){return;}this.result.routeExtent=[];var lat,lon;var _20=new Array(),_21=new Array();var t,ts;var i;var rl=this.result.links;for(var k=0;k<_1d.length;k++){var _27=_1d[k];p=_27.firstChild;rl[k]=[];rl[k].info=[];rl[k].xy=[];while(p){switch(p.tagName){case "path":if(p.firstChild){t=p.firstChild.nodeValue.split(",");for(i=0;i<t.length/2;i++){lon=Number(t[2*i]);lat=Number(t[2*i+1]);rl[k].xy[i]=[];rl[k].xy[i].x=lon;rl[k].xy[i].y=lat;_20.push(lon);_21.push(lat);}}break;case "info":if(p.firstChild){t=p.firstChild.nodeValue;ts=t.split(",");rl[k].info.id=Number(ts[0]);rl[k].info.type=Number(ts[1]);rl[k].info.build=Number(ts[2]);rl[k].info.roof=Number(ts[3]);rl[k].info.pass=Number(ts[4]);rl[k].info.distance=Number(ts[5]);}break;}p=p.nextSibling;}}var re=this.result.routeExtent;re.minx=Math.min.apply(null,_20);re.miny=Math.min.apply(null,_21);re.maxx=Math.max.apply(null,_20);re.maxy=Math.max.apply(null,_21);t="";};ZdcPRouteSearch.prototype.getRouteColor=function(_29){var t=String(_29);var _2b=this.lineProperty[t];if(!_2b){return this.routeColor;}var _2c=this.lineProperty[t].color;return _2c?_2c:this.routeColor;};ZdcPRouteSearch.prototype.getRouteWidth=function(_2d){var t=String(_2d);var _2f=this.lineProperty[t];if(!_2f){return this.routeWidth;}var _30=this.lineProperty[t].width;return _30?_30:this.routeWidth;};ZdcPRouteSearch.prototype.getRouteOpacity=function(_31){var t=String(_31);var _33=this.lineProperty[t];if(!_33){return this.routeOpacity;}var _34=this.lineProperty[t].opacity;return _34?_34:this.routeOpacity;};ZdcPRouteSearch.prototype.getRouteStyle=function(_35){var t=String(_35);var _37=this.lineProperty[t];if(!_37){return this.routeStyle;}var _38=this.lineProperty[t].style;return _38?_38:this.routeStyle;};ZdcPRouteSearch.prototype.showRoute=function(){if(!this.objMap){return;}this.clearRoute();this.objMap.ZdcPRouteShapeLayer=new ZdcShape.Layer();this.objMap.ZdcPRouteShapeLayer.setZIndex(3998);this.objMap.addShapeLayer(this.objMap.ZdcPRouteShapeLayer);this.objMap.ZdcPRouteLayer=new ZdcUserLayer();this.objMap.addUserLayer(this.objMap.ZdcPRouteLayer);this.objMap.ZdcPRouteLayer.doc.style.zIndex="3999";var r=this.getResult();var p,j;for(var k=0;k<r.links.length;k++){p=new ZdcShape.Polyline();p.strokeColor=this.getRouteColor(r.links[k].info.type);p.strokeWeight=this.getRouteWidth(r.links[k].info.type);p.opacity=this.getRouteOpacity(r.links[k].info.type);p.strokeStyle=this.getRouteStyle(r.links[k].info.type);for(j=0;j<r.links[k].xy.length;j++){p.addPoint(new ZdcPoint(r.links[k].xy[j].x,r.links[k].xy[j].y,2));}this.objMap.ZdcPRouteShapeLayer.addShape(p);}this.iconMemory=null;if(r.options.showMarker){for(var k=0;k<r.links.length;k++){this.getLinkMarker(k);}this.getLinkMarker("start");this.getLinkMarker("end");}};ZdcPRouteSearch.prototype.getLinkMarker=function(_3d){var r=this.getResult();if(_3d=="start"){this.objMap.ZdcPRouteLayer.addMarker(new ZdcMarker(this.options.departurePoint.point,this.getPRouteIcon("start"),"static"));return;}else{if(_3d=="end"){this.objMap.ZdcPRouteLayer.addMarker(new ZdcMarker(this.options.arrivalPoint.point,this.getPRouteIcon("end"),"static"));return;}else{var _3f=r.links[_3d].info.type;var _40=r.links[_3d].info.build;if(_3f==null||_40==null){return;}switch(Number(_40)){case 1:case 2:case 3:case 4:case 5:if(this.iconMemory=="b"+_40){break;}var _41="";switch(Number(_40)){case 1:_41="\u968e\u6bb5";break;case 2:_41="\u30a8\u30b9\u30ab\u30ec\u30fc\u30bf\u30fc";break;case 3:_41="\u30a8\u30ec\u30d9\u30fc\u30bf\u30fc";break;case 4:_41="\u30b9\u30ed\u30fc\u30d7";break;case 5:_41="\u52d5\u304f\u6b69\u9053";break;}var _42=new ZdcMarker(new ZdcPoint(r.links[_3d].xy[0].x,r.links[_3d].xy[0].y,2),this.getPRouteIcon("b"+_40));var _43=new ZdcTooltip();_42.tooltxt="<div style=\"background:#FFFFFF none repeat scroll 0 0;border:1px solid #67A3CB;color:#006699;font-size:10px;margin:0px 0px 0px 2px;padding:2px 3px 3px;\">"+_41+"</div>";_42.tooloffset=new ZdcPixel(15,-11);_42.toolwidth=250;_42.toolheight=50;_42.toolzindex=4;_43.setZdcTooltip(_42.Point,_42.tooltxt,_42.toolwidth,_42.toolheight,_42.tooloffset,_42.toolzindex);this.objMap.ZdcPRouteLayer.addZdcTooltip(_43);_42.toolid=_43.id;ZdcEvent.addListener(_42,"mouseovermarker",function(){this.parentLayer.visibleZdcTooltipById(this.toolid);});ZdcEvent.addListener(_42,"mouseoutmarker",function(){this.parentLayer.hiddenZdcTooltipById(this.toolid);});this.objMap.ZdcPRouteLayer.addMarker(_42);this.iconMemory="b"+_40;return;default:break;}switch(Number(_3f)){case 1:case 3:case 4:var _41="";if(Number(_3f)==1){_41="\u6a2a\u65ad\u6b69\u9053";}else{if(Number(_3f)==3){_41="\u6b69\u9053\u6a4b";}else{if(Number(_3f)==4){_41="\u8e0f\u5207\u5185\u901a\u8def";}}}var _42=new ZdcMarker(new ZdcPoint(r.links[_3d].xy[0].x,r.links[_3d].xy[0].y,2),this.getPRouteIcon("r"+_3f));var _43=new ZdcTooltip();_42.tooltxt="<div style=\"background:#FFFFFF none repeat scroll 0 0;border:1px solid #67A3CB;color:#006699;font-size:10px;margin:0px 0px 0px 2px;padding:2px 3px 3px;\">"+_41+"</div>";_42.tooloffset=new ZdcPixel(15,-11);_42.toolwidth=250;_42.toolheight=50;_42.toolzindex=4;_43.setZdcTooltip(_42.Point,_42.tooltxt,_42.toolwidth,_42.toolheight,_42.tooloffset,_42.toolzindex);this.objMap.ZdcPRouteLayer.addZdcTooltip(_43);_42.toolid=_43.id;ZdcEvent.addListener(_42,"mouseovermarker",function(){this.parentLayer.visibleZdcTooltipById(this.toolid);});ZdcEvent.addListener(_42,"mouseoutmarker",function(){this.parentLayer.hiddenZdcTooltipById(this.toolid);});if(this.iconMemory=="r"+_3f){return;}this.objMap.ZdcPRouteLayer.addMarker(_42);this.iconMemory="r"+_3f;return;case 5:case 6:var _44;if(_3d!=0){_44=r.links[_3d-1].info.type;}var _45=r.links[_3d].info.type;if((_3d+1)!=r.links.length){var _46=r.links[_3d+1].info.type;}if(_44!=5&&_44!=6&&(_45==5||_45==6)){if(this.iconMemory=="r"+_3f){return;}var _42=new ZdcMarker(new ZdcPoint(r.links[_3d].xy[0].x,r.links[_3d].xy[0].y,2),this.getPRouteIcon("r"+_3f));var _43=new ZdcTooltip();_42.tooltxt="<div style=\"background:#FFFFFF none repeat scroll 0 0;border:1px solid #67A3CB;color:#006699;font-size:10px;margin:0px 0px 0px 2px;padding:2px 3px 3px;\">\u9023\u7d61\u901a\u8def\u30fb\u5efa\u7269\u5185\u901a\u8def\u5165\u53e3</div>";_42.tooloffset=new ZdcPixel(15,-11);_42.toolwidth=250;_42.toolheight=50;_42.toolzindex=4;_43.setZdcTooltip(_42.Point,_42.tooltxt,_42.toolwidth,_42.toolheight,_42.tooloffset,_42.toolzindex);this.objMap.ZdcPRouteLayer.addZdcTooltip(_43);_42.toolid=_43.id;ZdcEvent.addListener(_42,"mouseovermarker",function(){this.parentLayer.visibleZdcTooltipById(this.toolid);});ZdcEvent.addListener(_42,"mouseoutmarker",function(){this.parentLayer.hiddenZdcTooltipById(this.toolid);});this.objMap.ZdcPRouteLayer.addMarker(_42);this.iconMemory="r"+_3f;return;}if((_45==5||_45==6)&&(_46!=5)&&(_46!=6)){var _47=Number(r.links[_3d].xy.length)-1;if(this.iconMemory=="r2"){return;}var _42=new ZdcMarker(new ZdcPoint(r.links[_3d].xy[_47].x,r.links[_3d].xy[_47].y,2),this.getPRouteIcon("r2"));var _43=new ZdcTooltip();_42.tooltxt="<div style=\"background:#FFFFFF none repeat scroll 0 0;border:1px solid #67A3CB;color:#006699;font-size:10px;margin:0px 0px 0px 2px;padding:2px 3px 3px;\">\u9023\u7d61\u901a\u8def\u30fb\u5efa\u7269\u5185\u901a\u8def\u51fa\u53e3</div>";_42.toolwidth=250;_42.toolheight=50;_42.toolzindex=4;_43.setZdcTooltip(_42.Point,_42.tooltxt,_42.toolwidth,_42.toolheight,_42.tooloffset,_42.toolzindex);this.objMap.ZdcPRouteLayer.addZdcTooltip(_43);_42.toolid=_43.id;ZdcEvent.addListener(_42,"mouseovermarker",function(){this.parentLayer.visibleZdcTooltipById(this.toolid);});ZdcEvent.addListener(_42,"mouseoutmarker",function(){this.parentLayer.hiddenZdcTooltipById(this.toolid);});this.objMap.ZdcPRouteLayer.addMarker(_42);this.iconMemory="r2";return;}default:break;}this.iconMemory=null;}}};ZdcPRouteSearch.prototype.clearRoute=function(){if(this.objMap){if(this.objMap.ZdcPRouteLayer){this.objMap.removeUserLayer(this.objMap.ZdcPRouteLayer);this.objMap.ZdcPRouteLayer=null;}if(this.objMap.ZdcPRouteShapeLayer){this.objMap.removeShapeLayer(this.objMap.ZdcPRouteShapeLayer);this.objMap.ZdcPRouteShapeLayer=null;}}return true;};function ZdcPRouteSearchResult(){this.searchID=null;this.status=0;this.options=null;this.distance=0;this.routeExtent=null;this.range=[];this.links=[];this.intersections=[];}ZdcPRouteSearchResult.prototype.Clear=function(){this.searchID=null;this.status=0;this.options=null;this.distance=0;this.routeExtent=null;this.range=[];this.links=[];this.intersections=[];};ZdcPRouteSearchResult.prototype.getLinkCount=function(){if(this.status!==0){return 0;}return this.links.length;};ZdcPRouteSearchResult.prototype.getLink=function(_48){if(this.status!==0){return null;}if(_48<0||_48>=this.getLinkCount()){return null;}var _49=[];var k;_49.id=this.links[_48].info.id;_49.type=this.links[_48].info.type;_49.build=this.links[_48].info.build;_49.roof=this.links[_48].info.roof;_49.pass=this.links[_48].info.pass;_49.distance=this.links[_48].info.distance;_49.lons=[];_49.lats=[];for(k=0;k<this.links[_48].xy.length;k++){if(this.options.pointFlg==1){_49.lons[_49.lons.length]=this.links[_48].xy[k].x*1/3600000;_49.lats[_49.lats.length]=this.links[_48].xy[k].y*1/3600000;}else{_49.lons[_49.lons.length]=this.links[_48].xy[k].x;_49.lats[_49.lats.length]=this.links[_48].xy[k].y;}}return _49;};ZdcPRouteSearch.prototype.getPRouteIcon=function(_4b){var t=String(_4b);var _4d=this.routeIconTable[t]?this.routeIconTable[t]:_4[t];var _4e=_3.getIcon(_4d);return _4e?_4e:null;};ZdcPRouteSearch.prototype.showWholeRoute=ZdcCommon.prototype.showWholeRoute;function ZdcPRouteIcon(){this.start_1=null;this.end_1=null;}ZdcPRouteIcon.prototype.getIcon=function(_4f){if(this[_4f]){return this[_4f];}if(_50[_4f]){this[_4f]=_50[_4f]();return this[_4f];}else{return false;}};var _50={};_50.start_1=function(){var _51=new ZdcIcon();_51.image=ZdcMapServer+"img/RouteStart.png";_51.printimage=ZdcMapServer+"img/RouteStart.gif";_51.size=new ZdcSize(54,36);_51.offset=new ZdcPixel(-4,-33);return _51;};_50.end_1=function(){var _52=new ZdcIcon();_52.image=ZdcMapServer+"img/RouteEnd.png";_52.printimage=ZdcMapServer+"img/RouteEnd.gif";_52.size=new ZdcSize(54,36);_52.offset=new ZdcPixel(-4,-33);return _52;};_50.toho1_1=function(){var _53=new ZdcIcon();_53.image=ZdcMapServer+"img/icon-toho-01.gif";_53.printimage=ZdcMapServer+"img/icon-toho-01.gif";_53.size=new ZdcSize(24,24);_53.offset=new ZdcPixel(-12,-12);return _53;};_50.toho1_2=function(){var _54=new ZdcIcon();_54.image=ZdcMapServer+"img/icon-toho-02.gif";_54.printimage=ZdcMapServer+"img/icon-toho-02.gif";_54.size=new ZdcSize(24,24);_54.offset=new ZdcPixel(-12,-12);return _54;};_50.toho1_3=function(){var _55=new ZdcIcon();_55.image=ZdcMapServer+"img/icon-toho-03.gif";_55.printimage=ZdcMapServer+"img/icon-toho-03.gif";_55.size=new ZdcSize(24,24);_55.offset=new ZdcPixel(-12,-12);return _55;};_50.toho1_4=function(){var _56=new ZdcIcon();_56.image=ZdcMapServer+"img/icon-toho-04.gif";_56.printimage=ZdcMapServer+"img/icon-toho-04.gif";_56.size=new ZdcSize(24,24);_56.offset=new ZdcPixel(-12,-12);return _56;};_50.toho1_5=function(){var _57=new ZdcIcon();_57.image=ZdcMapServer+"img/icon-toho-05.gif";_57.printimage=ZdcMapServer+"img/icon-toho-05.gif";_57.size=new ZdcSize(24,24);_57.offset=new ZdcPixel(-12,-12);return _57;};_50.toho1_6=function(){var _58=new ZdcIcon();_58.image=ZdcMapServer+"img/icon-toho-06.gif";_58.printimage=ZdcMapServer+"img/icon-toho-06.gif";_58.size=new ZdcSize(24,24);_58.offset=new ZdcPixel(-12,-12);return _58;};_50.toho1_7=function(){var _59=new ZdcIcon();_59.image=ZdcMapServer+"img/icon-toho-07.gif";_59.printimage=ZdcMapServer+"img/icon-toho-07.gif";_59.size=new ZdcSize(24,24);_59.offset=new ZdcPixel(-12,-12);return _59;};_50.toho1_8=function(){var _5a=new ZdcIcon();_5a.image=ZdcMapServer+"img/icon-toho-08.gif";_5a.printimage=ZdcMapServer+"img/icon-toho-08.gif";_5a.size=new ZdcSize(24,24);_5a.offset=new ZdcPixel(-12,-12);return _5a;};_50.toho1_9=function(){var _5b=new ZdcIcon();_5b.image=ZdcMapServer+"img/icon-toho-09.gif";_5b.printimage=ZdcMapServer+"img/icon-toho-09.gif";_5b.size=new ZdcSize(24,24);_5b.offset=new ZdcPixel(-12,-12);return _5b;};_50.toho1_10=function(){var _5c=new ZdcIcon();_5c.image=ZdcMapServer+"img/icon-toho-10.gif";_5c.printimage=ZdcMapServer+"img/icon-toho-10.gif";_5c.size=new ZdcSize(24,24);_5c.offset=new ZdcPixel(-12,-12);return _5c;};window.ZdcPRoutePoint=ZdcPRoutePoint;window.ZdcPRouteStopPoint=ZdcPRouteStopPoint;window.ZdcPRouteSearchOptions=ZdcPRouteSearchOptions;window.ZdcPRouteSearch=ZdcPRouteSearch;window.ZdcPRouteSearchResult=ZdcPRouteSearchResult;})();var err_msg = "";(function(){var _1,_2,_3,_4,_5;function chkDHTM(x,i){x=document.body||null;_2=x&&typeof x.insertAdjacentHTML!="undefined"&&document.createElement;_4=(x&&!_2&&typeof x.appendChild!="undefined"&&typeof document.createRange!="undefined"&&typeof (i=document.createRange()).setStartBefore!="undefined"&&typeof i.createContextualFragment!="undefined");_3=_2&&document.all&&!window.opera;_5=_4&&typeof x.style.MozOpacity!="undefined";_1=!!(_2||_4);}function pntCnvDom(){var x=this.wnd.document.createRange();x.setStartBefore(this.cnv);x=x.createContextualFragment(_3?this.htmRpc():this.htm);if(this.cnv){this.cnv.appendChild(x);}this.htm="";}function pntCnvIe(){if(this.cnv){this.cnv.insertAdjacentHTML("BeforeEnd",_3?this.htmRpc():this.htm);}this.htm="";}function pntDoc(){this.wnd.document.write(_3?this.htmRpc():this.htm);this.htm="";}function pntN(){}function mkDiv(x,y,w,h){this.htm+="<div style=\"position:absolute;"+"left:"+x+"px;"+"top:"+y+"px;"+"width:"+w+"px;"+"height:"+h+"px;"+"clip:rect(0,"+w+"px,"+h+"px,0);"+"background-color:"+this.color+(!_5?";overflow:hidden":"")+";"+((this.opacity>0&&this.opacity<1)?(_5?("-moz-opacity:"+this.opacity):("opacity:"+this.opacity)):"")+";"+"\"></div>";}function mkDivIe(x,y,w,h){this.htm+="%%"+this.color+";"+x+";"+y+";"+w+";"+h+";";}function mkDivPrt(x,y,w,h){this.htm+="<div style=\"position:absolute;"+"border-left:"+w+"px solid "+this.color+";"+"left:"+x+"px;"+"top:"+y+"px;"+"width:0px;"+"height:"+h+"px;"+"clip:rect(0,"+w+"px,"+h+"px,0);"+"background-color:"+this.color+(!_5?";overflow:hidden":"")+";"+((this.opacity>0&&this.opacity<1)?(_5?("-moz-opacity:"+this.opacity):("opacity:"+this.opacity)):"")+";"+"\"></div>";}var _15=/%%([^;]+);([^;]+);([^;]+);([^;]+);([^;]+);/g;function htmRpc(){return this.htm.replace(_15,"<div style=\"overflow:hidden;position:absolute;background-color:"+"$1;left:$2;top:$3;width:$4;height:$5\"></div>\n");}function htmPrtRpc(){return this.htm.replace(_15,"<div style=\"overflow:hidden;position:absolute;background-color:"+"$1;left:$2;top:$3;width:$4;height:$5;border-left:$4px solid $1\"></div>\n");}function mkLin(x1,y1,x2,y2){if(x1>x2){var _x2=x2;var _y2=y2;x2=x1;y2=y1;x1=_x2;y1=_y2;}var dx=x2-x1,dy=Math.abs(y2-y1),x=x1,y=y1,_20=(y1>y2)?-1:1;if(dx>=dy){var pr=dy<<1,pru=pr-(dx<<1),p=pr-dx,ox=x;while(dx>0){--dx;++x;if(p>0){this.mkDiv(ox,y,x-ox,1);y+=_20;p+=pru;ox=x;}else{p+=pr;}}this.mkDiv(ox,y,x2-ox+1,1);}else{var pr=dx<<1,pru=pr-(dy<<1),p=pr-dy,oy=y;if(y2<=y1){while(dy>0){--dy;if(p>0){this.mkDiv(x++,y,1,oy-y+1);y+=_20;p+=pru;oy=y;}else{y+=_20;p+=pr;}}this.mkDiv(x2,y2,1,oy-y2+1);}else{while(dy>0){--dy;y+=_20;if(p>0){this.mkDiv(x++,oy,1,y-oy);p+=pru;oy=y;}else{p+=pr;}}this.mkDiv(x2,oy,1,y2-oy+1);}}}function mkLin2D(x1,y1,x2,y2){if(x1>x2){var _x2=x2;var _y2=y2;x2=x1;y2=y1;x1=_x2;y1=_y2;}var dx=x2-x1,dy=Math.abs(y2-y1),x=x1,y=y1,_30=(y1>y2)?-1:1;var s=this.stroke;if(dx>=dy){if(dx>0&&s-3>0){var _s=(s*dx*Math.sqrt(1+dy*dy/(dx*dx))-dx-(s>>1)*dy)/dx;_s=(!(s-4)?Math.ceil(_s):Math.round(_s))+1;}else{var _s=s;}var ad=Math.ceil(s/2);var pr=dy<<1,pru=pr-(dx<<1),p=pr-dx,ox=x;while(dx>0){--dx;++x;if(p>0){this.mkDiv(ox,y,x-ox+ad,_s);y+=_30;p+=pru;ox=x;}else{p+=pr;}}this.mkDiv(ox,y,x2-ox+ad+1,_s);}else{if(s-3>0){var _s=(s*dy*Math.sqrt(1+dx*dx/(dy*dy))-(s>>1)*dx-dy)/dy;_s=(!(s-4)?Math.ceil(_s):Math.round(_s))+1;}else{var _s=s;}var ad=Math.round(s/2);var pr=dx<<1,pru=pr-(dy<<1),p=pr-dy,oy=y;if(y2<=y1){++ad;while(dy>0){--dy;if(p>0){this.mkDiv(x++,y,_s,oy-y+ad);y+=_30;p+=pru;oy=y;}else{y+=_30;p+=pr;}}this.mkDiv(x2,y2,_s,oy-y2+ad);}else{while(dy>0){--dy;y+=_30;if(p>0){this.mkDiv(x++,oy,_s,y-oy+ad);p+=pru;oy=y;}else{p+=pr;}}this.mkDiv(x2,oy,_s,y2-oy+ad+1);}}}function mkLinDott(x1,y1,x2,y2){if(x1>x2){var _x2=x2;var _y2=y2;x2=x1;y2=y1;x1=_x2;y1=_y2;}var dx=x2-x1,dy=Math.abs(y2-y1),x=x1,y=y1,_43=(y1>y2)?-1:1,drw=true;if(dx>=dy){var pr=dy<<1,pru=pr-(dx<<1),p=pr-dx;while(dx>0){--dx;if(drw){this.mkDiv(x,y,1,1);}drw=!drw;if(p>0){y+=_43;p+=pru;}else{p+=pr;}++x;}}else{var pr=dx<<1,pru=pr-(dy<<1),p=pr-dy;while(dy>0){--dy;if(drw){this.mkDiv(x,y,1,1);}drw=!drw;y+=_43;if(p>0){++x;p+=pru;}else{p+=pr;}}}if(drw){this.mkDiv(x,y,1,1);}}function mkOv(_48,top,_4a,_4b){var a=(++_4a)>>1,b=(++_4b)>>1,wod=_4a&1,hod=_4b&1,cx=_48+a,cy=top+b,x=0,y=b,ox=0,oy=b,aa2=(a*a)<<1,aa4=aa2<<1,bb2=(b*b)<<1,bb4=bb2<<1,st=(aa2>>1)*(1-(b<<1))+bb2,tt=(bb2>>1)-aa2*((b<<1)-1),w,h;while(y>0){if(st<0){st+=bb2*((x<<1)+3);tt+=bb4*(++x);}else{if(tt<0){st+=bb2*((x<<1)+3)-aa4*(y-1);tt+=bb4*(++x)-aa2*(((y--)<<1)-3);w=x-ox;h=oy-y;if((w&2)&&(h&2)){this.mkOvQds(cx,cy,x-2,y+2,1,1,wod,hod);this.mkOvQds(cx,cy,x-1,y+1,1,1,wod,hod);}else{this.mkOvQds(cx,cy,x-1,oy,w,h,wod,hod);}ox=x;oy=y;}else{tt-=aa2*((y<<1)-3);st-=aa4*(--y);}}}w=a-ox+1;h=(oy<<1)+hod;y=cy-oy;this.mkDiv(cx-a,y,w,h);this.mkDiv(cx+ox+wod-1,y,w,h);}function mkOv2D(_5e,top,_60,_61){var s=this.stroke;_60+=s+1;_61+=s+1;var a=_60>>1,b=_61>>1,wod=_60&1,hod=_61&1,cx=_5e+a,cy=top+b,x=0,y=b,aa2=(a*a)<<1,aa4=aa2<<1,bb2=(b*b)<<1,bb4=bb2<<1,st=(aa2>>1)*(1-(b<<1))+bb2,tt=(bb2>>1)-aa2*((b<<1)-1);if(s-4<0&&(!(s-2)||_60-51>0&&_61-51>0)){var ox=0,oy=b,w,h,pxw;while(y>0){if(st<0){st+=bb2*((x<<1)+3);tt+=bb4*(++x);}else{if(tt<0){st+=bb2*((x<<1)+3)-aa4*(y-1);tt+=bb4*(++x)-aa2*(((y--)<<1)-3);w=x-ox;h=oy-y;if(w-1){pxw=w+1+(s&1);h=s;}else{if(h-1){pxw=s;h+=1+(s&1);}else{pxw=h=s;}}this.mkOvQds(cx,cy,x-1,oy,pxw,h,wod,hod);ox=x;oy=y;}else{tt-=aa2*((y<<1)-3);st-=aa4*(--y);}}}this.mkDiv(cx-a,cy-oy,s,(oy<<1)+hod);this.mkDiv(cx+a+wod-s,cy-oy,s,(oy<<1)+hod);}else{var _a=(_60-(s<<1))>>1,_b=(_61-(s<<1))>>1,_x=0,_y=_b,_7a=(_a*_a)<<1,_7b=_7a<<1,_7c=(_b*_b)<<1,_7d=_7c<<1,_st=(_7a>>1)*(1-(_b<<1))+_7c,_tt=(_7c>>1)-_7a*((_b<<1)-1),pxl=new Array(),pxt=new Array(),_82=new Array();pxl[0]=0;pxt[0]=b;_82[0]=_b-1;while(y>0){if(st<0){pxl[pxl.length]=x;pxt[pxt.length]=y;st+=bb2*((x<<1)+3);tt+=bb4*(++x);}else{if(tt<0){pxl[pxl.length]=x;st+=bb2*((x<<1)+3)-aa4*(y-1);tt+=bb4*(++x)-aa2*(((y--)<<1)-3);pxt[pxt.length]=y;}else{tt-=aa2*((y<<1)-3);st-=aa4*(--y);}}if(_y>0){if(_st<0){_st+=_7c*((_x<<1)+3);_tt+=_7d*(++_x);_82[_82.length]=_y-1;}else{if(_tt<0){_st+=_7c*((_x<<1)+3)-_7b*(_y-1);_tt+=_7d*(++_x)-_7a*(((_y--)<<1)-3);_82[_82.length]=_y-1;}else{_tt-=_7a*((_y<<1)-3);_st-=_7b*(--_y);_82[_82.length-1]--;}}}}var ox=-wod,oy=b,_oy=_82[0],l=pxl.length,w,h;for(var i=0;i<l;i++){if(typeof _82[i]!="undefined"){if(_82[i]<_oy||pxt[i]<oy){x=pxl[i];this.mkOvQds(cx,cy,x,oy,x-ox,oy-_oy,wod,hod);ox=x;oy=pxt[i];_oy=_82[i];}}else{x=pxl[i];this.mkDiv(cx-x,cy-oy,1,(oy<<1)+hod);this.mkDiv(cx+ox+wod,cy-oy,1,(oy<<1)+hod);ox=x;oy=pxt[i];}}this.mkDiv(cx-a,cy-oy,1,(oy<<1)+hod);this.mkDiv(cx+ox+wod,cy-oy,1,(oy<<1)+hod);}}function mkOvDott(_86,top,_88,_89){var a=(++_88)>>1,b=(++_89)>>1,wod=_88&1,hod=_89&1,_8e=hod^1,cx=_86+a,cy=top+b,x=0,y=b,aa2=(a*a)<<1,aa4=aa2<<1,bb2=(b*b)<<1,bb4=bb2<<1,st=(aa2>>1)*(1-(b<<1))+bb2,tt=(bb2>>1)-aa2*((b<<1)-1),drw=true;while(y>0){if(st<0){st+=bb2*((x<<1)+3);tt+=bb4*(++x);}else{if(tt<0){st+=bb2*((x<<1)+3)-aa4*(y-1);tt+=bb4*(++x)-aa2*(((y--)<<1)-3);}else{tt-=aa2*((y<<1)-3);st-=aa4*(--y);}}if(drw&&y>=_8e){this.mkOvQds(cx,cy,x,y,1,1,wod,hod);}drw=!drw;}}function mkRect(x,y,w,h){var s=this.stroke;this.mkDiv(x,y,w,s);this.mkDiv(x+w,y,s,h);this.mkDiv(x,y+h,w+s,s);this.mkDiv(x,y+s,s,h-s);}function mkRectDott(x,y,w,h){this.drawLine(x,y,x+w,y);this.drawLine(x+w,y,x+w,y+h);this.drawLine(x,y+h,x+w,y+h);this.drawLine(x,y,x,y+h);}function jsgFont(){this.PLAIN="font-weight:normal;";this.BOLD="font-weight:bold;";this.ITALIC="font-style:italic;";this.ITALIC_BOLD=this.ITALIC+this.BOLD;this.BOLD_ITALIC=this.ITALIC_BOLD;}var _a3=new jsgFont();function jsgStroke(){this.DOTTED=-1;}var _a4=new jsgStroke();function jsGraphics(cnv,wnd){this.setColor=new Function("arg","this.color = arg.toLowerCase();");this.setOpacity=function(o){this.opacity=o;};this.setStroke=function(x){this.stroke=x;if(!(x+1)){this.drawLine=mkLinDott;this.mkOv=mkOvDott;this.drawRect=mkRectDott;}else{if(x-1>0){this.drawLine=mkLin2D;this.mkOv=mkOv2D;this.drawRect=mkRect;}else{this.drawLine=mkLin;this.mkOv=mkOv;this.drawRect=mkRect;}}};this.setPrintable=function(arg){this.printable=arg;if(_3){this.mkDiv=mkDivIe;this.htmRpc=arg?htmPrtRpc:htmRpc;}else{this.mkDiv=arg?mkDivPrt:mkDiv;}};this.setFont=function(fam,sz,sty){this.ftFam=fam;this.ftSz=sz;this.ftSty=sty||_a3.PLAIN;};this.drawPolyline=this.drawPolyLine=function(x,y){for(var i=x.length-1;i;){--i;this.drawLine(x[i],y[i],x[i+1],y[i+1]);}};this.fillRect=function(x,y,w,h){this.mkDiv(x,y,w,h);};this.drawPolygon=function(x,y){this.drawPolyline(x,y);this.drawLine(x[x.length-1],y[x.length-1],x[0],y[0]);};this.drawEllipse=this.drawOval=function(x,y,w,h){this.mkOv(x,y,w,h);};this.fillEllipse=this.fillOval=function(_ba,top,w,h){var a=w>>1,b=h>>1,wod=w&1,hod=h&1,cx=_ba+a,cy=top+b,x=0,y=b,oy=b,aa2=(a*a)<<1,aa4=aa2<<1,bb2=(b*b)<<1,bb4=bb2<<1,st=(aa2>>1)*(1-(b<<1))+bb2,tt=(bb2>>1)-aa2*((b<<1)-1),xl,dw,dh;if(w){while(y>0){if(st<0){st+=bb2*((x<<1)+3);tt+=bb4*(++x);}else{if(tt<0){st+=bb2*((x<<1)+3)-aa4*(y-1);xl=cx-x;dw=(x<<1)+wod;tt+=bb4*(++x)-aa2*(((y--)<<1)-3);dh=oy-y;this.mkDiv(xl,cy-oy,dw,dh);this.mkDiv(xl,cy+y+hod,dw,dh);oy=y;}else{tt-=aa2*((y<<1)-3);st-=aa4*(--y);}}}}this.mkDiv(cx-a,cy-oy,w,(oy<<1)+hod);};this.fillArc=function(iL,iT,iW,iH,_d4,_d5){var a=iW>>1,b=iH>>1,_d8=(iW&1)|((iH&1)<<16),cx=iL+a,cy=iT+b,x=0,y=b,ox=x,oy=y,aa2=(a*a)<<1,aa4=aa2<<1,bb2=(b*b)<<1,bb4=bb2<<1,st=(aa2>>1)*(1-(b<<1))+bb2,tt=(bb2>>1)-aa2*((b<<1)-1),_e5,_e6,_e7,_e8,_e9=(1<<(Math.floor((_d4%=360)/180)<<3))|(2<<(Math.floor((_d5%=360)/180)<<3))|((_d4>=_d5)<<16),_ea=new Array(b+1),_eb=new Array(b+1);_d4*=Math.PI/180;_d5*=Math.PI/180;_e5=cx+Math.round(a*Math.cos(_d4));_e6=cy+Math.round(-b*Math.sin(_d4));mkLinVirt(_ea,cx,cy,_e5,_e6);_e7=cx+Math.round(a*Math.cos(_d5));_e8=cy+Math.round(-b*Math.sin(_d5));mkLinVirt(_eb,cx,cy,_e7,_e8);while(y>0){if(st<0){st+=bb2*((x<<1)+3);tt+=bb4*(++x);}else{if(tt<0){st+=bb2*((x<<1)+3)-aa4*(y-1);ox=x;tt+=bb4*(++x)-aa2*(((y--)<<1)-3);this.mkArcDiv(ox,y,oy,cx,cy,_d8,_ea,_eb,_e9);oy=y;}else{tt-=aa2*((y<<1)-3);st-=aa4*(--y);if(y&&(_ea[y]!=_ea[y-1]||_eb[y]!=_eb[y-1])){this.mkArcDiv(x,y,oy,cx,cy,_d8,_ea,_eb,_e9);ox=x;oy=y;}}}}this.mkArcDiv(x,0,oy,cx,cy,_d8,_ea,_eb,_e9);if(_d8>>16){if(_e9>>16){var xl=(_e6<=cy||_e8>cy)?(cx-x):cx;this.mkDiv(xl,cy,x+cx-xl+(_d8&65535),1);}else{if((_e9&1)&&_e8>cy){this.mkDiv(cx-x,cy,x,1);}}}};this.fillPolygon=function(_ed,_ee){var i;var y;var _f1,_f2;var x1,y1;var x2,y2;var _f7,_f8;var _f9;var n=_ed.length;if(!n){return;}_f1=_ee[0];_f2=_ee[0];for(i=1;i<n;i++){if(_ee[i]<_f1){_f1=_ee[i];}if(_ee[i]>_f2){_f2=_ee[i];}}for(y=_f1;y<=_f2;y++){var _fb=new Array();_f9=0;for(i=0;i<n;i++){if(!i){_f7=n-1;_f8=0;}else{_f7=i-1;_f8=i;}y1=_ee[_f7];y2=_ee[_f8];if(y1<y2){x1=_ed[_f7];x2=_ed[_f8];}else{if(y1>y2){y2=_ee[_f7];y1=_ee[_f8];x2=_ed[_f7];x1=_ed[_f8];}else{continue;}}if((y>=y1)&&(y<y2)){_fb[_f9++]=Math.round((y-y1)*(x2-x1)/(y2-y1)+x1);}else{if((y==_f2)&&(y>y1)&&(y<=y2)){_fb[_f9++]=Math.round((y-y1)*(x2-x1)/(y2-y1)+x1);}}}_fb.sort(CompInt);for(i=0;i<_f9;i+=2){this.mkDiv(_fb[i],y,_fb[i+1]-_fb[i]+1,1);}}};this.drawString=function(txt,x,y){this.htm+="<div style=\"position:absolute;white-space:nowrap;"+"left:"+x+"px;"+"top:"+y+"px;"+"font-family:"+this.ftFam+";"+"font-size:"+this.ftSz+";"+"color:"+this.color+";"+this.ftSty+"\">"+txt+"</div>";};this.drawStringRect=function(txt,x,y,_102,_103){this.htm+="<div style=\"position:absolute;overflow:hidden;"+"left:"+x+"px;"+"top:"+y+"px;"+"width:"+_102+"px;"+"text-align:"+_103+";"+"font-family:"+this.ftFam+";"+"font-size:"+this.ftSz+";"+"color:"+this.color+";"+this.ftSty+"\">"+txt+"</div>";};this.drawImage=function(_104,x,y,w,h,a){this.htm+="<div style=\"position:absolute;"+"left:"+x+"px;"+"top:"+y+"px;"+"width:"+w+"px;"+"height:"+h+"px;\">"+"<img src=\""+_104+"\" width=\""+w+"\" height=\""+h+"\""+(a?(" "+a):"")+">"+"</div>";};this.clear=function(){this.htm="";if(this.cnv){this.cnv.innerHTML="";}};this.mkOvQds=function(cx,cy,x,y,w,h,wod,hod){var xl=cx-x,xr=cx+x+wod-w,yt=cy-y,yb=cy+y+hod-h;if(xr>xl+w){this.mkDiv(xr,yt,w,h);this.mkDiv(xr,yb,w,h);}else{w=xr-xl+w;}this.mkDiv(xl,yt,w,h);this.mkDiv(xl,yb,w,h);};this.mkArcDiv=function(x,y,oy,cx,cy,_11b,_11c,_11d,_11e){var _11f=cx+x+(_11b&65535),y2,h=oy-y,xl,xr,w;if(!h){h=1;}x=cx-x;if(_11e&16711680){y2=cy-y-h;if(_11e&255){if(_11e&2){xl=Math.max(x,_11d[y]);w=_11f-xl;if(w>0){this.mkDiv(xl,y2,w,h);}}if(_11e&1){xr=Math.min(_11f,_11c[y]);w=xr-x;if(w>0){this.mkDiv(x,y2,w,h);}}}else{this.mkDiv(x,y2,_11f-x,h);}y2=cy+y+(_11b>>16);if(_11e&65280){if(_11e&256){xl=Math.max(x,_11c[y]);w=_11f-xl;if(w>0){this.mkDiv(xl,y2,w,h);}}if(_11e&512){xr=Math.min(_11f,_11d[y]);w=xr-x;if(w>0){this.mkDiv(x,y2,w,h);}}}else{this.mkDiv(x,y2,_11f-x,h);}}else{if(_11e&255){if(_11e&2){xl=Math.max(x,_11d[y]);}else{xl=x;}if(_11e&1){xr=Math.min(_11f,_11c[y]);}else{xr=_11f;}y2=cy-y-h;w=xr-xl;if(w>0){this.mkDiv(xl,y2,w,h);}}if(_11e&65280){if(_11e&256){xl=Math.max(x,_11c[y]);}else{xl=x;}if(_11e&512){xr=Math.min(_11f,_11d[y]);}else{xr=_11f;}y2=cy+y+(_11b>>16);w=xr-xl;if(w>0){this.mkDiv(xl,y2,w,h);}}}};this.setStroke(1);this.setFont("verdana,geneva,helvetica,sans-serif","12px",_a3.PLAIN);this.color="#000000";this.opacity=1;this.htm="";this.wnd=wnd||window;if(!_1){chkDHTM();}if(_1){if(cnv){if(typeof (cnv)=="string"){this.cont=document.all?(this.wnd.document.all[cnv]||null):document.getElementById?(this.wnd.document.getElementById(cnv)||null):null;}else{if(cnv==window.document){this.cont=document.getElementsByTagName("body")[0];}else{this.cont=cnv;}}this.cnv=document.createElement("div");this.cont.appendChild(this.cnv);this.paint=_4?pntCnvDom:pntCnvIe;}else{this.paint=pntDoc;}}else{this.paint=pntN;}this.setPrintable(false);}function mkLinVirt(arr,x1,y1,x2,y2){var dx=Math.abs(x2-x1),dy=Math.abs(y2-y1),x=x1,y=y1,_12e=(x1>x2)?-1:1,_12f=(y1>y2)?-1:1,p,i=0;if(dx>=dy){var pr=dy<<1,pru=pr-(dx<<1);p=pr-dx;while(dx>0){--dx;if(p>0){arr[i++]=x;y+=_12f;p+=pru;}else{p+=pr;}x+=_12e;}}else{var pr=dx<<1,pru=pr-(dy<<1);p=pr-dy;while(dy>0){--dy;y+=_12f;arr[i++]=x;if(p>0){x+=_12e;p+=pru;}else{p+=pr;}}}for(var len=arr.length,i=len-i;i;){arr[len-(i--)]=x;}}function CompInt(x,y){return (x-y);}window.jsGraphics=jsGraphics;})();(function(){ZdcShape={};ZdcShape._CavasType="none";ZdcShape._XMLNS_SVG="http://www.w3.org/2000/svg";ZdcShape._CountCanvasID=0;ZdcShape._ZdcMapServer="";ZdcShape.Subclass=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c();};ZdcShape._FillImage=[];ZdcShape.InitCavasType=function(){if(typeof ZdcMapServer!="undefined"){ZdcShape._ZdcMapServer=ZdcMapServer;}else{if(ZdcCommon&&ZdcCommon.ZdcMapServer){ZdcShape._ZdcMapServer=ZdcCommon.ZdcMapServer;}}if(document.namespaces&&document.namespaces.add){if(ZdcCommon.IsIE()>=9&&document.createElementNS){ZdcShape._CavasType="SVGT";return;}if(!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.createStyleSheet().addRule("v\\:stroke","behavior: url(#default#VML); display:inline-block;");document.createStyleSheet().addRule("v\\:shape","behavior: url(#default#VML); display:inline-block;");document.createStyleSheet().addRule("v\\:fill","behavior: url(#default#VML); display:inline-block;");document.createStyleSheet().addRule("v\\:shadow","behavior: url(#default#VML); display:inline-block;");}ZdcShape._CavasType="VML";return;}else{if(document.createElementNS&&document.implementation.hasFeature("XPath","3.0")){ZdcShape._CavasType="SVGT";return;}}if(ZdcShape._CavasType=="none"){try{if(document.createElement("canvas").getContext){ZdcShape._CavasType="CANVAS";}return;}catch(e){}}if(ZdcShape._CavasType=="none"){ZdcShape._CavasType="PIXEL";return;}};ZdcShape.InitCavasType();ZdcShape.Base=function(type){this.strokeColor="black";this.strokeWeight="2";this.strokeStyle="solid";this.opacity="1.0";this.fillType="";this.shadowFlg=false;this.shadowColor="#808080";this.shadowX=10;this.shadowY=10;this.figureType=type;this.id=-1;this.points=[];this.pointsPixel=[];this.parent=null;this.doc=null;this.docShadow=null;this._container=null;this._jg=null;};ZdcShape.Base.prototype.clone=function(){a=null;switch(this.figureType){case "polygon":a=new ZdcShape.Polygon();a.antialias=this.antialias;break;case "polyline":a=new ZdcShape.Polyline();break;case "oval":a=new ZdcShape.Oval();break;case "rect":a=new ZdcShape.Rect();break;case "text":a=new ZdcShape.Text();a.textString=this.textString;a.font=this.font;a.borderWidth=this.borderWidth;a.borderColor=this.borderColor;a.bgColor=this.bgColor;a.textColor=this.textColor;a.anchor=this.anchor;a.offsetx=Number(this.offsetx);a.offsety=Number(this.offsety);break;default:a=new ZdcShape.Base();break;}a.strokeColor=this.strokeColor;a.strokeWeight=this.strokeWeight;a.strokeStyle=this.strokeStyle;a.fillType=this.fillType;a.opacity=this.opacity;a.shadowFlg=this.shadowFlg;a.shadowColor=this.shadowColor;a.shadowX=this.shadowX;a.shadowY=this.shadowY;var k;for(k=0;k<this.points.length;k++){a.points[k]=new ZdcPoint(this.points[k].lon,this.points[k].lat,1);}for(k=0;k<this.pointsPixel.length;k++){a.pointsPixel[k]=[];a.pointsPixel[k].x=this.pointsPixel[k].x;a.pointsPixel[k].y=this.pointsPixel[k].y;}return a;};ZdcShape.Base.prototype.addPoint=function(pt){this.points[this.points.length]=pt;};ZdcShape.Base.prototype.setPoint=function(_13d,pt){if(_13d>=0&&_13d<=this.points.length){this.points[_13d]=pt;return true;}else{return false;}};ZdcShape.Base.prototype.removePoint=function(_13f){if(_13f>=0&&_13f<this.points.length){var t=this.points;this.points=[];for(var k=0;k<t.length;k++){if(k!=_13f){this.points[this.points.length]=t[k];}}return true;}else{return false;}};ZdcShape.Base.prototype.clearPoints=function(){this.points=[];this.pointsPixel=[];};ZdcShape.Base.prototype.getPoints=function(){return this.points;};ZdcShape.Base.prototype.GetVMLString=function(){return "";};ZdcShape.Base.prototype.RedrawSVGT=function(){return false;};ZdcShape.Base.prototype.RedrawCANVAS=function(){return false;};ZdcShape.Base.prototype.SetCanvasFill=function(ctx){if(!this.fillType){return;}var img=null;ctx.fillStyle=this.fillType;};ZdcShape.Base.prototype.redraw=function(){this.strokeWeight=parseInt(this.strokeWeight);if((!this.parent)||(!this.parent.doc)){return false;}this.ResetPixelPoints();if(this.doc){this.doc.style.visibility=this.IsVisible()?"visible":"hidden";}switch(ZdcShape._CavasType){case "VML":if(this.doc){this.doc.innerHTML=this.GetVMLString();}break;case "SVGT":if(this.doc){this.RedrawSVGT();}break;case "CANVAS":this.RedrawCANVAS();break;case "PIXEL":if(this.RedrawPixel){this.RedrawPixel();}break;}};ZdcShape.Base.prototype.RemoveDomPixel=function(){if(!this.doc){return;}if(this._jg){this._jg.clear();}};ZdcShape.Base.prototype.InitDom=function(){if(this.doc||(!this.parent)||(!this.parent.canvas)){return false;}switch(ZdcShape._CavasType){case "VML":this.doc=document.createElement("div");this.doc.style.cssText="position: absolute; "+"left:0px; top:0px; z-index:"+ZdcShape.Layer._zindex+"; +"+"overflow: visible; ";this.parent.canvas.appendChild(this.doc);return true;break;case "SVGT":this.doc=document.createElement("div");this.doc.style.position="absolute";this.doc.style.left="0px";this.doc.style.top="0px";this.doc.style.zIndex=ZdcShape.Layer._zindex;this.doc.style.overflow="visible";this.parent.canvas.appendChild(this.doc);return true;break;case "CANVAS":this._container=document.createElement("div");this._container.style.cssText="position: absolute; "+"left:0px; top:0px; z-index:"+ZdcShape.Layer._zindex+"; "+"width: "+this.parent.width+"px; "+"height: "+this.parent.height+"px; "+"overflow: hidden; ";this.parent.canvas.appendChild(this._container);this.doc=document.createElement("canvas");this.doc.setAttribute("id","DCCanvas2D"+(++ZdcShape._CountCanvasID));this.doc.setAttribute("width",this.parent.width);this.doc.setAttribute("height",this.parent.height);this._container.appendChild(this.doc);return true;case "PIXEL":if(this.figureType!="polyline"){return false;}this.doc=document.createElement("div");this.doc.style.cssText="position: absolute; "+"left:0px; top:0px; "+"width: "+this.parent.width+"px; "+"height: "+this.parent.height+"px; "+"overflow: hidden; ";this.parent.canvas.appendChild(this.doc);this._jg=new jsGraphics(this.doc);return true;}return false;};ZdcShape.Base.prototype.GetSVGDashStype=function(){var s="";var w=parseFloat(this.strokeWeight);if(w<=0){return s;}switch(this.strokeStyle){case "dash":s=4*w+","+2*w;break;case "dot":s=1*w+","+2*w;break;case "dashdot":s=4*w+","+2*w+","+1*w+","+2*w;break;}return s;};ZdcShape.Base.prototype.IsVisible=function(){if(this.parent){return this.parent.IsVisible();}return false;};ZdcShape.Base.prototype.CanvasStyleLine=function(ctx,spt,ept,_149,_14a){var k,d;var od=0;var sp=new ZdcPixel();var ep=new ZdcPixel();sp.x=spt.x;sp.y=spt.y;ep.x=ept.x;ep.y=ept.y;d=Math.sqrt(Math.pow((spt.x-ept.x),2)+Math.pow((spt.y-ept.y),2));for(k=0;k<_149.length;k++){od+=_149[k];}var dx=ept.x-spt.x;var dy=ept.y-spt.y;var d2=Math.pow((spt.x-ept.x),2)+Math.pow((spt.y-ept.y),2);if(dx==0&&dy==0){return _14a;}var dk;var sp_t=new ZdcPixel();var ep_t=new ZdcPixel();sp_t.x=sp.x;sp_t.y=sp.y;var tdo=0;var d_t2;var d_a=0;var _159=false;var dir=1;if(_14a>0){var _15b=false;if(Math.abs(dx)>Math.abs(dy)){if(dx<0){dir=-1;}dk=dy/dx;for(k=0;k<_149.length;k++){d_a+=_149[k];if(d_a<=_14a){continue;}ep_t.x=dir*Math.sqrt((d_a-_14a)*(d_a-_14a)/(dk*dk+1));ep_t.y=ep_t.x*dk;ep_t.x+=spt.x;ep_t.y+=spt.y;d_t2=Math.pow((spt.x-ep_t.x),2)+Math.pow((spt.y-ep_t.y),2);if(d_t2>=d2){_159=true;ep_t.x=ept.x;ep_t.y=ept.y;}ep_t.x=Math.round(ep_t.x);ep_t.y=Math.round(ep_t.y);if(k%2==0){if(_15b){ctx.moveTo(sp_t.x,sp_t.y);}ctx.lineTo(ep_t.x,ep_t.y);}_15b=true;if(_159){return Math.round((d+_14a)%od);}else{sp_t.x=ep_t.x;sp_t.y=ep_t.y;}}}else{if(dy<0){dir=-1;}dk=dx/dy;for(k=0;k<_149.length;k++){d_a+=_149[k];if(d_a<=_14a){continue;}ep_t.y=dir*Math.sqrt((d_a-_14a)*(d_a-_14a)/(dk*dk+1));ep_t.x=ep_t.y*dk;ep_t.x+=spt.x;ep_t.y+=spt.y;d_t2=Math.pow((spt.x-ep_t.x),2)+Math.pow((spt.y-ep_t.y),2);if(d_t2>=d2){_159=true;ep_t.x=ept.x;ep_t.y=ept.y;}ep_t.x=Math.round(ep_t.x);ep_t.y=Math.round(ep_t.y);if(k%2==0){if(_15b){ctx.moveTo(sp_t.x,sp_t.y);}ctx.lineTo(ep_t.x,ep_t.y);}_15b=true;if(_159){return Math.round((d+_14a)%od);}else{sp_t.x=ep_t.x;sp_t.y=ep_t.y;}}}d_a-=_14a;}if(Math.abs(dx)>Math.abs(dy)){if(dx<0){dir=-1;}dk=dy/dx;if(true){while(true){for(k=0;k<_149.length;k++){d_a+=_149[k];ep_t.x=dir*Math.sqrt(d_a*d_a/(dk*dk+1));ep_t.y=ep_t.x*dk;ep_t.x+=spt.x;ep_t.y+=spt.y;d_t2=Math.pow((spt.x-ep_t.x),2)+Math.pow((spt.y-ep_t.y),2);if(d_t2>=d2){_159=true;ep_t.x=ept.x;ep_t.y=ept.y;}ep_t.x=Math.round(ep_t.x);ep_t.y=Math.round(ep_t.y);if(k%2==0){ctx.moveTo(sp_t.x,sp_t.y);ctx.lineTo(ep_t.x,ep_t.y);}if(_159){return Math.round((d+_14a)%od);}else{sp_t.x=ep_t.x;sp_t.y=ep_t.y;}}}}}else{if(dy<0){dir=-1;}dk=dx/dy;if(true){while(true){for(k=0;k<_149.length;k++){d_a+=_149[k];ep_t.y=dir*Math.sqrt(d_a*d_a/(dk*dk+1));ep_t.x=ep_t.y*dk;ep_t.x+=spt.x;ep_t.y+=spt.y;d_t2=Math.pow((spt.x-ep_t.x),2)+Math.pow((spt.y-ep_t.y),2);if(d_t2>=d2){_159=true;ep_t.x=ept.x;ep_t.y=ept.y;}ep_t.x=Math.round(ep_t.x);ep_t.y=Math.round(ep_t.y);if(k%2==0){ctx.moveTo(sp_t.x,sp_t.y);ctx.lineTo(ep_t.x,ep_t.y);}if(_159){return Math.round((d+_14a)%od);}else{sp_t.x=ep_t.x;sp_t.y=ep_t.y;}}}}}return ((d+_14a)%od);};ZdcShape.Base.prototype.StrokeCanvas=function(ctx){var s=this.GetSVGDashStype(ctx);var k;if(!s){ctx.moveTo(this.pointsPixel[0].x,this.pointsPixel[0].y);for(k=1;k<this.pointsPixel.length;k++){ctx.lineTo(this.pointsPixel[k].x,this.pointsPixel[k].y);}}else{var o=0;var t=s.split(",");for(k=0;k<t.length;k++){t[k]=Number(t[k]);}for(k=1;k<this.pointsPixel.length;k++){o=this.CanvasStyleLine(ctx,this.pointsPixel[k-1],this.pointsPixel[k],t,o);}if(this.figureType=="polygon"){if(this.pointsPixel[k-1].x!=this.pointsPixel[0].x||this.pointsPixel[k-1].y!=this.pointsPixel[0].y){this.CanvasStyleLine(ctx,this.pointsPixel[k-1],this.pointsPixel[0],t,o);}}}};ZdcShape.Base.prototype.RemoveDom=function(){if(this.doc&&this.parent&&this.parent.canvas){switch(ZdcShape._CavasType){case "VML":this.parent.canvas.removeChild(this.doc);this.doc=null;break;case "SVGT":this.parent.canvas.removeChild(this.doc);this.doc=null;break;case "CANVAS":if(this._container&&this.doc){this._container.removeChild(this.doc);}if(this._container&&this.parent&&this.parent.canvas){this.parent.canvas.removeChild(this._container);}this.doc=null;this.container=null;break;case "PIXEL":this.RemoveDomPixel();this.parent.canvas.removeChild(this.doc);this.doc=null;this._jg=null;break;}}};ZdcShape.Base.prototype.ResetPixelPoints=function(){if((!this.parent)||(!this.parent.doc)){return false;}var m=this.parent.parent;if(!m){return false;}var t=this.parent;var _163=parseInt(t.doc.style.left);var _164=parseInt(t.doc.style.top);this.pointsPixel=[];for(var k=0;k<this.points.length;k++){var pxy=m.convertPoint2Pixel(this.points[k]);this.pointsPixel[k]=[];this.pointsPixel[k].x=pxy.x-_163;this.pointsPixel[k].y=pxy.y-_164;}return true;};ZdcShape.Polygon=function(eflg){ZdcShape.Base.call(this,"polygon");this.antialias="true";if(eflg==true){this.eventflg=true;}else{this.eventflg=false;}};ZdcShape.Subclass(ZdcShape.Polygon,ZdcShape.Base);ZdcShape.Polygon.prototype.RedrawCANVAS=function(){if(!this.doc||(!this.doc.getContext)||(!this.parent)){return false;}var _168=this.doc.getContext("2d");if(!_168){return false;}_168.clearRect(0,0,this.parent.width,this.parent.height);if(this.opacity){_168.globalAlpha=this.opacity;}if(this.pointsPixel.length==1){_168.fillStyle=this.strokeColor;_168.arc(this.pointsPixel[0].x,this.pointsPixel[0].y,parseInt(this.strokeWeight),0,Math.PI*2,true);_168.fill();}else{if(this.pointsPixel.length==2){_168.beginPath();_168.strokeStyle=this.strokeColor;_168.lineWidth=parseInt(this.strokeWeight);_168.moveTo(this.pointsPixel[0].x,this.pointsPixel[0].y);_168.lineTo(this.pointsPixel[1].x,this.pointsPixel[1].y);_168.stroke();}else{if(this.pointsPixel.length>2){_168.strokeStyle=this.strokeColor;_168.lineWidth=parseInt(this.strokeWeight);if(this.shadowFlg&&(this.shadowX||this.shadowY)){_168.shadowColor=this.shadowColor;_168.shadowOffsetX=this.shadowX;_168.shadowOffsetY=this.shadowY;}else{_168.shadowOffsetX=0;_168.shadowOffsetY=0;}if(this.fillType){_168.beginPath();_168.moveTo(this.pointsPixel[0].x,this.pointsPixel[0].y);for(var k=1;k<this.pointsPixel.length;k++){_168.lineTo(this.pointsPixel[k].x,this.pointsPixel[k].y);}try{this.SetCanvasFill(_168);_168.fill();_168.fillStyle="black";}catch(e){}}if(this.shadowFlg&&(this.fillType)){_168.shadowColor="black";_168.shadowOffsetX=0;_168.shadowOffsetY=0;}_168.beginPath();this.StrokeCanvas(_168);_168.closePath();_168.stroke();}}}};ZdcShape.Polygon.prototype.RedrawSVGT=function(){if((!this.parent)){return false;}var pts="";var spts="";var k;var es="none";var ns="none";var minx=100000;var maxx=0;var miny=100000;var maxy=0;if(this.pointsPixel.length==1){ns="circle";}else{if(this.pointsPixel.length==2){ns="polyline";}else{if(this.pointsPixel.length>2){ns="polygon";}}}if(this.doc){es=this.doc.tagName;}if(es!=ns&&this.SVGcanvas){try{this.doc.removeChild(this.SVGcanvas);}catch(e){}this.SVGcanvas=null;if(this.SVGShadowcanvas){try{this.doc.removeChild(this.SVGShadowcanvas);}catch(e){}this.SVGShadowcanvas=null;}}for(k=0;k<this.pointsPixel.length;k++){if(k>0){pts+=" ";spts+=" ";}if(minx>this.pointsPixel[k].x){minx=this.pointsPixel[k].x;}if(maxx<this.pointsPixel[k].x){maxx=this.pointsPixel[k].x;}if(miny>this.pointsPixel[k].y){miny=this.pointsPixel[k].y;}if(maxy<this.pointsPixel[k].y){maxy=this.pointsPixel[k].y;}pts+=this.pointsPixel[k].x+","+this.pointsPixel[k].y;spts+=(this.pointsPixel[k].x+Number(this.shadowX))+","+(this.pointsPixel[k].y+Number(this.shadowY));}minx=minx-parseInt(this.strokeWeight)-1;miny=miny-parseInt(this.strokeWeight)-1;maxx=maxx+parseInt(this.strokeWeight)+1;maxy=maxy+parseInt(this.strokeWeight)+1;this.SVGcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGcanvas);this.SVGcanvas.setAttribute("version","1.1");this.SVGcanvas.setAttribute("overflow","visible");this.SVGcanvas.style.position="absolute";this.SVGcanvas.style.left=minx+"px";this.SVGcanvas.style.top=miny+"px";if(ns=="circle"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"circle");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(this.strokeWeight*4)+" "+Number(this.strokeWeight*4));this.SVGcanvas.setAttribute("width",this.strokeWeight*4);this.SVGcanvas.setAttribute("height",this.strokeWeight*4);this.SVGdoc.setAttribute("cx",this.pointsPixel[0].x);this.SVGdoc.setAttribute("cy",this.pointsPixel[0].y);this.SVGdoc.setAttribute("r",parseInt(this.strokeWeight));this.SVGdoc.setAttribute("fill",this.strokeColor);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}}else{if(ns=="polyline"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"polyline");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(maxx-minx)+" "+Number(maxy-miny));this.SVGcanvas.setAttribute("width",maxx-minx);this.SVGcanvas.setAttribute("height",maxy-miny);this.SVGdoc.setAttribute("fill","none");this.SVGdoc.setAttribute("stroke",this.strokeColor);this.SVGdoc.setAttribute("stroke-width",this.strokeWeight);this.SVGdoc.setAttribute("points",pts);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}if(this.GetSVGDashStype()){this.SVGdoc.setAttribute("stroke-dasharray",this.GetSVGDashStype());}}else{if(ns=="polygon"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"polygon");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(maxx-minx)+" "+Number(maxy-miny));this.SVGcanvas.setAttribute("width",maxx-minx);this.SVGcanvas.setAttribute("height",maxy-miny);this.SVGdoc.setAttribute("stroke",this.strokeColor);this.SVGdoc.setAttribute("stroke-width",this.strokeWeight);this.SVGdoc.setAttribute("points",pts);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}if(this.GetSVGDashStype()){this.SVGdoc.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.fillType){this.SVGdoc.setAttribute("fill",this.fillType);}else{this.SVGdoc.setAttribute("fill","none");}if(this.shadowFlg){this.SVGShadowcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGShadowcanvas);this.docShadow=document.createElementNS(ZdcShape._XMLNS_SVG,"polygon");this.SVGShadowcanvas.appendChild(this.docShadow);this.docShadow.setAttribute("visibility","hidden");if((this.shadowX||this.shadowY)&&this.IsVisible()){this.SVGShadowcanvas.setAttribute("version","1.1");this.SVGShadowcanvas.setAttribute("overflow","visible");this.SVGShadowcanvas.setAttribute("viewBox",Number(minx+eval(this.shadowX))+" "+Number(miny+eval(this.shadowY))+" "+Number(maxx-minx+eval(this.strokeWeight))+" "+Number(maxy-miny+eval(this.strokeWeight)));this.SVGShadowcanvas.style.position="absolute";this.SVGShadowcanvas.style.left=Number(minx+eval(this.shadowX))+"px";this.SVGShadowcanvas.style.top=Number(miny+eval(this.shadowY))+"px";this.SVGShadowcanvas.style.zIndex=-1;this.SVGShadowcanvas.setAttribute("width",maxx-minx+eval(this.strokeWeight));this.SVGShadowcanvas.setAttribute("height",maxy-miny+eval(this.strokeWeight));if(this.opacity){this.docShadow.setAttribute("opacity",this.opacity);}this.docShadow.setAttribute("stroke",this.shadowColor);this.docShadow.setAttribute("stroke-width",this.strokeWeight);this.docShadow.setAttribute("points",spts);if(this.GetSVGDashStype()){this.docShadow.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.fillType){this.docShadow.setAttribute("fill",this.shadowColor);}else{this.docShadow.setAttribute("fill","none");}this.docShadow.setAttribute("visibility","visible");}}}}}this.doc.onclick=this.MouseClickPolygon.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickPolygon.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpPolygon.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownPolygon.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutPolygon.bindAsEventListener(this);this.doc.onmousemove=this.MouseMovePolygon.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverPolygon.bindAsEventListener(this);};ZdcShape.Polygon.prototype.GetVMLString=function(){var str="";var path="";var _175="1.0";this.doc.onclick=this.MouseClickPolygon.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickPolygon.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpPolygon.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownPolygon.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutPolygon.bindAsEventListener(this);this.doc.onmousemove=this.MouseMovePolygon.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverPolygon.bindAsEventListener(this);if(this.opacity){_175=this.opacity;}var _176=_175;if((!this.strokeWeight)||(parseInt(this.strokeWeight)==0)){_176="0";}if(this.pointsPixel.length<=0){return "";}if(this.pointsPixel.length==1){str=""+"<v:oval style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:"+(this.pointsPixel[0].x-parseInt(this.strokeWeight))+"px;"+" top:"+(this.pointsPixel[0].y-parseInt(this.strokeWeight))+"px;"+" width:"+parseInt(this.strokeWeight)*2+"px;"+" height:"+parseInt(this.strokeWeight)*2+"px;"+" antialias:true;\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\"true\""+" fillcolor=\""+this.strokeColor+"\""+">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\"solid\""+" opacity=\""+_175+"\""+"/>";str+="<v:fill";str+=" opacity=\""+_175+"\""+"/>";str+="</v:oval>";return str;}else{if(this.pointsPixel.length==2){path="m";path+=this.pointsPixel[0].x+","+this.pointsPixel[0].y+" l ";path+=this.pointsPixel[1].x+","+this.pointsPixel[1].y+" ";path+=" e";str=""+"<v:shape style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:0px;"+" top:0px;"+" width:100px;"+" height:100px;"+" antialias:true;\""+" path=\""+path+"\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\"false\""+" coordsize=\"100,100\""+" coordorigin=\"0,0\">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\""+this.strokeStyle+"\""+" opacity=\""+_175+"\"/></v:shape>";return str;}}path="m";path+=this.pointsPixel[0].x+","+this.pointsPixel[0].y+" l ";for(var k=1;k<this.pointsPixel.length;k++){path+=this.pointsPixel[k].x+","+this.pointsPixel[k].y+" ";}path+=" x e";var _178=false;var _179=this.strokeColor;var _17a="";if(this.fillType){_178=true;_179=this.fillType;_17a="";}str=""+"<v:shape style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:0px;"+" top:0px;"+" width:100px;"+" height:100px;"+" antialias:"+this.antialias+";\""+" path=\""+path+"\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\""+(_178?"true":"false")+"\""+" fillcolor=\""+_179+"\""+" coordsize=\"100,100\""+" coordorigin=\"0,0\">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\""+this.strokeStyle+"\""+" joinstyle=\"miter\""+" opacity=\""+_175+"\"/>";if(_178){str+="<v:fill";str+=" style=\"behavior:url(#default#VML);\"";if(_17a){str+=" type=\"tile\" src=\""+_17a+"\"";}str+=" opacity=\""+_175+"\"/>";}if(this.shadowFlg){str+="<v:shadow"+" style=\"behavior:url(#default#VML);\""+" on=\"true\""+" offset=\""+this.shadowX+"px,"+this.shadowY+"px\""+" color=\""+this.shadowColor+"\""+" opacity=\""+_175+"\"/>";}str+="</v:shape>";return str;};ZdcShape.Polyline=function(eflg){ZdcShape.Base.call(this,"polyline");if(eflg==true){this.eventflg=true;}else{this.eventflg=false;}};ZdcShape.Subclass(ZdcShape.Polyline,ZdcShape.Base);ZdcShape.Polyline.prototype.RedrawPixel=function(){if((!this.parent)||(!this.parent.canvas)||(!this.doc)||(!this._jg)){return false;}this.RemoveDomPixel();this._jg.setStroke(parseInt(this.strokeWeight));this._jg.setColor(this.strokeColor);this._jg.setPrintable(true);if(this.opacity&&parseFloat(this.opacity)>0&&parseFloat(this.opacity)<1){this._jg.setOpacity(parseFloat(this.opacity));}else{this._jg.setOpacity(1);}for(var k=1;k<this.pointsPixel.length;k++){this._jg.drawLine(this.pointsPixel[k-1].x,this.pointsPixel[k-1].y,this.pointsPixel[k].x,this.pointsPixel[k].y);}this._jg.paint();};ZdcShape.Polyline.prototype.RedrawCANVAS=function(){if(!this.doc||(!this.doc.getContext)||(!this.parent)){return false;}var _17d=this.doc.getContext("2d");if(!_17d){return false;}_17d.clearRect(0,0,this.parent.width,this.parent.height);if(this.opacity){_17d.globalAlpha=this.opacity;}if(this.pointsPixel.length==1){_17d.fillStyle=this.strokeColor;_17d.arc(this.pointsPixel[0].x,this.pointsPixel[0].y,parseInt(this.strokeWeight),0,Math.PI*2,true);_17d.fill();}else{if(this.pointsPixel.length>=2){_17d.strokeStyle=this.strokeColor;_17d.lineWidth=parseInt(this.strokeWeight);if(this.shadowFlg&&(this.shadowX||this.shadowY)){_17d.shadowColor=this.shadowColor;_17d.shadowOffsetX=this.shadowX;_17d.shadowOffsetY=this.shadowY;}else{_17d.shadowOffsetX=0;_17d.shadowOffsetY=0;}_17d.beginPath();this.StrokeCanvas(_17d);_17d.stroke();}}};ZdcShape.Polyline.prototype.RedrawSVGT=function(){if((!this.parent)){return false;}var pts="";var spts="";var k;var es="none";var ns="none";var minx=100000;var maxx=0;var miny=100000;var maxy=0;if(this.pointsPixel.length==1){ns="circle";}else{if(this.pointsPixel.length>=2){ns="polyline";}}if(this.doc){es=this.doc.tagName;}if(es!=ns&&this.SVGcanvas){try{this.doc.removeChild(this.SVGcanvas);}catch(e){}this.SVGcanvas=null;if(this.SVGShadowcanvas){try{this.doc.removeChild(this.SVGShadowcanvas);}catch(e){}this.SVGShadowcanvas=null;}}for(k=0;k<this.pointsPixel.length;k++){if(k>0){pts+=" ";spts+=" ";}if(minx>this.pointsPixel[k].x){minx=this.pointsPixel[k].x;}if(maxx<this.pointsPixel[k].x){maxx=this.pointsPixel[k].x;}if(miny>this.pointsPixel[k].y){miny=this.pointsPixel[k].y;}if(maxy<this.pointsPixel[k].y){maxy=this.pointsPixel[k].y;}pts+=this.pointsPixel[k].x+","+this.pointsPixel[k].y;spts+=(this.pointsPixel[k].x+Number(this.shadowX))+","+(this.pointsPixel[k].y+Number(this.shadowY));}minx=minx-parseInt(this.strokeWeight)-1;miny=miny-parseInt(this.strokeWeight)-1;maxx=maxx+parseInt(this.strokeWeight)+1;maxy=maxy+parseInt(this.strokeWeight)+1;this.SVGcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGcanvas);this.SVGcanvas.setAttribute("version","1.1");this.SVGcanvas.setAttribute("overflow","visible");this.SVGcanvas.style.position="absolute";this.SVGcanvas.style.left=minx+"px";this.SVGcanvas.style.top=miny+"px";if(ns=="circle"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"circle");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(this.strokeWeight*4)+" "+Number(this.strokeWeight*4));this.SVGcanvas.setAttribute("width",this.strokeWeight*4);this.SVGcanvas.setAttribute("height",this.strokeWeight*4);this.SVGdoc.setAttribute("cx",this.pointsPixel[0].x);this.SVGdoc.setAttribute("cy",this.pointsPixel[0].y);this.SVGdoc.setAttribute("r",parseInt(this.strokeWeight));this.SVGdoc.setAttribute("fill",this.strokeColor);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}}else{if(ns=="polyline"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"polyline");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(maxx-minx)+" "+Number(maxy-miny));this.SVGcanvas.setAttribute("width",maxx-minx);this.SVGcanvas.setAttribute("height",maxy-miny);this.SVGdoc.setAttribute("fill","none");this.SVGdoc.setAttribute("stroke",this.strokeColor);this.SVGdoc.setAttribute("stroke-width",this.strokeWeight);this.SVGdoc.setAttribute("points",pts);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}if(this.GetSVGDashStype()){this.SVGdoc.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.shadowFlg){this.SVGShadowcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGShadowcanvas);this.docShadow=document.createElementNS(ZdcShape._XMLNS_SVG,"polyline");this.SVGShadowcanvas.appendChild(this.docShadow);this.docShadow.setAttribute("visibility","hidden");if((this.shadowX||this.shadowY)&&this.IsVisible()){this.SVGShadowcanvas.setAttribute("version","1.1");this.SVGShadowcanvas.setAttribute("overflow","visible");this.SVGShadowcanvas.setAttribute("viewBox",Number(minx+eval(this.shadowX))+" "+Number(miny+eval(this.shadowY))+" "+Number(maxx-minx+eval(this.strokeWeight))+" "+Number(maxy-miny+eval(this.strokeWeight)));this.SVGShadowcanvas.style.position="absolute";this.SVGShadowcanvas.style.left=Number(minx+eval(this.shadowX))+"px";this.SVGShadowcanvas.style.top=Number(miny+eval(this.shadowY))+"px";this.SVGShadowcanvas.style.zIndex=-1;this.SVGShadowcanvas.setAttribute("width",maxx-minx+eval(this.strokeWeight));this.SVGShadowcanvas.setAttribute("height",maxy-miny+eval(this.strokeWeight));this.docShadow.setAttribute("fill","none");this.docShadow.setAttribute("stroke",this.shadowColor);this.docShadow.setAttribute("stroke-width",this.strokeWeight);this.docShadow.setAttribute("points",spts);this.docShadow.setAttribute("visibility","visible");if(this.GetSVGDashStype()){this.docShadow.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.opacity){this.docShadow.setAttribute("opacity",this.opacity);}}}}}this.doc.onclick=this.MouseClickPolyline.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickPolyline.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpPolyline.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownPolyline.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutPolyline.bindAsEventListener(this);this.doc.onmousemove=this.MouseMovePolyline.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverPolyline.bindAsEventListener(this);};ZdcShape.Polyline.prototype.GetVMLString=function(){var str="";var path="";if(this.doc!=null){this.doc.onclick=this.MouseClickPolyline.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickPolyline.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpPolyline.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownPolyline.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutPolyline.bindAsEventListener(this);this.doc.onmousemove=this.MouseMovePolyline.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverPolyline.bindAsEventListener(this);}var _189="1.0";if(this.opacity){_189=this.opacity;}if(this.pointsPixel.length<=0){return "";}if(this.pointsPixel.length==1){str=""+"<v:oval style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:"+(this.pointsPixel[0].x-parseInt(this.strokeWeight))+"px;"+" top:"+(this.pointsPixel[0].y-parseInt(this.strokeWeight))+"px;"+" width:"+parseInt(this.strokeWeight)*2+"px;"+" height:"+parseInt(this.strokeWeight)*2+"px;"+" antialias:true;\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\"true\""+" fillcolor=\""+this.strokeColor+"\""+">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\"solid\""+" opacity=\""+_189+"\""+"/>";str+="<v:fill";str+=" style=\"behavior:url(#default#VML);\"";str+=" opacity=\""+_189+"\""+"/>";str+="</v:oval>";return str;}path="m";path+=this.pointsPixel[0].x+","+this.pointsPixel[0].y+" l ";for(var k=1;k<this.pointsPixel.length;k++){path+=this.pointsPixel[k].x+","+this.pointsPixel[k].y+" ";}path+=" e";str=""+"<v:shape style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:0px;"+" top:0px;"+" width:100px;"+" height:100px;"+" antialias:true;\""+" path=\""+path+"\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\"false\""+" coordsize=\"100,100\""+" coordorigin=\"0,0\">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\""+this.strokeStyle+"\""+" joinstyle=\"miter\""+" opacity=\""+_189+"\""+"/>";if(this.shadowFlg){str+="<v:shadow"+" style=\"behavior:url(#default#VML);\""+" on=\"true\""+" offset=\""+this.shadowX+"px,"+this.shadowY+"px\""+" color=\""+this.shadowColor+"\""+" opacity=\""+_189+"\""+"/>";}str+="</v:shape>";return str;};ZdcShape.Oval=function(eflg){ZdcShape.Base.call(this,"oval");if(eflg==true){this.eventflg=true;}else{this.eventflg=false;}};ZdcShape.Subclass(ZdcShape.Oval,ZdcShape.Base);ZdcShape.Oval.prototype.setData=function(c,rx,ry){var pt1=new ZdcPoint(c.lon-rx,c.lat+ry);var pt2=new ZdcPoint(c.lon+rx,c.lat-ry);this.points=[];this.points[0]=pt1;this.points[1]=pt2;};ZdcShape.Oval.prototype.getCenter=function(){var pt=null;if(this.points.length<2){return pt;}pt=new ZdcPoint((this.points[0].lon+this.points[1].lon)/2,(this.points[0].lat+this.points[1].lat)/2);return pt;};ZdcShape.Oval.prototype.getRX=function(){var r=-1;if(this.points.length<2){return r;}r=Math.abs((this.points[0].lon-this.points[1].lon)/2);return r;};ZdcShape.Oval.prototype.getRY=function(){var r=-1;if(this.points.length<2){return r;}r=Math.abs((this.points[0].lat-this.points[1].lat)/2);return r;};ZdcShape.Oval.prototype.RedrawCANVAS=function(){if(!this.doc||(!this.doc.getContext)||(!this.parent)){return false;}var _194=this.doc.getContext("2d");if(!_194){return false;}_194.clearRect(0,0,this.parent.width,this.parent.height);if(this.opacity){_194.globalAlpha=this.opacity;}if(this.pointsPixel.length==1){_194.fillStyle=this.strokeColor;_194.arc(this.pointsPixel[0].x,this.pointsPixel[0].y,parseInt(this.strokeWeight),0,Math.PI*2,true);_194.fill();}else{if(this.pointsPixel.length>=2){var cx=(this.pointsPixel[0].x+this.pointsPixel[1].x)/2;var cy=(this.pointsPixel[0].y+this.pointsPixel[1].y)/2;var rx=Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x)/2;var ry=Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y)/2;if(rx==0||ry==0){return;}var r=rx>ry?rx:ry;var sx=rx>ry?1:rx/ry;var sy=rx>ry?ry/rx:1;if(this.shadowFlg&&(this.shadowX||this.shadowY)){_194.shadowColor=this.shadowColor;_194.shadowOffsetX=this.shadowX;_194.shadowOffsetY=this.shadowY;}else{_194.shadowOffsetX=0;_194.shadowOffsetY=0;}_194.translate(cx,cy);_194.scale(sx,sy);_194.strokeStyle=this.strokeColor;_194.lineWidth=parseInt(this.strokeWeight);if(this.fillType){try{_194.beginPath();_194.arc(0,0,r,0,Math.PI*2,true);this.SetCanvasFill(_194);_194.fill();_194.fillStyle="black";_194.shadowOffsetX=0;_194.shadowOffsetY=0;}catch(e){}}if(this.GetSVGDashStype()){var t=this.GetSVGDashStype().split(",");for(var k=0;k<t.length;k++){t[k]=Number(t[k]);}var sa=0;var da=0;while(da<Math.PI*2){for(k=0;k<t.length;k++){da=sa+t[k]/r;if(da>Math.PI*2){da=Math.PI*2;}if(k%2==0){_194.beginPath();_194.arc(0,0,r,sa,da,false);_194.stroke();}sa=da;}}}else{_194.beginPath();_194.arc(0,0,r,0,Math.PI*2,true);_194.stroke();}_194.scale(1/sx,1/sy);_194.translate(-cx,-cy);}}};ZdcShape.Oval.prototype.RedrawSVGT=function(){if((!this.parent)){return false;}var pts="";var spts="";var k;var es="none";var ns="none";var minx=100000;var maxx=0;var miny=100000;var maxy=0;if(this.pointsPixel.length==1){ns="circle";}else{if(this.pointsPixel.length>=2){ns="oval";}}if(this.doc){es=this.doc.tagName;}if(es!=ns&&this.SVGcanvas){try{this.doc.removeChild(this.SVGcanvas);}catch(e){}this.SVGcanvas=null;if(this.SVGShadowcanvas){try{this.doc.removeChild(this.SVGShadowcanvas);}catch(e){}this.SVGShadowcanvas=null;}}for(k=0;k<this.pointsPixel.length;k++){if(k>0){pts+=" ";spts+=" ";}if(minx>this.pointsPixel[k].x){minx=this.pointsPixel[k].x;}if(maxx<this.pointsPixel[k].x){maxx=this.pointsPixel[k].x;}if(miny>this.pointsPixel[k].y){miny=this.pointsPixel[k].y;}if(maxy<this.pointsPixel[k].y){maxy=this.pointsPixel[k].y;}pts+=this.pointsPixel[k].x+","+this.pointsPixel[k].y;spts+=(this.pointsPixel[k].x+Number(this.shadowX))+","+(this.pointsPixel[k].y+Number(this.shadowY));}minx=minx-parseInt(this.strokeWeight)-1;miny=miny-parseInt(this.strokeWeight)-1;maxx=maxx+parseInt(this.strokeWeight)+1;maxy=maxy+parseInt(this.strokeWeight)+1;this.SVGcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGcanvas);this.SVGcanvas.setAttribute("version","1.1");this.SVGcanvas.setAttribute("overflow","visible");this.SVGcanvas.style.position="absolute";this.SVGcanvas.style.left=minx+"px";this.SVGcanvas.style.top=miny+"px";if(ns=="circle"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"circle");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(this.strokeWeight*4)+" "+Number(this.strokeWeight*4));this.SVGcanvas.setAttribute("width",this.strokeWeight*4);this.SVGcanvas.setAttribute("height",this.strokeWeight*4);this.SVGdoc.setAttribute("cx",this.pointsPixel[0].x);this.SVGdoc.setAttribute("cy",this.pointsPixel[0].y);this.SVGdoc.setAttribute("r",parseInt(this.strokeWeight));this.SVGdoc.setAttribute("fill",this.strokeColor);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}}else{if(ns=="oval"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"ellipse");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(maxx-minx)+" "+Number(maxy-miny));this.SVGcanvas.setAttribute("width",maxx-minx);this.SVGcanvas.setAttribute("height",maxy-miny);this.SVGdoc.setAttribute("stroke",this.strokeColor);this.SVGdoc.setAttribute("stroke-width",this.strokeWeight);this.SVGdoc.setAttribute("cx",(this.pointsPixel[0].x+this.pointsPixel[1].x)/2);this.SVGdoc.setAttribute("cy",(this.pointsPixel[0].y+this.pointsPixel[1].y)/2);this.SVGdoc.setAttribute("rx",Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x)/2);this.SVGdoc.setAttribute("ry",Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y)/2);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}if(this.GetSVGDashStype()){this.SVGdoc.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.fillType){this.SVGdoc.setAttribute("fill",this.fillType);}else{this.SVGdoc.setAttribute("fill","none");}if(this.shadowFlg){this.SVGShadowcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGShadowcanvas);this.docShadow=document.createElementNS(ZdcShape._XMLNS_SVG,"ellipse");this.SVGShadowcanvas.appendChild(this.docShadow);this.docShadow.setAttribute("visibility","hidden");if((this.shadowX||this.shadowY)&&this.IsVisible()){this.SVGShadowcanvas.setAttribute("version","1.1");this.SVGShadowcanvas.setAttribute("overflow","visible");this.SVGShadowcanvas.setAttribute("viewBox",Number(minx+eval(this.shadowX))+" "+Number(miny+eval(this.shadowY))+" "+Number(maxx-minx+eval(this.strokeWeight))+" "+Number(maxy-miny+eval(this.strokeWeight)));this.SVGShadowcanvas.style.position="absolute";this.SVGShadowcanvas.style.left=Number(minx+eval(this.shadowX))+"px";this.SVGShadowcanvas.style.top=Number(miny+eval(this.shadowY))+"px";this.SVGShadowcanvas.style.zIndex=-1;this.SVGShadowcanvas.setAttribute("width",maxx-minx+eval(this.strokeWeight));this.SVGShadowcanvas.setAttribute("height",maxy-miny+eval(this.strokeWeight));if(this.opacity){this.docShadow.setAttribute("opacity",this.opacity);}this.docShadow.setAttribute("stroke",this.shadowColor);this.docShadow.setAttribute("stroke-width",this.strokeWeight);this.docShadow.setAttribute("cx",(this.pointsPixel[0].x+this.pointsPixel[1].x)/2+Number(this.shadowX));this.docShadow.setAttribute("cy",(this.pointsPixel[0].y+this.pointsPixel[1].y)/2+Number(this.shadowY));this.docShadow.setAttribute("rx",Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x)/2);this.docShadow.setAttribute("ry",Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y)/2);this.docShadow.setAttribute("visibility","visible");if(this.GetSVGDashStype()){this.docShadow.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.fillType){this.docShadow.setAttribute("fill",this.shadowColor);}else{this.docShadow.setAttribute("fill","none");}}}}}this.doc.onclick=this.MouseClickOval.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickOval.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpOval.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownOval.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutOval.bindAsEventListener(this);this.doc.onmousemove=this.MouseMoveOval.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverOval.bindAsEventListener(this);};ZdcShape.Oval.prototype.GetVMLString=function(){var str="";var _1aa="1.0";if(this.doc!=null){this.doc.onclick=this.MouseClickOval.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickOval.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpOval.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownOval.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutOval.bindAsEventListener(this);this.doc.onmousemove=this.MouseMoveOval.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverOval.bindAsEventListener(this);}if(this.opacity){_1aa=this.opacity;}if(this.pointsPixel.length<=0){return "";}if(this.pointsPixel.length==1){str=""+"<v:oval style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:"+(this.pointsPixel[0].x-parseInt(this.strokeWeight))+"px;"+" top:"+(this.pointsPixel[0].y-parseInt(this.strokeWeight))+"px;"+" width:"+parseInt(this.strokeWeight)*2+"px;"+" height:"+parseInt(this.strokeWeight)*2+"px;"+" antialias:true;\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\"true\""+" fillcolor=\""+this.strokeColor+"\""+">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\"solid\""+" opacity=\""+_1aa+"\""+"/>";str+="<v:fill";str+=" style=\"behavior:url(#default#VML);\"";str+=" opacity=\""+_1aa+"\""+"/>";str+="</v:oval>";return str;}var left,top,_1ad,_1ae;left=this.pointsPixel[0].x;if(left>this.pointsPixel[1].x){left=this.pointsPixel[1].x;}top=this.pointsPixel[0].y;if(top>this.pointsPixel[1].y){top=this.pointsPixel[1].y;}_1ad=Math.abs(this.pointsPixel[1].x-this.pointsPixel[0].x);_1ae=Math.abs(this.pointsPixel[1].y-this.pointsPixel[0].y);var _1af=false;var _1b0=this.strokeColor;var _1b1="";if(this.fillType){_1af=true;_1b0=this.fillType;_1b1="";}str=""+"<v:oval style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:"+left+"px;"+" top:"+top+"px;"+" width:"+_1ad+"px;"+" height:"+_1ae+"px;"+" antialias:true;\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\""+(_1af?"true":"false")+"\""+" fillcolor=\""+_1b0+"\""+">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\""+this.strokeStyle+"\""+" opacity=\""+_1aa+"\""+"/>";if(_1af){str+="<v:fill";str+=" style=\"behavior:url(#default#VML);\"";if(_1b1){str+=" type=\"tile\" src=\""+_1b1+"\"";}str+=" opacity=\""+_1aa+"\"/>";}if(this.shadowFlg){str+="<v:shadow"+" style=\"behavior:url(#default#VML);\""+" on=\"true\""+" offset=\""+this.shadowX+"px,"+this.shadowY+"px\""+" color=\""+this.shadowColor+"\""+" opacity=\""+_1aa+"\""+"/>";}str+="</v:oval>";return str;};ZdcShape.Rect=function(eflg){ZdcShape.Base.call(this,"rect");if(eflg==true){this.eventflg=true;}else{this.eventflg=false;}};ZdcShape.Subclass(ZdcShape.Rect,ZdcShape.Base);ZdcShape.Rect.prototype.RedrawCANVAS=function(){if(!this.doc||(!this.doc.getContext)||(!this.parent)){return false;}var _1b3=this.doc.getContext("2d");if(!_1b3){return false;}_1b3.clearRect(0,0,this.parent.width,this.parent.height);if(this.opacity){_1b3.globalAlpha=this.opacity;}if(this.pointsPixel.length==1){_1b3.fillStyle=this.strokeColor;_1b3.arc(this.pointsPixel[0].x,this.pointsPixel[0].y,parseInt(this.strokeWeight),0,Math.PI*2,true);_1b3.fill();}else{if(this.pointsPixel.length>=2){if(this.shadowFlg&&(this.shadowX||this.shadowY)){_1b3.shadowColor=this.shadowColor;_1b3.shadowOffsetX=this.shadowX;_1b3.shadowOffsetY=this.shadowY;}else{_1b3.shadowOffsetX=0;_1b3.shadowOffsetY=0;}if(this.fillType){try{this.SetCanvasFill(_1b3);_1b3.fillRect(Math.min(this.pointsPixel[0].x,this.pointsPixel[1].x),Math.min(this.pointsPixel[0].y,this.pointsPixel[1].y),Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x),Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y));_1b3.shadowOffsetX=0;_1b3.shadowOffsetY=0;_1b3.fillStyle="black";}catch(e){}}_1b3.strokeStyle=this.strokeColor;_1b3.lineWidth=parseInt(this.strokeWeight);if(this.GetSVGDashStype()){var t=this.GetSVGDashStype().split(",");var o=0;var spt=new ZdcPixel();var ept=new ZdcPixel();for(var k=0;k<t.length;k++){t[k]=Number(t[k]);}spt.x=Math.min(this.pointsPixel[0].x,this.pointsPixel[1].x);spt.y=Math.min(this.pointsPixel[0].y,this.pointsPixel[1].y);ept.x=Math.max(this.pointsPixel[0].x,this.pointsPixel[1].x);ept.y=spt.y;o=this.CanvasStyleLine(_1b3,spt,ept,t,o);spt.x=ept.x;spt.y=ept.y;ept.x=spt.x;ept.y=Math.max(this.pointsPixel[0].y,this.pointsPixel[1].y);o=this.CanvasStyleLine(_1b3,spt,ept,t,o);spt.x=ept.x;spt.y=ept.y;ept.x=Math.min(this.pointsPixel[0].x,this.pointsPixel[1].x);ept.y=spt.y;o=this.CanvasStyleLine(_1b3,spt,ept,t,o);spt.x=ept.x;spt.y=ept.y;ept.x=spt.x;ept.y=Math.min(this.pointsPixel[0].y,this.pointsPixel[1].y);o=this.CanvasStyleLine(_1b3,spt,ept,t,o);_1b3.stroke();}else{_1b3.strokeRect(Math.min(this.pointsPixel[0].x,this.pointsPixel[1].x),Math.min(this.pointsPixel[0].y,this.pointsPixel[1].y),Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x),Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y));}}}};ZdcShape.Rect.prototype.RedrawSVGT=function(){if((!this.parent)){return false;}var pts="";var spts="";var k;var es="none";var ns="none";var minx=100000;var maxx=0;var miny=100000;var maxy=0;if(this.pointsPixel.length==1){ns="circle";}else{if(this.pointsPixel.length>=2){ns="rect";}}if(this.doc){es=this.doc.tagName;}if(es!=ns&&this.SVGcanvas){try{this.doc.removeChild(this.SVGcanvas);}catch(e){}this.SVGcanvas=null;if(this.SVGShadowcanvas){try{this.doc.removeChild(this.SVGShadowcanvas);}catch(e){}this.SVGShadowcanvas=null;}}for(k=0;k<this.pointsPixel.length;k++){if(k>0){pts+=" ";spts+=" ";}if(minx>this.pointsPixel[k].x){minx=this.pointsPixel[k].x;}if(maxx<this.pointsPixel[k].x){maxx=this.pointsPixel[k].x;}if(miny>this.pointsPixel[k].y){miny=this.pointsPixel[k].y;}if(maxy<this.pointsPixel[k].y){maxy=this.pointsPixel[k].y;}pts+=this.pointsPixel[k].x+","+this.pointsPixel[k].y;spts+=(this.pointsPixel[k].x+Number(this.shadowX))+","+(this.pointsPixel[k].y+Number(this.shadowY));}minx=minx-parseInt(this.strokeWeight)-1;miny=miny-parseInt(this.strokeWeight)-1;maxx=maxx+parseInt(this.strokeWeight)+1;maxy=maxy+parseInt(this.strokeWeight)+1;this.SVGcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGcanvas);this.SVGcanvas.setAttribute("version","1.1");this.SVGcanvas.setAttribute("overflow","visible");this.SVGcanvas.style.position="absolute";this.SVGcanvas.style.left=minx+"px";this.SVGcanvas.style.top=miny+"px";if(ns=="circle"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"circle");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(this.strokeWeight*4)+" "+Number(this.strokeWeight*4));this.SVGcanvas.setAttribute("width",this.strokeWeight*4);this.SVGcanvas.setAttribute("height",this.strokeWeight*4);this.SVGdoc.setAttribute("cx",this.pointsPixel[0].x);this.SVGdoc.setAttribute("cy",this.pointsPixel[0].y);this.SVGdoc.setAttribute("r",parseInt(this.strokeWeight));this.SVGdoc.setAttribute("fill",this.strokeColor);if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}}else{if(ns=="rect"){this.SVGdoc=document.createElementNS(ZdcShape._XMLNS_SVG,"rect");this.SVGcanvas.appendChild(this.SVGdoc);this.SVGcanvas.setAttribute("viewBox",Number(minx)+" "+Number(miny)+" "+Number(maxx-minx)+" "+Number(maxy-miny));this.SVGcanvas.setAttribute("width",maxx-minx);this.SVGcanvas.setAttribute("height",maxy-miny);this.SVGdoc.setAttribute("stroke",this.strokeColor);this.SVGdoc.setAttribute("stroke-width",this.strokeWeight);this.SVGdoc.setAttribute("x",Math.min(this.pointsPixel[0].x,this.pointsPixel[1].x));this.SVGdoc.setAttribute("y",Math.min(this.pointsPixel[0].y,this.pointsPixel[1].y));this.SVGdoc.setAttribute("width",Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x));this.SVGdoc.setAttribute("height",Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y));if(this.fillType){this.SVGdoc.setAttribute("fill",this.fillType);}else{this.SVGdoc.setAttribute("fill","none");}if(this.opacity){this.SVGdoc.setAttribute("opacity",this.opacity);}if(this.GetSVGDashStype()){this.SVGdoc.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.shadowFlg){this.SVGShadowcanvas=document.createElementNS(ZdcShape._XMLNS_SVG,"svg");this.doc.appendChild(this.SVGShadowcanvas);this.docShadow=document.createElementNS(ZdcShape._XMLNS_SVG,"rect");this.SVGShadowcanvas.appendChild(this.docShadow);this.docShadow.setAttribute("visibility","hidden");if((this.shadowX||this.shadowY)&&this.IsVisible()){this.SVGShadowcanvas.setAttribute("version","1.1");this.SVGShadowcanvas.setAttribute("overflow","visible");this.SVGShadowcanvas.setAttribute("viewBox",Number(minx+eval(this.shadowX))+" "+Number(miny+eval(this.shadowY))+" "+Number(maxx-minx+eval(this.strokeWeight))+" "+Number(maxy-miny+eval(this.strokeWeight)));this.SVGShadowcanvas.style.position="absolute";this.SVGShadowcanvas.style.left=Number(minx+eval(this.shadowX))+"px";this.SVGShadowcanvas.style.top=Number(miny+eval(this.shadowY))+"px";this.SVGShadowcanvas.style.zIndex=-1;this.SVGShadowcanvas.setAttribute("width",maxx-minx+eval(this.strokeWeight));this.SVGShadowcanvas.setAttribute("height",maxy-miny+eval(this.strokeWeight));this.docShadow.setAttribute("stroke",this.shadowColor);this.docShadow.setAttribute("stroke-width",this.strokeWeight);this.docShadow.setAttribute("x",Math.min(this.pointsPixel[0].x,this.pointsPixel[1].x)+Number(this.shadowX));this.docShadow.setAttribute("y",Math.min(this.pointsPixel[0].y,this.pointsPixel[1].y)+Number(this.shadowY));this.docShadow.setAttribute("width",Math.abs(this.pointsPixel[0].x-this.pointsPixel[1].x));this.docShadow.setAttribute("height",Math.abs(this.pointsPixel[0].y-this.pointsPixel[1].y));this.docShadow.setAttribute("visibility","visible");if(this.opacity){this.docShadow.setAttribute("opacity",this.opacity);}if(this.GetSVGDashStype()){this.docShadow.setAttribute("stroke-dasharray",this.GetSVGDashStype());}if(this.fillType){this.docShadow.setAttribute("fill",this.shadowColor);}else{this.docShadow.setAttribute("fill","none");}}}}}this.doc.onclick=this.MouseClickRect.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickRect.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpRect.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownRect.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutRect.bindAsEventListener(this);this.doc.onmousemove=this.MouseMoveRect.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverRect.bindAsEventListener(this);};ZdcShape.Rect.prototype.GetVMLString=function(){var str="";var _1c3="1.0";this.doc.onclick=this.MouseClickRect.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickRect.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpRect.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownRect.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutRect.bindAsEventListener(this);this.doc.onmousemove=this.MouseMoveRect.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverRect.bindAsEventListener(this);if(this.opacity){_1c3=this.opacity;}if(this.pointsPixel.length<=0){return "";}if(this.pointsPixel.length==1){str=""+"<v:oval style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:"+(this.pointsPixel[0].x-parseInt(this.strokeWeight))+"px;"+" top:"+(this.pointsPixel[0].y-parseInt(this.strokeWeight))+"px;"+" width:"+parseInt(this.strokeWeight)*2+"px;"+" height:"+parseInt(this.strokeWeight)*2+"px;"+" antialias:true;\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\"true\""+" fillcolor=\""+this.strokeColor+"\""+">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\"solid\""+" opacity=\""+_1c3+"\""+"/>";str+="<v:fill";str+=" style=\"behavior:url(#default#VML);\"";str+=" opacity=\""+_1c3+"\""+"/>";str+="</v:oval>";return str;}var left,top,_1c6,_1c7;left=this.pointsPixel[0].x;if(left>this.pointsPixel[1].x){left=this.pointsPixel[1].x;}top=this.pointsPixel[0].y;if(top>this.pointsPixel[1].y){top=this.pointsPixel[1].y;}_1c6=Math.abs(this.pointsPixel[1].x-this.pointsPixel[0].x);_1c7=Math.abs(this.pointsPixel[1].y-this.pointsPixel[0].y);var _1c8=false;var _1c9=this.strokeColor;var _1ca="";if(this.fillType){_1c8=true;_1c9=this.fillType;_1ca="";}str=""+"<v:rect style=\""+" behavior:url(#default#VML);"+" position:absolute;"+" left:"+left+"px;"+" top:"+top+"px;"+" width:"+_1c6+"px;"+" height:"+_1c7+"px;"+" antialias:false;\""+" strokecolor=\""+this.strokeColor+"\""+" strokeweight=\""+this.strokeWeight+"px\""+" filled=\""+(_1c8?"true":"false")+"\""+" fillcolor=\""+_1c9+"\""+">"+"<v:stroke"+" style=\"behavior:url(#default#VML);\""+" dashstyle=\""+this.strokeStyle+"\""+" opacity=\""+_1c3+"\""+"/>";if(_1c8){str+="<v:fill";str+=" style=\"behavior:url(#default#VML);\"";if(_1ca){str+=" type=\"tile\""+" src=\""+_1ca+"\"";}str+=" opacity=\""+_1c3+"\""+"/>";}if(this.shadowFlg){str+="<v:shadow"+" style=\"behavior:url(#default#VML);\""+" on=\"true\""+" offset=\""+this.shadowX+"px,"+this.shadowY+"px\""+" color=\""+this.shadowColor+"\""+" opacity=\""+_1c3+"\""+"/>";}str+="</v:rect>";return str;};ZdcShape.Text=function(text,eflg){this.textString=text||"";this.font="bold 24pt serif";this.borderWidth="";this.borderColor="black";this.bgColor="";this.textColor="black";this.anchor="left-top";this.offsetx=0;this.offsety=0;this.textWidth=150;this.Line=new ZdcShape.Polyline();this.Rect=null;this.RectShadow=null;ZdcShape.Base.call(this,"text");this.opacity="";if(eflg==true){this.eventflg=true;}else{this.eventflg=false;}};ZdcShape.Subclass(ZdcShape.Text,ZdcShape.Base);ZdcShape.Text.prototype.GetDocString=function(){var str="";if(this.pointsPixel.length<=0){return "";}str+="<table";str+=" style=\"position:absolute;left:0px;top:0px;";if(this.borderWidth){str+="border:"+this.borderWidth+"px solid";if(this.borderColor){str+=" "+this.borderColor+";";}else{str+=" black;";}}if(this.bgColor){str+="background:"+this.bgColor+";";}if(this.opacity){str+="filter:Alpha(opacity="+Number(this.opacity)*100+");opacity:"+this.opacity+";";}str+="\"";str+="><tr><td align=\"center\" valign=\"center\" style=\"border:0px;";if(this.font){str+="font-size:"+this.font+";";}str+="width:"+Number(this.textWidth)+"px"+";";if(this.textColor){str+="color:"+this.textColor+";";}str+="\"";str+=">";str+=this.textString+"</td></tr></table>";return str;};ZdcShape.Text.prototype.GetShadowString=function(){var str="";if(this.pointsPixel.length<=0){return "";}str+="<table";str+=" style=\"position:absolute;left:0px;top:0px;";if(this.borderWidth){str+="border:"+this.borderWidth+"px solid";str+=" "+this.shadowColor+";";}if(this.opacity){str+="filter:Alpha(opacity="+Number(this.opacity)*100+");opacity:"+this.opacity+";";}if(this.bgColor){str+="background:"+this.shadowColor+";";}str+="\"";str+=" width="+this.textWidth;str+="><tr><td align=\"center\" valign=\"center\" style=\"border:0px;";if(this.font){str+="font:"+this.font+";";}str+="color:"+this.shadowColor+";";str+="\"";str+=">";str+=this.textString+"</td></tr></table>";return str;};ZdcShape.Text.prototype.redraw=function(){if((!this.doc)||(!this.parent)){return false;}this.ResetPixelPoints();this.doc.innerHTML=this.GetDocString();if(this.pointsPixel.length<=0){if(this.docShadow){this.docShadow.style.visibility="hidden";}if(this.Line){this.Line.clearPoints();this.Line.redraw();}if(this.Rect){this.Rect.redraw(false);}if(this.RectShadow){this.RectShadow.redraw(false);}return;}if(this.IsVisible()){this.doc.style.visibility="visible";if(this.docShadow){this.docShadow.style.visibility="visible";}}else{this.doc.style.visibility="hidden";if(this.docShadow){this.docShadow.style.visibility="hidden";}if(this.Line){this.Line.clearPoints();this.Line.redraw();}if(this.Rect){this.Rect.redraw(false);}if(this.RectShadow){this.RectShadow.redraw(false);}return;}var _1cf=parseInt(this.parent.doc.style.left);var _1d0=parseInt(this.parent.doc.style.top);var left=this.pointsPixel[0].x;var top=this.pointsPixel[0].y;var _1d3=left;var _1d4=top;this.doc.style.width=Number(this.textWidth)+"px";if(!this.doc.firstChild){return;}var t=this.doc.firstChild;var w=t.offsetWidth;var h=t.offsetHeight;var _1d8=0;var _1d9=0;switch(this.anchor){case "left-top":_1d3+=2;_1d4+=2;break;case "left-center":_1d3+=2;top-=h/2;break;case "left-bottom":_1d3+=2;_1d4-=2;top-=h;break;case "center-top":_1d4+=2;left-=w/2;break;case "center-center":left-=w/2;top-=h/2;break;case "center-bottom":_1d4-=2;left-=w/2;top-=h;break;case "right-top":_1d3-=2;_1d4+=2;left-=w;break;case "right-center":_1d3-=2;left-=w;top-=h/2;break;case "right-bottom":_1d4-=2;_1d3-=2;left-=w;top-=h;break;}this.doc.style.left=(left+Number(this.offsetx))+"px";this.doc.style.top=(top+Number(this.offsety))+"px";var sox=10;var soy=10;if(this.shadowX||this.shadowY){sox=parseInt(this.shadowX);soy=parseInt(this.shadowY);}_1d8=left+sox;_1d9=top+soy;if((!this.shadowFlg)||(this.bgColor.length>0&&this.RectShadow)){if(this.docShadow){this.docShadow.style.visibility="hidden";}}else{if(this.docShadow){this.docShadow.style.visibility="visible";this.docShadow.style.left=_1d8+Number(this.offsetx)+"px";this.docShadow.style.top=_1d9+Number(this.offsety)+"px";this.docShadow.innerHTML=this.GetShadowString();}}if(this.Line){if(this.points.length>0){this.Line.points[0]=new ZdcPoint(this.points[0].lon,this.points[0].lat);}else{this.Line.points=[];}if(this.borderWidth){this.Line.strokeWeight=this.borderWidth;}else{this.Line.points=[];}if(this.borderColor){this.Line.strokeColor=this.borderColor;}if((!this.offsetx)&&(!this.offsety)){this.Line.points=[];}this.Line.opacity=this.opacity;var pxy=new ZdcPixel();pxy.x=_1d3+Number(this.offsetx)+parseInt(this.parent.doc.style.left);pxy.y=_1d4+Number(this.offsety)+parseInt(this.parent.doc.style.top);var zpt=this.parent.parent.convertPixel2Point(pxy);this.Line.setPoint(1,new ZdcPoint(zpt.lon,zpt.lat));this.Line.redraw();}if(this.Rect){if(this.bgColor.length>0){this.Rect.color=this.bgColor;this.Rect.opacity=this.opacity;this.Rect.left=this.doc.style.left;this.Rect.top=this.doc.style.top;this.Rect.width=w+"px";this.Rect.height=h+"px";this.Rect.redraw(true);}else{this.Rect.redraw(false);}}if(this.RectShadow){if(this.shadowFlg&&(this.bgColor.length>0)){this.RectShadow.color=this.shadowColor;this.RectShadow.opacity=this.opacity;this.RectShadow.left=_1d8+Number(this.offsetx)+"px";this.RectShadow.top=_1d9+Number(this.offsety)+"px";this.RectShadow.width=w+"px";this.RectShadow.height=h+"px";this.RectShadow.redraw(true);}else{this.RectShadow.redraw(false);}}};ZdcShape.Text.prototype.setPoint=function(pt){this.points[0]=pt;};ZdcShape.Text.prototype.getPoint=function(){return this.points[0];};ZdcShape.Text.prototype.InitDom=function(){if(this.doc||(!this.parent)||(!this.parent.doc)){return false;}if(this.RectShadow){this.RectShadow.parent=this.parent;this.RectShadow.InitDom();}this.docShadow=document.createElement("div");this.docShadow.style.cssText="position: absolute; "+"left:0px; top:0px; z-index:"+ZdcShape.Layer._zindex+"; "+"overflow: visible; ";if(this.ShadowFlg){this.docShadow.style.visibility="visible";}else{this.docShadow.style.visibility="hidden";}this.parent.doc.appendChild(this.docShadow);if(this.Rect){this.Rect.parent=this.parent;this.Rect.InitDom();}this.doc=document.createElement("div");this.doc.onclick=this.MouseClickText.bindAsEventListener(this);this.doc.ondblclick=this.MouseDoubleclickText.bindAsEventListener(this);this.doc.onmouseup=this.MouseUpText.bindAsEventListener(this);this.doc.onmousedown=this.MouseDownText.bindAsEventListener(this);this.doc.onmouseout=this.MouseOutText.bindAsEventListener(this);this.doc.onmousemove=this.MouseMoveText.bindAsEventListener(this);this.doc.onmouseover=this.MouseOverText.bindAsEventListener(this);if(ZdcCommon.isiPhone()){this.doc.ontouchstart=this.MouseDownText.bindAsEventListener(this);this.doc.ontouchend=this.MouseClickText.bindAsEventListener(this);}this.doc.style.cssText="position: absolute; "+"margin: 0px; "+"width: "+this.textWidth+"px; "+"left:0px; top:0px; z-index:"+ZdcShape.Layer._zindex+"; "+"overflow: visible; ";this.parent.doc.appendChild(this.doc);if(this.Line){this.Line.parent=this.parent;this.Line.InitDom();}return true;};ZdcShape.Text.prototype.RemoveDom=function(){if(this.doc&&this.parent&&this.parent.doc){this.parent.doc.removeChild(this.doc);this.doc=null;}if(this.docShadow&&this.parent&&this.parent.doc){this.parent.doc.removeChild(this.docShadow);this.docShadow=null;}if(this.Line){this.Line.RemoveDom();this.Line=null;}if(this.Rect){this.Rect.RemoveDom();this.Rect=null;}if(this.RectShadow){this.RectShadow.RemoveDom();this.RectShadow=null;}};ZdcShape._bgFill=function(_1df){this.left=0;this.top=0;this.width=0;this.height=0;this.opacity="";this.color="white";this.parent=_1df;this.doc=null;};ZdcShape._bgFill.prototype.InitDom=function(){if(!this.parent){return false;}this.doc=document.createElement("div");this.doc.style.cssText="position: absolute; visibility:hidden; "+"left:0px; top:0px; "+"width: 0px; "+"height: 0px; "+"overflow: hidden; ";this.parent.doc.appendChild(this.doc);return true;};ZdcShape._bgFill.prototype.RemoveDom=function(){if(this.doc&&this.parent&&this.parent.doc){this.parent.doc.removeChild(this.doc);this.doc=null;}};ZdcShape._bgFill.prototype.redraw=function(v){if(this.doc){if(v){this.doc.style.cssText="position: absolute; visibility:visible; "+"left:"+this.left+"; top:"+this.top+"; "+"width: "+this.width+"; "+"height: "+this.height+"; "+"overflow: hidden; ";var bw=parseInt(this.width)>parseInt(this.height)?(parseInt(this.width)+2):(parseInt(this.height)+2);var t="<table style=\"position:absolute;top:0px;left:0px;width:"+this.width+";height:"+this.height+";border:"+bw+"px solid "+this.color+";\">"+"<tr><td></td></tr></table>";this.doc.innerHTML=t;}else{this.doc.style.visibility="hidden";}}};ZdcShape.Layer=function(){this.minzoom=1;this.maxzoom=18;this.width=2048;this.height=2048;this.shapes=[];this.parent=null;this.doc=null;this.canvas=null;this.layerID=-1;this._zIndex=ZdcShape.Layer._zindex;this.hiddenflg=false;};ZdcShape.Layer._zindex=2000;ZdcShape.Layer.prototype.setZIndex=function(z){this._zIndex=z;if(this.doc){this.doc.style.zIndex=this._zIndex;}};ZdcShape.Layer.prototype.InitCavas=function(){if((!this.parent)||this.doc||this.canvas){return false;}var s=Number(this.parent.getMapScale());var v="visible";if(s<this.minzoom||s>this.maxzoom){v="hidden";}this.doc=document.createElement("DIV");this.doc.style.cssText="position: absolute; "+"left:0px; top:0px; z-index:"+this._zIndex+"; "+"visibility: "+v+"; ";this.parent.ZdcMapClass.appendChild(this.doc);switch(ZdcShape._CavasType){case "VML":this.canvas=document.createElement("DIV");this.canvas.style.cssText="position: absolute; "+"left:0px; top:0px; z-index:"+ZdcShape.Layer._zindex+"; "+"visibility: "+v+"; ";this.doc.appendChild(this.canvas);break;case "SVGT":this.canvas=document.createElement("DIV");this.canvas.style.visibility=v;this.canvas.style.position="absolute";this.canvas.style.left="0px";this.canvas.style.top="0px";this.canvas.style.zIndex=ZdcShape.Layer._zindex;this.doc.appendChild(this.canvas);break;case "CANVAS":this.canvas=document.createElement("DIV");this.canvas.style.cssText="position: absolute; "+"left:0px; top:0px; z-index:"+ZdcShape.Layer._zindex+"; "+"width: "+this.width+"px; "+"height: "+this.height+"px; "+"overflow: hidden; "+"visibility: "+v+"; ";this.doc.appendChild(this.canvas);break;case "PIXEL":this.canvas=document.createElement("DIV");this.canvas.style.cssText="position: absolute; "+"left:0px; top:0px; "+"width: "+this.width+"px; "+"height: "+this.height+"px; "+"overflow: hidden; "+"visibility: "+v+"; ";this.doc.appendChild(this.canvas);break;}return true;};ZdcShape.Layer.prototype.RemoveDom=function(){if(this.canvas&&this.doc){this.doc.removeChild(this.canvas);}if(this.doc&&this.parent){this.parent.ZdcMapClass.removeChild(this.doc);}this.doc=null;this.canvas=null;};ZdcShape.Layer.prototype.InitShapes=function(){if(!this.parent){return false;}var k;for(k=0;k<this.shapes.length;k++){var s=this.shapes[k];s.InitDom();s.redraw();}return true;};ZdcShape.Layer.prototype.getShapeCount=function(){return this.shapes.length;};ZdcShape.Layer.prototype.addShape=function(s){var id=0;var k=0;var tail=true;for(k=0;k<this.shapes.length;k++){if(this.shapes[k]==s){return -1;}}for(k=0;k<this.shapes.length;k++){if(this.shapes[k].id>k){id=k;tail=false;break;}}if(tail){s.id=this.shapes.length;this.shapes[s.id]=s;}else{var t=this.shapes;s.id=id;this.shapes=[];for(k=0;k<id;k++){this.shapes[k]=t[k];}this.shapes[s.id]=s;for(k=id;k<t.length;k++){this.shapes[k+1]=t[k];}t=[];}s.parent=this;if(this.parent){s.InitDom();s.redraw();}return s.id;};ZdcShape.Polyline.prototype.MouseClickPolyline=function(e){ZdcEvent.trigger(this,"mouseclickpolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polyline.prototype.MouseDoubleclickPolyline=function(e){ZdcEvent.trigger(this,"mousedblclickpolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polyline.prototype.MouseOutPolyline=function(e){ZdcEvent.trigger(this,"mouseoutpolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polyline.prototype.MouseOverPolyline=function(e){ZdcEvent.trigger(this,"mouseoverpolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polyline.prototype.MouseUpPolyline=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mouseuppolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polyline.prototype.MouseDownPolyline=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mousedownpolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polyline.prototype.MouseMovePolyline=function(e){ZdcEvent.trigger(this,"mousemovepolyline");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Text.prototype.MouseClickText=function(e){ZdcEvent.trigger(this,"mouseclicktext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Text.prototype.MouseDoubleclickText=function(e){ZdcEvent.trigger(this,"mousedblclicktext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Text.prototype.MouseOutText=function(e){ZdcEvent.trigger(this,"mouseouttext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Text.prototype.MouseOverText=function(e){ZdcEvent.trigger(this,"mouseovertext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Text.prototype.MouseUpText=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mouseuptext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Text.prototype.MouseDownText=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mousedowntext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Text.prototype.MouseMoveText=function(e){ZdcEvent.trigger(this,"mousemovetext");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Rect.prototype.MouseClickRect=function(e){ZdcEvent.trigger(this,"mouseclickrect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Rect.prototype.MouseDoubleclickRect=function(e){ZdcEvent.trigger(this,"mousedblclickrect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Rect.prototype.MouseOutRect=function(e){ZdcEvent.trigger(this,"mouseoutrect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Rect.prototype.MouseOverRect=function(e){ZdcEvent.trigger(this,"mouseoverrect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Rect.prototype.MouseUpRect=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mouseuprect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Rect.prototype.MouseDownRect=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mousedownrect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Rect.prototype.MouseMoveRect=function(e){ZdcEvent.trigger(this,"mousemoverect");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseClickOval=function(e){ZdcEvent.trigger(this,"mouseclickoval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseDoubleclickOval=function(e){ZdcEvent.trigger(this,"mousedblclickoval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseOutOval=function(e){ZdcEvent.trigger(this,"mouseoutoval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseOverOval=function(e){ZdcEvent.trigger(this,"mouseoveroval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseUpOval=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mouseupoval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseDownOval=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mousedownoval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Oval.prototype.MouseMoveOval=function(e){ZdcEvent.trigger(this,"mousemoveoval");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polygon.prototype.MouseClickPolygon=function(e){ZdcEvent.trigger(this,"mouseclickpolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polygon.prototype.MouseDoubleclickPolygon=function(e){ZdcEvent.trigger(this,"mousedblclickpolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polygon.prototype.MouseOutPolygon=function(e){ZdcEvent.trigger(this,"mouseoutpolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);}};ZdcShape.Polygon.prototype.MouseOverPolygon=function(e){ZdcEvent.trigger(this,"mouseoverpolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polygon.prototype.MouseUpPolygon=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mouseuppolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polygon.prototype.MouseDownPolygon=function(e){if(e.button==2){return;}ZdcEvent.trigger(this,"mousedownpolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Polygon.prototype.MouseMovePolygon=function(e){ZdcEvent.trigger(this,"mousemovepolygon");if(this.eventflg){ZdcEvent.stopPropagation(e);return false;}};ZdcShape.Layer.prototype.clearShape=function(){for(var k=0;k<this.shapes.length;k++){var s=this.shapes[k];if(s.doc){s.RemoveDom();s.parent=null;}}this.shapes=[];};ZdcShape.Layer.prototype.clearShapes=ZdcShape.Layer.prototype.clearShape;ZdcShape.Layer.prototype.removeShape=function(s){for(var k=0;k<this.shapes.length;k++){if(this.shapes[k]==s){if(s.doc){s.RemoveDom();s.parent=null;}var t=this.shapes;this.shapes=[];for(var j=0;j<t.length;j++){if(k!=j){this.shapes[this.shapes.length]=t[j];}}return true;}}return false;};ZdcShape.Layer.prototype.removeShapeById=function(_216){for(var k=0;k<this.shapes.length;k++){if(this.shapes[k].id==_216){return this.removeShape(this.shapes[k]);}}return false;};ZdcShape.Layer.prototype.getShapeById=function(_218){for(var k=0;k<this.shapes.length;k++){if(this.shapes[k].id==_218){return this.shapes[k];}}return null;};ZdcShape.Layer.prototype.IsVisible=function(){if(this.parent){var s=Number(this.parent.getMapScale());if(s>=this.minzoom&&s<=this.maxzoom){return true;}}return false;};ZdcShape.Layer.prototype.redraw=function(){var v="hidden";if(this.doc){this.doc.style.top=0+"px";this.doc.style.left=0+"px";if(this.parent){if(this.IsVisible()){v="visible";}this.doc.style.visibility=v;}}for(var k=0;k<this.shapes.length;k++){this.shapes[k].redraw();}};ZdcShape.Layer.prototype.toXMLString=function(_21d){var enc=_21d||"UTF-8";if(this.shapes.length<=0){return "";}var _21f=0,_220=0,_221=0,_222=0;var k,j;var pt;for(k=0;k<this.shapes.length;k++){for(j=0;j<this.shapes[k].getPoints().length;j++){pt=this.shapes[k].getPoints()[j];if(_21f==0){_21f=pt.mx;}else{if(_21f>pt.mx){_21f=pt.mx;}}if(_221==0){_221=pt.mx;}else{if(_221<pt.mx){_221=pt.mx;}}if(_220==0){_220=pt.my;}else{if(_220>pt.my){_220=pt.my;}}if(_222==0){_222=pt.my;}else{if(_222<pt.my){_222=pt.my;}}}}var xml="<?xml version=\"1.0\" encoding=\""+enc+"\"?>"+"<figurelist><header>"+"<cid>dummy</cid>"+"<oid>dummy</oid>"+"<coordinate>0</coordinate>"+"<format>0</format>"+"<count>"+this.shapes.length+"</count>"+"<area>"+_21f+","+_220+","+_221+","+_222+"</area>"+"</header><shapes>\n";for(k=0;k<this.shapes.length;k++){xml+="<"+this.shapes[k].figureType+">";xml+=""+"<strokeColor>"+this.shapes[k].strokeColor+"</strokeColor>"+"<strokeWeight>"+this.shapes[k].strokeWeight+"</strokeWeight>"+"<strokeStyle>"+this.shapes[k].strokeStyle+"</strokeStyle>"+"<opacity>"+this.shapes[k].opacity+"</opacity>"+"<fillType>"+this.shapes[k].fillType+"</fillType>"+"<shadowFlg>"+this.shapes[k].shadowFlg+"</shadowFlg>"+"<shadowColor>"+this.shapes[k].shadowColor+"</shadowColor>"+"<shadowX>"+this.shapes[k].shadowX+"</shadowX>"+"<shadowY>"+this.shapes[k].shadowY+"</shadowY>";if(this.shapes[k].figureType=="text"){xml+="<textString>"+this.shapes[k].textString+"</textString>"+"<font>"+this.shapes[k].font+"</font>"+"<borderWidth>"+this.shapes[k].borderWidth+"</borderWidth>"+"<borderColor>"+this.shapes[k].borderColor+"</borderColor>"+"<bgColor>"+this.shapes[k].bgColor+"</bgColor>"+"<textColor>"+this.shapes[k].textColor+"</textColor>"+"<anchor>"+this.shapes[k].anchor+"</anchor>"+"<offsetx>"+Number(this.shapes[k].offsetx)+"</offsetx>"+"<offsety>"+Number(this.shapes[k].offsety)+"</offsety>";}xml+="<points>";for(j=0;j<this.shapes[k].getPoints().length;j++){pt=this.shapes[k].getPoints()[j];if(j>0){xml+=",";}xml+=pt.mx+","+pt.my;}xml+="</points>";xml+="</"+this.shapes[k].figureType+">";}xml+="</shapes>"+"</figurelist>";return xml;};ZdcShape.Layer.prototype.importXMLDom=function(xml){var _228=xml.getElementsByTagName("status");if(_228&&_228.length>0){var _229=_228.item(0).firstChild.nodeValue;if(_229=="30310000"){return false;}else{return false;}}var p;var _22b=xml.getElementsByTagName("header");if(!_22b||_22b.length<1){return false;}var cid="",oid="",_22e=0,_22f=0,area="";p=_22b[0].firstChild;while(p){switch(p.tagName){case "cid":if(p.firstChild){cid=p.firstChild.nodeValue;}break;case "oid":if(p.firstChild){oid=p.firstChild.nodeValue;}break;case "coordinate":if(p.firstChild){_22e=Number(p.firstChild.nodeValue);}break;case "format":if(p.firstChild){_22f=Number(p.firstChild.nodeValue);}break;case "area":if(p.firstChild){area=p.firstChild.nodeValue;}break;}p=p.nextSibling;}var _231=xml.getElementsByTagName("shapes");if(!_231||_231.length<1){return false;}var _232=_231[0].firstChild;var t,f=null;var k,j;while(_232){f=null;switch(_232.tagName){case "text":f=new ZdcShape.Text();break;case "polygon":f=new ZdcShape.Polygon();break;case "polyline":f=new ZdcShape.Polyline();break;case "oval":f=new ZdcShape.Oval();break;case "rect":f=new ZdcShape.Rect();break;}if(!f){_232=_232.nextSibling;continue;}p=_232.firstChild;while(p){switch(p.tagName){case "strokeColor":if(p.firstChild){f.strokeColor=p.firstChild.nodeValue;}break;case "strokeWeight":if(p.firstChild){f.strokeWeight=p.firstChild.nodeValue;}break;case "strokeStyle":if(p.firstChild){f.strokeStyle=p.firstChild.nodeValue;}break;case "opacity":if(p.firstChild){f.opacity=p.firstChild.nodeValue;}break;case "fillType":if(p.firstChild){f.fillType=p.firstChild.nodeValue;}break;case "shadowFlg":if(p.firstChild){f.shadowFlg=p.firstChild.nodeValue;}if(f.shadowFlg.toLowerCase()=="false"){f.shadowFlg=false;}break;case "antialias":if(p.firstChild){f.antialias=p.firstChild.nodeValue;}break;case "shadowColor":if(p.firstChild){f.shadowColor=p.firstChild.nodeValue;}break;case "shadowX":if(p.firstChild){f.shadowX=Number(p.firstChild.nodeValue);}break;case "shadowY":if(p.firstChild){f.shadowY=Number(p.firstChild.nodeValue);}break;case "points":if(p.firstChild){t=p.firstChild.nodeValue.split(",");for(j=0;j<t.length/2;j++){f.addPoint(new ZdcPoint(Number(t[j*2]),Number(t[j*2+1]),_22f?1:2));}}break;}if(f.figureType=="text"){switch(p.tagName){case "textString":if(p.firstChild){f.textString=p.firstChild.nodeValue;}break;case "font":if(p.firstChild){f.font=p.firstChild.nodeValue;}break;case "borderWidth":if(p.firstChild){f.borderWidth=p.firstChild.nodeValue;}break;case "borderColor":if(p.firstChild){f.borderColor=p.firstChild.nodeValue;}break;case "bgColor":if(p.firstChild){f.bgColor=p.firstChild.nodeValue;}break;case "textColor":if(p.firstChild){f.textColor=p.firstChild.nodeValue;}break;case "anchor":if(p.firstChild){f.anchor=p.firstChild.nodeValue;}break;case "offsetx":if(p.firstChild){f.offsetx=Number(p.firstChild.nodeValue);}break;case "offsety":if(p.firstChild){f.offsety=Number(p.firstChild.nodeValue);}break;}}p=p.nextSibling;}this.addShape(f);_232=_232.nextSibling;}return true;};ZdcShape.Layer.prototype.importXMLString=function(_237){var xml=ZdcXml.parse(_237);if(!xml){return false;}return this.importXMLDom(xml);};ZdcShape.Layer.prototype.hiddenLayer=function(){this.doc.style.display="none";this.hiddenflg=true;return true;};ZdcShape.Layer.prototype.visibleLayer=function(){this.hiddenflg=false;this.redraw();this.doc.style.display="block";return true;};window.ZdcShape=ZdcShape;})();var err_msg = "";if(!window.ZDC){window.ZDC={};}(function(){function ZdcGeometric(){}ZdcGeometric.calcMatrix=function(m,a,_3){var r=new Array();r[0]=new Array();r[1]=new Array();var _5=m[0][0]*m[1][1]-m[0][1]*m[1][0];if(_5==0){return 0;}r[0][0]=m[1][1]/_5;r[1][1]=m[0][0]/_5;r[0][1]=(-1)*m[0][1]/_5;r[1][0]=(-1)*m[1][0]/_5;_3[0]=r[0][0]*a[0]+r[0][1]*a[1];_3[1]=r[1][0]*a[0]+r[1][1]*a[1];return 1;};ZdcGeometric.prototype.getPoint2PointDistance=function(p1,p2){if(p1.mx==p2.mx&&p1.my==p2.my){return 0;}var pi=Math.PI/180;var R=6370000;var a=R*Math.cos(p1.lat*pi)*Math.cos(p1.lon*pi);var b=R*Math.cos(p1.lat*pi)*Math.sin(p1.lon*pi);var c=R*Math.sin(p1.lat*pi);var d=R*Math.cos(p2.lat*pi)*Math.cos(p2.lon*pi);var e=R*Math.cos(p2.lat*pi)*Math.sin(p2.lon*pi);var f=R*Math.sin(p2.lat*pi);var g=a*d+b*e+c*f;var h=Math.acos(g/(R*R));return R*h;};ZdcGeometric.prototype.getPoint2LineNearPoint=function(p1,p2,p){var _15=-1;var dx=p1.mx-p2.mx;var dy=p1.my-p2.my;var a=dx*dx+dy*dy;if(a==0){return p1;}var b=dx*(p1.mx-p.mx)+dy*(p1.my-p.my);var t=(-1)*(b/a);if(t<-1){t=-1;}if(t>0){t=0;}var tx=dx*t+p1.mx;var ty=dy*t+p1.my;var pn=new ZdcPoint(tx,ty,2);return pn;};ZdcGeometric.prototype.getPoint2LineDistance=function(p1,p2,p){var _21=-1;var dx=p1.mx-p2.mx;var dy=p1.my-p2.my;var a=dx*dx+dy*dy;if(a==0){return this.getPoint2PointDistance(p,p1);}var b=dx*(p1.mx-p.mx)+dy*(p1.my-p.my);var t=(-1)*b/a;if(t<-1){t=-1;}if(t>0){t=0;}var tx=p1.mx+dx*t;var ty=p1.my+dy*t;var pn=new ZdcPoint(tx,ty,2);return this.getPoint2PointDistance(pn,p);};ZdcGeometric.prototype.isOvalContainPoint=function(p0,R1,R2,p){var a=Math.abs(p0.lon-p.lon);var b=Math.abs(p0.lat-p.lat);var t=((b*b)/(R2*R2))+((a*a)/(R1*R1));if(t<1){return true;}return false;};ZdcGeometric.prototype.isRectContainPoint=function(p1,p2,p){var box=new ZdcBox(p1,p2);return box.isContainPoint(p);};ZdcGeometric.prototype.getPoint2RectDistance=function(p1,p2,p){var box=new ZdcBox(p1,p2);var bp=new ZdcPoint(Math.floor((box.minx+box.maxx)/2),Math.floor((box.miny+box.maxy)/2),2);return this.getPoint2PointDistance(p,bp);};ZdcGeometric.prototype.isLineCrossOval=function(p1,p2,p,R1,R2){var _3f=this.isOvalContainPoint(p,R1,R2,p1);var _40=this.isOvalContainPoint(p,R1,R2,p2);var j=0;if(_3f&&_40){return false;}if(!_3f&&!_40){var pts=new Array();for(var i=0;i<=360;i++){var ty=p.lat+R2*Math.sin(i*Math.PI/180);var tx=p.lon+R1*Math.cos(i*Math.PI/180);pts[i]=new ZdcPoint(tx,ty);if(i>0){if(this.isLineCrossLine(p1,p2,pts[i-1],pts[i])){j++;}}}if(j>0){return true;}else{return false;}}return true;};ZdcGeometric.prototype.getLineCrossOvalPoints=function(p1,p2,p,R1,R2){var _4b=new Array();var pts=new Array();var j=0;for(var i=0;i<=360;i++){var ty=p.lat+R2*Math.sin(i*Math.PI/180);var tx=p.lon+R1*Math.cos(i*Math.PI/180);pts[i]=new ZdcPoint(tx,ty);if(i>0){if(this.isLineCrossLine(p1,p2,pts[i-1],pts[i])){_4b[j]=this.getLineCrossLinePoint(p1,p2,pts[i-1],pts[i]);j++;}}}if(j>0){return _4b;
}else{
return null;}};
ZdcGeometric.prototype.isLineCrossRect=function(p1,p2,p3,p4){
var p33=new ZdcPoint(p3.lon,p4.lat);var p44=new ZdcPoint(p4.lon,p3.lat);if(this.isLineCrossLine(p1,p2,p3,p33)){return true;}if(this.isLineCrossLine(p1,p2,p33,p4)){return true;}if(this.isLineCrossLine(p1,p2,p4,p44)){return true;}if(this.isLineCrossLine(p1,p2,p44,p3)){return true;}return false;};ZdcGeometric.prototype.getLineCrossRectPoints=function(p1,p2,p3,p4){var pts=new Array();var j=0;var p33=new ZdcPoint(p3.lon,p4.lat);
var p44=new ZdcPoint(p4.lon,p3.lat);if(this.isLineCrossLine(p1,p2,p3,p33)){pts[j]=this.getLineCrossLinePoint(p1,p2,p3,p33);j++;}if(this.isLineCrossLine(p1,p2,p33,p4)){pts[j]=this.getLineCrossLinePoint(p1,p2,p33,p4);j++;}if(this.isLineCrossLine(p1,p2,p4,p44)){pts[j]=this.getLineCrossLinePoint(p1,p2,p4,p44);j++;}if(this.isLineCrossLine(p1,p2,p44,p3)){pts[j]=this.getLineCrossLinePoint(p1,p2,p44,p3);j++;}if(j>0){return pts;}return null;};ZdcGeometric.prototype.isLineCrossLine=function(p1,p2,p3,p4){var m=new Array();m[0]=new Array();m[1]=new Array();var v=new Array();var _65=new Array();m[0][0]=p1.mx-p2.mx;m[1][0]=p1.my-p2.my;m[0][1]=p3.mx-p4.mx;m[1][1]=p3.my-p4.my;v[0]=p3.mx-p2.mx;v[1]=p3.my-p2.my;if(ZdcGeometric.calcMatrix(m,v,_65)==0){return false;}if(_65[0]<0||_65[0]>1){return false;}if(_65[1]<0||_65[1]>1){return false;}return true;};ZdcGeometric.prototype.getLineCrossLinePoint=function(p1,p2,p3,p4){var m=new Array();m[0]=new Array();m[1]=new Array();var v=new Array();var _6c=new Array();var p=null;m[0][0]=p1.mx-p2.mx;m[1][0]=p1.my-p2.my;m[0][1]=p3.mx-p4.mx;m[1][1]=p3.my-p4.my;v[0]=p3.mx-p2.mx;v[1]=p3.my-p2.my;if(ZdcGeometric.calcMatrix(m,v,_6c)==0){return p;}if(_6c[0]<0||_6c[0]>1){return p;}if(_6c[1]<0||_6c[1]>1){return p;}var mx=p2.mx+_6c[0]*(p1.mx-p2.mx);var my=p2.my+_6c[0]*(p1.my-p2.my);var pnt=new ZdcPoint(mx,my,2);return pnt;};ZdcGeometric.prototype.isLineCrossPolyline=function(p1,p2,_73){if(_73.length<2){return false;}for(var j=1;j<_73.length;j++){if(this.isLineCrossLine(p1,p2,_73[j-1],_73[j])){return true;}}return false;};ZdcGeometric.prototype.getLineCrossPolylinePoints=function(p1,p2,_77){var pts=new Array();var i=0;if(_77.length<2){return pts;}for(var j=1;j<_77.length;j++){if(this.isLineCrossLine(p1,p2,_77[j-1],_77[j])){pts[i]=this.getLineCrossLinePoint(p1,p2,_77[j-1],_77[j]);i++;}}if(i>0){return pts;}return null;};ZdcGeometric.prototype.isPolygonContainPoint=function(p,_7c){var p0=new ZdcPoint(p.mx+108000000,p.my,2);var pts=this.getLineCrossPolylinePoints(p0,p,_7c);if(pts==null){return 0;}if(ZdcCommon.Math_mod(pts.length,2)!=0){for(var k=0;k<pts.length;k++){if(this.getPoint2PointDistance(p,pts[k])==0){return 2;}}return 1;}else{return 0;}};ZdcGeometric.prototype.getPolygonCenterOfGravity=function(_80){var gx;var gy;var i;var s=0;var gx1=0;var gy1=0;var s1;function TriangleArea(ax,ay,bx,by,cx,cy){return ((bx-ax)*(cy-ay)-(by-ay)*(cx-ax))/2;}function TriangleCenterOfGravity(x1,y1,x2,y2,x3,y3){gx1=(x1+x2+x3)/3;gy1=(y1+y2+y3)/3;}gx=0;gy=0;if(_80.length<3){return -1;}for(i=2;i<_80.length;i++){s1=TriangleArea(_80[0].mx,_80[0].my,_80[i-1].mx,_80[i-1].my,_80[i].mx,_80[i].my);TriangleCenterOfGravity(_80[0].mx,_80[0].my,_80[i-1].mx,_80[i-1].my,_80[i].mx,_80[i].my);gx=s1*gx1+gx;gy=s1*gy1+gy;s=s1+s;}if(s==0){return -2;}gx=gx/s;gy=gy/s;var pt=new ZdcPoint(gx,gy,2);return pt;};ZdcGeometric.prototype.areaCal=function(_95,_96){return this.AreaCal(_95,_96);};ZdcGeometric.prototype.AreaCal=function(_97,_98){var _99=_97.length;var _9a=null;var _9b=null;var iDp=null;var jDp=null;var _9e=new Object();_9e.x=0;_9e.y=0;var _9f=-1;var _a0=new Array();if(_98=="oval"||_98=="rect"){var _a1=(_97[0].mx+_97[1].mx)/2;var _a2=(_97[0].my+_97[1].my)/2;var _a3=new ZdcPoint(_a1,_a2,2);}else{var _a3=this.getPolygonCenterOfGravity(_97);if(_a3==-1){return 0;}}var _a3=ZdcCommon.ConvertLL2XY(_a3.lon,_a3.lat,1);var _a4=this.auto_reset_keino(_a3);if(_a4==-1){return 0;}for(var i=0;i<_99;i++){var _9a=this.bl2xy(_97[i],_a4);if(_9a==null){return -1;}if(_9e.x>_9a.x){_9e.x=_9a.x;}if(_9e.y>_9a.y){_9e.y=_9a.y;}_a0[i]=_9a;}for(var i=0;i<_99;i++){_9a=_a0[i];_9a-=_9e;}var j;_9f=0;switch(_98){case "oval":_9f=Math.abs((_a0[0].y-_a0[1].y)/2)*Math.abs((_a0[0].x-_a0[1].x)/2)*Math.PI;break;case "rect":_9f=Math.abs(_a0[0].y-_a0[1].y)*Math.abs(_a0[0].x-_a0[1].x);break;default:for(var i=0;i<_99;i++){if(i==_99-1){j=0;}else{j=i+1;}iDp=_a0[i];jDp=_a0[j];_9f+=(jDp.y+iDp.y)*(jDp.x-iDp.x)/2;}break;}_9f=Math.abs(_9f);return _9f;};ZdcGeometric.prototype.auto_reset_keino=function(pnt){var _a8=new Array(19);_a8[0]=118800000;_a8[1]=118800000;_a8[2]=129600000;_a8[3]=118800000;_a8[4]=129600000;_a8[5]=129600000;_a8[6]=129600000;_a8[7]=129600000;_a8[8]=129600000;_a8[9]=144000000;_a8[10]=158400000;_a8[11]=158400000;_a8[12]=158400000;_a8[13]=93600000;_a8[14]=93600000;_a8[15]=93600000;_a8[16]=72000000;_a8[17]=72000000;_a8[18]=93600000;var _a9=new Array(19);_a9[0]=466200000;_a9[1]=471600000;_a9[2]=475800000;_a9[3]=480600000;_a9[4]=483600000;_a9[5]=489600000;_a9[6]=493800000;_a9[7]=498600000;_a9[8]=503400000;_a9[9]=507000000;_a9[10]=504900000;_a9[11]=512100000;_a9[12]=519300000;_a9[13]=511200000;_a9[14]=459000000;_a9[15]=446400000;_a9[16]=471600000;_a9[17]=489600000;_a9[18]=554400000;var _aa=0;var _ab=(pnt.my-_a8[0])*(pnt.my-_a8[0])+(pnt.mx-_a9[0])*(pnt.mx-_a9[0]);var _ac;for(var k=1;k<19;k++){_ac=(pnt.my-_a8[k])*(pnt.my-_a8[k])+(pnt.mx-_a9[k])*(pnt.mx-_a9[k]);if(_ac<_ab){_ab=_ac;_aa=k;}}return _aa;};ZdcGeometric.prototype.bl2xy=function(ll,kei){var LA=1.005037306045518;var LB=0.005047849237799;var LC=0.000010563786819;var LD=2.0633321e-8;var LE=3.8853e-11;var LF=7e-14;var _b6=new Array(19);_b6[0]=330000000;_b6[1]=330000000;_b6[2]=360000000;_b6[3]=330000000;_b6[4]=360000000;_b6[5]=360000000;_b6[6]=360000000;_b6[7]=360000000;_b6[8]=360000000;_b6[9]=400000000;_b6[10]=440000000;_b6[11]=440000000;_b6[12]=440000000;_b6[13]=260000000;_b6[14]=260000000;_b6[15]=260000000;_b6[16]=200000000;_b6[17]=200000000;_b6[18]=260000000;var _b7=new Array(19);_b7[0]=1295000000;_b7[1]=1310000000;_b7[2]=1321666666;_b7[3]=1335000000;_b7[4]=1343333333;_b7[5]=1360000000;_b7[6]=1371666666;_b7[7]=1385000000;_b7[8]=1398333333;_b7[9]=1408333333;_b7[10]=1402500000;_b7[11]=1422500000;_b7[12]=1442500000;_b7[13]=1420000000;_b7[14]=1275000000;_b7[15]=1240000000;_b7[16]=1310000000;_b7[17]=1360000000;_b7[18]=1540000000;
var _b8=new Object();_b8.x=0;_b8.y=0;_b8=this.GetAngle(ll);var _b9=new Object();_b9.x=this.Degree2Radian(_b7[kei]);_b9.y=this.Degree2Radian(_b6[kei]);var sf=1/299.152813;var se=Math.sqrt(2*sf-sf*sf);var sa=6377397.155;var sm0=0.9999;var sed=Math.sqrt(2/sf-1)/(1/sf-1);var _bf=sed*sed*Math.cos(_b8.y)*Math.cos(_b8.y);var sc=sa*Math.sqrt(1+sed*sed);var ln=sc/Math.sqrt(1+_bf);var _c2=Math.sin(_b8.y)/Math.cos(_b8.y);var dl=_b8.x-_b9.x;var ls0=sa*(1-se*se)*(LA*_b9.y-LB/2*Math.sin(2*_b9.y)+LC/4*Math.sin(4*_b9.y)-LD/6*Math.sin(6*_b9.y)+LE/8*Math.sin(8*_b9.y)-LF/10*Math.sin(_b9.y));var ls=sa*(1-se*se)*(LA*_b8.y-LB/2*Math.sin(2*_b8.y)+LC/4*Math.sin(4*_b8.y)-LD/6*Math.sin(6*_b8.y)+LE/8*Math.sin(8*_b8.y)-LF/10*Math.sin(_b8.y));var x=((ls-ls0)+ln/2*Math.sin(_b8.y)*Math.cos(_b8.y)*dl*dl+ln/24*Math.sin(_b8.y)*Math.pow(Math.cos(_b8.y),3)*(5-_c2*_c2+9*_bf+4*_bf*_bf)*Math.pow(dl,4)+ln/720*Math.sin(_b8.y)*Math.pow(Math.cos(_b8.y),5)*(61-58*_c2*_c2+Math.pow(_c2,4))*Math.pow(dl,6))*sm0;var y=(ln*Math.cos(_b8.y)*dl+ln/6*Math.pow(Math.cos(_b8.y),3)*(1-_c2*_c2+_bf)*Math.pow(dl,3)+ln/120*Math.pow(Math.cos(_b8.y),5)*(5-18*_c2*_c2+Math.pow(_c2,4))*Math.pow(dl,5))*sm0;var _c8=new Object();_c8.x=x;_c8.y=y;return _c8;};ZdcGeometric.prototype.GetAngle=function(src){var des=new Object();des.x=src.lon*Math.PI/180;des.y=src.lat*Math.PI/180;return des;};ZdcGeometric.prototype.Degree2Radian=function(_cb){var p=10000000;var d=_cb/p;var m=(_cb-d*p)/(p/100);var s=(_cb-d*p-m*p/100)/(p/10000);var _d0=(d+m/60+s/3600)*Math.PI/180;return _d0;};window.ZdcGeometric=ZdcGeometric;window.ZDC.ZdcGeometric=ZdcGeometric;})();var err_msg = "";function ZdcNearStation(){this.type="ZdcNearStation";this.result=null;}ZdcNearStation.prototype.getResult=function(){return this.result;};ZdcNearStation.prototype.abort=function(){if(this.httpReq){this.httpReq.abort();}};ZdcNearStation.prototype.search=function(_1){var _2=this;var _3=ZDC_KEY;var _4=ZDC_ENC;var _5=ZDC_DATUM;var _6=ZDC_OPT;var _7=1000;var _8=300000;if(_1.timeout==""||String(_1.timeout).match(/[^0-9]/)){var _9=new ZdcNearStationResult(null,1);_9.type=_2.type;_9.options=_1;_2.result=_9;ZdcEvent.trigger(_2,"end",_9);return;}if(_1.timeout<1||_1.timeout>_8){var _9=new ZdcNearStationResult(null,1);_9.type=_2.type;_9.options=_1;_2.result=_9;ZdcEvent.trigger(_2,"end",_9);return;}if(_1.timeout<_7){_1.timeout=_7;}var _a="";var _b="";var _c="";if(_1.pointFlg==0){if(_1.point&&typeof (_1.point)=="object"){_a=_1.point.my;_b=_1.point.mx;_c=2;}else{var _9=new ZdcNearStationResult(null,1);_9.type=_2.type;_9.options=_1;_2.result=_9;ZdcEvent.trigger(_2,"end",_9);return;}}else{_a=_1.lat;_b=_1.lon;_c=_1.pointFlg;}var _d=ZDC_SEARCHCGI+"/neki.cgi";var _e="";_e+="key="+_3;_e+="&pos="+_1.startPos;_e+="&cnt="+_1.maxCount;_e+="&enc="+_4;_e+="&lat="+_a;_e+="&lon="+_b;_e+="&knsu="+_1.limitCount;_e+="&rad="+_1.radius;_e+="&pflg="+_c;_e+="&datum="+_5;_e+="&opt="+_6;_e+="&lang="+_1.lang;var _f=_d+"?"+_e;this.httpReq=new ZdcHttpRequest(_4,_4);this.httpReq.request(_f,function(_10,_11){var _12=new ZdcNearStationResult(_10,_11,_1);_12.type=_2.type;_12.options=_1;_2.result=_12;ZdcEvent.trigger(_2,"end",_12);},_1.timeout);};function ZdcNearStationOptions(){this.startPos=1;this.maxCount=100;this.point=null;this.lat="";this.lon="";this.limitCount=100;this.radius=2000;this.timeout=15000;this.pointFlg=0;this.lang="jpn";}function ZdcNearStationResult(_13,_14,_15){if(_13==null){ZdcSetErrorStatus.call(this,"",_14);return;}var res=new Array();res=_13.split(ZDC_HTTP_DMT[ZDC_ENC]);var _17=res.shift();var _18=_17.split("\t");var _19=_18[0];var cnt=parseFloat(_18[1]);var _1b=parseFloat(_18[2]);var _1c=(_19.charAt(3)=="0"&&_19.charAt(7)=="1")?true:false;if(_19.charAt(3)=="1"){ZdcSetErrorStatus.call(this,_19);return;}this.retCode=_19;this.type="";this.status=_14;this.recCount=cnt;this.hitCount=_1b;this.rest=_1c;this.items=[];for(var i=0;i<cnt;i++){_18=res[i].split("\t");if(_18[0]==""){continue;}var _1e=new ZdcNearStationItem(_18,_15);this.items.push(_1e);}}function ZdcNearStationItem(_1f,_20){this.point=null;this.lat=_1f[1];this.lon=_1f[2];if(_20.pointFlg==0){this.point=new ZdcPoint(this.lon,this.lat,2);this.lat="";this.lon="";}this.stationName=_1f[3];this.stationKana=_1f[4];this.stationKanaCode=_1f[5];this.address=_1f[6];this.distance=_1f[9];var _21=this.stationName;this.stationName=_21.substr(0,_21.indexOf("("));this.lineName=_21.slice(_21.indexOf("(")+1,-1);}var err_msg = "";function ZdcNearPoi(){this.type="ZdcNearPoi";this.result=null;}ZdcNearPoi.prototype.getResult=function(){return this.result;};ZdcNearPoi.prototype.abort=function(){if(this.httpReq){this.httpReq.abort();}};ZdcNearPoi.prototype.search=function(_1){var _2=this;var _3=ZDC_KEY;var _4=ZDC_ENC;var _5=ZDC_DATUM;var _6=ZDC_CORPID;var _7=ZDC_GENRETBL_SID[_1.lang];var _8=ZDC_OPT;var _9=1000;var _a=300000;if(_1.timeout==""||String(_1.timeout).match(/[^0-9]/)){var _b=new ZdcNearPoiResult(null,1);_b.type=_2.type;_b.options=_1;_2.result=_b;ZdcEvent.trigger(_2,"end",_b);return;}if(_1.timeout<1||_1.timeout>_a){var _b=new ZdcNearPoiResult(null,1);_b.type=_2.type;_b.options=_1;_2.result=_b;ZdcEvent.trigger(_2,"end",_b);return;}if(_1.timeout<_9){_1.timeout=_9;}var _c="";var _d="";var _e="";if(_1.pointFlg==0){if(_1.point&&typeof (_1.point)=="object"){_c=_1.point.my;_d=_1.point.mx;_e=2;}else{var _b=new ZdcNearPoiResult(null,1);_b.type=_2.type;_b.options=_1;_2.result=_b;ZdcEvent.trigger(_2,"end",_b);return;}}else{_c=_1.lat;_d=_1.lon;_e=_1.pointFlg;}var _f=ZDC_SEARCHCGI+"/npoi.cgi";var prm="";prm+="key="+_3;prm+="&cid="+_6;prm+="&sid="+_7;prm+="&pos="+_1.startPos;prm+="&cnt="+_1.maxCount;prm+="&enc="+_4;prm+="&jnrmn="+_1.genreMenuCode;prm+="&jnr="+_1.genreCode;prm+="&lat="+_c;prm+="&lon="+_d;prm+="&knsu="+_1.limitCount;prm+="&rad="+_1.radius;prm+="&srchmode="+_1.srchMode;prm+="&srchtarget="+_1.srchTarget;prm+="&srchtype="+_1.srchType;prm+="&frewd="+ZdcCnvSymbolsS2M(_1.freeWord);prm+="&pflg="+_e;prm+="&datum="+_5;prm+="&opt="+_8;prm+="&lang="+_1.lang;var _11=_f+"?"+prm;this.httpReq=new ZdcHttpRequest(_4,_4);this.httpReq.request(_11,function(_12,_13){var _14=new ZdcNearPoiResult(_12,_13,_1);_14.type=_2.type;_14.options=_1;_2.result=_14;ZdcEvent.trigger(_2,"end",_14);},_1.timeout);};function ZdcNearPoiOptions(_15){this.startPos=1;this.maxCount=100;this.genreMenuCode="00000";this.genreCode="00000";this.point=null;this.lat="";this.lon="";this.limitCount=100;this.radius=2000;this.srchMode=0;this.srchTarget=0;this.srchType=0;this.freeWord=(_15==undefined)?"":_15;this.timeout=15000;this.pointFlg=0;this.lang="jpn";}function ZdcNearPoiResult(_16,_17,_18){if(_16==null){ZdcSetErrorStatus.call(this,"",_17);return;}var res=new Array();res=_16.split(ZDC_HTTP_DMT[ZDC_ENC]);var _1a=res.shift();var _1b=_1a.split("\t");var _1c=_1b[0];var cnt=parseFloat(_1b[1]);var _1e=parseFloat(_1b[2]);var _1f=(_1c.charAt(3)=="0"&&_1c.charAt(7)=="1")?true:false;if(_1c.charAt(3)=="1"){ZdcSetErrorStatus.call(this,_1c);return;}this.retCode=_1c;this.type="";this.status=_17;this.recCount=cnt;this.hitCount=_1e;this.rest=_1f;this.items=[];for(var i=0;i<cnt;i++){_1b=res[i].split("\t");if(_1b[0]==""){continue;}var _21=new ZdcNearPoiItem(_1b,_18);this.items.push(_21);}}function ZdcNearPoiItem(_22,_23){this.poiCode=_22[0];this.point=null;this.lat=_22[1];this.lon=_22[2];if(_23.pointFlg==0){this.point=new ZdcPoint(this.lon,this.lat,2);this.lat="";this.lon="";}this.poiName=_22[3];this.address=_22[4];this.zipCode=_22[5];this.telNo=_22[6];this.distance=_22[7];this.genreMenuCode=_22[8];this.genreCode=_22[9];this.genreMenuName=_22[10];this.genreName=_22[11];}var err_msg = "";function type_num(v){return (typeof (v)==typeof (1));}function elem_pos(id,_3,_4){var e=document.getElementById(id);var _6=(_3=="x"?"offsetLeft":"offsetTop");if(!type_num(e[_6])){return _4;}var t=0;while(1){if(e[_6]){t+=e[_6];}if(!e.offsetParent){break;}e=e.offsetParent;}return t;}function getDynamicStyle(id,_9){if(!document.getElementById){return;}var e=document.getElementById(id);if(e.style[_9]){return e.style[_9];}else{if(e.currentStyle){return e.currentStyle[_9];}else{if(document.defaultView){return document.defaultView.getComputedStyle(e,"").getPropertyValue(_9);}else{return null;}}}}var Zdc_railway_D_iMapW=new Array();var Zdc_railway_D_iMapH=new Array();var Zdc_railway_D_iMapLW=new Array();var Zdc_railway_D_iMapLH=new Array();var Zdc_railway_D_iMapInitX=new Array();var Zdc_railway_D_iMapInitY=new Array();Zdc_railway_D_iMapW[1]=900;Zdc_railway_D_iMapH[1]=1350;Zdc_railway_D_iMapLW[1]=200;Zdc_railway_D_iMapLH[1]=270;Zdc_railway_D_iMapInitX[1]=520;Zdc_railway_D_iMapInitY[1]=850;Zdc_railway_D_iMapW[2]=1350;Zdc_railway_D_iMapH[2]=900;Zdc_railway_D_iMapLW[2]=200;Zdc_railway_D_iMapLH[2]=150;Zdc_railway_D_iMapInitX[2]=635;Zdc_railway_D_iMapInitY[2]=570;Zdc_railway_D_iMapW[3]=4500;Zdc_railway_D_iMapH[3]=3150;Zdc_railway_D_iMapLW[3]=200;Zdc_railway_D_iMapLH[3]=143;Zdc_railway_D_iMapInitX[3]=3045;Zdc_railway_D_iMapInitY[3]=2130;Zdc_railway_D_iMapW[4]=2250;Zdc_railway_D_iMapH[4]=1350;Zdc_railway_D_iMapLW[4]=200;Zdc_railway_D_iMapLH[4]=135;Zdc_railway_D_iMapInitX[4]=840;Zdc_railway_D_iMapInitY[4]=670;Zdc_railway_D_iMapW[5]=2250;Zdc_railway_D_iMapH[5]=1350;Zdc_railway_D_iMapLW[5]=200;Zdc_railway_D_iMapLH[5]=134;Zdc_railway_D_iMapInitX[5]=790;Zdc_railway_D_iMapInitY[5]=560;Zdc_railway_D_iMapW[6]=1800;Zdc_railway_D_iMapH[6]=1350;Zdc_railway_D_iMapLW[6]=200;Zdc_railway_D_iMapLH[6]=160;Zdc_railway_D_iMapInitX[6]=1305;Zdc_railway_D_iMapInitY[6]=465;Zdc_railway_D_iMapW[7]=1800;Zdc_railway_D_iMapH[7]=1350;Zdc_railway_D_iMapLW[7]=200;Zdc_railway_D_iMapLH[7]=160;Zdc_railway_D_iMapInitX[7]=915;Zdc_railway_D_iMapInitY[7]=580;var Zdc_railway_opts;var Zdc_railway_result=null;var Zdc_railwaymap_contents=null;
function ZdcSearchRailwayMap(){}
ZdcSearchRailwayMap.prototype.addMainMap=function(_b,_c){this.removeMainMap();Zdc_railway_opts=_c;Zdc_railwaymap_contents=_b;if(!Zdc_railway_opts.mapNo){ZdcSearchRailwayMapError(1);return;}if(!Zdc_railway_D_iMapW[Zdc_railway_opts.mapNo]){ZdcSearchRailwayMapError(1);return;}if(Zdc_railway_opts.x){if(String(Zdc_railway_opts.x).match(/[^0-9\.]/)){ZdcSearchRailwayMapError(1);return;}Zdc_railway_opts.x=parseFloat(Zdc_railway_opts.x);if(!Zdc_railway_opts.x){ZdcSearchRailwayMapError(1);return;}}if(Zdc_railway_opts.y){if(String(Zdc_railway_opts.y).match(/[^0-9\.]/)){ZdcSearchRailwayMapError(1);return;}Zdc_railway_opts.y=parseFloat(Zdc_railway_opts.y);if(!Zdc_railway_opts.y){ZdcSearchRailwayMapError(1);return;}}if(Zdc_railway_opts.width){if(String(Zdc_railway_opts.width).match(/[^0-9\.]/)){ZdcSearchRailwayMapError(1);return;}Zdc_railway_opts.width=parseFloat(Zdc_railway_opts.width);
if(!Zdc_railway_opts.width){ZdcSearchRailwayMapError(1);return;}}if(Zdc_railway_opts.height){if(String(Zdc_railway_opts.height).match(/[^0-9\.]/)){ZdcSearchRailwayMapError(1);return;}Zdc_railway_opts.height=parseFloat(Zdc_railway_opts.height);if(!Zdc_railway_opts.height){ZdcSearchRailwayMapError(1);return;}}if(!Zdc_railway_opts.pointFlg){Zdc_railway_opts.pointFlg="0";}if(Zdc_railway_opts.pointFlg!="0"&&Zdc_railway_opts.pointFlg!="1"&&Zdc_railway_opts.pointFlg!="2"&&Zdc_railway_opts.pointFlg!="3"){ZdcSearchRailwayMapError(1);return;}var _d=ZDC_EVENT_LOG_CGI+"?key="+ZDC_KEY+"&event=ZdcSearchRailwayMap_addMainMap"+"_mapNo"+_c.mapNo+"&opt="+ZDC_OPT;var _e=new ZdcHttpRequest(ZDC_ENC,ZDC_ENC);_e.request(_d,function(_f,_10){if(_f.charAt(3)!="0"){alert("Session Time Out");return;}if(!Zdc_railway_opts.width){Zdc_railway_opts.width=parseInt(Zdc_railwaymap_contents.style.width);if(!Zdc_railway_opts.width){Zdc_railway_opts.width=450;}}if(!Zdc_railway_opts.height){Zdc_railway_opts.height=parseInt(Zdc_railwaymap_contents.style.height);if(!Zdc_railway_opts.height){Zdc_railway_opts.height=450;}}var x=Zdc_railway_opts.x;var y=Zdc_railway_opts.y;if(!x){x=Zdc_railway_D_iMapInitX[Zdc_railway_opts.mapNo]-(Zdc_railway_opts.width/2);}if(!y){y=Zdc_railway_D_iMapInitY[Zdc_railway_opts.mapNo]-(Zdc_railway_opts.height/2);}Zdc_railway_f_mapInit(Zdc_railwaymap_contents,Zdc_railway_opts.width,Zdc_railway_opts.height,(x*-1),(y*-1),Zdc_railway_D_iMapW[Zdc_railway_opts.mapNo],Zdc_railway_D_iMapH[Zdc_railway_opts.mapNo],Zdc_railway_opts.mapNo);},10000);};ZdcSearchRailwayMap.prototype.addSubMap=function(_13){if(!Zdc_railway_opts){return;}this.removeSubMap();if(!Zdc_railway_opts.width){Zdc_railway_opts.width=parseInt(Zdc_railwaymap_contents.style.width);if(!Zdc_railway_opts.width){Zdc_railway_opts.width=450;}}if(!Zdc_railway_opts.height){Zdc_railway_opts.height=parseInt(Zdc_railwaymap_contents.style.height);if(!Zdc_railway_opts.height){Zdc_railway_opts.height=450;}}var x=Zdc_railway_opts.x;var y=Zdc_railway_opts.y;if(!x){x=Zdc_railway_D_iMapInitX[Zdc_railway_opts.mapNo]-(Zdc_railway_opts.width/2);}if(!y){y=Zdc_railway_D_iMapInitY[Zdc_railway_opts.mapNo]-(Zdc_railway_opts.height/2);}Zdc_railwayL_f_mapInit(_13,(x*-1),(y*-1),Zdc_railway_opts.width,Zdc_railway_opts.height,Zdc_railway_D_iMapW[Zdc_railway_opts.mapNo],Zdc_railway_D_iMapH[Zdc_railway_opts.mapNo],Zdc_railway_D_iMapLW[Zdc_railway_opts.mapNo],Zdc_railway_D_iMapLH[Zdc_railway_opts.mapNo]);};ZdcSearchRailwayMap.prototype.removeMainMap=function(){if(!Zdc_railway_g_oMap){return;}if(Zdc_railway_g_oMapKoma){Zdc_railway_g_oMap.removeChild(Zdc_railway_g_oMapKoma);delete Zdc_railway_g_oMapKoma;}for(i=0;i<Zdc_railway_g_iKomaIfcnt;i++){if(Zdc_railway_g_oKomaIf[i]){Zdc_railway_g_oMap.removeChild(Zdc_railway_g_oKomaIf[i]);delete Zdc_railway_g_oKomaIf[i];}}Zdc_railway_g_oMap=null;};ZdcSearchRailwayMap.prototype.removeSubMap=function(){if(!Zdc_railwayL_g_oMap){return;}if(Zdc_railwayL_g_oMapKoma){Zdc_railwayL_g_oMap.removeChild(Zdc_railwayL_g_oMapKoma);delete Zdc_railwayL_g_oMapKoma;}Zdc_railwayL_g_oMap.innerHTML="";Zdc_railwayL_g_oMap=null;};ZdcSearchRailwayMap.prototype.getResult=function(){return Zdc_railway_result;};function ZdcSearchRailwayMapError(st){var res=new ZdcSearchRailwayMapResult();res.status=st;res.recCount=0;res.hitCount=0;Zdc_railway_result=res;Zdc_railway_opts.callback(res);Zdc_railway_opts=null;}
function ZdcSearchRailwayMapOptions(){this.mapNo=3;this.x=null;this.y=null;this.width=null;this.height=null;
this.pointFlg=0;this.callback="";}function ZdcSearchRailwayMapResult(){this.type="ZdcSearchRailwayMap";this.options=null;this.status=0;this.recCount=1;this.hitCount=1;this.rest=false;this.items=new Array();}
function ZdcSearchRailwayMapItem(){this.stationName="";this.point=null;this.lat=0;this.lon=0;}
var Zdc_railway_D_iKomaW=450;var Zdc_railway_D_iKomaH=450;var Zdc_railway_D_MoveInterval=50;var Zdc_railway_D_MoveCursor=300;var Zdc_railway_D_MoveSpeed=3;var Zdc_railway_g_oMap=null;var Zdc_railway_g_oMapKoma=null;var Zdc_railway_g_bro=0;var Zdc_railway_g_iMapW=0;var Zdc_railway_g_iMapH=0;var Zdc_railway_g_iKomaWC=0;var Zdc_railway_g_iKomaHC=0;var Zdc_railway_g_iKomaX=0;var Zdc_railway_g_iKomaY=0;var Zdc_railway_g_oKomaIf=new Array(99);var Zdc_railway_g_iKomaIf=0;var Zdc_railway_g_iKomaIfcnt=10;var Zdc_railway_g_iAllW=0;var Zdc_railway_g_iAllH=0;var Zdc_railway_g_bMouseDown=false;var Zdc_railway_g_iMoveX=0;var Zdc_railway_g_iMoveY=0;var Zdc_railway_g_bMoved=false;var Zdc_railway_g_bMovedCnt=0;var Zdc_railway_g_iNowX=0;var Zdc_railway_g_iNowY=0;var Zdc_railway_g_bMoving=false;var Zdc_railway_g_iMoveToX=0;var Zdc_railway_g_iMoveToY=0;var Zdc_railway_g_bMoved=false;var Zdc_railway_g_iIcX=new Array(99);var Zdc_railway_g_iIcY=new Array(99);var Zdc_railway_g_oAjax=null;var Zdc_railway_g_iArea=0;function Zdc_railway_f_getNowX(){return parseInt(Zdc_railway_g_oMapKoma.style.left);}function Zdc_railway_f_getNowY(){return parseInt(Zdc_railway_g_oMapKoma.style.top);}function Zdc_railway_f_mapInit(c,w,h,x,y,aw,ah,_1f){var i,j,k,tmp;Zdc_railway_g_bro=(window.opera?4:(document.all?3:(document.getElementById?1:(document.layers?2:0))));Zdc_railway_g_iMapW=w;Zdc_railway_g_iMapH=h;Zdc_railway_g_iAllW=aw;Zdc_railway_g_iAllH=ah;Zdc_railway_g_iKomaWC=Math.floor(Zdc_railway_g_iMapW/Zdc_railway_D_iKomaW)+2;Zdc_railway_g_iKomaHC=Math.floor(Zdc_railway_g_iMapH/Zdc_railway_D_iKomaH)+2;Zdc_railway_g_oMap=c;Zdc_railway_g_oMap.style.width=Zdc_railway_g_iMapW+"px";Zdc_railway_g_oMap.style.height=Zdc_railway_g_iMapH+"px";Zdc_railway_g_oMap.style.zIndex="20500";Zdc_railway_g_oMap.onmousedown=Zdc_railway_e_mapMouseDown;Zdc_railway_g_oMap.onmouseup=Zdc_railway_e_mapMouseUp;Zdc_railway_g_oMap.ondblclick=Zdc_railway_e_mapMouseDblclick;Zdc_railway_g_oMap.innerHTML="<img src=\""+Zdc_railway_D_PATH+"/img/semap-space.gif"+"\" "+" width="+Zdc_railway_g_iMapW+" height="+Zdc_railway_g_iMapH+">";Zdc_railway_g_oMapKoma=document.createElement("div");Zdc_railway_g_oMapKoma.id="MapKoma";Zdc_railway_g_oMapKoma.style.position="absolute";Zdc_railway_g_oMapKoma.style.left="0px";Zdc_railway_g_oMapKoma.style.top="0px";Zdc_railway_g_oMapKoma.style.zIndex="1";Zdc_railway_g_oMap.appendChild(Zdc_railway_g_oMapKoma);for(i=0;i<Zdc_railway_g_iKomaIfcnt;i++){Zdc_railway_g_oKomaIf[i]=document.createElement("script");Zdc_railway_g_oKomaIf[i].id="ajax_"+i;Zdc_railway_g_oKomaIf[i].charset=ZDC_CHARSET_STR[ZDC_ENC];Zdc_railway_g_oMap.appendChild(Zdc_railway_g_oKomaIf[i]);}document.onmousemove=Zdc_railway_e_mapMouseMove;document.onmouseup=Zdc_railway_e_mapMouseUp;Zdc_railway_g_iArea=_1f;setTimeout("Zdc_railway_f_Move("+x+","+y+")",500);return true;}function Zdc_railway_f_setHTML(id,_25){var o=document.getElementById(id);if(!o){return;}if(Zdc_railway_g_bro==3){o.insertAdjacentHTML("BeforeEnd",_25);}else{o.innerHTML=_25;}}function Zdc_railway_f_createKoma(x,y){var _29=document.createElement("div");_29.id="img";_29.style.width=Zdc_railway_D_iKomaW+"px";_29.style.height=Zdc_railway_D_iKomaH+"px";_29.style.top=y*Zdc_railway_D_iKomaH+"px";_29.style.left=x*Zdc_railway_D_iKomaW+"px";_29.style.zIndex=0;_29.style.position="absolute";return _29;}function Zdc_railway_f_makeMapHTML(o,x,y){var id="img"+x+"-"+y;o.id=id;var _2e=(Zdc_railway_opts.pointFlg==0)?2:Zdc_railway_opts.pointFlg;var url=Zdc_railway_D_PATH+"/searchrosenzu.gethtml.htm?p="+id+"&a="+Zdc_railway_g_iArea+"&x="+x+"&y="+y+"&enc="+ZDC_ENC_STR[ZDC_ENC]+"&domain="+ZdcHttpRequest.getProxyDomain();url=url+"&pflg="+_2e;url=url+"&datum="+ZDC_DATUM;var oK=Zdc_railway_g_oKomaIf[Zdc_railway_g_iKomaIf];var nK=document.createElement("script");nK.id="ajax_"+Zdc_railway_g_iKomaIf;nK.src=url;nK.charset=ZDC_CHARSET_STR[ZDC_ENC];oK.parentNode.replaceChild(nK,oK);Zdc_railway_g_oKomaIf[Zdc_railway_g_iKomaIf]=nK;Zdc_railway_g_iKomaIf++;
if(Zdc_railway_g_iKomaIf>=Zdc_railway_g_iKomaIfcnt){Zdc_railway_g_iKomaIf=0;}}
function Zdc_railway_f_Clu(){if(Zdc_railway_g_bMoving){return;}
Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX()+Zdc_railway_D_MoveCursor;Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY()+Zdc_railway_D_MoveCursor;Zdc_railway_f_SlideStart();}function Zdc_railway_f_Cup(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX();Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY()+Zdc_railway_D_MoveCursor;Zdc_railway_f_SlideStart();}function Zdc_railway_f_Cru(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX()-Zdc_railway_D_MoveCursor;Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY()+Zdc_railway_D_MoveCursor;Zdc_railway_f_SlideStart();}function Zdc_railway_f_Clf(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX()+Zdc_railway_D_MoveCursor;Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY();Zdc_railway_f_SlideStart();}function Zdc_railway_f_Crt(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX()-Zdc_railway_D_MoveCursor;Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY();Zdc_railway_f_SlideStart();}function Zdc_railway_f_Clb(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX()+Zdc_railway_D_MoveCursor;Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY()-Zdc_railway_D_MoveCursor;Zdc_railway_f_SlideStart();}function Zdc_railway_f_Cbt(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX();Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY()-Zdc_railway_D_MoveCursor;Zdc_railway_f_SlideStart();}function Zdc_railway_f_Crb(){if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_iMoveToX=Zdc_railway_f_getNowX()-Zdc_railway_D_MoveCursor;Zdc_railway_g_iMoveToY=Zdc_railway_f_getNowY()-Zdc_railway_D_MoveCursor;Zdc_railway_f_SlideStart();}function Zdc_railway_f_SlideStart(){Zdc_railway_g_bMoving=true;if(Zdc_railway_g_iMoveToX>0){Zdc_railway_g_iMoveToX=0;}if(Zdc_railway_g_iMoveToY>0){Zdc_railway_g_iMoveToY=0;}if(Zdc_railway_g_iMoveToX<Zdc_railway_g_iAllW*-1){Zdc_railway_g_iMoveToX=Zdc_railway_g_iAllW*-1;}if(Zdc_railway_g_iMoveToY<Zdc_railway_g_iAllH*-1){Zdc_railway_g_iMoveToY=Zdc_railway_g_iAllH*-1;}Zdc_railway_f_Slide();}function Zdc_railway_f_Slide(){if(!Zdc_railway_g_bMoving){return;}var i=Math.ceil((Zdc_railway_f_getNowX()-Zdc_railway_g_iMoveToX)/Zdc_railway_D_MoveSpeed);var j=Math.ceil((Zdc_railway_f_getNowY()-Zdc_railway_g_iMoveToY)/Zdc_railway_D_MoveSpeed);if(i==0&&j==0){Zdc_railway_g_bMoving=false;}i=Zdc_railway_f_getNowX()-i;j=Zdc_railway_f_getNowY()-j;Zdc_railway_g_oMapKoma.style.left=i+"px";Zdc_railway_g_oMapKoma.style.top=j+"px";if(Zdc_railway_g_bMoving){if(Zdc_railwayL_g_oMap){Zdc_railwayL_f_MoveCur(i,j);}mapMoveTid=setTimeout("Zdc_railway_f_Slide()",Zdc_railway_D_MoveInterval);}else{if(Zdc_railwayL_g_oMap){Zdc_railwayL_f_MoveCur(Zdc_railway_f_getNowX(),Zdc_railway_f_getNowY());}}Zdc_railway_f_Scroll();}function Zdc_railway_f_Move(x,y){if(Zdc_railway_g_bMoving){return;}for(i=0;i<Zdc_railway_g_iKomaHC;i++){for(j=0;j<Zdc_railway_g_iKomaWC;j++){if(Zdc_railway_g_oMapKoma.childNodes[0]){Zdc_railway_g_oMapKoma.removeChild(Zdc_railway_g_oMapKoma.childNodes[0]);}}}Zdc_railway_g_iKomaX=parseInt(x/Zdc_railway_D_iKomaW)*-1;Zdc_railway_g_iKomaY=parseInt(y/Zdc_railway_D_iKomaH)*-1;for(i=0;i<Zdc_railway_g_iKomaHC;i++){for(j=0;j<Zdc_railway_g_iKomaWC;j++){tmp=Zdc_railway_f_createKoma(Zdc_railway_g_iKomaX+j,Zdc_railway_g_iKomaY+i);Zdc_railway_g_oMapKoma.appendChild(tmp);Zdc_railway_f_makeMapHTML(tmp,Zdc_railway_g_iKomaX+j,Zdc_railway_g_iKomaY+i);}}Zdc_railway_g_oMapKoma.style.left=x+"px";Zdc_railway_g_oMapKoma.style.top=y+"px";Zdc_railway_f_Scroll();}function Zdc_railway_f_Scroll(){var i,j,tx,ty,_3a,_3b;var _3c=parseInt(Zdc_railway_g_oMapKoma.childNodes[0].style.top);var _3d=parseInt(Zdc_railway_g_oMapKoma.childNodes[0].style.left);var _3e=parseInt(Zdc_railway_g_oMapKoma.childNodes[Zdc_railway_g_iKomaWC*Zdc_railway_g_iKomaHC-1].style.top)+Zdc_railway_D_iKomaH;var _3f=parseInt(Zdc_railway_g_oMapKoma.childNodes[Zdc_railway_g_iKomaWC*Zdc_railway_g_iKomaHC-1].style.left)+Zdc_railway_D_iKomaW;var x=parseInt(Zdc_railway_g_oMapKoma.style.left)+_3d;var y=parseInt(Zdc_railway_g_oMapKoma.style.top)+_3c;if(y<-Zdc_railway_D_iKomaH){Zdc_railway_g_iKomaY++;for(i=0;i<Zdc_railway_g_iKomaWC;i++){Zdc_railway_g_oMapKoma.removeChild(Zdc_railway_g_oMapKoma.childNodes[0]);}for(i=0;i<Zdc_railway_g_iKomaWC;i++){tx=Zdc_railway_g_iKomaX+i;ty=Zdc_railway_g_iKomaY+Zdc_railway_g_iKomaHC-1;_3a=Zdc_railway_f_createKoma(tx,ty);Zdc_railway_g_oMapKoma.appendChild(_3a);Zdc_railway_f_makeMapHTML(_3a,tx,ty);}}if(y>0){Zdc_railway_g_iKomaY--;for(i=0;i<Zdc_railway_g_iKomaWC;i++){Zdc_railway_g_oMapKoma.removeChild(Zdc_railway_g_oMapKoma.childNodes[Zdc_railway_g_iKomaWC*(Zdc_railway_g_iKomaHC-1)]);}for(i=0;i<Zdc_railway_g_iKomaWC;i++){tx=Zdc_railway_g_iKomaX+i;ty=Zdc_railway_g_iKomaY;_3a=Zdc_railway_f_createKoma(tx,ty);Zdc_railway_g_oMapKoma.insertBefore(_3a,Zdc_railway_g_oMapKoma.childNodes[i]);Zdc_railway_f_makeMapHTML(_3a,tx,ty);}}if(x<-Zdc_railway_D_iKomaW){Zdc_railway_g_iKomaX++;for(i=Zdc_railway_g_iKomaHC-1;i>-1;i--){Zdc_railway_g_oMapKoma.removeChild(Zdc_railway_g_oMapKoma.childNodes[i*Zdc_railway_g_iKomaWC]);}for(i=Zdc_railway_g_iKomaHC-1;i>-1;i--){tx=Zdc_railway_g_iKomaX+Zdc_railway_g_iKomaWC-1;ty=Zdc_railway_g_iKomaY+i;_3a=Zdc_railway_f_createKoma(tx,ty);_3b=Zdc_railway_g_oMapKoma.childNodes[(i+1)*(Zdc_railway_g_iKomaWC-1)];if(_3b){Zdc_railway_g_oMapKoma.insertBefore(_3a,_3b);}else{Zdc_railway_g_oMapKoma.appendChild(_3a);}Zdc_railway_f_makeMapHTML(_3a,tx,ty);}}if(x>0){Zdc_railway_g_iKomaX--;for(i=Zdc_railway_g_iKomaHC-1;i>-1;i--){Zdc_railway_g_oMapKoma.removeChild(Zdc_railway_g_oMapKoma.childNodes[((i+1)*Zdc_railway_g_iKomaWC)-1]);}for(i=0;i<Zdc_railway_g_iKomaHC;i++){tx=Zdc_railway_g_iKomaX;ty=Zdc_railway_g_iKomaY+i;_3a=Zdc_railway_f_createKoma(tx,ty);Zdc_railway_g_oMapKoma.insertBefore(_3a,Zdc_railway_g_oMapKoma.childNodes[i*Zdc_railway_g_iKomaWC]);Zdc_railway_f_makeMapHTML(_3a,tx,ty);}}}
function Zdc_railway_e_mapMouseDown(e){document.onmousemove=Zdc_railway_e_mapMouseMove;document.onmouseup=Zdc_railway_e_mapMouseUp;if(Zdc_railway_g_bMoving){return;}Zdc_railway_g_bMoved=false;Zdc_railway_g_bMovedCnt=0;e=(e)?e:((event)?event:null);if(e.button==2){}else{Zdc_railway_g_bMouseDown=true;Zdc_railway_g_iMoveX=e.clientX;Zdc_railway_g_iMoveY=e.clientY;}}function Zdc_railway_e_mapMouseUp(e){var i,j,tmp;Zdc_railway_g_bMouseDown=false;e=(e)?e:((event)?event:null);i=parseInt(Zdc_railway_g_oMapKoma.style.left)-e.clientX+parseInt(Zdc_railway_g_iMapW/2);j=parseInt(Zdc_railway_g_oMapKoma.style.top)-e.clientY+parseInt(Zdc_railway_g_iMapH/2);if(Zdc_railway_g_bMoved){Zdc_railway_g_iMoveX=0;Zdc_railway_g_iMoveY=0;}else{}Zdc_railway_g_bMouseDown=false;}function Zdc_railway_e_mapMouseOut(e){e=(e)?e:((event)?event:null);if(e.clientX<0||e.clientX>Zdc_railway_g_iMapW-1||e.clientY<0||e.clientY>Zdc_railway_g_iMapH-1){Zdc_railway_g_bMouseDown=false;}}function Zdc_railway_e_mapMouseDblclick(e){var i,j,tmp;Zdc_railway_g_bMouseDown=false;e=(e)?e:((event)?event:null);var _4c=elem_pos(Zdc_railway_g_oMap.id,"x",parseInt(getDynamicStyle(Zdc_railway_g_oMap.id,"left")));var _4d=elem_pos(Zdc_railway_g_oMap.id,"y",parseInt(getDynamicStyle(Zdc_railway_g_oMap.id,"top")));var eX=0;var eY=0;if(e.pageX){eX=e.pageX;eY=e.pageY;}else{if(getDynamicStyle(Zdc_railway_g_oMap.id,"position")=="absolute"){eX=document.body.scrollLeft+e.clientX;eY=document.body.scrollTop+e.clientY;}else{eX=_4c+e.x;eY=_4d+e.y;}}
var i=parseInt(Zdc_railway_g_oMapKoma.style.left)-eX+_4c+parseInt(Zdc_railway_g_iMapW/2);var j=parseInt(Zdc_railway_g_oMapKoma.style.top)-eY+_4d+parseInt(Zdc_railway_g_iMapH/2);Zdc_railway_g_iMoveToX=i;Zdc_railway_g_iMoveToY=j;Zdc_railway_f_SlideStart();}function Zdc_railway_e_mapMouseMove(e){var i,j,tmp;e=(e)?e:((event)?event:null);Zdc_railway_g_iNowX=e.clientX;Zdc_railway_g_iNowY=e.clientY;if(!Zdc_railway_g_bMouseDown){return;}Zdc_railway_g_bMoved=true;Zdc_railway_g_bMovedCnt++;i=parseInt(Zdc_railway_g_oMapKoma.style.left)-Zdc_railway_g_iMoveX+Zdc_railway_g_iNowX;j=parseInt(Zdc_railway_g_oMapKoma.style.top)-Zdc_railway_g_iMoveY+Zdc_railway_g_iNowY;if(i>0){i=0;}if(j>0){j=0;}if(i<Zdc_railway_g_iAllW*-1){i=Zdc_railway_g_iAllW*-1;}if(j<Zdc_railway_g_iAllH*-1){j=Zdc_railway_g_iAllH*-1;}Zdc_railway_g_oMapKoma.style.left=i+"px";Zdc_railway_g_oMapKoma.style.top=j+"px";Zdc_railway_f_Scroll();Zdc_railway_g_iMoveX=e.clientX;Zdc_railway_g_iMoveY=e.clientY;if(Zdc_railwayL_g_oMap){Zdc_railwayL_f_MoveCur(i,j);}return false;}function Zdc_railway_send(_54,lat,lon){if(Zdc_railway_g_bMovedCnt>10){return;}
var res=new ZdcSearchRailwayMapResult();res.options=Zdc_railway_opts;res.status=0;res.items[0]=new ZdcSearchRailwayMapItem();res.items[0].stationName=_54;res.items[0].lat=lat;res.items[0].lon=lon;if(Zdc_railway_opts.pointFlg==0){res.items[0].point=new ZdcPoint(res.items[0].lon,res.items[0].lat,2);res.items[0].lat="";res.items[0].lon="";}Zdc_railway_result=res;Zdc_railway_opts.callback(res);}var Zdc_railwayL_D_iMapW=0;var Zdc_railwayL_D_iMapH=0;var Zdc_railwayL_D_iCurW=0;var Zdc_railwayL_D_iCurH=0;var Zdc_railwayL_D_iCurB=3;var Zdc_railwayL_D_iAllW=0;var Zdc_railwayL_D_iAllH=0;var Zdc_railwayL_g_bro=0;var Zdc_railwayL_g_oMap=null;var Zdc_railwayL_g_oMapKoma=null;function Zdc_railwayL_f_mapInit(c,x,y,w,h,aw,ah,kw,kh){g_bro=(window.opera?4:(document.all?3:(document.getElementById?1:(document.layers?2:0))));Zdc_railwayL_D_iAllW=aw;Zdc_railwayL_D_iAllH=ah;Zdc_railwayL_D_iMapW=kw;Zdc_railwayL_D_iMapH=kh;Zdc_railwayL_D_iCurW=parseInt(Zdc_railwayL_D_iMapW*w/(Zdc_railwayL_D_iAllW+w));Zdc_railwayL_D_iCurH=parseInt(Zdc_railwayL_D_iMapH*h/(Zdc_railwayL_D_iAllH+h));Zdc_railwayL_g_oMap=c;Zdc_railwayL_g_oMap.style.width=kw+"px";Zdc_railwayL_g_oMap.style.height=kh+"px";Zdc_railwayL_g_oMap.style.zIndex="20510";Zdc_railwayL_g_oMap.onclick=Zdc_railwayL_e_mapMouseDblclick;Zdc_railwayL_g_oMap.innerHTML="<img src=\""+Zdc_railway_D_PATH+"/img/semap-0"+Zdc_railway_opts.mapNo+"-l.gif\" width=\""+kw+"\" height=\""+kh+"\" border=\"0\">";Zdc_railwayL_g_oMapKoma=document.createElement("span");Zdc_railwayL_g_oMapKoma.id="MapKoma";Zdc_railwayL_g_oMapKoma.style.position="absolute";Zdc_railwayL_g_oMapKoma.style.FontSize="1px";Zdc_railwayL_g_oMapKoma.style.border=Zdc_railwayL_D_iCurB+"px solid #ff0000";Zdc_railwayL_g_oMapKoma.innerHTML="<img src=\""+Zdc_railway_D_PATH+"/img/d.gif\" width=\"1\" height=\"1\">";Zdc_railwayL_g_oMapKoma.style.left="0px";Zdc_railwayL_g_oMapKoma.style.top="0px";if(g_bro==1){Zdc_railwayL_g_oMapKoma.style.width=(Zdc_railwayL_D_iCurW-Zdc_railwayL_D_iCurB*2)+"px";Zdc_railwayL_g_oMapKoma.style.height=(Zdc_railwayL_D_iCurH-Zdc_railwayL_D_iCurB*2)+"px";}else{Zdc_railwayL_g_oMapKoma.style.width=Zdc_railwayL_D_iCurW+"px";Zdc_railwayL_g_oMapKoma.style.height=Zdc_railwayL_D_iCurH+"px";}Zdc_railwayL_g_oMapKoma.style.zIndex="1";Zdc_railwayL_g_oMap.appendChild(Zdc_railwayL_g_oMapKoma);Zdc_railwayL_f_MoveCur(x,y);}function Zdc_railwayL_f_MoveCur(x,y){if(!Zdc_railwayL_g_oMap){return;}var i,j,mx,my;i=parseInt((Zdc_railwayL_D_iMapW-Zdc_railwayL_D_iCurW)*-1*(x/Zdc_railwayL_D_iAllW));j=parseInt((Zdc_railwayL_D_iMapH-Zdc_railwayL_D_iCurH)*-1*(y/Zdc_railwayL_D_iAllH));Zdc_railwayL_g_oMapKoma.style.left=i+"px";Zdc_railwayL_g_oMapKoma.style.top=j+"px";}function Zdc_railwayL_e_mapMouseDblclick(e){if(Zdc_railway_g_bMoving){return;}var x,y,mx,my,lx,ly;g_bMouseDown=false;e=(e)?e:((event)?event:null);var _6e=elem_pos(Zdc_railwayL_g_oMap.id,"x",parseInt(getDynamicStyle(Zdc_railwayL_g_oMap.id,"left")));var _6f=elem_pos(Zdc_railwayL_g_oMap.id,"y",parseInt(getDynamicStyle(Zdc_railwayL_g_oMap.id,"top")));var eX=0;var eY=0;if(e.pageX){eX=e.pageX;eY=e.pageY;}else{if(getDynamicStyle(Zdc_railwayL_g_oMap.id,"position")=="absolute"){eX=document.body.scrollLeft+e.clientX;eY=document.body.scrollTop+e.clientY;}else{eX=_6e+e.x;eY=_6f+e.y;}}x=eX-_6e;y=eY-_6f;lx=parseInt(Zdc_railwayL_D_iCurW/2);mx=Zdc_railwayL_D_iMapW-parseInt(Zdc_railwayL_D_iCurW/2)-1;ly=parseInt(Zdc_railwayL_D_iCurH/2);my=Zdc_railwayL_D_iMapH-parseInt(Zdc_railwayL_D_iCurH/2)-1;if(x<lx){x=lx;}if(x>mx){x=mx;}if(y<ly){y=ly;}if(y>my){y=my;}mx=Zdc_railwayL_D_iAllW*-1*((x-parseInt(Zdc_railwayL_D_iCurW/2))/(Zdc_railwayL_D_iMapW-Zdc_railwayL_D_iCurW));my=Zdc_railwayL_D_iAllH*-1*((y-parseInt(Zdc_railwayL_D_iCurH/2))/(Zdc_railwayL_D_iMapH-Zdc_railwayL_D_iCurH));Zdc_railwayL_f_MoveCur(mx,my);Zdc_railway_f_Move(mx,my);}var err_msg = "";var Zdc_smap_D_iMapW=new Array();var Zdc_smap_D_iMapH=new Array();
Zdc_smap_D_iMapW["01a"]=470;Zdc_smap_D_iMapW["01b"]=460;Zdc_smap_D_iMapW["02"]=525;Zdc_smap_D_iMapW["03"]=413;Zdc_smap_D_iMapW["04"]=507;Zdc_smap_D_iMapW["05"]=391;Zdc_smap_D_iMapW["06"]=389;Zdc_smap_D_iMapW["07"]=525;Zdc_smap_D_iMapW["08"]=467;Zdc_smap_D_iMapW["09"]=485;Zdc_smap_D_iMapW["10"]=525;Zdc_smap_D_iMapW["11"]=525;Zdc_smap_D_iMapW["12"]=449;Zdc_smap_D_iMapW["13"]=525;Zdc_smap_D_iMapW["14"]=525;Zdc_smap_D_iMapW["15"]=525;Zdc_smap_D_iMapW["16"]=525;Zdc_smap_D_iMapW["17"]=371;Zdc_smap_D_iMapW["18"]=525;Zdc_smap_D_iMapW["19"]=525;Zdc_smap_D_iMapW["20"]=378;Zdc_smap_D_iMapW["21"]=497;Zdc_smap_D_iMapW["22"]=525;Zdc_smap_D_iMapW["23"]=525;Zdc_smap_D_iMapW["24"]=347;Zdc_smap_D_iMapW["25"]=371;Zdc_smap_D_iMapW["26"]=525;Zdc_smap_D_iMapW["27"]=416;Zdc_smap_D_iMapW["28"]=390;Zdc_smap_D_iMapW["29"]=367;Zdc_smap_D_iMapW["30"]=510;Zdc_smap_D_iMapW["31"]=525;Zdc_smap_D_iMapW["32"]=525;Zdc_smap_D_iMapW["33"]=525;Zdc_smap_D_iMapW["34"]=525;Zdc_smap_D_iMapW["35"]=525;Zdc_smap_D_iMapW["36"]=525;Zdc_smap_D_iMapW["37"]=525;Zdc_smap_D_iMapW["38"]=525;Zdc_smap_D_iMapW["39"]=525;Zdc_smap_D_iMapW["40"]=525;Zdc_smap_D_iMapW["41"]=525;Zdc_smap_D_iMapW["42"]=525;Zdc_smap_D_iMapW["43"]=525;Zdc_smap_D_iMapW["44"]=525;Zdc_smap_D_iMapW["45"]=393;Zdc_smap_D_iMapW["46"]=525;Zdc_smap_D_iMapW["47"]=525;Zdc_smap_D_iMapH["01a"]=696;Zdc_smap_D_iMapH["01b"]=497;Zdc_smap_D_iMapH["02"]=478;Zdc_smap_D_iMapH["03"]=587;Zdc_smap_D_iMapH["04"]=549;Zdc_smap_D_iMapH["05"]=595;Zdc_smap_D_iMapH["06"]=595;Zdc_smap_D_iMapH["07"]=418;Zdc_smap_D_iMapH["08"]=595;Zdc_smap_D_iMapH["09"]=595;Zdc_smap_D_iMapH["10"]=548;Zdc_smap_D_iMapH["11"]=370;Zdc_smap_D_iMapH["12"]=595;Zdc_smap_D_iMapH["13"]=477;Zdc_smap_D_iMapH["14"]=423;Zdc_smap_D_iMapH["15"]=526;Zdc_smap_D_iMapH["16"]=469;Zdc_smap_D_iMapH["17"]=595;Zdc_smap_D_iMapH["18"]=452;Zdc_smap_D_iMapH["19"]=552;Zdc_smap_D_iMapH["20"]=595;Zdc_smap_D_iMapH["21"]=595;Zdc_smap_D_iMapH["22"]=417;Zdc_smap_D_iMapH["23"]=498;Zdc_smap_D_iMapH["24"]=595;Zdc_smap_D_iMapH["25"]=595;Zdc_smap_D_iMapH["26"]=573;Zdc_smap_D_iMapH["27"]=594;Zdc_smap_D_iMapH["28"]=595;Zdc_smap_D_iMapH["29"]=595;Zdc_smap_D_iMapH["30"]=595;Zdc_smap_D_iMapH["31"]=274;Zdc_smap_D_iMapH["32"]=504;Zdc_smap_D_iMapH["33"]=595;Zdc_smap_D_iMapH["34"]=496;Zdc_smap_D_iMapH["35"]=404;Zdc_smap_D_iMapH["36"]=424;Zdc_smap_D_iMapH["37"]=419;Zdc_smap_D_iMapH["38"]=559;Zdc_smap_D_iMapH["39"]=441;Zdc_smap_D_iMapH["40"]=568;Zdc_smap_D_iMapH["41"]=543;Zdc_smap_D_iMapH["42"]=528;Zdc_smap_D_iMapH["43"]=529;Zdc_smap_D_iMapH["44"]=529;Zdc_smap_D_iMapH["45"]=595;Zdc_smap_D_iMapH["46"]=595;Zdc_smap_D_iMapH["47"]=595;
var Zdc_smap_opts;var Zdc_smap_result=null;var Zdc_smap_contents=null;
function ZdcSearchMap(){}ZdcSearchMap.prototype.addMap=function(_1,_2){this.removeMap();Zdc_smap_opts=_2;Zdc_smap_contents=_1;if(!Zdc_smap_opts.todCode){ZdcSearchMapError(1);return;}if(!Zdc_smap_D_iMapW[Zdc_smap_opts.todCode]){ZdcSearchMapError(1);return;}if(!Zdc_smap_opts.pointFlg){Zdc_smap_opts.pointFlg="0";}if(Zdc_smap_opts.pointFlg!="0"&&Zdc_smap_opts.pointFlg!="1"&&Zdc_smap_opts.pointFlg!="2"&&Zdc_smap_opts.pointFlg!="3"){ZdcSearchMapError(1);return;}var _3=ZDC_EVENT_LOG_CGI+"?key="+ZDC_KEY+"&event=ZdcSearchMap_addMap"+"_todCode"+_2.todCode+"&opt="+ZDC_OPT;var _4=new ZdcHttpRequest(ZDC_ENC,ZDC_ENC);_4.request(_3,function(_5,_6){if(_5.charAt(3)!="0"){alert("Session Time Out");return;}Zdc_smap_f_mapInit(Zdc_smap_contents,Zdc_smap_D_iMapW[Zdc_smap_opts.todCode],Zdc_smap_D_iMapH[Zdc_smap_opts.todCode],Zdc_smap_opts.todCode);},10000);};ZdcSearchMap.prototype.removeMap=function(){if(!Zdc_smap_g_oMap){return;}if(Zdc_smap_g_oMapKoma){Zdc_smap_g_oMap.removeChild(Zdc_smap_g_oMapKoma);delete Zdc_smap_g_oMapKoma;}if(Zdc_smap_g_oAjax){Zdc_smap_g_oMap.removeChild(Zdc_smap_g_oAjax);delete Zdc_smap_g_oAjax;}Zdc_smap_g_oMap=null;};ZdcSearchMap.prototype.getResult=function(){return Zdc_smap_result;};ZdcSearchMap.prototype.getMapSize=function(_7){var _8=new Object();_8.width=Zdc_smap_D_iMapW[_7];_8.height=Zdc_smap_D_iMapH[_7];return _8;};function ZdcSearchMapError(st){var _a=new ZdcSearchMapResult();_a.status=st;_a.recCount=0;_a.hitCount=0;Zdc_smap_result=_a;Zdc_smap_opts.callback(_a);Zdc_smap_opts=null;}function ZdcSearchMapOptions(){this.todCode="";this.pointFlg=0;this.callback="";}function ZdcSearchMapResult(){this.type="ZdcSearchMap";this.options=null;this.status=0;this.recCount=1;this.hitCount=1;this.rest=false;this.items=new Array();}function ZdcSearchMapItem(){this.todCode="";this.shkCode="";this.point=null;this.lat=0;this.lon=0;}var Zdc_smap_g_oMap=null;var Zdc_smap_g_oMapKoma=null;var Zdc_smap_g_oAjax=null;var Zdc_smap_g_bro=0;var Zdc_smap_g_iMapW=0;var Zdc_smap_g_iMapH=0;function Zdc_smap_f_mapInit(c,w,h,_e){var i,j,k,tmp;Zdc_smap_g_bro=(window.opera?4:(document.all?3:(document.getElementById?1:(document.layers?2:0))));Zdc_smap_g_iMapW=w;Zdc_smap_g_iMapH=h;Zdc_smap_g_oMap=c;Zdc_smap_g_oMap.style.width=Zdc_smap_g_iMapW+"px";Zdc_smap_g_oMap.style.height=Zdc_smap_g_iMapH+"px";Zdc_smap_g_oMap.style.zIndex="20400";Zdc_smap_g_oMapKoma=document.createElement("div");Zdc_smap_g_oMapKoma.id="MapKoma";Zdc_smap_g_oMapKoma.style.position="relative";Zdc_smap_g_oMapKoma.style.left="0px";Zdc_smap_g_oMapKoma.style.top="0px";Zdc_smap_g_oMapKoma.style.width=Zdc_smap_g_iMapW+"px";Zdc_smap_g_oMapKoma.style.height=Zdc_smap_g_iMapH+"px";Zdc_smap_g_oMapKoma.style.zIndex="1";Zdc_smap_g_oMapKoma.innerHTML="<img src=\""+Zdc_smap_D_PATH+"/img/sjmap-space.gif"+"\" width="+Zdc_smap_g_iMapW+" height="+Zdc_smap_g_iMapH+">";Zdc_smap_g_oMap.appendChild(Zdc_smap_g_oMapKoma);var _13=(Zdc_smap_opts.pointFlg==0)?2:Zdc_smap_opts.pointFlg;var url=Zdc_smap_D_PATH+"/searchmap.gethtml.htm?a="+_e+"&domain="+ZdcHttpRequest.getProxyDomain();url=url+"&pflg="+_13;url=url+"&datum="+ZDC_DATUM;url=url+"&enc="+ZDC_ENC_STR[ZDC_ENC];Zdc_smap_g_oAjax=document.createElement("script");Zdc_smap_g_oAjax.id="ajax_map";Zdc_smap_g_oAjax.src=url;Zdc_smap_g_oAjax.charset=ZDC_CHARSET_STR[ZDC_ENC];Zdc_smap_g_oMap.appendChild(Zdc_smap_g_oAjax);return true;}function Zdc_smap_send(tod,shk,lat,lon){var res=new ZdcSearchMapResult();res.options=Zdc_smap_opts;res.status=0;res.items[0]=new ZdcSearchMapItem();res.items[0].todCode=tod;res.items[0].shkCode=shk;res.items[0].lat=lat;res.items[0].lon=lon;if(Zdc_smap_opts.pointFlg==0){res.items[0].point=new ZdcPoint(res.items[0].lon,res.items[0].lat,2);res.items[0].lat="";res.items[0].lon="";}Zdc_smap_result=res;Zdc_smap_opts.callback(res);}function Zdc_smap_f_setHTML(_1a){Zdc_smap_g_oMapKoma.innerHTML=_1a;}var ZDC_RC = "00000";var err_msg = "";
